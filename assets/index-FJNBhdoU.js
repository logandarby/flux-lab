var qx=Object.defineProperty;var $x=(s,e,t)=>e in s?qx(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var j=(s,e,t)=>$x(s,typeof e!="symbol"?e+"":e,t);function Hx(s,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in s)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(s,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function iy(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Gd={exports:{}},Lo={},Wd={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg;function Yx(){if(Gg)return Fe;Gg=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function y(A){return A===null||typeof A!="object"?null:(A=g&&A[g]||A["@@iterator"],typeof A=="function"?A:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function b(A,$,le){this.props=A,this.context=$,this.refs=_,this.updater=le||x}b.prototype.isReactComponent={},b.prototype.setState=function(A,$){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,$,"setState")},b.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function T(){}T.prototype=b.prototype;function M(A,$,le){this.props=A,this.context=$,this.refs=_,this.updater=le||x}var L=M.prototype=new T;L.constructor=M,w(L,b.prototype),L.isPureReactComponent=!0;var V=Array.isArray,E=Object.prototype.hasOwnProperty,P={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function C(A,$,le){var ne,re={},ue=null,de=null;if($!=null)for(ne in $.ref!==void 0&&(de=$.ref),$.key!==void 0&&(ue=""+$.key),$)E.call($,ne)&&!R.hasOwnProperty(ne)&&(re[ne]=$[ne]);var Q=arguments.length-2;if(Q===1)re.children=le;else if(1<Q){for(var pe=Array(Q),Te=0;Te<Q;Te++)pe[Te]=arguments[Te+2];re.children=pe}if(A&&A.defaultProps)for(ne in Q=A.defaultProps,Q)re[ne]===void 0&&(re[ne]=Q[ne]);return{$$typeof:s,type:A,key:ue,ref:de,props:re,_owner:P.current}}function O(A,$){return{$$typeof:s,type:A.type,key:$,ref:A.ref,props:A.props,_owner:A._owner}}function U(A){return typeof A=="object"&&A!==null&&A.$$typeof===s}function W(A){var $={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(le){return $[le]})}var B=/\/+/g;function H(A,$){return typeof A=="object"&&A!==null&&A.key!=null?W(""+A.key):$.toString(36)}function ee(A,$,le,ne,re){var ue=typeof A;(ue==="undefined"||ue==="boolean")&&(A=null);var de=!1;if(A===null)de=!0;else switch(ue){case"string":case"number":de=!0;break;case"object":switch(A.$$typeof){case s:case e:de=!0}}if(de)return de=A,re=re(de),A=ne===""?"."+H(de,0):ne,V(re)?(le="",A!=null&&(le=A.replace(B,"$&/")+"/"),ee(re,$,le,"",function(Te){return Te})):re!=null&&(U(re)&&(re=O(re,le+(!re.key||de&&de.key===re.key?"":(""+re.key).replace(B,"$&/")+"/")+A)),$.push(re)),1;if(de=0,ne=ne===""?".":ne+":",V(A))for(var Q=0;Q<A.length;Q++){ue=A[Q];var pe=ne+H(ue,Q);de+=ee(ue,$,le,pe,re)}else if(pe=y(A),typeof pe=="function")for(A=pe.call(A),Q=0;!(ue=A.next()).done;)ue=ue.value,pe=ne+H(ue,Q++),de+=ee(ue,$,le,pe,re);else if(ue==="object")throw $=String(A),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return de}function te(A,$,le){if(A==null)return A;var ne=[],re=0;return ee(A,ne,"","",function(ue){return $.call(le,ue,re++)}),ne}function X(A){if(A._status===-1){var $=A._result;$=$(),$.then(function(le){(A._status===0||A._status===-1)&&(A._status=1,A._result=le)},function(le){(A._status===0||A._status===-1)&&(A._status=2,A._result=le)}),A._status===-1&&(A._status=0,A._result=$)}if(A._status===1)return A._result.default;throw A._result}var J={current:null},z={transition:null},Z={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:z,ReactCurrentOwner:P};function K(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:te,forEach:function(A,$,le){te(A,function(){$.apply(this,arguments)},le)},count:function(A){var $=0;return te(A,function(){$++}),$},toArray:function(A){return te(A,function($){return $})||[]},only:function(A){if(!U(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Fe.Component=b,Fe.Fragment=t,Fe.Profiler=o,Fe.PureComponent=M,Fe.StrictMode=r,Fe.Suspense=h,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,Fe.act=K,Fe.cloneElement=function(A,$,le){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var ne=w({},A.props),re=A.key,ue=A.ref,de=A._owner;if($!=null){if($.ref!==void 0&&(ue=$.ref,de=P.current),$.key!==void 0&&(re=""+$.key),A.type&&A.type.defaultProps)var Q=A.type.defaultProps;for(pe in $)E.call($,pe)&&!R.hasOwnProperty(pe)&&(ne[pe]=$[pe]===void 0&&Q!==void 0?Q[pe]:$[pe])}var pe=arguments.length-2;if(pe===1)ne.children=le;else if(1<pe){Q=Array(pe);for(var Te=0;Te<pe;Te++)Q[Te]=arguments[Te+2];ne.children=Q}return{$$typeof:s,type:A.type,key:re,ref:ue,props:ne,_owner:de}},Fe.createContext=function(A){return A={$$typeof:u,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:a,_context:A},A.Consumer=A},Fe.createElement=C,Fe.createFactory=function(A){var $=C.bind(null,A);return $.type=A,$},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(A){return{$$typeof:c,render:A}},Fe.isValidElement=U,Fe.lazy=function(A){return{$$typeof:m,_payload:{_status:-1,_result:A},_init:X}},Fe.memo=function(A,$){return{$$typeof:f,type:A,compare:$===void 0?null:$}},Fe.startTransition=function(A){var $=z.transition;z.transition={};try{A()}finally{z.transition=$}},Fe.unstable_act=K,Fe.useCallback=function(A,$){return J.current.useCallback(A,$)},Fe.useContext=function(A){return J.current.useContext(A)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(A){return J.current.useDeferredValue(A)},Fe.useEffect=function(A,$){return J.current.useEffect(A,$)},Fe.useId=function(){return J.current.useId()},Fe.useImperativeHandle=function(A,$,le){return J.current.useImperativeHandle(A,$,le)},Fe.useInsertionEffect=function(A,$){return J.current.useInsertionEffect(A,$)},Fe.useLayoutEffect=function(A,$){return J.current.useLayoutEffect(A,$)},Fe.useMemo=function(A,$){return J.current.useMemo(A,$)},Fe.useReducer=function(A,$,le){return J.current.useReducer(A,$,le)},Fe.useRef=function(A){return J.current.useRef(A)},Fe.useState=function(A){return J.current.useState(A)},Fe.useSyncExternalStore=function(A,$,le){return J.current.useSyncExternalStore(A,$,le)},Fe.useTransition=function(){return J.current.useTransition()},Fe.version="18.3.1",Fe}var Wg;function na(){return Wg||(Wg=1,Wd.exports=Yx()),Wd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qg;function Kx(){if(qg)return Lo;qg=1;var s=na(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(c,h,f){var m,g={},y=null,x=null;f!==void 0&&(y=""+f),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(x=h.ref);for(m in h)r.call(h,m)&&!a.hasOwnProperty(m)&&(g[m]=h[m]);if(c&&c.defaultProps)for(m in h=c.defaultProps,h)g[m]===void 0&&(g[m]=h[m]);return{$$typeof:e,type:c,key:y,ref:x,props:g,_owner:o.current}}return Lo.Fragment=t,Lo.jsx=u,Lo.jsxs=u,Lo}var $g;function Xx(){return $g||($g=1,Gd.exports=Kx()),Gd.exports}var I=Xx(),k=na();const ra=iy(k),oy=Hx({__proto__:null,default:ra},[k]);var kl={},qd={exports:{}},$t={},$d={exports:{}},Hd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg;function Zx(){return Hg||(Hg=1,function(s){function e(z,Z){var K=z.length;z.push(Z);e:for(;0<K;){var A=K-1>>>1,$=z[A];if(0<o($,Z))z[A]=Z,z[K]=$,K=A;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Z=z[0],K=z.pop();if(K!==Z){z[0]=K;e:for(var A=0,$=z.length,le=$>>>1;A<le;){var ne=2*(A+1)-1,re=z[ne],ue=ne+1,de=z[ue];if(0>o(re,K))ue<$&&0>o(de,re)?(z[A]=de,z[ue]=K,A=ue):(z[A]=re,z[ne]=K,A=ne);else if(ue<$&&0>o(de,K))z[A]=de,z[ue]=K,A=ue;else break e}}return Z}function o(z,Z){var K=z.sortIndex-Z.sortIndex;return K!==0?K:z.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;s.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();s.unstable_now=function(){return u.now()-c}}var h=[],f=[],m=1,g=null,y=3,x=!1,w=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(z){for(var Z=t(f);Z!==null;){if(Z.callback===null)r(f);else if(Z.startTime<=z)r(f),Z.sortIndex=Z.expirationTime,e(h,Z);else break;Z=t(f)}}function V(z){if(_=!1,L(z),!w)if(t(h)!==null)w=!0,X(E);else{var Z=t(f);Z!==null&&J(V,Z.startTime-z)}}function E(z,Z){w=!1,_&&(_=!1,T(C),C=-1),x=!0;var K=y;try{for(L(Z),g=t(h);g!==null&&(!(g.expirationTime>Z)||z&&!W());){var A=g.callback;if(typeof A=="function"){g.callback=null,y=g.priorityLevel;var $=A(g.expirationTime<=Z);Z=s.unstable_now(),typeof $=="function"?g.callback=$:g===t(h)&&r(h),L(Z)}else r(h);g=t(h)}if(g!==null)var le=!0;else{var ne=t(f);ne!==null&&J(V,ne.startTime-Z),le=!1}return le}finally{g=null,y=K,x=!1}}var P=!1,R=null,C=-1,O=5,U=-1;function W(){return!(s.unstable_now()-U<O)}function B(){if(R!==null){var z=s.unstable_now();U=z;var Z=!0;try{Z=R(!0,z)}finally{Z?H():(P=!1,R=null)}}else P=!1}var H;if(typeof M=="function")H=function(){M(B)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,te=ee.port2;ee.port1.onmessage=B,H=function(){te.postMessage(null)}}else H=function(){b(B,0)};function X(z){R=z,P||(P=!0,H())}function J(z,Z){C=b(function(){z(s.unstable_now())},Z)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(z){z.callback=null},s.unstable_continueExecution=function(){w||x||(w=!0,X(E))},s.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<z?Math.floor(1e3/z):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_getFirstCallbackNode=function(){return t(h)},s.unstable_next=function(z){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var K=y;y=Z;try{return z()}finally{y=K}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(z,Z){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var K=y;y=z;try{return Z()}finally{y=K}},s.unstable_scheduleCallback=function(z,Z,K){var A=s.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?A+K:A):K=A,z){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=K+$,z={id:m++,callback:Z,priorityLevel:z,startTime:K,expirationTime:$,sortIndex:-1},K>A?(z.sortIndex=K,e(f,z),t(h)===null&&z===t(f)&&(_?(T(C),C=-1):_=!0,J(V,K-A))):(z.sortIndex=$,e(h,z),w||x||(w=!0,X(E))),z},s.unstable_shouldYield=W,s.unstable_wrapCallback=function(z){var Z=y;return function(){var K=y;y=Z;try{return z.apply(this,arguments)}finally{y=K}}}}(Hd)),Hd}var Yg;function Qx(){return Yg||(Yg=1,$d.exports=Zx()),$d.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function Jx(){if(Kg)return $t;Kg=1;var s=na(),e=Qx();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(n,i){u(n,i),u(n+"Capture",i)}function u(n,i){for(o[n]=i,n=0;n<i.length;n++)r.add(i[n])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function y(n){return h.call(g,n)?!0:h.call(m,n)?!1:f.test(n)?g[n]=!0:(m[n]=!0,!1)}function x(n,i,l,d){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function w(n,i,l,d){if(i===null||typeof i>"u"||x(n,i,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function _(n,i,l,d,p,v,S){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=n,this.type=i,this.sanitizeURL=v,this.removeEmptyString=S}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){b[n]=new _(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];b[i]=new _(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){b[n]=new _(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){b[n]=new _(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){b[n]=new _(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){b[n]=new _(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){b[n]=new _(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){b[n]=new _(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){b[n]=new _(n,5,!1,n.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function M(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(T,M);b[i]=new _(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(T,M);b[i]=new _(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(T,M);b[i]=new _(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){b[n]=new _(n,1,!1,n.toLowerCase(),null,!1,!1)}),b.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){b[n]=new _(n,1,!1,n.toLowerCase(),null,!0,!0)});function L(n,i,l,d){var p=b.hasOwnProperty(i)?b[i]:null;(p!==null?p.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(w(i,l,p,d)&&(l=null),d||p===null?y(i)&&(l===null?n.removeAttribute(i):n.setAttribute(i,""+l)):p.mustUseProperty?n[p.propertyName]=l===null?p.type===3?!1:"":l:(i=p.attributeName,d=p.attributeNamespace,l===null?n.removeAttribute(i):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,d?n.setAttributeNS(d,i,l):n.setAttribute(i,l))))}var V=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),P=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),W=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),z=Symbol.iterator;function Z(n){return n===null||typeof n!="object"?null:(n=z&&n[z]||n["@@iterator"],typeof n=="function"?n:null)}var K=Object.assign,A;function $(n){if(A===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);A=i&&i[1]||""}return`
`+A+n}var le=!1;function ne(n,i){if(!n||le)return"";le=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(Y){var d=Y}Reflect.construct(n,[],i)}else{try{i.call()}catch(Y){d=Y}n.call(i.prototype)}else{try{throw Error()}catch(Y){d=Y}n()}}catch(Y){if(Y&&d&&typeof Y.stack=="string"){for(var p=Y.stack.split(`
`),v=d.stack.split(`
`),S=p.length-1,N=v.length-1;1<=S&&0<=N&&p[S]!==v[N];)N--;for(;1<=S&&0<=N;S--,N--)if(p[S]!==v[N]){if(S!==1||N!==1)do if(S--,N--,0>N||p[S]!==v[N]){var D=`
`+p[S].replace(" at new "," at ");return n.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",n.displayName)),D}while(1<=S&&0<=N);break}}}finally{le=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?$(n):""}function re(n){switch(n.tag){case 5:return $(n.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return n=ne(n.type,!1),n;case 11:return n=ne(n.type.render,!1),n;case 1:return n=ne(n.type,!0),n;default:return""}}function ue(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case P:return"Portal";case O:return"Profiler";case C:return"StrictMode";case H:return"Suspense";case ee:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case W:return(n.displayName||"Context")+".Consumer";case U:return(n._context.displayName||"Context")+".Provider";case B:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case te:return i=n.displayName||null,i!==null?i:ue(n.type)||"Memo";case X:i=n._payload,n=n._init;try{return ue(n(i))}catch{}}return null}function de(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(i);case 8:return i===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Q(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function pe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Te(n){var i=pe(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),d=""+n[i];if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,v=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return p.call(this)},set:function(S){d=""+S,v.call(this,S)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(S){d=""+S},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ve(n){n._valueTracker||(n._valueTracker=Te(n))}function ze(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),d="";return n&&(d=pe(n)?n.checked?"true":"false":n.value),n=d,n!==l?(i.setValue(n),!0):!1}function It(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function we(n,i){var l=i.checked;return K({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function se(n,i){var l=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;l=Q(i.value!=null?i.value:l),n._wrapperState={initialChecked:d,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function he(n,i){i=i.checked,i!=null&&L(n,"checked",i,!1)}function Me(n,i){he(n,i);var l=Q(i.value),d=i.type;if(l!=null)d==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Ce(n,i.type,l):i.hasOwnProperty("defaultValue")&&Ce(n,i.type,Q(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Le(n,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,l||i===n.value||(n.value=i),n.defaultValue=i}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function Ce(n,i,l){(i!=="number"||It(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var Re=Array.isArray;function Pe(n,i,l,d){if(n=n.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<n.length;l++)p=i.hasOwnProperty("$"+n[l].value),n[l].selected!==p&&(n[l].selected=p),p&&d&&(n[l].defaultSelected=!0)}else{for(l=""+Q(l),i=null,p=0;p<n.length;p++){if(n[p].value===l){n[p].selected=!0,d&&(n[p].defaultSelected=!0);return}i!==null||n[p].disabled||(i=n[p])}i!==null&&(i.selected=!0)}}function Oe(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return K({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function bt(n,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(Re(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}n._wrapperState={initialValue:Q(l)}}function on(n,i){var l=Q(i.value),d=Q(i.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),i.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),d!=null&&(n.defaultValue=""+d)}function tr(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Ds(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ec(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Ds(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ya,rp=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,d,p){MSApp.execUnsafeLocalFunction(function(){return n(i,l,d,p)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(ya=ya||document.createElement("div"),ya.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=ya.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Zi(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var Qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},K0=["Webkit","ms","Moz","O"];Object.keys(Qi).forEach(function(n){K0.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Qi[i]=Qi[n]})});function sp(n,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||Qi.hasOwnProperty(n)&&Qi[n]?(""+i).trim():i+"px"}function ip(n,i){n=n.style;for(var l in i)if(i.hasOwnProperty(l)){var d=l.indexOf("--")===0,p=sp(l,i[l],d);l==="float"&&(l="cssFloat"),d?n.setProperty(l,p):n[l]=p}}var X0=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tc(n,i){if(i){if(X0[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function nc(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rc=null;function sc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ic=null,Ls=null,Fs=null;function op(n){if(n=xo(n)){if(typeof ic!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Ua(i),ic(n.stateNode,n.type,i))}}function ap(n){Ls?Fs?Fs.push(n):Fs=[n]:Ls=n}function lp(){if(Ls){var n=Ls,i=Fs;if(Fs=Ls=null,op(n),i)for(n=0;n<i.length;n++)op(i[n])}}function up(n,i){return n(i)}function cp(){}var oc=!1;function dp(n,i,l){if(oc)return n(i,l);oc=!0;try{return up(n,i,l)}finally{oc=!1,(Ls!==null||Fs!==null)&&(cp(),lp())}}function Ji(n,i){var l=n.stateNode;if(l===null)return null;var d=Ua(l);if(d===null)return null;l=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var ac=!1;if(c)try{var eo={};Object.defineProperty(eo,"passive",{get:function(){ac=!0}}),window.addEventListener("test",eo,eo),window.removeEventListener("test",eo,eo)}catch{ac=!1}function Z0(n,i,l,d,p,v,S,N,D){var Y=Array.prototype.slice.call(arguments,3);try{i.apply(l,Y)}catch(oe){this.onError(oe)}}var to=!1,_a=null,wa=!1,lc=null,Q0={onError:function(n){to=!0,_a=n}};function J0(n,i,l,d,p,v,S,N,D){to=!1,_a=null,Z0.apply(Q0,arguments)}function ew(n,i,l,d,p,v,S,N,D){if(J0.apply(this,arguments),to){if(to){var Y=_a;to=!1,_a=null}else throw Error(t(198));wa||(wa=!0,lc=Y)}}function rs(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function hp(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function fp(n){if(rs(n)!==n)throw Error(t(188))}function tw(n){var i=n.alternate;if(!i){if(i=rs(n),i===null)throw Error(t(188));return i!==n?null:n}for(var l=n,d=i;;){var p=l.return;if(p===null)break;var v=p.alternate;if(v===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===l)return fp(p),n;if(v===d)return fp(p),i;v=v.sibling}throw Error(t(188))}if(l.return!==d.return)l=p,d=v;else{for(var S=!1,N=p.child;N;){if(N===l){S=!0,l=p,d=v;break}if(N===d){S=!0,d=p,l=v;break}N=N.sibling}if(!S){for(N=v.child;N;){if(N===l){S=!0,l=v,d=p;break}if(N===d){S=!0,d=v,l=p;break}N=N.sibling}if(!S)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?n:i}function pp(n){return n=tw(n),n!==null?mp(n):null}function mp(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=mp(n);if(i!==null)return i;n=n.sibling}return null}var gp=e.unstable_scheduleCallback,vp=e.unstable_cancelCallback,nw=e.unstable_shouldYield,rw=e.unstable_requestPaint,ut=e.unstable_now,sw=e.unstable_getCurrentPriorityLevel,uc=e.unstable_ImmediatePriority,yp=e.unstable_UserBlockingPriority,xa=e.unstable_NormalPriority,iw=e.unstable_LowPriority,_p=e.unstable_IdlePriority,Sa=null,zn=null;function ow(n){if(zn&&typeof zn.onCommitFiberRoot=="function")try{zn.onCommitFiberRoot(Sa,n,void 0,(n.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:uw,aw=Math.log,lw=Math.LN2;function uw(n){return n>>>=0,n===0?32:31-(aw(n)/lw|0)|0}var ba=64,Ta=4194304;function no(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ca(n,i){var l=n.pendingLanes;if(l===0)return 0;var d=0,p=n.suspendedLanes,v=n.pingedLanes,S=l&268435455;if(S!==0){var N=S&~p;N!==0?d=no(N):(v&=S,v!==0&&(d=no(v)))}else S=l&~p,S!==0?d=no(S):v!==0&&(d=no(v));if(d===0)return 0;if(i!==0&&i!==d&&(i&p)===0&&(p=d&-d,v=i&-i,p>=v||p===16&&(v&4194240)!==0))return i;if((d&4)!==0&&(d|=l&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=d;0<i;)l=31-wn(i),p=1<<l,d|=n[l],i&=~p;return d}function cw(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dw(n,i){for(var l=n.suspendedLanes,d=n.pingedLanes,p=n.expirationTimes,v=n.pendingLanes;0<v;){var S=31-wn(v),N=1<<S,D=p[S];D===-1?((N&l)===0||(N&d)!==0)&&(p[S]=cw(N,i)):D<=i&&(n.expiredLanes|=N),v&=~N}}function cc(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function wp(){var n=ba;return ba<<=1,(ba&4194240)===0&&(ba=64),n}function dc(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function ro(n,i,l){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-wn(i),n[i]=l}function hw(n,i){var l=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<l;){var p=31-wn(l),v=1<<p;i[p]=0,d[p]=-1,n[p]=-1,l&=~v}}function hc(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var d=31-wn(l),p=1<<d;p&i|n[d]&i&&(n[d]|=i),l&=~p}}var $e=0;function xp(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Sp,fc,bp,Tp,Cp,pc=!1,ka=[],br=null,Tr=null,Cr=null,so=new Map,io=new Map,kr=[],fw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kp(n,i){switch(n){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":so.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":io.delete(i.pointerId)}}function oo(n,i,l,d,p,v){return n===null||n.nativeEvent!==v?(n={blockedOn:i,domEventName:l,eventSystemFlags:d,nativeEvent:v,targetContainers:[p]},i!==null&&(i=xo(i),i!==null&&fc(i)),n):(n.eventSystemFlags|=d,i=n.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),n)}function pw(n,i,l,d,p){switch(i){case"focusin":return br=oo(br,n,i,l,d,p),!0;case"dragenter":return Tr=oo(Tr,n,i,l,d,p),!0;case"mouseover":return Cr=oo(Cr,n,i,l,d,p),!0;case"pointerover":var v=p.pointerId;return so.set(v,oo(so.get(v)||null,n,i,l,d,p)),!0;case"gotpointercapture":return v=p.pointerId,io.set(v,oo(io.get(v)||null,n,i,l,d,p)),!0}return!1}function Ep(n){var i=ss(n.target);if(i!==null){var l=rs(i);if(l!==null){if(i=l.tag,i===13){if(i=hp(l),i!==null){n.blockedOn=i,Cp(n.priority,function(){bp(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ea(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=gc(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var d=new l.constructor(l.type,l);rc=d,l.target.dispatchEvent(d),rc=null}else return i=xo(l),i!==null&&fc(i),n.blockedOn=l,!1;i.shift()}return!0}function Pp(n,i,l){Ea(n)&&l.delete(i)}function mw(){pc=!1,br!==null&&Ea(br)&&(br=null),Tr!==null&&Ea(Tr)&&(Tr=null),Cr!==null&&Ea(Cr)&&(Cr=null),so.forEach(Pp),io.forEach(Pp)}function ao(n,i){n.blockedOn===i&&(n.blockedOn=null,pc||(pc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,mw)))}function lo(n){function i(p){return ao(p,n)}if(0<ka.length){ao(ka[0],n);for(var l=1;l<ka.length;l++){var d=ka[l];d.blockedOn===n&&(d.blockedOn=null)}}for(br!==null&&ao(br,n),Tr!==null&&ao(Tr,n),Cr!==null&&ao(Cr,n),so.forEach(i),io.forEach(i),l=0;l<kr.length;l++)d=kr[l],d.blockedOn===n&&(d.blockedOn=null);for(;0<kr.length&&(l=kr[0],l.blockedOn===null);)Ep(l),l.blockedOn===null&&kr.shift()}var Vs=V.ReactCurrentBatchConfig,Pa=!0;function gw(n,i,l,d){var p=$e,v=Vs.transition;Vs.transition=null;try{$e=1,mc(n,i,l,d)}finally{$e=p,Vs.transition=v}}function vw(n,i,l,d){var p=$e,v=Vs.transition;Vs.transition=null;try{$e=4,mc(n,i,l,d)}finally{$e=p,Vs.transition=v}}function mc(n,i,l,d){if(Pa){var p=gc(n,i,l,d);if(p===null)Oc(n,i,d,Aa,l),kp(n,d);else if(pw(p,n,i,l,d))d.stopPropagation();else if(kp(n,d),i&4&&-1<fw.indexOf(n)){for(;p!==null;){var v=xo(p);if(v!==null&&Sp(v),v=gc(n,i,l,d),v===null&&Oc(n,i,d,Aa,l),v===p)break;p=v}p!==null&&d.stopPropagation()}else Oc(n,i,d,null,l)}}var Aa=null;function gc(n,i,l,d){if(Aa=null,n=sc(d),n=ss(n),n!==null)if(i=rs(n),i===null)n=null;else if(l=i.tag,l===13){if(n=hp(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Aa=n,null}function Ap(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sw()){case uc:return 1;case yp:return 4;case xa:case iw:return 16;case _p:return 536870912;default:return 16}default:return 16}}var Er=null,vc=null,Na=null;function Np(){if(Na)return Na;var n,i=vc,l=i.length,d,p="value"in Er?Er.value:Er.textContent,v=p.length;for(n=0;n<l&&i[n]===p[n];n++);var S=l-n;for(d=1;d<=S&&i[l-d]===p[v-d];d++);return Na=p.slice(n,1<d?1-d:void 0)}function Ra(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Ma(){return!0}function Rp(){return!1}function Xt(n){function i(l,d,p,v,S){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var N in n)n.hasOwnProperty(N)&&(l=n[N],this[N]=l?l(v):v[N]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ma:Rp,this.isPropagationStopped=Rp,this}return K(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ma)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ma)},persist:function(){},isPersistent:Ma}),i}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yc=Xt(Bs),uo=K({},Bs,{view:0,detail:0}),yw=Xt(uo),_c,wc,co,Oa=K({},uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==co&&(co&&n.type==="mousemove"?(_c=n.screenX-co.screenX,wc=n.screenY-co.screenY):wc=_c=0,co=n),_c)},movementY:function(n){return"movementY"in n?n.movementY:wc}}),Mp=Xt(Oa),_w=K({},Oa,{dataTransfer:0}),ww=Xt(_w),xw=K({},uo,{relatedTarget:0}),xc=Xt(xw),Sw=K({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),bw=Xt(Sw),Tw=K({},Bs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Cw=Xt(Tw),kw=K({},Bs,{data:0}),Op=Xt(kw),Ew={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Aw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nw(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Aw[n])?!!i[n]:!1}function Sc(){return Nw}var Rw=K({},uo,{key:function(n){if(n.key){var i=Ew[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ra(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Pw[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sc,charCode:function(n){return n.type==="keypress"?Ra(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ra(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Mw=Xt(Rw),Ow=K({},Oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ip=Xt(Ow),Iw=K({},uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sc}),Dw=Xt(Iw),Lw=K({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fw=Xt(Lw),Vw=K({},Oa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Bw=Xt(Vw),zw=[9,13,27,32],bc=c&&"CompositionEvent"in window,ho=null;c&&"documentMode"in document&&(ho=document.documentMode);var Uw=c&&"TextEvent"in window&&!ho,Dp=c&&(!bc||ho&&8<ho&&11>=ho),Lp=" ",Fp=!1;function Vp(n,i){switch(n){case"keyup":return zw.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var zs=!1;function jw(n,i){switch(n){case"compositionend":return Bp(i);case"keypress":return i.which!==32?null:(Fp=!0,Lp);case"textInput":return n=i.data,n===Lp&&Fp?null:n;default:return null}}function Gw(n,i){if(zs)return n==="compositionend"||!bc&&Vp(n,i)?(n=Np(),Na=vc=Er=null,zs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Dp&&i.locale!=="ko"?null:i.data;default:return null}}var Ww={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Ww[n.type]:i==="textarea"}function Up(n,i,l,d){ap(d),i=Va(i,"onChange"),0<i.length&&(l=new yc("onChange","change",null,l,d),n.push({event:l,listeners:i}))}var fo=null,po=null;function qw(n){im(n,0)}function Ia(n){var i=qs(n);if(ze(i))return n}function $w(n,i){if(n==="change")return i}var jp=!1;if(c){var Tc;if(c){var Cc="oninput"in document;if(!Cc){var Gp=document.createElement("div");Gp.setAttribute("oninput","return;"),Cc=typeof Gp.oninput=="function"}Tc=Cc}else Tc=!1;jp=Tc&&(!document.documentMode||9<document.documentMode)}function Wp(){fo&&(fo.detachEvent("onpropertychange",qp),po=fo=null)}function qp(n){if(n.propertyName==="value"&&Ia(po)){var i=[];Up(i,po,n,sc(n)),dp(qw,i)}}function Hw(n,i,l){n==="focusin"?(Wp(),fo=i,po=l,fo.attachEvent("onpropertychange",qp)):n==="focusout"&&Wp()}function Yw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ia(po)}function Kw(n,i){if(n==="click")return Ia(i)}function Xw(n,i){if(n==="input"||n==="change")return Ia(i)}function Zw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var xn=typeof Object.is=="function"?Object.is:Zw;function mo(n,i){if(xn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),d=Object.keys(i);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!h.call(i,p)||!xn(n[p],i[p]))return!1}return!0}function $p(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Hp(n,i){var l=$p(n);n=0;for(var d;l;){if(l.nodeType===3){if(d=n+l.textContent.length,n<=i&&d>=i)return{node:l,offset:i-n};n=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=$p(l)}}function Yp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Yp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Kp(){for(var n=window,i=It();i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=It(n.document)}return i}function kc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Qw(n){var i=Kp(),l=n.focusedElem,d=n.selectionRange;if(i!==l&&l&&l.ownerDocument&&Yp(l.ownerDocument.documentElement,l)){if(d!==null&&kc(l)){if(i=d.start,n=d.end,n===void 0&&(n=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(n,l.value.length);else if(n=(i=l.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var p=l.textContent.length,v=Math.min(d.start,p);d=d.end===void 0?v:Math.min(d.end,p),!n.extend&&v>d&&(p=d,d=v,v=p),p=Hp(l,v);var S=Hp(l,d);p&&S&&(n.rangeCount!==1||n.anchorNode!==p.node||n.anchorOffset!==p.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),n.removeAllRanges(),v>d?(n.addRange(i),n.extend(S.node,S.offset)):(i.setEnd(S.node,S.offset),n.addRange(i)))}}for(i=[],n=l;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)n=i[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Jw=c&&"documentMode"in document&&11>=document.documentMode,Us=null,Ec=null,go=null,Pc=!1;function Xp(n,i,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Pc||Us==null||Us!==It(d)||(d=Us,"selectionStart"in d&&kc(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),go&&mo(go,d)||(go=d,d=Va(Ec,"onSelect"),0<d.length&&(i=new yc("onSelect","select",null,i,l),n.push({event:i,listeners:d}),i.target=Us)))}function Da(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var js={animationend:Da("Animation","AnimationEnd"),animationiteration:Da("Animation","AnimationIteration"),animationstart:Da("Animation","AnimationStart"),transitionend:Da("Transition","TransitionEnd")},Ac={},Zp={};c&&(Zp=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function La(n){if(Ac[n])return Ac[n];if(!js[n])return n;var i=js[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in Zp)return Ac[n]=i[l];return n}var Qp=La("animationend"),Jp=La("animationiteration"),em=La("animationstart"),tm=La("transitionend"),nm=new Map,rm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(n,i){nm.set(n,i),a(i,[n])}for(var Nc=0;Nc<rm.length;Nc++){var Rc=rm[Nc],ex=Rc.toLowerCase(),tx=Rc[0].toUpperCase()+Rc.slice(1);Pr(ex,"on"+tx)}Pr(Qp,"onAnimationEnd"),Pr(Jp,"onAnimationIteration"),Pr(em,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(tm,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nx=new Set("cancel close invalid load scroll toggle".split(" ").concat(vo));function sm(n,i,l){var d=n.type||"unknown-event";n.currentTarget=l,ew(d,i,void 0,n),n.currentTarget=null}function im(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var d=n[l],p=d.event;d=d.listeners;e:{var v=void 0;if(i)for(var S=d.length-1;0<=S;S--){var N=d[S],D=N.instance,Y=N.currentTarget;if(N=N.listener,D!==v&&p.isPropagationStopped())break e;sm(p,N,Y),v=D}else for(S=0;S<d.length;S++){if(N=d[S],D=N.instance,Y=N.currentTarget,N=N.listener,D!==v&&p.isPropagationStopped())break e;sm(p,N,Y),v=D}}}if(wa)throw n=lc,wa=!1,lc=null,n}function Je(n,i){var l=i[Bc];l===void 0&&(l=i[Bc]=new Set);var d=n+"__bubble";l.has(d)||(om(i,n,2,!1),l.add(d))}function Mc(n,i,l){var d=0;i&&(d|=4),om(l,n,d,i)}var Fa="_reactListening"+Math.random().toString(36).slice(2);function yo(n){if(!n[Fa]){n[Fa]=!0,r.forEach(function(l){l!=="selectionchange"&&(nx.has(l)||Mc(l,!1,n),Mc(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Fa]||(i[Fa]=!0,Mc("selectionchange",!1,i))}}function om(n,i,l,d){switch(Ap(i)){case 1:var p=gw;break;case 4:p=vw;break;default:p=mc}l=p.bind(null,i,l,n),p=void 0,!ac||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),d?p!==void 0?n.addEventListener(i,l,{capture:!0,passive:p}):n.addEventListener(i,l,!0):p!==void 0?n.addEventListener(i,l,{passive:p}):n.addEventListener(i,l,!1)}function Oc(n,i,l,d,p){var v=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var N=d.stateNode.containerInfo;if(N===p||N.nodeType===8&&N.parentNode===p)break;if(S===4)for(S=d.return;S!==null;){var D=S.tag;if((D===3||D===4)&&(D=S.stateNode.containerInfo,D===p||D.nodeType===8&&D.parentNode===p))return;S=S.return}for(;N!==null;){if(S=ss(N),S===null)return;if(D=S.tag,D===5||D===6){d=v=S;continue e}N=N.parentNode}}d=d.return}dp(function(){var Y=v,oe=sc(l),ae=[];e:{var ie=nm.get(n);if(ie!==void 0){var fe=yc,ge=n;switch(n){case"keypress":if(Ra(l)===0)break e;case"keydown":case"keyup":fe=Mw;break;case"focusin":ge="focus",fe=xc;break;case"focusout":ge="blur",fe=xc;break;case"beforeblur":case"afterblur":fe=xc;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Mp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=ww;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Dw;break;case Qp:case Jp:case em:fe=bw;break;case tm:fe=Fw;break;case"scroll":fe=yw;break;case"wheel":fe=Bw;break;case"copy":case"cut":case"paste":fe=Cw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Ip}var _e=(i&4)!==0,ct=!_e&&n==="scroll",G=_e?ie!==null?ie+"Capture":null:ie;_e=[];for(var F=Y,q;F!==null;){q=F;var ce=q.stateNode;if(q.tag===5&&ce!==null&&(q=ce,G!==null&&(ce=Ji(F,G),ce!=null&&_e.push(_o(F,ce,q)))),ct)break;F=F.return}0<_e.length&&(ie=new fe(ie,ge,null,l,oe),ae.push({event:ie,listeners:_e}))}}if((i&7)===0){e:{if(ie=n==="mouseover"||n==="pointerover",fe=n==="mouseout"||n==="pointerout",ie&&l!==rc&&(ge=l.relatedTarget||l.fromElement)&&(ss(ge)||ge[nr]))break e;if((fe||ie)&&(ie=oe.window===oe?oe:(ie=oe.ownerDocument)?ie.defaultView||ie.parentWindow:window,fe?(ge=l.relatedTarget||l.toElement,fe=Y,ge=ge?ss(ge):null,ge!==null&&(ct=rs(ge),ge!==ct||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(fe=null,ge=Y),fe!==ge)){if(_e=Mp,ce="onMouseLeave",G="onMouseEnter",F="mouse",(n==="pointerout"||n==="pointerover")&&(_e=Ip,ce="onPointerLeave",G="onPointerEnter",F="pointer"),ct=fe==null?ie:qs(fe),q=ge==null?ie:qs(ge),ie=new _e(ce,F+"leave",fe,l,oe),ie.target=ct,ie.relatedTarget=q,ce=null,ss(oe)===Y&&(_e=new _e(G,F+"enter",ge,l,oe),_e.target=q,_e.relatedTarget=ct,ce=_e),ct=ce,fe&&ge)t:{for(_e=fe,G=ge,F=0,q=_e;q;q=Gs(q))F++;for(q=0,ce=G;ce;ce=Gs(ce))q++;for(;0<F-q;)_e=Gs(_e),F--;for(;0<q-F;)G=Gs(G),q--;for(;F--;){if(_e===G||G!==null&&_e===G.alternate)break t;_e=Gs(_e),G=Gs(G)}_e=null}else _e=null;fe!==null&&am(ae,ie,fe,_e,!1),ge!==null&&ct!==null&&am(ae,ct,ge,_e,!0)}}e:{if(ie=Y?qs(Y):window,fe=ie.nodeName&&ie.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ie.type==="file")var xe=$w;else if(zp(ie))if(jp)xe=Xw;else{xe=Yw;var ke=Hw}else(fe=ie.nodeName)&&fe.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(xe=Kw);if(xe&&(xe=xe(n,Y))){Up(ae,xe,l,oe);break e}ke&&ke(n,ie,Y),n==="focusout"&&(ke=ie._wrapperState)&&ke.controlled&&ie.type==="number"&&Ce(ie,"number",ie.value)}switch(ke=Y?qs(Y):window,n){case"focusin":(zp(ke)||ke.contentEditable==="true")&&(Us=ke,Ec=Y,go=null);break;case"focusout":go=Ec=Us=null;break;case"mousedown":Pc=!0;break;case"contextmenu":case"mouseup":case"dragend":Pc=!1,Xp(ae,l,oe);break;case"selectionchange":if(Jw)break;case"keydown":case"keyup":Xp(ae,l,oe)}var Ee;if(bc)e:{switch(n){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else zs?Vp(n,l)&&(Ae="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(Ae="onCompositionStart");Ae&&(Dp&&l.locale!=="ko"&&(zs||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&zs&&(Ee=Np()):(Er=oe,vc="value"in Er?Er.value:Er.textContent,zs=!0)),ke=Va(Y,Ae),0<ke.length&&(Ae=new Op(Ae,n,null,l,oe),ae.push({event:Ae,listeners:ke}),Ee?Ae.data=Ee:(Ee=Bp(l),Ee!==null&&(Ae.data=Ee)))),(Ee=Uw?jw(n,l):Gw(n,l))&&(Y=Va(Y,"onBeforeInput"),0<Y.length&&(oe=new Op("onBeforeInput","beforeinput",null,l,oe),ae.push({event:oe,listeners:Y}),oe.data=Ee))}im(ae,i)})}function _o(n,i,l){return{instance:n,listener:i,currentTarget:l}}function Va(n,i){for(var l=i+"Capture",d=[];n!==null;){var p=n,v=p.stateNode;p.tag===5&&v!==null&&(p=v,v=Ji(n,l),v!=null&&d.unshift(_o(n,v,p)),v=Ji(n,i),v!=null&&d.push(_o(n,v,p))),n=n.return}return d}function Gs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function am(n,i,l,d,p){for(var v=i._reactName,S=[];l!==null&&l!==d;){var N=l,D=N.alternate,Y=N.stateNode;if(D!==null&&D===d)break;N.tag===5&&Y!==null&&(N=Y,p?(D=Ji(l,v),D!=null&&S.unshift(_o(l,D,N))):p||(D=Ji(l,v),D!=null&&S.push(_o(l,D,N)))),l=l.return}S.length!==0&&n.push({event:i,listeners:S})}var rx=/\r\n?/g,sx=/\u0000|\uFFFD/g;function lm(n){return(typeof n=="string"?n:""+n).replace(rx,`
`).replace(sx,"")}function Ba(n,i,l){if(i=lm(i),lm(n)!==i&&l)throw Error(t(425))}function za(){}var Ic=null,Dc=null;function Lc(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Fc=typeof setTimeout=="function"?setTimeout:void 0,ix=typeof clearTimeout=="function"?clearTimeout:void 0,um=typeof Promise=="function"?Promise:void 0,ox=typeof queueMicrotask=="function"?queueMicrotask:typeof um<"u"?function(n){return um.resolve(null).then(n).catch(ax)}:Fc;function ax(n){setTimeout(function(){throw n})}function Vc(n,i){var l=i,d=0;do{var p=l.nextSibling;if(n.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(d===0){n.removeChild(p),lo(i);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=p}while(l);lo(i)}function Ar(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function cm(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return n;i--}else l==="/$"&&i++}n=n.previousSibling}return null}var Ws=Math.random().toString(36).slice(2),Un="__reactFiber$"+Ws,wo="__reactProps$"+Ws,nr="__reactContainer$"+Ws,Bc="__reactEvents$"+Ws,lx="__reactListeners$"+Ws,ux="__reactHandles$"+Ws;function ss(n){var i=n[Un];if(i)return i;for(var l=n.parentNode;l;){if(i=l[nr]||l[Un]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=cm(n);n!==null;){if(l=n[Un])return l;n=cm(n)}return i}n=l,l=n.parentNode}return null}function xo(n){return n=n[Un]||n[nr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function qs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ua(n){return n[wo]||null}var zc=[],$s=-1;function Nr(n){return{current:n}}function et(n){0>$s||(n.current=zc[$s],zc[$s]=null,$s--)}function Ze(n,i){$s++,zc[$s]=n.current,n.current=i}var Rr={},Et=Nr(Rr),Ut=Nr(!1),is=Rr;function Hs(n,i){var l=n.type.contextTypes;if(!l)return Rr;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var p={},v;for(v in l)p[v]=i[v];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=p),p}function jt(n){return n=n.childContextTypes,n!=null}function ja(){et(Ut),et(Et)}function dm(n,i,l){if(Et.current!==Rr)throw Error(t(168));Ze(Et,i),Ze(Ut,l)}function hm(n,i,l){var d=n.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var p in d)if(!(p in i))throw Error(t(108,de(n)||"Unknown",p));return K({},l,d)}function Ga(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Rr,is=Et.current,Ze(Et,n),Ze(Ut,Ut.current),!0}function fm(n,i,l){var d=n.stateNode;if(!d)throw Error(t(169));l?(n=hm(n,i,is),d.__reactInternalMemoizedMergedChildContext=n,et(Ut),et(Et),Ze(Et,n)):et(Ut),Ze(Ut,l)}var rr=null,Wa=!1,Uc=!1;function pm(n){rr===null?rr=[n]:rr.push(n)}function cx(n){Wa=!0,pm(n)}function Mr(){if(!Uc&&rr!==null){Uc=!0;var n=0,i=$e;try{var l=rr;for($e=1;n<l.length;n++){var d=l[n];do d=d(!0);while(d!==null)}rr=null,Wa=!1}catch(p){throw rr!==null&&(rr=rr.slice(n+1)),gp(uc,Mr),p}finally{$e=i,Uc=!1}}return null}var Ys=[],Ks=0,qa=null,$a=0,an=[],ln=0,os=null,sr=1,ir="";function as(n,i){Ys[Ks++]=$a,Ys[Ks++]=qa,qa=n,$a=i}function mm(n,i,l){an[ln++]=sr,an[ln++]=ir,an[ln++]=os,os=n;var d=sr;n=ir;var p=32-wn(d)-1;d&=~(1<<p),l+=1;var v=32-wn(i)+p;if(30<v){var S=p-p%5;v=(d&(1<<S)-1).toString(32),d>>=S,p-=S,sr=1<<32-wn(i)+p|l<<p|d,ir=v+n}else sr=1<<v|l<<p|d,ir=n}function jc(n){n.return!==null&&(as(n,1),mm(n,1,0))}function Gc(n){for(;n===qa;)qa=Ys[--Ks],Ys[Ks]=null,$a=Ys[--Ks],Ys[Ks]=null;for(;n===os;)os=an[--ln],an[ln]=null,ir=an[--ln],an[ln]=null,sr=an[--ln],an[ln]=null}var Zt=null,Qt=null,nt=!1,Sn=null;function gm(n,i){var l=hn(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=n,i=n.deletions,i===null?(n.deletions=[l],n.flags|=16):i.push(l)}function vm(n,i){switch(n.tag){case 5:var l=n.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Zt=n,Qt=Ar(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Zt=n,Qt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=os!==null?{id:sr,overflow:ir}:null,n.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=hn(18,null,null,0),l.stateNode=i,l.return=n,n.child=l,Zt=n,Qt=null,!0):!1;default:return!1}}function Wc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function qc(n){if(nt){var i=Qt;if(i){var l=i;if(!vm(n,i)){if(Wc(n))throw Error(t(418));i=Ar(l.nextSibling);var d=Zt;i&&vm(n,i)?gm(d,l):(n.flags=n.flags&-4097|2,nt=!1,Zt=n)}}else{if(Wc(n))throw Error(t(418));n.flags=n.flags&-4097|2,nt=!1,Zt=n}}}function ym(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Zt=n}function Ha(n){if(n!==Zt)return!1;if(!nt)return ym(n),nt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Lc(n.type,n.memoizedProps)),i&&(i=Qt)){if(Wc(n))throw _m(),Error(t(418));for(;i;)gm(n,i),i=Ar(i.nextSibling)}if(ym(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(i===0){Qt=Ar(n.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}n=n.nextSibling}Qt=null}}else Qt=Zt?Ar(n.stateNode.nextSibling):null;return!0}function _m(){for(var n=Qt;n;)n=Ar(n.nextSibling)}function Xs(){Qt=Zt=null,nt=!1}function $c(n){Sn===null?Sn=[n]:Sn.push(n)}var dx=V.ReactCurrentBatchConfig;function So(n,i,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,n));var p=d,v=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===v?i.ref:(i=function(S){var N=p.refs;S===null?delete N[v]:N[v]=S},i._stringRef=v,i)}if(typeof n!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,n))}return n}function Ya(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function wm(n){var i=n._init;return i(n._payload)}function xm(n){function i(G,F){if(n){var q=G.deletions;q===null?(G.deletions=[F],G.flags|=16):q.push(F)}}function l(G,F){if(!n)return null;for(;F!==null;)i(G,F),F=F.sibling;return null}function d(G,F){for(G=new Map;F!==null;)F.key!==null?G.set(F.key,F):G.set(F.index,F),F=F.sibling;return G}function p(G,F){return G=zr(G,F),G.index=0,G.sibling=null,G}function v(G,F,q){return G.index=q,n?(q=G.alternate,q!==null?(q=q.index,q<F?(G.flags|=2,F):q):(G.flags|=2,F)):(G.flags|=1048576,F)}function S(G){return n&&G.alternate===null&&(G.flags|=2),G}function N(G,F,q,ce){return F===null||F.tag!==6?(F=Fd(q,G.mode,ce),F.return=G,F):(F=p(F,q),F.return=G,F)}function D(G,F,q,ce){var xe=q.type;return xe===R?oe(G,F,q.props.children,ce,q.key):F!==null&&(F.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===X&&wm(xe)===F.type)?(ce=p(F,q.props),ce.ref=So(G,F,q),ce.return=G,ce):(ce=yl(q.type,q.key,q.props,null,G.mode,ce),ce.ref=So(G,F,q),ce.return=G,ce)}function Y(G,F,q,ce){return F===null||F.tag!==4||F.stateNode.containerInfo!==q.containerInfo||F.stateNode.implementation!==q.implementation?(F=Vd(q,G.mode,ce),F.return=G,F):(F=p(F,q.children||[]),F.return=G,F)}function oe(G,F,q,ce,xe){return F===null||F.tag!==7?(F=ms(q,G.mode,ce,xe),F.return=G,F):(F=p(F,q),F.return=G,F)}function ae(G,F,q){if(typeof F=="string"&&F!==""||typeof F=="number")return F=Fd(""+F,G.mode,q),F.return=G,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case E:return q=yl(F.type,F.key,F.props,null,G.mode,q),q.ref=So(G,null,F),q.return=G,q;case P:return F=Vd(F,G.mode,q),F.return=G,F;case X:var ce=F._init;return ae(G,ce(F._payload),q)}if(Re(F)||Z(F))return F=ms(F,G.mode,q,null),F.return=G,F;Ya(G,F)}return null}function ie(G,F,q,ce){var xe=F!==null?F.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return xe!==null?null:N(G,F,""+q,ce);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case E:return q.key===xe?D(G,F,q,ce):null;case P:return q.key===xe?Y(G,F,q,ce):null;case X:return xe=q._init,ie(G,F,xe(q._payload),ce)}if(Re(q)||Z(q))return xe!==null?null:oe(G,F,q,ce,null);Ya(G,q)}return null}function fe(G,F,q,ce,xe){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return G=G.get(q)||null,N(F,G,""+ce,xe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case E:return G=G.get(ce.key===null?q:ce.key)||null,D(F,G,ce,xe);case P:return G=G.get(ce.key===null?q:ce.key)||null,Y(F,G,ce,xe);case X:var ke=ce._init;return fe(G,F,q,ke(ce._payload),xe)}if(Re(ce)||Z(ce))return G=G.get(q)||null,oe(F,G,ce,xe,null);Ya(F,ce)}return null}function ge(G,F,q,ce){for(var xe=null,ke=null,Ee=F,Ae=F=0,xt=null;Ee!==null&&Ae<q.length;Ae++){Ee.index>Ae?(xt=Ee,Ee=null):xt=Ee.sibling;var Ge=ie(G,Ee,q[Ae],ce);if(Ge===null){Ee===null&&(Ee=xt);break}n&&Ee&&Ge.alternate===null&&i(G,Ee),F=v(Ge,F,Ae),ke===null?xe=Ge:ke.sibling=Ge,ke=Ge,Ee=xt}if(Ae===q.length)return l(G,Ee),nt&&as(G,Ae),xe;if(Ee===null){for(;Ae<q.length;Ae++)Ee=ae(G,q[Ae],ce),Ee!==null&&(F=v(Ee,F,Ae),ke===null?xe=Ee:ke.sibling=Ee,ke=Ee);return nt&&as(G,Ae),xe}for(Ee=d(G,Ee);Ae<q.length;Ae++)xt=fe(Ee,G,Ae,q[Ae],ce),xt!==null&&(n&&xt.alternate!==null&&Ee.delete(xt.key===null?Ae:xt.key),F=v(xt,F,Ae),ke===null?xe=xt:ke.sibling=xt,ke=xt);return n&&Ee.forEach(function(Ur){return i(G,Ur)}),nt&&as(G,Ae),xe}function _e(G,F,q,ce){var xe=Z(q);if(typeof xe!="function")throw Error(t(150));if(q=xe.call(q),q==null)throw Error(t(151));for(var ke=xe=null,Ee=F,Ae=F=0,xt=null,Ge=q.next();Ee!==null&&!Ge.done;Ae++,Ge=q.next()){Ee.index>Ae?(xt=Ee,Ee=null):xt=Ee.sibling;var Ur=ie(G,Ee,Ge.value,ce);if(Ur===null){Ee===null&&(Ee=xt);break}n&&Ee&&Ur.alternate===null&&i(G,Ee),F=v(Ur,F,Ae),ke===null?xe=Ur:ke.sibling=Ur,ke=Ur,Ee=xt}if(Ge.done)return l(G,Ee),nt&&as(G,Ae),xe;if(Ee===null){for(;!Ge.done;Ae++,Ge=q.next())Ge=ae(G,Ge.value,ce),Ge!==null&&(F=v(Ge,F,Ae),ke===null?xe=Ge:ke.sibling=Ge,ke=Ge);return nt&&as(G,Ae),xe}for(Ee=d(G,Ee);!Ge.done;Ae++,Ge=q.next())Ge=fe(Ee,G,Ae,Ge.value,ce),Ge!==null&&(n&&Ge.alternate!==null&&Ee.delete(Ge.key===null?Ae:Ge.key),F=v(Ge,F,Ae),ke===null?xe=Ge:ke.sibling=Ge,ke=Ge);return n&&Ee.forEach(function(Wx){return i(G,Wx)}),nt&&as(G,Ae),xe}function ct(G,F,q,ce){if(typeof q=="object"&&q!==null&&q.type===R&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case E:e:{for(var xe=q.key,ke=F;ke!==null;){if(ke.key===xe){if(xe=q.type,xe===R){if(ke.tag===7){l(G,ke.sibling),F=p(ke,q.props.children),F.return=G,G=F;break e}}else if(ke.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===X&&wm(xe)===ke.type){l(G,ke.sibling),F=p(ke,q.props),F.ref=So(G,ke,q),F.return=G,G=F;break e}l(G,ke);break}else i(G,ke);ke=ke.sibling}q.type===R?(F=ms(q.props.children,G.mode,ce,q.key),F.return=G,G=F):(ce=yl(q.type,q.key,q.props,null,G.mode,ce),ce.ref=So(G,F,q),ce.return=G,G=ce)}return S(G);case P:e:{for(ke=q.key;F!==null;){if(F.key===ke)if(F.tag===4&&F.stateNode.containerInfo===q.containerInfo&&F.stateNode.implementation===q.implementation){l(G,F.sibling),F=p(F,q.children||[]),F.return=G,G=F;break e}else{l(G,F);break}else i(G,F);F=F.sibling}F=Vd(q,G.mode,ce),F.return=G,G=F}return S(G);case X:return ke=q._init,ct(G,F,ke(q._payload),ce)}if(Re(q))return ge(G,F,q,ce);if(Z(q))return _e(G,F,q,ce);Ya(G,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,F!==null&&F.tag===6?(l(G,F.sibling),F=p(F,q),F.return=G,G=F):(l(G,F),F=Fd(q,G.mode,ce),F.return=G,G=F),S(G)):l(G,F)}return ct}var Zs=xm(!0),Sm=xm(!1),Ka=Nr(null),Xa=null,Qs=null,Hc=null;function Yc(){Hc=Qs=Xa=null}function Kc(n){var i=Ka.current;et(Ka),n._currentValue=i}function Xc(n,i,l){for(;n!==null;){var d=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),n===l)break;n=n.return}}function Js(n,i){Xa=n,Hc=Qs=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Gt=!0),n.firstContext=null)}function un(n){var i=n._currentValue;if(Hc!==n)if(n={context:n,memoizedValue:i,next:null},Qs===null){if(Xa===null)throw Error(t(308));Qs=n,Xa.dependencies={lanes:0,firstContext:n}}else Qs=Qs.next=n;return i}var ls=null;function Zc(n){ls===null?ls=[n]:ls.push(n)}function bm(n,i,l,d){var p=i.interleaved;return p===null?(l.next=l,Zc(i)):(l.next=p.next,p.next=l),i.interleaved=l,or(n,d)}function or(n,i){n.lanes|=i;var l=n.alternate;for(l!==null&&(l.lanes|=i),l=n,n=n.return;n!==null;)n.childLanes|=i,l=n.alternate,l!==null&&(l.childLanes|=i),l=n,n=n.return;return l.tag===3?l.stateNode:null}var Or=!1;function Qc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ar(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Ir(n,i,l){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Ue&2)!==0){var p=d.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),d.pending=i,or(n,l)}return p=d.interleaved,p===null?(i.next=i,Zc(d)):(i.next=p.next,p.next=i),d.interleaved=i,or(n,l)}function Za(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var d=i.lanes;d&=n.pendingLanes,l|=d,i.lanes=l,hc(n,l)}}function Cm(n,i){var l=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?p=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?p=v=i:v=v.next=i}else p=v=i;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:d.shared,effects:d.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}function Qa(n,i,l,d){var p=n.updateQueue;Or=!1;var v=p.firstBaseUpdate,S=p.lastBaseUpdate,N=p.shared.pending;if(N!==null){p.shared.pending=null;var D=N,Y=D.next;D.next=null,S===null?v=Y:S.next=Y,S=D;var oe=n.alternate;oe!==null&&(oe=oe.updateQueue,N=oe.lastBaseUpdate,N!==S&&(N===null?oe.firstBaseUpdate=Y:N.next=Y,oe.lastBaseUpdate=D))}if(v!==null){var ae=p.baseState;S=0,oe=Y=D=null,N=v;do{var ie=N.lane,fe=N.eventTime;if((d&ie)===ie){oe!==null&&(oe=oe.next={eventTime:fe,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var ge=n,_e=N;switch(ie=i,fe=l,_e.tag){case 1:if(ge=_e.payload,typeof ge=="function"){ae=ge.call(fe,ae,ie);break e}ae=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=_e.payload,ie=typeof ge=="function"?ge.call(fe,ae,ie):ge,ie==null)break e;ae=K({},ae,ie);break e;case 2:Or=!0}}N.callback!==null&&N.lane!==0&&(n.flags|=64,ie=p.effects,ie===null?p.effects=[N]:ie.push(N))}else fe={eventTime:fe,lane:ie,tag:N.tag,payload:N.payload,callback:N.callback,next:null},oe===null?(Y=oe=fe,D=ae):oe=oe.next=fe,S|=ie;if(N=N.next,N===null){if(N=p.shared.pending,N===null)break;ie=N,N=ie.next,ie.next=null,p.lastBaseUpdate=ie,p.shared.pending=null}}while(!0);if(oe===null&&(D=ae),p.baseState=D,p.firstBaseUpdate=Y,p.lastBaseUpdate=oe,i=p.shared.interleaved,i!==null){p=i;do S|=p.lane,p=p.next;while(p!==i)}else v===null&&(p.shared.lanes=0);ds|=S,n.lanes=S,n.memoizedState=ae}}function km(n,i,l){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var d=n[i],p=d.callback;if(p!==null){if(d.callback=null,d=l,typeof p!="function")throw Error(t(191,p));p.call(d)}}}var bo={},jn=Nr(bo),To=Nr(bo),Co=Nr(bo);function us(n){if(n===bo)throw Error(t(174));return n}function Jc(n,i){switch(Ze(Co,i),Ze(To,n),Ze(jn,bo),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ec(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=ec(i,n)}et(jn),Ze(jn,i)}function ei(){et(jn),et(To),et(Co)}function Em(n){us(Co.current);var i=us(jn.current),l=ec(i,n.type);i!==l&&(Ze(To,n),Ze(jn,l))}function ed(n){To.current===n&&(et(jn),et(To))}var st=Nr(0);function Ja(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var td=[];function nd(){for(var n=0;n<td.length;n++)td[n]._workInProgressVersionPrimary=null;td.length=0}var el=V.ReactCurrentDispatcher,rd=V.ReactCurrentBatchConfig,cs=0,it=null,mt=null,_t=null,tl=!1,ko=!1,Eo=0,hx=0;function Pt(){throw Error(t(321))}function sd(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!xn(n[l],i[l]))return!1;return!0}function id(n,i,l,d,p,v){if(cs=v,it=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,el.current=n===null||n.memoizedState===null?gx:vx,n=l(d,p),ko){v=0;do{if(ko=!1,Eo=0,25<=v)throw Error(t(301));v+=1,_t=mt=null,i.updateQueue=null,el.current=yx,n=l(d,p)}while(ko)}if(el.current=sl,i=mt!==null&&mt.next!==null,cs=0,_t=mt=it=null,tl=!1,i)throw Error(t(300));return n}function od(){var n=Eo!==0;return Eo=0,n}function Gn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?it.memoizedState=_t=n:_t=_t.next=n,_t}function cn(){if(mt===null){var n=it.alternate;n=n!==null?n.memoizedState:null}else n=mt.next;var i=_t===null?it.memoizedState:_t.next;if(i!==null)_t=i,mt=n;else{if(n===null)throw Error(t(310));mt=n,n={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},_t===null?it.memoizedState=_t=n:_t=_t.next=n}return _t}function Po(n,i){return typeof i=="function"?i(n):i}function ad(n){var i=cn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var d=mt,p=d.baseQueue,v=l.pending;if(v!==null){if(p!==null){var S=p.next;p.next=v.next,v.next=S}d.baseQueue=p=v,l.pending=null}if(p!==null){v=p.next,d=d.baseState;var N=S=null,D=null,Y=v;do{var oe=Y.lane;if((cs&oe)===oe)D!==null&&(D=D.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),d=Y.hasEagerState?Y.eagerState:n(d,Y.action);else{var ae={lane:oe,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};D===null?(N=D=ae,S=d):D=D.next=ae,it.lanes|=oe,ds|=oe}Y=Y.next}while(Y!==null&&Y!==v);D===null?S=d:D.next=N,xn(d,i.memoizedState)||(Gt=!0),i.memoizedState=d,i.baseState=S,i.baseQueue=D,l.lastRenderedState=d}if(n=l.interleaved,n!==null){p=n;do v=p.lane,it.lanes|=v,ds|=v,p=p.next;while(p!==n)}else p===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function ld(n){var i=cn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var d=l.dispatch,p=l.pending,v=i.memoizedState;if(p!==null){l.pending=null;var S=p=p.next;do v=n(v,S.action),S=S.next;while(S!==p);xn(v,i.memoizedState)||(Gt=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),l.lastRenderedState=v}return[v,d]}function Pm(){}function Am(n,i){var l=it,d=cn(),p=i(),v=!xn(d.memoizedState,p);if(v&&(d.memoizedState=p,Gt=!0),d=d.queue,ud(Mm.bind(null,l,d,n),[n]),d.getSnapshot!==i||v||_t!==null&&_t.memoizedState.tag&1){if(l.flags|=2048,Ao(9,Rm.bind(null,l,d,p,i),void 0,null),wt===null)throw Error(t(349));(cs&30)!==0||Nm(l,i,p)}return p}function Nm(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function Rm(n,i,l,d){i.value=l,i.getSnapshot=d,Om(i)&&Im(n)}function Mm(n,i,l){return l(function(){Om(i)&&Im(n)})}function Om(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!xn(n,l)}catch{return!0}}function Im(n){var i=or(n,1);i!==null&&kn(i,n,1,-1)}function Dm(n){var i=Gn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:n},i.queue=n,n=n.dispatch=mx.bind(null,it,n),[i.memoizedState,n]}function Ao(n,i,l,d){return n={tag:n,create:i,destroy:l,deps:d,next:null},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.lastEffect=n.next=n):(l=i.lastEffect,l===null?i.lastEffect=n.next=n:(d=l.next,l.next=n,n.next=d,i.lastEffect=n)),n}function Lm(){return cn().memoizedState}function nl(n,i,l,d){var p=Gn();it.flags|=n,p.memoizedState=Ao(1|i,l,void 0,d===void 0?null:d)}function rl(n,i,l,d){var p=cn();d=d===void 0?null:d;var v=void 0;if(mt!==null){var S=mt.memoizedState;if(v=S.destroy,d!==null&&sd(d,S.deps)){p.memoizedState=Ao(i,l,v,d);return}}it.flags|=n,p.memoizedState=Ao(1|i,l,v,d)}function Fm(n,i){return nl(8390656,8,n,i)}function ud(n,i){return rl(2048,8,n,i)}function Vm(n,i){return rl(4,2,n,i)}function Bm(n,i){return rl(4,4,n,i)}function zm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Um(n,i,l){return l=l!=null?l.concat([n]):null,rl(4,4,zm.bind(null,i,n),l)}function cd(){}function jm(n,i){var l=cn();i=i===void 0?null:i;var d=l.memoizedState;return d!==null&&i!==null&&sd(i,d[1])?d[0]:(l.memoizedState=[n,i],n)}function Gm(n,i){var l=cn();i=i===void 0?null:i;var d=l.memoizedState;return d!==null&&i!==null&&sd(i,d[1])?d[0]:(n=n(),l.memoizedState=[n,i],n)}function Wm(n,i,l){return(cs&21)===0?(n.baseState&&(n.baseState=!1,Gt=!0),n.memoizedState=l):(xn(l,i)||(l=wp(),it.lanes|=l,ds|=l,n.baseState=!0),i)}function fx(n,i){var l=$e;$e=l!==0&&4>l?l:4,n(!0);var d=rd.transition;rd.transition={};try{n(!1),i()}finally{$e=l,rd.transition=d}}function qm(){return cn().memoizedState}function px(n,i,l){var d=Vr(n);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},$m(n))Hm(i,l);else if(l=bm(n,i,l,d),l!==null){var p=Lt();kn(l,n,d,p),Ym(l,i,d)}}function mx(n,i,l){var d=Vr(n),p={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if($m(n))Hm(i,p);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var S=i.lastRenderedState,N=v(S,l);if(p.hasEagerState=!0,p.eagerState=N,xn(N,S)){var D=i.interleaved;D===null?(p.next=p,Zc(i)):(p.next=D.next,D.next=p),i.interleaved=p;return}}catch{}finally{}l=bm(n,i,p,d),l!==null&&(p=Lt(),kn(l,n,d,p),Ym(l,i,d))}}function $m(n){var i=n.alternate;return n===it||i!==null&&i===it}function Hm(n,i){ko=tl=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function Ym(n,i,l){if((l&4194240)!==0){var d=i.lanes;d&=n.pendingLanes,l|=d,i.lanes=l,hc(n,l)}}var sl={readContext:un,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},gx={readContext:un,useCallback:function(n,i){return Gn().memoizedState=[n,i===void 0?null:i],n},useContext:un,useEffect:Fm,useImperativeHandle:function(n,i,l){return l=l!=null?l.concat([n]):null,nl(4194308,4,zm.bind(null,i,n),l)},useLayoutEffect:function(n,i){return nl(4194308,4,n,i)},useInsertionEffect:function(n,i){return nl(4,2,n,i)},useMemo:function(n,i){var l=Gn();return i=i===void 0?null:i,n=n(),l.memoizedState=[n,i],n},useReducer:function(n,i,l){var d=Gn();return i=l!==void 0?l(i):i,d.memoizedState=d.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},d.queue=n,n=n.dispatch=px.bind(null,it,n),[d.memoizedState,n]},useRef:function(n){var i=Gn();return n={current:n},i.memoizedState=n},useState:Dm,useDebugValue:cd,useDeferredValue:function(n){return Gn().memoizedState=n},useTransition:function(){var n=Dm(!1),i=n[0];return n=fx.bind(null,n[1]),Gn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,l){var d=it,p=Gn();if(nt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),wt===null)throw Error(t(349));(cs&30)!==0||Nm(d,i,l)}p.memoizedState=l;var v={value:l,getSnapshot:i};return p.queue=v,Fm(Mm.bind(null,d,v,n),[n]),d.flags|=2048,Ao(9,Rm.bind(null,d,v,l,i),void 0,null),l},useId:function(){var n=Gn(),i=wt.identifierPrefix;if(nt){var l=ir,d=sr;l=(d&~(1<<32-wn(d)-1)).toString(32)+l,i=":"+i+"R"+l,l=Eo++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=hx++,i=":"+i+"r"+l.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},vx={readContext:un,useCallback:jm,useContext:un,useEffect:ud,useImperativeHandle:Um,useInsertionEffect:Vm,useLayoutEffect:Bm,useMemo:Gm,useReducer:ad,useRef:Lm,useState:function(){return ad(Po)},useDebugValue:cd,useDeferredValue:function(n){var i=cn();return Wm(i,mt.memoizedState,n)},useTransition:function(){var n=ad(Po)[0],i=cn().memoizedState;return[n,i]},useMutableSource:Pm,useSyncExternalStore:Am,useId:qm,unstable_isNewReconciler:!1},yx={readContext:un,useCallback:jm,useContext:un,useEffect:ud,useImperativeHandle:Um,useInsertionEffect:Vm,useLayoutEffect:Bm,useMemo:Gm,useReducer:ld,useRef:Lm,useState:function(){return ld(Po)},useDebugValue:cd,useDeferredValue:function(n){var i=cn();return mt===null?i.memoizedState=n:Wm(i,mt.memoizedState,n)},useTransition:function(){var n=ld(Po)[0],i=cn().memoizedState;return[n,i]},useMutableSource:Pm,useSyncExternalStore:Am,useId:qm,unstable_isNewReconciler:!1};function bn(n,i){if(n&&n.defaultProps){i=K({},i),n=n.defaultProps;for(var l in n)i[l]===void 0&&(i[l]=n[l]);return i}return i}function dd(n,i,l,d){i=n.memoizedState,l=l(d,i),l=l==null?i:K({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var il={isMounted:function(n){return(n=n._reactInternals)?rs(n)===n:!1},enqueueSetState:function(n,i,l){n=n._reactInternals;var d=Lt(),p=Vr(n),v=ar(d,p);v.payload=i,l!=null&&(v.callback=l),i=Ir(n,v,p),i!==null&&(kn(i,n,p,d),Za(i,n,p))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var d=Lt(),p=Vr(n),v=ar(d,p);v.tag=1,v.payload=i,l!=null&&(v.callback=l),i=Ir(n,v,p),i!==null&&(kn(i,n,p,d),Za(i,n,p))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=Lt(),d=Vr(n),p=ar(l,d);p.tag=2,i!=null&&(p.callback=i),i=Ir(n,p,d),i!==null&&(kn(i,n,d,l),Za(i,n,d))}};function Km(n,i,l,d,p,v,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,v,S):i.prototype&&i.prototype.isPureReactComponent?!mo(l,d)||!mo(p,v):!0}function Xm(n,i,l){var d=!1,p=Rr,v=i.contextType;return typeof v=="object"&&v!==null?v=un(v):(p=jt(i)?is:Et.current,d=i.contextTypes,v=(d=d!=null)?Hs(n,p):Rr),i=new i(l,v),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=il,n.stateNode=i,i._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=p,n.__reactInternalMemoizedMaskedChildContext=v),i}function Zm(n,i,l,d){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,d),i.state!==n&&il.enqueueReplaceState(i,i.state,null)}function hd(n,i,l,d){var p=n.stateNode;p.props=l,p.state=n.memoizedState,p.refs={},Qc(n);var v=i.contextType;typeof v=="object"&&v!==null?p.context=un(v):(v=jt(i)?is:Et.current,p.context=Hs(n,v)),p.state=n.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(dd(n,i,v,l),p.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&il.enqueueReplaceState(p,p.state,null),Qa(n,l,p,d),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308)}function ti(n,i){try{var l="",d=i;do l+=re(d),d=d.return;while(d);var p=l}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:n,source:i,stack:p,digest:null}}function fd(n,i,l){return{value:n,source:null,stack:l??null,digest:i??null}}function pd(n,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var _x=typeof WeakMap=="function"?WeakMap:Map;function Qm(n,i,l){l=ar(-1,l),l.tag=3,l.payload={element:null};var d=i.value;return l.callback=function(){hl||(hl=!0,Ad=d),pd(n,i)},l}function Jm(n,i,l){l=ar(-1,l),l.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var p=i.value;l.payload=function(){return d(p)},l.callback=function(){pd(n,i)}}var v=n.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){pd(n,i),typeof d!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var S=i.stack;this.componentDidCatch(i.value,{componentStack:S!==null?S:""})}),l}function eg(n,i,l){var d=n.pingCache;if(d===null){d=n.pingCache=new _x;var p=new Set;d.set(i,p)}else p=d.get(i),p===void 0&&(p=new Set,d.set(i,p));p.has(l)||(p.add(l),n=Ox.bind(null,n,i,l),i.then(n,n))}function tg(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function ng(n,i,l,d,p){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=ar(-1,1),i.tag=2,Ir(l,i,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=p,n)}var wx=V.ReactCurrentOwner,Gt=!1;function Dt(n,i,l,d){i.child=n===null?Sm(i,null,l,d):Zs(i,n.child,l,d)}function rg(n,i,l,d,p){l=l.render;var v=i.ref;return Js(i,p),d=id(n,i,l,d,v,p),l=od(),n!==null&&!Gt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~p,lr(n,i,p)):(nt&&l&&jc(i),i.flags|=1,Dt(n,i,d,p),i.child)}function sg(n,i,l,d,p){if(n===null){var v=l.type;return typeof v=="function"&&!Ld(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=v,ig(n,i,v,d,p)):(n=yl(l.type,null,d,i,i.mode,p),n.ref=i.ref,n.return=i,i.child=n)}if(v=n.child,(n.lanes&p)===0){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:mo,l(S,d)&&n.ref===i.ref)return lr(n,i,p)}return i.flags|=1,n=zr(v,d),n.ref=i.ref,n.return=i,i.child=n}function ig(n,i,l,d,p){if(n!==null){var v=n.memoizedProps;if(mo(v,d)&&n.ref===i.ref)if(Gt=!1,i.pendingProps=d=v,(n.lanes&p)!==0)(n.flags&131072)!==0&&(Gt=!0);else return i.lanes=n.lanes,lr(n,i,p)}return md(n,i,l,d,p)}function og(n,i,l){var d=i.pendingProps,p=d.children,v=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(ri,Jt),Jt|=l;else{if((l&1073741824)===0)return n=v!==null?v.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ze(ri,Jt),Jt|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=v!==null?v.baseLanes:l,Ze(ri,Jt),Jt|=d}else v!==null?(d=v.baseLanes|l,i.memoizedState=null):d=l,Ze(ri,Jt),Jt|=d;return Dt(n,i,p,l),i.child}function ag(n,i){var l=i.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function md(n,i,l,d,p){var v=jt(l)?is:Et.current;return v=Hs(i,v),Js(i,p),l=id(n,i,l,d,v,p),d=od(),n!==null&&!Gt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~p,lr(n,i,p)):(nt&&d&&jc(i),i.flags|=1,Dt(n,i,l,p),i.child)}function lg(n,i,l,d,p){if(jt(l)){var v=!0;Ga(i)}else v=!1;if(Js(i,p),i.stateNode===null)al(n,i),Xm(i,l,d),hd(i,l,d,p),d=!0;else if(n===null){var S=i.stateNode,N=i.memoizedProps;S.props=N;var D=S.context,Y=l.contextType;typeof Y=="object"&&Y!==null?Y=un(Y):(Y=jt(l)?is:Et.current,Y=Hs(i,Y));var oe=l.getDerivedStateFromProps,ae=typeof oe=="function"||typeof S.getSnapshotBeforeUpdate=="function";ae||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N!==d||D!==Y)&&Zm(i,S,d,Y),Or=!1;var ie=i.memoizedState;S.state=ie,Qa(i,d,S,p),D=i.memoizedState,N!==d||ie!==D||Ut.current||Or?(typeof oe=="function"&&(dd(i,l,oe,d),D=i.memoizedState),(N=Or||Km(i,l,N,d,ie,D,Y))?(ae||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(i.flags|=4194308)):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=D),S.props=d,S.state=D,S.context=Y,d=N):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{S=i.stateNode,Tm(n,i),N=i.memoizedProps,Y=i.type===i.elementType?N:bn(i.type,N),S.props=Y,ae=i.pendingProps,ie=S.context,D=l.contextType,typeof D=="object"&&D!==null?D=un(D):(D=jt(l)?is:Et.current,D=Hs(i,D));var fe=l.getDerivedStateFromProps;(oe=typeof fe=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N!==ae||ie!==D)&&Zm(i,S,d,D),Or=!1,ie=i.memoizedState,S.state=ie,Qa(i,d,S,p);var ge=i.memoizedState;N!==ae||ie!==ge||Ut.current||Or?(typeof fe=="function"&&(dd(i,l,fe,d),ge=i.memoizedState),(Y=Or||Km(i,l,Y,d,ie,ge,D)||!1)?(oe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(d,ge,D),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(d,ge,D)),typeof S.componentDidUpdate=="function"&&(i.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof S.componentDidUpdate!="function"||N===n.memoizedProps&&ie===n.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&ie===n.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=ge),S.props=d,S.state=ge,S.context=D,d=Y):(typeof S.componentDidUpdate!="function"||N===n.memoizedProps&&ie===n.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&ie===n.memoizedState||(i.flags|=1024),d=!1)}return gd(n,i,l,d,v,p)}function gd(n,i,l,d,p,v){ag(n,i);var S=(i.flags&128)!==0;if(!d&&!S)return p&&fm(i,l,!1),lr(n,i,v);d=i.stateNode,wx.current=i;var N=S&&typeof l.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,n!==null&&S?(i.child=Zs(i,n.child,null,v),i.child=Zs(i,null,N,v)):Dt(n,i,N,v),i.memoizedState=d.state,p&&fm(i,l,!0),i.child}function ug(n){var i=n.stateNode;i.pendingContext?dm(n,i.pendingContext,i.pendingContext!==i.context):i.context&&dm(n,i.context,!1),Jc(n,i.containerInfo)}function cg(n,i,l,d,p){return Xs(),$c(p),i.flags|=256,Dt(n,i,l,d),i.child}var vd={dehydrated:null,treeContext:null,retryLane:0};function yd(n){return{baseLanes:n,cachePool:null,transitions:null}}function dg(n,i,l){var d=i.pendingProps,p=st.current,v=!1,S=(i.flags&128)!==0,N;if((N=S)||(N=n!==null&&n.memoizedState===null?!1:(p&2)!==0),N?(v=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(p|=1),Ze(st,p&1),n===null)return qc(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(S=d.children,n=d.fallback,v?(d=i.mode,v=i.child,S={mode:"hidden",children:S},(d&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=_l(S,d,0,null),n=ms(n,d,l,null),v.return=i,n.return=i,v.sibling=n,i.child=v,i.child.memoizedState=yd(l),i.memoizedState=vd,n):_d(i,S));if(p=n.memoizedState,p!==null&&(N=p.dehydrated,N!==null))return xx(n,i,S,d,N,p,l);if(v){v=d.fallback,S=i.mode,p=n.child,N=p.sibling;var D={mode:"hidden",children:d.children};return(S&1)===0&&i.child!==p?(d=i.child,d.childLanes=0,d.pendingProps=D,i.deletions=null):(d=zr(p,D),d.subtreeFlags=p.subtreeFlags&14680064),N!==null?v=zr(N,v):(v=ms(v,S,l,null),v.flags|=2),v.return=i,d.return=i,d.sibling=v,i.child=d,d=v,v=i.child,S=n.child.memoizedState,S=S===null?yd(l):{baseLanes:S.baseLanes|l,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=n.childLanes&~l,i.memoizedState=vd,d}return v=n.child,n=v.sibling,d=zr(v,{mode:"visible",children:d.children}),(i.mode&1)===0&&(d.lanes=l),d.return=i,d.sibling=null,n!==null&&(l=i.deletions,l===null?(i.deletions=[n],i.flags|=16):l.push(n)),i.child=d,i.memoizedState=null,d}function _d(n,i){return i=_l({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function ol(n,i,l,d){return d!==null&&$c(d),Zs(i,n.child,null,l),n=_d(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function xx(n,i,l,d,p,v,S){if(l)return i.flags&256?(i.flags&=-257,d=fd(Error(t(422))),ol(n,i,S,d)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(v=d.fallback,p=i.mode,d=_l({mode:"visible",children:d.children},p,0,null),v=ms(v,p,S,null),v.flags|=2,d.return=i,v.return=i,d.sibling=v,i.child=d,(i.mode&1)!==0&&Zs(i,n.child,null,S),i.child.memoizedState=yd(S),i.memoizedState=vd,v);if((i.mode&1)===0)return ol(n,i,S,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var N=d.dgst;return d=N,v=Error(t(419)),d=fd(v,d,void 0),ol(n,i,S,d)}if(N=(S&n.childLanes)!==0,Gt||N){if(d=wt,d!==null){switch(S&-S){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|S))!==0?0:p,p!==0&&p!==v.retryLane&&(v.retryLane=p,or(n,p),kn(d,n,p,-1))}return Dd(),d=fd(Error(t(421))),ol(n,i,S,d)}return p.data==="$?"?(i.flags|=128,i.child=n.child,i=Ix.bind(null,n),p._reactRetry=i,null):(n=v.treeContext,Qt=Ar(p.nextSibling),Zt=i,nt=!0,Sn=null,n!==null&&(an[ln++]=sr,an[ln++]=ir,an[ln++]=os,sr=n.id,ir=n.overflow,os=i),i=_d(i,d.children),i.flags|=4096,i)}function hg(n,i,l){n.lanes|=i;var d=n.alternate;d!==null&&(d.lanes|=i),Xc(n.return,i,l)}function wd(n,i,l,d,p){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=l,v.tailMode=p)}function fg(n,i,l){var d=i.pendingProps,p=d.revealOrder,v=d.tail;if(Dt(n,i,d.children,l),d=st.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&hg(n,l,i);else if(n.tag===19)hg(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(Ze(st,d),(i.mode&1)===0)i.memoizedState=null;else switch(p){case"forwards":for(l=i.child,p=null;l!==null;)n=l.alternate,n!==null&&Ja(n)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),wd(i,!1,p,l,v);break;case"backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(n=p.alternate,n!==null&&Ja(n)===null){i.child=p;break}n=p.sibling,p.sibling=l,l=p,p=n}wd(i,!0,l,null,v);break;case"together":wd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function al(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function lr(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),ds|=i.lanes,(l&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,l=zr(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=zr(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function Sx(n,i,l){switch(i.tag){case 3:ug(i),Xs();break;case 5:Em(i);break;case 1:jt(i.type)&&Ga(i);break;case 4:Jc(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,p=i.memoizedProps.value;Ze(Ka,d._currentValue),d._currentValue=p;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(Ze(st,st.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?dg(n,i,l):(Ze(st,st.current&1),n=lr(n,i,l),n!==null?n.sibling:null);Ze(st,st.current&1);break;case 19:if(d=(l&i.childLanes)!==0,(n.flags&128)!==0){if(d)return fg(n,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ze(st,st.current),d)break;return null;case 22:case 23:return i.lanes=0,og(n,i,l)}return lr(n,i,l)}var pg,xd,mg,gg;pg=function(n,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},xd=function(){},mg=function(n,i,l,d){var p=n.memoizedProps;if(p!==d){n=i.stateNode,us(jn.current);var v=null;switch(l){case"input":p=we(n,p),d=we(n,d),v=[];break;case"select":p=K({},p,{value:void 0}),d=K({},d,{value:void 0}),v=[];break;case"textarea":p=Oe(n,p),d=Oe(n,d),v=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=za)}tc(l,d);var S;l=null;for(Y in p)if(!d.hasOwnProperty(Y)&&p.hasOwnProperty(Y)&&p[Y]!=null)if(Y==="style"){var N=p[Y];for(S in N)N.hasOwnProperty(S)&&(l||(l={}),l[S]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(o.hasOwnProperty(Y)?v||(v=[]):(v=v||[]).push(Y,null));for(Y in d){var D=d[Y];if(N=p!=null?p[Y]:void 0,d.hasOwnProperty(Y)&&D!==N&&(D!=null||N!=null))if(Y==="style")if(N){for(S in N)!N.hasOwnProperty(S)||D&&D.hasOwnProperty(S)||(l||(l={}),l[S]="");for(S in D)D.hasOwnProperty(S)&&N[S]!==D[S]&&(l||(l={}),l[S]=D[S])}else l||(v||(v=[]),v.push(Y,l)),l=D;else Y==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,N=N?N.__html:void 0,D!=null&&N!==D&&(v=v||[]).push(Y,D)):Y==="children"?typeof D!="string"&&typeof D!="number"||(v=v||[]).push(Y,""+D):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(o.hasOwnProperty(Y)?(D!=null&&Y==="onScroll"&&Je("scroll",n),v||N===D||(v=[])):(v=v||[]).push(Y,D))}l&&(v=v||[]).push("style",l);var Y=v;(i.updateQueue=Y)&&(i.flags|=4)}},gg=function(n,i,l,d){l!==d&&(i.flags|=4)};function No(n,i){if(!nt)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function At(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,d=0;if(i)for(var p=n.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=d,n.childLanes=l,i}function bx(n,i,l){var d=i.pendingProps;switch(Gc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(i),null;case 1:return jt(i.type)&&ja(),At(i),null;case 3:return d=i.stateNode,ei(),et(Ut),et(Et),nd(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(Ha(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Sn!==null&&(Md(Sn),Sn=null))),xd(n,i),At(i),null;case 5:ed(i);var p=us(Co.current);if(l=i.type,n!==null&&i.stateNode!=null)mg(n,i,l,d,p),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(t(166));return At(i),null}if(n=us(jn.current),Ha(i)){d=i.stateNode,l=i.type;var v=i.memoizedProps;switch(d[Un]=i,d[wo]=v,n=(i.mode&1)!==0,l){case"dialog":Je("cancel",d),Je("close",d);break;case"iframe":case"object":case"embed":Je("load",d);break;case"video":case"audio":for(p=0;p<vo.length;p++)Je(vo[p],d);break;case"source":Je("error",d);break;case"img":case"image":case"link":Je("error",d),Je("load",d);break;case"details":Je("toggle",d);break;case"input":se(d,v),Je("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!v.multiple},Je("invalid",d);break;case"textarea":bt(d,v),Je("invalid",d)}tc(l,v),p=null;for(var S in v)if(v.hasOwnProperty(S)){var N=v[S];S==="children"?typeof N=="string"?d.textContent!==N&&(v.suppressHydrationWarning!==!0&&Ba(d.textContent,N,n),p=["children",N]):typeof N=="number"&&d.textContent!==""+N&&(v.suppressHydrationWarning!==!0&&Ba(d.textContent,N,n),p=["children",""+N]):o.hasOwnProperty(S)&&N!=null&&S==="onScroll"&&Je("scroll",d)}switch(l){case"input":Ve(d),Le(d,v,!0);break;case"textarea":Ve(d),tr(d);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(d.onclick=za)}d=p,i.updateQueue=d,d!==null&&(i.flags|=4)}else{S=p.nodeType===9?p:p.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ds(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=S.createElement(l,{is:d.is}):(n=S.createElement(l),l==="select"&&(S=n,d.multiple?S.multiple=!0:d.size&&(S.size=d.size))):n=S.createElementNS(n,l),n[Un]=i,n[wo]=d,pg(n,i,!1,!1),i.stateNode=n;e:{switch(S=nc(l,d),l){case"dialog":Je("cancel",n),Je("close",n),p=d;break;case"iframe":case"object":case"embed":Je("load",n),p=d;break;case"video":case"audio":for(p=0;p<vo.length;p++)Je(vo[p],n);p=d;break;case"source":Je("error",n),p=d;break;case"img":case"image":case"link":Je("error",n),Je("load",n),p=d;break;case"details":Je("toggle",n),p=d;break;case"input":se(n,d),p=we(n,d),Je("invalid",n);break;case"option":p=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},p=K({},d,{value:void 0}),Je("invalid",n);break;case"textarea":bt(n,d),p=Oe(n,d),Je("invalid",n);break;default:p=d}tc(l,p),N=p;for(v in N)if(N.hasOwnProperty(v)){var D=N[v];v==="style"?ip(n,D):v==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&rp(n,D)):v==="children"?typeof D=="string"?(l!=="textarea"||D!=="")&&Zi(n,D):typeof D=="number"&&Zi(n,""+D):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?D!=null&&v==="onScroll"&&Je("scroll",n):D!=null&&L(n,v,D,S))}switch(l){case"input":Ve(n),Le(n,d,!1);break;case"textarea":Ve(n),tr(n);break;case"option":d.value!=null&&n.setAttribute("value",""+Q(d.value));break;case"select":n.multiple=!!d.multiple,v=d.value,v!=null?Pe(n,!!d.multiple,v,!1):d.defaultValue!=null&&Pe(n,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(n.onclick=za)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return At(i),null;case 6:if(n&&i.stateNode!=null)gg(n,i,n.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(t(166));if(l=us(Co.current),us(jn.current),Ha(i)){if(d=i.stateNode,l=i.memoizedProps,d[Un]=i,(v=d.nodeValue!==l)&&(n=Zt,n!==null))switch(n.tag){case 3:Ba(d.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ba(d.nodeValue,l,(n.mode&1)!==0)}v&&(i.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[Un]=i,i.stateNode=d}return At(i),null;case 13:if(et(st),d=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nt&&Qt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)_m(),Xs(),i.flags|=98560,v=!1;else if(v=Ha(i),d!==null&&d.dehydrated!==null){if(n===null){if(!v)throw Error(t(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Un]=i}else Xs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;At(i),v=!1}else Sn!==null&&(Md(Sn),Sn=null),v=!0;if(!v)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(st.current&1)!==0?gt===0&&(gt=3):Dd())),i.updateQueue!==null&&(i.flags|=4),At(i),null);case 4:return ei(),xd(n,i),n===null&&yo(i.stateNode.containerInfo),At(i),null;case 10:return Kc(i.type._context),At(i),null;case 17:return jt(i.type)&&ja(),At(i),null;case 19:if(et(st),v=i.memoizedState,v===null)return At(i),null;if(d=(i.flags&128)!==0,S=v.rendering,S===null)if(d)No(v,!1);else{if(gt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(S=Ja(n),S!==null){for(i.flags|=128,No(v,!1),d=S.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=l,l=i.child;l!==null;)v=l,n=d,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=n,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,n=S.dependencies,v.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Ze(st,st.current&1|2),i.child}n=n.sibling}v.tail!==null&&ut()>si&&(i.flags|=128,d=!0,No(v,!1),i.lanes=4194304)}else{if(!d)if(n=Ja(S),n!==null){if(i.flags|=128,d=!0,l=n.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),No(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!nt)return At(i),null}else 2*ut()-v.renderingStartTime>si&&l!==1073741824&&(i.flags|=128,d=!0,No(v,!1),i.lanes=4194304);v.isBackwards?(S.sibling=i.child,i.child=S):(l=v.last,l!==null?l.sibling=S:i.child=S,v.last=S)}return v.tail!==null?(i=v.tail,v.rendering=i,v.tail=i.sibling,v.renderingStartTime=ut(),i.sibling=null,l=st.current,Ze(st,d?l&1|2:l&1),i):(At(i),null);case 22:case 23:return Id(),d=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(i.flags|=8192),d&&(i.mode&1)!==0?(Jt&1073741824)!==0&&(At(i),i.subtreeFlags&6&&(i.flags|=8192)):At(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function Tx(n,i){switch(Gc(i),i.tag){case 1:return jt(i.type)&&ja(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ei(),et(Ut),et(Et),nd(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return ed(i),null;case 13:if(et(st),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Xs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return et(st),null;case 4:return ei(),null;case 10:return Kc(i.type._context),null;case 22:case 23:return Id(),null;case 24:return null;default:return null}}var ll=!1,Nt=!1,Cx=typeof WeakSet=="function"?WeakSet:Set,me=null;function ni(n,i){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){ot(n,i,d)}else l.current=null}function Sd(n,i,l){try{l()}catch(d){ot(n,i,d)}}var vg=!1;function kx(n,i){if(Ic=Pa,n=Kp(),kc(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,N=-1,D=-1,Y=0,oe=0,ae=n,ie=null;t:for(;;){for(var fe;ae!==l||p!==0&&ae.nodeType!==3||(N=S+p),ae!==v||d!==0&&ae.nodeType!==3||(D=S+d),ae.nodeType===3&&(S+=ae.nodeValue.length),(fe=ae.firstChild)!==null;)ie=ae,ae=fe;for(;;){if(ae===n)break t;if(ie===l&&++Y===p&&(N=S),ie===v&&++oe===d&&(D=S),(fe=ae.nextSibling)!==null)break;ae=ie,ie=ae.parentNode}ae=fe}l=N===-1||D===-1?null:{start:N,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(Dc={focusedElem:n,selectionRange:l},Pa=!1,me=i;me!==null;)if(i=me,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,me=n;else for(;me!==null;){i=me;try{var ge=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var _e=ge.memoizedProps,ct=ge.memoizedState,G=i.stateNode,F=G.getSnapshotBeforeUpdate(i.elementType===i.type?_e:bn(i.type,_e),ct);G.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var q=i.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ce){ot(i,i.return,ce)}if(n=i.sibling,n!==null){n.return=i.return,me=n;break}me=i.return}return ge=vg,vg=!1,ge}function Ro(n,i,l){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&n)===n){var v=p.destroy;p.destroy=void 0,v!==void 0&&Sd(i,l,v)}p=p.next}while(p!==d)}}function ul(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&n)===n){var d=l.create;l.destroy=d()}l=l.next}while(l!==i)}}function bd(n){var i=n.ref;if(i!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof i=="function"?i(n):i.current=n}}function yg(n){var i=n.alternate;i!==null&&(n.alternate=null,yg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Un],delete i[wo],delete i[Bc],delete i[lx],delete i[ux])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function _g(n){return n.tag===5||n.tag===3||n.tag===4}function wg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||_g(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Td(n,i,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(n,i):l.insertBefore(n,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(n,l)):(i=l,i.appendChild(n)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=za));else if(d!==4&&(n=n.child,n!==null))for(Td(n,i,l),n=n.sibling;n!==null;)Td(n,i,l),n=n.sibling}function Cd(n,i,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(Cd(n,i,l),n=n.sibling;n!==null;)Cd(n,i,l),n=n.sibling}var Tt=null,Tn=!1;function Dr(n,i,l){for(l=l.child;l!==null;)xg(n,i,l),l=l.sibling}function xg(n,i,l){if(zn&&typeof zn.onCommitFiberUnmount=="function")try{zn.onCommitFiberUnmount(Sa,l)}catch{}switch(l.tag){case 5:Nt||ni(l,i);case 6:var d=Tt,p=Tn;Tt=null,Dr(n,i,l),Tt=d,Tn=p,Tt!==null&&(Tn?(n=Tt,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):Tt.removeChild(l.stateNode));break;case 18:Tt!==null&&(Tn?(n=Tt,l=l.stateNode,n.nodeType===8?Vc(n.parentNode,l):n.nodeType===1&&Vc(n,l),lo(n)):Vc(Tt,l.stateNode));break;case 4:d=Tt,p=Tn,Tt=l.stateNode.containerInfo,Tn=!0,Dr(n,i,l),Tt=d,Tn=p;break;case 0:case 11:case 14:case 15:if(!Nt&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var v=p,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&Sd(l,i,S),p=p.next}while(p!==d)}Dr(n,i,l);break;case 1:if(!Nt&&(ni(l,i),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(N){ot(l,i,N)}Dr(n,i,l);break;case 21:Dr(n,i,l);break;case 22:l.mode&1?(Nt=(d=Nt)||l.memoizedState!==null,Dr(n,i,l),Nt=d):Dr(n,i,l);break;default:Dr(n,i,l)}}function Sg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new Cx),i.forEach(function(d){var p=Dx.bind(null,n,d);l.has(d)||(l.add(d),d.then(p,p))})}}function Cn(n,i){var l=i.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];try{var v=n,S=i,N=S;e:for(;N!==null;){switch(N.tag){case 5:Tt=N.stateNode,Tn=!1;break e;case 3:Tt=N.stateNode.containerInfo,Tn=!0;break e;case 4:Tt=N.stateNode.containerInfo,Tn=!0;break e}N=N.return}if(Tt===null)throw Error(t(160));xg(v,S,p),Tt=null,Tn=!1;var D=p.alternate;D!==null&&(D.return=null),p.return=null}catch(Y){ot(p,i,Y)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)bg(i,n),i=i.sibling}function bg(n,i){var l=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Cn(i,n),Wn(n),d&4){try{Ro(3,n,n.return),ul(3,n)}catch(_e){ot(n,n.return,_e)}try{Ro(5,n,n.return)}catch(_e){ot(n,n.return,_e)}}break;case 1:Cn(i,n),Wn(n),d&512&&l!==null&&ni(l,l.return);break;case 5:if(Cn(i,n),Wn(n),d&512&&l!==null&&ni(l,l.return),n.flags&32){var p=n.stateNode;try{Zi(p,"")}catch(_e){ot(n,n.return,_e)}}if(d&4&&(p=n.stateNode,p!=null)){var v=n.memoizedProps,S=l!==null?l.memoizedProps:v,N=n.type,D=n.updateQueue;if(n.updateQueue=null,D!==null)try{N==="input"&&v.type==="radio"&&v.name!=null&&he(p,v),nc(N,S);var Y=nc(N,v);for(S=0;S<D.length;S+=2){var oe=D[S],ae=D[S+1];oe==="style"?ip(p,ae):oe==="dangerouslySetInnerHTML"?rp(p,ae):oe==="children"?Zi(p,ae):L(p,oe,ae,Y)}switch(N){case"input":Me(p,v);break;case"textarea":on(p,v);break;case"select":var ie=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!v.multiple;var fe=v.value;fe!=null?Pe(p,!!v.multiple,fe,!1):ie!==!!v.multiple&&(v.defaultValue!=null?Pe(p,!!v.multiple,v.defaultValue,!0):Pe(p,!!v.multiple,v.multiple?[]:"",!1))}p[wo]=v}catch(_e){ot(n,n.return,_e)}}break;case 6:if(Cn(i,n),Wn(n),d&4){if(n.stateNode===null)throw Error(t(162));p=n.stateNode,v=n.memoizedProps;try{p.nodeValue=v}catch(_e){ot(n,n.return,_e)}}break;case 3:if(Cn(i,n),Wn(n),d&4&&l!==null&&l.memoizedState.isDehydrated)try{lo(i.containerInfo)}catch(_e){ot(n,n.return,_e)}break;case 4:Cn(i,n),Wn(n);break;case 13:Cn(i,n),Wn(n),p=n.child,p.flags&8192&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(Pd=ut())),d&4&&Sg(n);break;case 22:if(oe=l!==null&&l.memoizedState!==null,n.mode&1?(Nt=(Y=Nt)||oe,Cn(i,n),Nt=Y):Cn(i,n),Wn(n),d&8192){if(Y=n.memoizedState!==null,(n.stateNode.isHidden=Y)&&!oe&&(n.mode&1)!==0)for(me=n,oe=n.child;oe!==null;){for(ae=me=oe;me!==null;){switch(ie=me,fe=ie.child,ie.tag){case 0:case 11:case 14:case 15:Ro(4,ie,ie.return);break;case 1:ni(ie,ie.return);var ge=ie.stateNode;if(typeof ge.componentWillUnmount=="function"){d=ie,l=ie.return;try{i=d,ge.props=i.memoizedProps,ge.state=i.memoizedState,ge.componentWillUnmount()}catch(_e){ot(d,l,_e)}}break;case 5:ni(ie,ie.return);break;case 22:if(ie.memoizedState!==null){kg(ae);continue}}fe!==null?(fe.return=ie,me=fe):kg(ae)}oe=oe.sibling}e:for(oe=null,ae=n;;){if(ae.tag===5){if(oe===null){oe=ae;try{p=ae.stateNode,Y?(v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(N=ae.stateNode,D=ae.memoizedProps.style,S=D!=null&&D.hasOwnProperty("display")?D.display:null,N.style.display=sp("display",S))}catch(_e){ot(n,n.return,_e)}}}else if(ae.tag===6){if(oe===null)try{ae.stateNode.nodeValue=Y?"":ae.memoizedProps}catch(_e){ot(n,n.return,_e)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===n)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===n)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===n)break e;oe===ae&&(oe=null),ae=ae.return}oe===ae&&(oe=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:Cn(i,n),Wn(n),d&4&&Sg(n);break;case 21:break;default:Cn(i,n),Wn(n)}}function Wn(n){var i=n.flags;if(i&2){try{e:{for(var l=n.return;l!==null;){if(_g(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(Zi(p,""),d.flags&=-33);var v=wg(n);Cd(n,v,p);break;case 3:case 4:var S=d.stateNode.containerInfo,N=wg(n);Td(n,N,S);break;default:throw Error(t(161))}}catch(D){ot(n,n.return,D)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Ex(n,i,l){me=n,Tg(n)}function Tg(n,i,l){for(var d=(n.mode&1)!==0;me!==null;){var p=me,v=p.child;if(p.tag===22&&d){var S=p.memoizedState!==null||ll;if(!S){var N=p.alternate,D=N!==null&&N.memoizedState!==null||Nt;N=ll;var Y=Nt;if(ll=S,(Nt=D)&&!Y)for(me=p;me!==null;)S=me,D=S.child,S.tag===22&&S.memoizedState!==null?Eg(p):D!==null?(D.return=S,me=D):Eg(p);for(;v!==null;)me=v,Tg(v),v=v.sibling;me=p,ll=N,Nt=Y}Cg(n)}else(p.subtreeFlags&8772)!==0&&v!==null?(v.return=p,me=v):Cg(n)}}function Cg(n){for(;me!==null;){var i=me;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Nt||ul(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!Nt)if(l===null)d.componentDidMount();else{var p=i.elementType===i.type?l.memoizedProps:bn(i.type,l.memoizedProps);d.componentDidUpdate(p,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var v=i.updateQueue;v!==null&&km(i,v,d);break;case 3:var S=i.updateQueue;if(S!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}km(i,S,l)}break;case 5:var N=i.stateNode;if(l===null&&i.flags&4){l=N;var D=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&l.focus();break;case"img":D.src&&(l.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var Y=i.alternate;if(Y!==null){var oe=Y.memoizedState;if(oe!==null){var ae=oe.dehydrated;ae!==null&&lo(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Nt||i.flags&512&&bd(i)}catch(ie){ot(i,i.return,ie)}}if(i===n){me=null;break}if(l=i.sibling,l!==null){l.return=i.return,me=l;break}me=i.return}}function kg(n){for(;me!==null;){var i=me;if(i===n){me=null;break}var l=i.sibling;if(l!==null){l.return=i.return,me=l;break}me=i.return}}function Eg(n){for(;me!==null;){var i=me;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{ul(4,i)}catch(D){ot(i,l,D)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var p=i.return;try{d.componentDidMount()}catch(D){ot(i,p,D)}}var v=i.return;try{bd(i)}catch(D){ot(i,v,D)}break;case 5:var S=i.return;try{bd(i)}catch(D){ot(i,S,D)}}}catch(D){ot(i,i.return,D)}if(i===n){me=null;break}var N=i.sibling;if(N!==null){N.return=i.return,me=N;break}me=i.return}}var Px=Math.ceil,cl=V.ReactCurrentDispatcher,kd=V.ReactCurrentOwner,dn=V.ReactCurrentBatchConfig,Ue=0,wt=null,ft=null,Ct=0,Jt=0,ri=Nr(0),gt=0,Mo=null,ds=0,dl=0,Ed=0,Oo=null,Wt=null,Pd=0,si=1/0,ur=null,hl=!1,Ad=null,Lr=null,fl=!1,Fr=null,pl=0,Io=0,Nd=null,ml=-1,gl=0;function Lt(){return(Ue&6)!==0?ut():ml!==-1?ml:ml=ut()}function Vr(n){return(n.mode&1)===0?1:(Ue&2)!==0&&Ct!==0?Ct&-Ct:dx.transition!==null?(gl===0&&(gl=wp()),gl):(n=$e,n!==0||(n=window.event,n=n===void 0?16:Ap(n.type)),n)}function kn(n,i,l,d){if(50<Io)throw Io=0,Nd=null,Error(t(185));ro(n,l,d),((Ue&2)===0||n!==wt)&&(n===wt&&((Ue&2)===0&&(dl|=l),gt===4&&Br(n,Ct)),qt(n,d),l===1&&Ue===0&&(i.mode&1)===0&&(si=ut()+500,Wa&&Mr()))}function qt(n,i){var l=n.callbackNode;dw(n,i);var d=Ca(n,n===wt?Ct:0);if(d===0)l!==null&&vp(l),n.callbackNode=null,n.callbackPriority=0;else if(i=d&-d,n.callbackPriority!==i){if(l!=null&&vp(l),i===1)n.tag===0?cx(Ag.bind(null,n)):pm(Ag.bind(null,n)),ox(function(){(Ue&6)===0&&Mr()}),l=null;else{switch(xp(d)){case 1:l=uc;break;case 4:l=yp;break;case 16:l=xa;break;case 536870912:l=_p;break;default:l=xa}l=Fg(l,Pg.bind(null,n))}n.callbackPriority=i,n.callbackNode=l}}function Pg(n,i){if(ml=-1,gl=0,(Ue&6)!==0)throw Error(t(327));var l=n.callbackNode;if(ii()&&n.callbackNode!==l)return null;var d=Ca(n,n===wt?Ct:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||i)i=vl(n,d);else{i=d;var p=Ue;Ue|=2;var v=Rg();(wt!==n||Ct!==i)&&(ur=null,si=ut()+500,fs(n,i));do try{Rx();break}catch(N){Ng(n,N)}while(!0);Yc(),cl.current=v,Ue=p,ft!==null?i=0:(wt=null,Ct=0,i=gt)}if(i!==0){if(i===2&&(p=cc(n),p!==0&&(d=p,i=Rd(n,p))),i===1)throw l=Mo,fs(n,0),Br(n,d),qt(n,ut()),l;if(i===6)Br(n,d);else{if(p=n.current.alternate,(d&30)===0&&!Ax(p)&&(i=vl(n,d),i===2&&(v=cc(n),v!==0&&(d=v,i=Rd(n,v))),i===1))throw l=Mo,fs(n,0),Br(n,d),qt(n,ut()),l;switch(n.finishedWork=p,n.finishedLanes=d,i){case 0:case 1:throw Error(t(345));case 2:ps(n,Wt,ur);break;case 3:if(Br(n,d),(d&130023424)===d&&(i=Pd+500-ut(),10<i)){if(Ca(n,0)!==0)break;if(p=n.suspendedLanes,(p&d)!==d){Lt(),n.pingedLanes|=n.suspendedLanes&p;break}n.timeoutHandle=Fc(ps.bind(null,n,Wt,ur),i);break}ps(n,Wt,ur);break;case 4:if(Br(n,d),(d&4194240)===d)break;for(i=n.eventTimes,p=-1;0<d;){var S=31-wn(d);v=1<<S,S=i[S],S>p&&(p=S),d&=~v}if(d=p,d=ut()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Px(d/1960))-d,10<d){n.timeoutHandle=Fc(ps.bind(null,n,Wt,ur),d);break}ps(n,Wt,ur);break;case 5:ps(n,Wt,ur);break;default:throw Error(t(329))}}}return qt(n,ut()),n.callbackNode===l?Pg.bind(null,n):null}function Rd(n,i){var l=Oo;return n.current.memoizedState.isDehydrated&&(fs(n,i).flags|=256),n=vl(n,i),n!==2&&(i=Wt,Wt=l,i!==null&&Md(i)),n}function Md(n){Wt===null?Wt=n:Wt.push.apply(Wt,n)}function Ax(n){for(var i=n;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var p=l[d],v=p.getSnapshot;p=p.value;try{if(!xn(v(),p))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Br(n,i){for(i&=~Ed,i&=~dl,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var l=31-wn(i),d=1<<l;n[l]=-1,i&=~d}}function Ag(n){if((Ue&6)!==0)throw Error(t(327));ii();var i=Ca(n,0);if((i&1)===0)return qt(n,ut()),null;var l=vl(n,i);if(n.tag!==0&&l===2){var d=cc(n);d!==0&&(i=d,l=Rd(n,d))}if(l===1)throw l=Mo,fs(n,0),Br(n,i),qt(n,ut()),l;if(l===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,ps(n,Wt,ur),qt(n,ut()),null}function Od(n,i){var l=Ue;Ue|=1;try{return n(i)}finally{Ue=l,Ue===0&&(si=ut()+500,Wa&&Mr())}}function hs(n){Fr!==null&&Fr.tag===0&&(Ue&6)===0&&ii();var i=Ue;Ue|=1;var l=dn.transition,d=$e;try{if(dn.transition=null,$e=1,n)return n()}finally{$e=d,dn.transition=l,Ue=i,(Ue&6)===0&&Mr()}}function Id(){Jt=ri.current,et(ri)}function fs(n,i){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,ix(l)),ft!==null)for(l=ft.return;l!==null;){var d=l;switch(Gc(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&ja();break;case 3:ei(),et(Ut),et(Et),nd();break;case 5:ed(d);break;case 4:ei();break;case 13:et(st);break;case 19:et(st);break;case 10:Kc(d.type._context);break;case 22:case 23:Id()}l=l.return}if(wt=n,ft=n=zr(n.current,null),Ct=Jt=i,gt=0,Mo=null,Ed=dl=ds=0,Wt=Oo=null,ls!==null){for(i=0;i<ls.length;i++)if(l=ls[i],d=l.interleaved,d!==null){l.interleaved=null;var p=d.next,v=l.pending;if(v!==null){var S=v.next;v.next=p,d.next=S}l.pending=d}ls=null}return n}function Ng(n,i){do{var l=ft;try{if(Yc(),el.current=sl,tl){for(var d=it.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}tl=!1}if(cs=0,_t=mt=it=null,ko=!1,Eo=0,kd.current=null,l===null||l.return===null){gt=1,Mo=i,ft=null;break}e:{var v=n,S=l.return,N=l,D=i;if(i=Ct,N.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var Y=D,oe=N,ae=oe.tag;if((oe.mode&1)===0&&(ae===0||ae===11||ae===15)){var ie=oe.alternate;ie?(oe.updateQueue=ie.updateQueue,oe.memoizedState=ie.memoizedState,oe.lanes=ie.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var fe=tg(S);if(fe!==null){fe.flags&=-257,ng(fe,S,N,v,i),fe.mode&1&&eg(v,Y,i),i=fe,D=Y;var ge=i.updateQueue;if(ge===null){var _e=new Set;_e.add(D),i.updateQueue=_e}else ge.add(D);break e}else{if((i&1)===0){eg(v,Y,i),Dd();break e}D=Error(t(426))}}else if(nt&&N.mode&1){var ct=tg(S);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),ng(ct,S,N,v,i),$c(ti(D,N));break e}}v=D=ti(D,N),gt!==4&&(gt=2),Oo===null?Oo=[v]:Oo.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,i&=-i,v.lanes|=i;var G=Qm(v,D,i);Cm(v,G);break e;case 1:N=D;var F=v.type,q=v.stateNode;if((v.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Lr===null||!Lr.has(q)))){v.flags|=65536,i&=-i,v.lanes|=i;var ce=Jm(v,N,i);Cm(v,ce);break e}}v=v.return}while(v!==null)}Og(l)}catch(xe){i=xe,ft===l&&l!==null&&(ft=l=l.return);continue}break}while(!0)}function Rg(){var n=cl.current;return cl.current=sl,n===null?sl:n}function Dd(){(gt===0||gt===3||gt===2)&&(gt=4),wt===null||(ds&268435455)===0&&(dl&268435455)===0||Br(wt,Ct)}function vl(n,i){var l=Ue;Ue|=2;var d=Rg();(wt!==n||Ct!==i)&&(ur=null,fs(n,i));do try{Nx();break}catch(p){Ng(n,p)}while(!0);if(Yc(),Ue=l,cl.current=d,ft!==null)throw Error(t(261));return wt=null,Ct=0,gt}function Nx(){for(;ft!==null;)Mg(ft)}function Rx(){for(;ft!==null&&!nw();)Mg(ft)}function Mg(n){var i=Lg(n.alternate,n,Jt);n.memoizedProps=n.pendingProps,i===null?Og(n):ft=i,kd.current=null}function Og(n){var i=n;do{var l=i.alternate;if(n=i.return,(i.flags&32768)===0){if(l=bx(l,i,Jt),l!==null){ft=l;return}}else{if(l=Tx(l,i),l!==null){l.flags&=32767,ft=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{gt=6,ft=null;return}}if(i=i.sibling,i!==null){ft=i;return}ft=i=n}while(i!==null);gt===0&&(gt=5)}function ps(n,i,l){var d=$e,p=dn.transition;try{dn.transition=null,$e=1,Mx(n,i,l,d)}finally{dn.transition=p,$e=d}return null}function Mx(n,i,l,d){do ii();while(Fr!==null);if((Ue&6)!==0)throw Error(t(327));l=n.finishedWork;var p=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var v=l.lanes|l.childLanes;if(hw(n,v),n===wt&&(ft=wt=null,Ct=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||fl||(fl=!0,Fg(xa,function(){return ii(),null})),v=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||v){v=dn.transition,dn.transition=null;var S=$e;$e=1;var N=Ue;Ue|=4,kd.current=null,kx(n,l),bg(l,n),Qw(Dc),Pa=!!Ic,Dc=Ic=null,n.current=l,Ex(l),rw(),Ue=N,$e=S,dn.transition=v}else n.current=l;if(fl&&(fl=!1,Fr=n,pl=p),v=n.pendingLanes,v===0&&(Lr=null),ow(l.stateNode),qt(n,ut()),i!==null)for(d=n.onRecoverableError,l=0;l<i.length;l++)p=i[l],d(p.value,{componentStack:p.stack,digest:p.digest});if(hl)throw hl=!1,n=Ad,Ad=null,n;return(pl&1)!==0&&n.tag!==0&&ii(),v=n.pendingLanes,(v&1)!==0?n===Nd?Io++:(Io=0,Nd=n):Io=0,Mr(),null}function ii(){if(Fr!==null){var n=xp(pl),i=dn.transition,l=$e;try{if(dn.transition=null,$e=16>n?16:n,Fr===null)var d=!1;else{if(n=Fr,Fr=null,pl=0,(Ue&6)!==0)throw Error(t(331));var p=Ue;for(Ue|=4,me=n.current;me!==null;){var v=me,S=v.child;if((me.flags&16)!==0){var N=v.deletions;if(N!==null){for(var D=0;D<N.length;D++){var Y=N[D];for(me=Y;me!==null;){var oe=me;switch(oe.tag){case 0:case 11:case 15:Ro(8,oe,v)}var ae=oe.child;if(ae!==null)ae.return=oe,me=ae;else for(;me!==null;){oe=me;var ie=oe.sibling,fe=oe.return;if(yg(oe),oe===Y){me=null;break}if(ie!==null){ie.return=fe,me=ie;break}me=fe}}}var ge=v.alternate;if(ge!==null){var _e=ge.child;if(_e!==null){ge.child=null;do{var ct=_e.sibling;_e.sibling=null,_e=ct}while(_e!==null)}}me=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,me=S;else e:for(;me!==null;){if(v=me,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Ro(9,v,v.return)}var G=v.sibling;if(G!==null){G.return=v.return,me=G;break e}me=v.return}}var F=n.current;for(me=F;me!==null;){S=me;var q=S.child;if((S.subtreeFlags&2064)!==0&&q!==null)q.return=S,me=q;else e:for(S=F;me!==null;){if(N=me,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:ul(9,N)}}catch(xe){ot(N,N.return,xe)}if(N===S){me=null;break e}var ce=N.sibling;if(ce!==null){ce.return=N.return,me=ce;break e}me=N.return}}if(Ue=p,Mr(),zn&&typeof zn.onPostCommitFiberRoot=="function")try{zn.onPostCommitFiberRoot(Sa,n)}catch{}d=!0}return d}finally{$e=l,dn.transition=i}}return!1}function Ig(n,i,l){i=ti(l,i),i=Qm(n,i,1),n=Ir(n,i,1),i=Lt(),n!==null&&(ro(n,1,i),qt(n,i))}function ot(n,i,l){if(n.tag===3)Ig(n,n,l);else for(;i!==null;){if(i.tag===3){Ig(i,n,l);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Lr===null||!Lr.has(d))){n=ti(l,n),n=Jm(i,n,1),i=Ir(i,n,1),n=Lt(),i!==null&&(ro(i,1,n),qt(i,n));break}}i=i.return}}function Ox(n,i,l){var d=n.pingCache;d!==null&&d.delete(i),i=Lt(),n.pingedLanes|=n.suspendedLanes&l,wt===n&&(Ct&l)===l&&(gt===4||gt===3&&(Ct&130023424)===Ct&&500>ut()-Pd?fs(n,0):Ed|=l),qt(n,i)}function Dg(n,i){i===0&&((n.mode&1)===0?i=1:(i=Ta,Ta<<=1,(Ta&130023424)===0&&(Ta=4194304)));var l=Lt();n=or(n,i),n!==null&&(ro(n,i,l),qt(n,l))}function Ix(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),Dg(n,l)}function Dx(n,i){var l=0;switch(n.tag){case 13:var d=n.stateNode,p=n.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(i),Dg(n,l)}var Lg;Lg=function(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps||Ut.current)Gt=!0;else{if((n.lanes&l)===0&&(i.flags&128)===0)return Gt=!1,Sx(n,i,l);Gt=(n.flags&131072)!==0}else Gt=!1,nt&&(i.flags&1048576)!==0&&mm(i,$a,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;al(n,i),n=i.pendingProps;var p=Hs(i,Et.current);Js(i,l),p=id(null,i,d,n,p,l);var v=od();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,jt(d)?(v=!0,Ga(i)):v=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Qc(i),p.updater=il,i.stateNode=p,p._reactInternals=i,hd(i,d,n,l),i=gd(null,i,d,!0,v,l)):(i.tag=0,nt&&v&&jc(i),Dt(null,i,p,l),i=i.child),i;case 16:d=i.elementType;e:{switch(al(n,i),n=i.pendingProps,p=d._init,d=p(d._payload),i.type=d,p=i.tag=Fx(d),n=bn(d,n),p){case 0:i=md(null,i,d,n,l);break e;case 1:i=lg(null,i,d,n,l);break e;case 11:i=rg(null,i,d,n,l);break e;case 14:i=sg(null,i,d,bn(d.type,n),l);break e}throw Error(t(306,d,""))}return i;case 0:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:bn(d,p),md(n,i,d,p,l);case 1:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:bn(d,p),lg(n,i,d,p,l);case 3:e:{if(ug(i),n===null)throw Error(t(387));d=i.pendingProps,v=i.memoizedState,p=v.element,Tm(n,i),Qa(i,d,null,l);var S=i.memoizedState;if(d=S.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){p=ti(Error(t(423)),i),i=cg(n,i,d,l,p);break e}else if(d!==p){p=ti(Error(t(424)),i),i=cg(n,i,d,l,p);break e}else for(Qt=Ar(i.stateNode.containerInfo.firstChild),Zt=i,nt=!0,Sn=null,l=Sm(i,null,d,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Xs(),d===p){i=lr(n,i,l);break e}Dt(n,i,d,l)}i=i.child}return i;case 5:return Em(i),n===null&&qc(i),d=i.type,p=i.pendingProps,v=n!==null?n.memoizedProps:null,S=p.children,Lc(d,p)?S=null:v!==null&&Lc(d,v)&&(i.flags|=32),ag(n,i),Dt(n,i,S,l),i.child;case 6:return n===null&&qc(i),null;case 13:return dg(n,i,l);case 4:return Jc(i,i.stateNode.containerInfo),d=i.pendingProps,n===null?i.child=Zs(i,null,d,l):Dt(n,i,d,l),i.child;case 11:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:bn(d,p),rg(n,i,d,p,l);case 7:return Dt(n,i,i.pendingProps,l),i.child;case 8:return Dt(n,i,i.pendingProps.children,l),i.child;case 12:return Dt(n,i,i.pendingProps.children,l),i.child;case 10:e:{if(d=i.type._context,p=i.pendingProps,v=i.memoizedProps,S=p.value,Ze(Ka,d._currentValue),d._currentValue=S,v!==null)if(xn(v.value,S)){if(v.children===p.children&&!Ut.current){i=lr(n,i,l);break e}}else for(v=i.child,v!==null&&(v.return=i);v!==null;){var N=v.dependencies;if(N!==null){S=v.child;for(var D=N.firstContext;D!==null;){if(D.context===d){if(v.tag===1){D=ar(-1,l&-l),D.tag=2;var Y=v.updateQueue;if(Y!==null){Y=Y.shared;var oe=Y.pending;oe===null?D.next=D:(D.next=oe.next,oe.next=D),Y.pending=D}}v.lanes|=l,D=v.alternate,D!==null&&(D.lanes|=l),Xc(v.return,l,i),N.lanes|=l;break}D=D.next}}else if(v.tag===10)S=v.type===i.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=l,N=S.alternate,N!==null&&(N.lanes|=l),Xc(S,l,i),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===i){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}Dt(n,i,p.children,l),i=i.child}return i;case 9:return p=i.type,d=i.pendingProps.children,Js(i,l),p=un(p),d=d(p),i.flags|=1,Dt(n,i,d,l),i.child;case 14:return d=i.type,p=bn(d,i.pendingProps),p=bn(d.type,p),sg(n,i,d,p,l);case 15:return ig(n,i,i.type,i.pendingProps,l);case 17:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:bn(d,p),al(n,i),i.tag=1,jt(d)?(n=!0,Ga(i)):n=!1,Js(i,l),Xm(i,d,p),hd(i,d,p,l),gd(null,i,d,!0,n,l);case 19:return fg(n,i,l);case 22:return og(n,i,l)}throw Error(t(156,i.tag))};function Fg(n,i){return gp(n,i)}function Lx(n,i,l,d){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(n,i,l,d){return new Lx(n,i,l,d)}function Ld(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Fx(n){if(typeof n=="function")return Ld(n)?1:0;if(n!=null){if(n=n.$$typeof,n===B)return 11;if(n===te)return 14}return 2}function zr(n,i){var l=n.alternate;return l===null?(l=hn(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function yl(n,i,l,d,p,v){var S=2;if(d=n,typeof n=="function")Ld(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case R:return ms(l.children,p,v,i);case C:S=8,p|=8;break;case O:return n=hn(12,l,i,p|2),n.elementType=O,n.lanes=v,n;case H:return n=hn(13,l,i,p),n.elementType=H,n.lanes=v,n;case ee:return n=hn(19,l,i,p),n.elementType=ee,n.lanes=v,n;case J:return _l(l,p,v,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case U:S=10;break e;case W:S=9;break e;case B:S=11;break e;case te:S=14;break e;case X:S=16,d=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=hn(S,l,i,p),i.elementType=n,i.type=d,i.lanes=v,i}function ms(n,i,l,d){return n=hn(7,n,d,i),n.lanes=l,n}function _l(n,i,l,d){return n=hn(22,n,d,i),n.elementType=J,n.lanes=l,n.stateNode={isHidden:!1},n}function Fd(n,i,l){return n=hn(6,n,null,i),n.lanes=l,n}function Vd(n,i,l){return i=hn(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Vx(n,i,l,d,p){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dc(0),this.expirationTimes=dc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dc(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Bd(n,i,l,d,p,v,S,N,D){return n=new Vx(n,i,l,N,D),i===1?(i=1,v===!0&&(i|=8)):i=0,v=hn(3,null,null,i),n.current=v,v.stateNode=n,v.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qc(v),n}function Bx(n,i,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:d==null?null:""+d,children:n,containerInfo:i,implementation:l}}function Vg(n){if(!n)return Rr;n=n._reactInternals;e:{if(rs(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(jt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var l=n.type;if(jt(l))return hm(n,l,i)}return i}function Bg(n,i,l,d,p,v,S,N,D){return n=Bd(l,d,!0,n,p,v,S,N,D),n.context=Vg(null),l=n.current,d=Lt(),p=Vr(l),v=ar(d,p),v.callback=i??null,Ir(l,v,p),n.current.lanes=p,ro(n,p,d),qt(n,d),n}function wl(n,i,l,d){var p=i.current,v=Lt(),S=Vr(p);return l=Vg(l),i.context===null?i.context=l:i.pendingContext=l,i=ar(v,S),i.payload={element:n},d=d===void 0?null:d,d!==null&&(i.callback=d),n=Ir(p,i,S),n!==null&&(kn(n,p,S,v),Za(n,p,S)),S}function xl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function zg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function zd(n,i){zg(n,i),(n=n.alternate)&&zg(n,i)}function zx(){return null}var Ug=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ud(n){this._internalRoot=n}Sl.prototype.render=Ud.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));wl(n,i,null,null)},Sl.prototype.unmount=Ud.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;hs(function(){wl(null,n,null,null)}),i[nr]=null}};function Sl(n){this._internalRoot=n}Sl.prototype.unstable_scheduleHydration=function(n){if(n){var i=Tp();n={blockedOn:null,target:n,priority:i};for(var l=0;l<kr.length&&i!==0&&i<kr[l].priority;l++);kr.splice(l,0,n),l===0&&Ep(n)}};function jd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function bl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function jg(){}function Ux(n,i,l,d,p){if(p){if(typeof d=="function"){var v=d;d=function(){var Y=xl(S);v.call(Y)}}var S=Bg(i,d,n,0,null,!1,!1,"",jg);return n._reactRootContainer=S,n[nr]=S.current,yo(n.nodeType===8?n.parentNode:n),hs(),S}for(;p=n.lastChild;)n.removeChild(p);if(typeof d=="function"){var N=d;d=function(){var Y=xl(D);N.call(Y)}}var D=Bd(n,0,!1,null,null,!1,!1,"",jg);return n._reactRootContainer=D,n[nr]=D.current,yo(n.nodeType===8?n.parentNode:n),hs(function(){wl(i,D,l,d)}),D}function Tl(n,i,l,d,p){var v=l._reactRootContainer;if(v){var S=v;if(typeof p=="function"){var N=p;p=function(){var D=xl(S);N.call(D)}}wl(i,S,n,p)}else S=Ux(l,i,n,p,d);return xl(S)}Sp=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var l=no(i.pendingLanes);l!==0&&(hc(i,l|1),qt(i,ut()),(Ue&6)===0&&(si=ut()+500,Mr()))}break;case 13:hs(function(){var d=or(n,1);if(d!==null){var p=Lt();kn(d,n,1,p)}}),zd(n,1)}},fc=function(n){if(n.tag===13){var i=or(n,134217728);if(i!==null){var l=Lt();kn(i,n,134217728,l)}zd(n,134217728)}},bp=function(n){if(n.tag===13){var i=Vr(n),l=or(n,i);if(l!==null){var d=Lt();kn(l,n,i,d)}zd(n,i)}},Tp=function(){return $e},Cp=function(n,i){var l=$e;try{return $e=n,i()}finally{$e=l}},ic=function(n,i,l){switch(i){case"input":if(Me(n,l),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var d=l[i];if(d!==n&&d.form===n.form){var p=Ua(d);if(!p)throw Error(t(90));ze(d),Me(d,p)}}}break;case"textarea":on(n,l);break;case"select":i=l.value,i!=null&&Pe(n,!!l.multiple,i,!1)}},up=Od,cp=hs;var jx={usingClientEntryPoint:!1,Events:[xo,qs,Ua,ap,lp,Od]},Do={findFiberByHostInstance:ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gx={bundleType:Do.bundleType,version:Do.version,rendererPackageName:Do.rendererPackageName,rendererConfig:Do.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=pp(n),n===null?null:n.stateNode},findFiberByHostInstance:Do.findFiberByHostInstance||zx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{Sa=Cl.inject(Gx),zn=Cl}catch{}}return $t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jx,$t.createPortal=function(n,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jd(i))throw Error(t(200));return Bx(n,i,null,l)},$t.createRoot=function(n,i){if(!jd(n))throw Error(t(299));var l=!1,d="",p=Ug;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=Bd(n,1,!1,null,null,l,!1,d,p),n[nr]=i.current,yo(n.nodeType===8?n.parentNode:n),new Ud(i)},$t.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=pp(i),n=n===null?null:n.stateNode,n},$t.flushSync=function(n){return hs(n)},$t.hydrate=function(n,i,l){if(!bl(i))throw Error(t(200));return Tl(null,n,i,!0,l)},$t.hydrateRoot=function(n,i,l){if(!jd(n))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,p=!1,v="",S=Ug;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),i=Bg(i,null,n,1,l??null,p,!1,v,S),n[nr]=i.current,yo(n),d)for(n=0;n<d.length;n++)l=d[n],p=l._getVersion,p=p(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,p]:i.mutableSourceEagerHydrationData.push(l,p);return new Sl(i)},$t.render=function(n,i,l){if(!bl(i))throw Error(t(200));return Tl(null,n,i,!1,l)},$t.unmountComponentAtNode=function(n){if(!bl(n))throw Error(t(40));return n._reactRootContainer?(hs(function(){Tl(null,null,n,!1,function(){n._reactRootContainer=null,n[nr]=null})}),!0):!1},$t.unstable_batchedUpdates=Od,$t.unstable_renderSubtreeIntoContainer=function(n,i,l,d){if(!bl(l))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Tl(n,i,l,!1,d)},$t.version="18.3.1-next-f1338f8080-20240426",$t}var Xg;function ay(){if(Xg)return qd.exports;Xg=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),qd.exports=Jx(),qd.exports}var Zg;function eS(){if(Zg)return kl;Zg=1;var s=ay();return kl.createRoot=s.createRoot,kl.hydrateRoot=s.hydrateRoot,kl}var tS=eS(),nS="Invariant failed";function fr(s,e){if(!s)throw new Error(nS)}const Si=new WeakMap,Wl=new WeakMap,Ql={current:[]};let Yd=!1,zo=0;const Vo=new Set,El=new Map;function ly(s){const e=Array.from(s).sort((t,r)=>t instanceof bi&&t.options.deps.includes(r)?1:r instanceof bi&&r.options.deps.includes(t)?-1:0);for(const t of e){if(Ql.current.includes(t))continue;Ql.current.push(t),t.recompute();const r=Wl.get(t);if(r)for(const o of r){const a=Si.get(o);a&&ly(a)}}}function rS(s){s.listeners.forEach(e=>e({prevVal:s.prevState,currentVal:s.state}))}function sS(s){s.listeners.forEach(e=>e({prevVal:s.prevState,currentVal:s.state}))}function uy(s){if(zo>0&&!El.has(s)&&El.set(s,s.prevState),Vo.add(s),!(zo>0)&&!Yd)try{for(Yd=!0;Vo.size>0;){const e=Array.from(Vo);Vo.clear();for(const t of e){const r=El.get(t)??t.prevState;t.prevState=r,rS(t)}for(const t of e){const r=Si.get(t);r&&(Ql.current.push(t),ly(r))}for(const t of e){const r=Si.get(t);if(r)for(const o of r)sS(o)}}}finally{Yd=!1,Ql.current=[],El.clear()}}function oi(s){zo++;try{s()}finally{if(zo--,zo===0){const e=Array.from(Vo)[0];e&&uy(e)}}}function iS(s){return typeof s=="function"}class _h{constructor(e,t){this.listeners=new Set,this.subscribe=r=>{var o,a;this.listeners.add(r);const u=(a=(o=this.options)==null?void 0:o.onSubscribe)==null?void 0:a.call(o,r,this);return()=>{this.listeners.delete(r),u==null||u()}},this.prevState=e,this.state=e,this.options=t}setState(e){var t,r,o;this.prevState=this.state,(t=this.options)!=null&&t.updateFn?this.state=this.options.updateFn(this.prevState)(e):iS(e)?this.state=e(this.prevState):this.state=e,(o=(r=this.options)==null?void 0:r.onUpdate)==null||o.call(r),uy(this)}}class bi{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const t=[],r=[];for(const o of this.options.deps)t.push(o.prevState),r.push(o.state);return this.lastSeenDepValues=r,{prevDepVals:t,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var t,r;this.prevState=this.state;const{prevDepVals:o,currDepVals:a,prevVal:u}=this.getDepVals();this.state=this.options.fn({prevDepVals:o,currDepVals:a,prevVal:u}),(r=(t=this.options).onUpdate)==null||r.call(t)},this.checkIfRecalculationNeededDeeply=()=>{for(const a of this.options.deps)a instanceof bi&&a.checkIfRecalculationNeededDeeply();let t=!1;const r=this.lastSeenDepValues,{currDepVals:o}=this.getDepVals();for(let a=0;a<o.length;a++)if(o[a]!==r[a]){t=!0;break}t&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const t of this._subscriptions)t()}),this.subscribe=t=>{var r,o;this.listeners.add(t);const a=(o=(r=this.options).onSubscribe)==null?void 0:o.call(r,t,this);return()=>{this.listeners.delete(t),a==null||a()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const t of e)if(t instanceof bi)t.registerOnGraph(),this.registerOnGraph(t.options.deps);else if(t instanceof _h){let r=Si.get(t);r||(r=new Set,Si.set(t,r)),r.add(this);let o=Wl.get(this);o||(o=new Set,Wl.set(this,o)),o.add(t)}}unregisterFromGraph(e=this.options.deps){for(const t of e)if(t instanceof bi)this.unregisterFromGraph(t.options.deps);else if(t instanceof _h){const r=Si.get(t);r&&r.delete(this);const o=Wl.get(this);o&&o.delete(t)}}}const Kr="__TSR_index",Qg="popstate",Jg="beforeunload";function cy(s){let e=s.getLocation();const t=new Set,r=u=>{e=s.getLocation(),t.forEach(c=>c({location:e,action:u}))},o=u=>{s.notifyOnIndexChange??!0?r(u):e=s.getLocation()},a=async({task:u,navigateOpts:c,...h})=>{var f,m;if((c==null?void 0:c.ignoreBlocker)??!1){u();return}const y=((f=s.getBlockers)==null?void 0:f.call(s))??[],x=h.type==="PUSH"||h.type==="REPLACE";if(typeof document<"u"&&y.length&&x)for(const w of y){const _=Ho(h.path,h.state);if(await w.blockerFn({currentLocation:e,nextLocation:_,action:h.type})){(m=s.onBlocked)==null||m.call(s);return}}u()};return{get location(){return e},get length(){return s.getLength()},subscribers:t,subscribe:u=>(t.add(u),()=>{t.delete(u)}),push:(u,c,h)=>{const f=e.state[Kr];c=wh(f+1,c),a({task:()=>{s.pushState(u,c),r({type:"PUSH"})},navigateOpts:h,type:"PUSH",path:u,state:c})},replace:(u,c,h)=>{const f=e.state[Kr];c=wh(f,c),a({task:()=>{s.replaceState(u,c),r({type:"REPLACE"})},navigateOpts:h,type:"REPLACE",path:u,state:c})},go:(u,c)=>{a({task:()=>{s.go(u),o({type:"GO",index:u})},navigateOpts:c,type:"GO"})},back:u=>{a({task:()=>{s.back((u==null?void 0:u.ignoreBlocker)??!1),o({type:"BACK"})},navigateOpts:u,type:"BACK"})},forward:u=>{a({task:()=>{s.forward((u==null?void 0:u.ignoreBlocker)??!1),o({type:"FORWARD"})},navigateOpts:u,type:"FORWARD"})},canGoBack:()=>e.state[Kr]!==0,createHref:u=>s.createHref(u),block:u=>{var c;if(!s.setBlockers)return()=>{};const h=((c=s.getBlockers)==null?void 0:c.call(s))??[];return s.setBlockers([...h,u]),()=>{var f,m;const g=((f=s.getBlockers)==null?void 0:f.call(s))??[];(m=s.setBlockers)==null||m.call(s,g.filter(y=>y!==u))}},flush:()=>{var u;return(u=s.flush)==null?void 0:u.call(s)},destroy:()=>{var u;return(u=s.destroy)==null?void 0:u.call(s)},notify:r}}function wh(s,e){return e||(e={}),{...e,key:Zh(),[Kr]:s}}function oS(s){var e;const t=typeof document<"u"?window:void 0,r=t.history.pushState,o=t.history.replaceState;let a=[];const u=()=>a,c=O=>a=O,h=O=>O,f=()=>Ho(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state);(e=t.history.state)!=null&&e.key||t.history.replaceState({[Kr]:0,key:Zh()},"");let m=f(),g,y=!1,x=!1,w=!1,_=!1;const b=()=>m;let T,M;const L=()=>{T&&(C._ignoreSubscribers=!0,(T.isPush?t.history.pushState:t.history.replaceState)(T.state,"",T.href),C._ignoreSubscribers=!1,T=void 0,M=void 0,g=void 0)},V=(O,U,W)=>{const B=h(U);M||(g=m),m=Ho(U,W),T={href:B,state:W,isPush:(T==null?void 0:T.isPush)||O==="push"},M||(M=Promise.resolve().then(()=>L()))},E=O=>{m=f(),C.notify({type:O})},P=async()=>{if(x){x=!1;return}const O=f(),U=O.state[Kr]-m.state[Kr],W=U===1,B=U===-1,H=!W&&!B||y;y=!1;const ee=H?"GO":B?"BACK":"FORWARD",te=H?{type:"GO",index:U}:{type:B?"BACK":"FORWARD"};if(w)w=!1;else{const X=u();if(typeof document<"u"&&X.length){for(const J of X)if(await J.blockerFn({currentLocation:m,nextLocation:O,action:ee})){x=!0,t.history.go(1),C.notify(te);return}}}m=f(),C.notify(te)},R=O=>{if(_){_=!1;return}let U=!1;const W=u();if(typeof document<"u"&&W.length)for(const B of W){const H=B.enableBeforeUnload??!0;if(H===!0){U=!0;break}if(typeof H=="function"&&H()===!0){U=!0;break}}if(U)return O.preventDefault(),O.returnValue=""},C=cy({getLocation:b,getLength:()=>t.history.length,pushState:(O,U)=>V("push",O,U),replaceState:(O,U)=>V("replace",O,U),back:O=>(O&&(w=!0),_=!0,t.history.back()),forward:O=>{O&&(w=!0),_=!0,t.history.forward()},go:O=>{y=!0,t.history.go(O)},createHref:O=>h(O),flush:L,destroy:()=>{t.history.pushState=r,t.history.replaceState=o,t.removeEventListener(Jg,R,{capture:!0}),t.removeEventListener(Qg,P)},onBlocked:()=>{g&&m!==g&&(m=g)},getBlockers:u,setBlockers:c,notifyOnIndexChange:!1});return t.addEventListener(Jg,R,{capture:!0}),t.addEventListener(Qg,P),t.history.pushState=function(...O){const U=r.apply(t.history,O);return C._ignoreSubscribers||E("PUSH"),U},t.history.replaceState=function(...O){const U=o.apply(t.history,O);return C._ignoreSubscribers||E("REPLACE"),U},C}function aS(s={initialEntries:["/"]}){const e=s.initialEntries;let t=s.initialIndex?Math.min(Math.max(s.initialIndex,0),e.length-1):e.length-1;const r=e.map((a,u)=>wh(u,void 0));return cy({getLocation:()=>Ho(e[t],r[t]),getLength:()=>e.length,pushState:(a,u)=>{t<e.length-1&&(e.splice(t+1),r.splice(t+1)),r.push(u),e.push(a),t=Math.max(e.length-1,0)},replaceState:(a,u)=>{r[t]=u,e[t]=a},back:()=>{t=Math.max(t-1,0)},forward:()=>{t=Math.min(t+1,e.length-1)},go:a=>{t=Math.min(Math.max(t+a,0),e.length-1)},createHref:a=>a})}function Ho(s,e){const t=s.indexOf("#"),r=s.indexOf("?");return{href:s,pathname:s.substring(0,t>0?r>0?Math.min(t,r):t:r>0?r:s.length),hash:t>-1?s.substring(t):"",search:r>-1?s.slice(r,t===-1?void 0:t):"",state:e||{[Kr]:0,key:Zh()}}}function Zh(){return(Math.random()+1).toString(36).substring(7)}function pi(s){return s[s.length-1]}function lS(s){return typeof s=="function"}function ws(s,e){return lS(s)?s(e):s}function xh(s,e){return e.reduce((t,r)=>(t[r]=s[r],t),{})}function fn(s,e){if(s===e)return s;const t=e,r=nv(s)&&nv(t);if(r||ev(s)&&ev(t)){const o=r?s:Object.keys(s).concat(Object.getOwnPropertySymbols(s)),a=o.length,u=r?t:Object.keys(t).concat(Object.getOwnPropertySymbols(t)),c=u.length,h=r?[]:{};let f=0;for(let m=0;m<c;m++){const g=r?m:u[m];(!r&&o.includes(g)||r)&&s[g]===void 0&&t[g]===void 0?(h[g]=void 0,f++):(h[g]=fn(s[g],t[g]),h[g]===s[g]&&s[g]!==void 0&&f++)}return a===c&&f===a?s:h}return t}function ev(s){return Sh(s)&&Object.getOwnPropertyNames(s).length===Object.keys(s).length}function Sh(s){if(!tv(s))return!1;const e=s.constructor;if(typeof e>"u")return!0;const t=e.prototype;return!(!tv(t)||!t.hasOwnProperty("isPrototypeOf"))}function tv(s){return Object.prototype.toString.call(s)==="[object Object]"}function nv(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function rv(s,e){let t=Object.keys(s);return e&&(t=t.filter(r=>s[r]!==void 0)),t}function Ti(s,e,t){if(s===e)return!0;if(typeof s!=typeof e)return!1;if(Sh(s)&&Sh(e)){const r=(t==null?void 0:t.ignoreUndefined)??!0,o=rv(s,r),a=rv(e,r);return!(t!=null&&t.partial)&&o.length!==a.length?!1:a.every(u=>Ti(s[u],e[u],t))}return Array.isArray(s)&&Array.isArray(e)?s.length!==e.length?!1:!s.some((r,o)=>!Ti(r,e[o],t)):!1}function hi(s){let e,t;const r=new Promise((o,a)=>{e=o,t=a});return r.status="pending",r.resolve=o=>{r.status="resolved",r.value=o,e(o),s==null||s(o)},r.reject=o=>{r.status="rejected",t(o)},r}function uS(s){return/%[0-9A-Fa-f]{2}/.test(s)}function mr(s){return xu(s.filter(e=>e!==void 0).join("/"))}function xu(s){return s.replace(/\/{2,}/g,"/")}function Qh(s){return s==="/"?s:s.replace(/^\/{1,}/,"")}function xs(s){return s==="/"?s:s.replace(/\/{1,}$/,"")}function cS(s){return xs(Qh(s))}function Jl(s,e){return s!=null&&s.endsWith("/")&&s!=="/"&&s!==`${e}/`?s.slice(0,-1):s}function dS(s,e,t){return Jl(s,t)===Jl(e,t)}function hS({basepath:s,base:e,to:t,trailingSlash:r="never",caseSensitive:o}){var a,u;e=eu(s,e,o),t=eu(s,t,o);let c=Ri(e);const h=Ri(t);c.length>1&&((a=pi(c))==null?void 0:a.value)==="/"&&c.pop(),h.forEach((m,g)=>{m.value==="/"?g?g===h.length-1&&c.push(m):c=[m]:m.value===".."?c.pop():m.value==="."||c.push(m)}),c.length>1&&(((u=pi(c))==null?void 0:u.value)==="/"?r==="never"&&c.pop():r==="always"&&c.push({type:"pathname",value:"/"}));const f=mr([s,...c.map(m=>m.value)]);return xu(f)}function Ri(s){if(!s)return[];s=xu(s);const e=[];if(s.slice(0,1)==="/"&&(s=s.substring(1),e.push({type:"pathname",value:"/"})),!s)return e;const t=s.split("/").filter(Boolean);return e.push(...t.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:r.includes("%25")?r.split("%25").map(o=>decodeURI(o)).join("%25"):decodeURI(r)})),s.slice(-1)==="/"&&(s=s.substring(1),e.push({type:"pathname",value:"/"})),e}function Pl({path:s,params:e,leaveWildcards:t,leaveParams:r,decodeCharMap:o}){const a=Ri(s);function u(m){const g=e[m],y=typeof g=="string";return["*","_splat"].includes(m)?y?encodeURI(g):g:y?fS(g,o):g}let c=!1;const h={},f=mr(a.map(m=>{if(m.type==="wildcard"){h._splat=e._splat;const g=u("_splat");return t?`${m.value}${g??""}`:g}if(m.type==="param"){const g=m.value.substring(1);if(!c&&!(g in e)&&(c=!0),h[g]=e[g],r){const y=u(m.value);return`${m.value}${y??""}`}return u(g)??"undefined"}return m.value}));return{usedParams:h,interpolatedPath:f,isMissingParams:c}}function fS(s,e){let t=encodeURIComponent(s);if(e)for(const[r,o]of e)t=t.replaceAll(r,o);return t}function Al(s,e,t){const r=pS(s,e,t);if(!(t.to&&!r))return r??{}}function eu(s,e,t=!1){const r=t?s:s.toLowerCase(),o=t?e:e.toLowerCase();switch(!0){case r==="/":return e;case o===r:return"";case e.length<s.length:return e;case o[r.length]!=="/":return e;case o.startsWith(r):return e.slice(s.length);default:return e}}function pS(s,e,t){if(s!=="/"&&!e.startsWith(s))return;e=eu(s,e,t.caseSensitive);const r=eu(s,`${t.to??"$"}`,t.caseSensitive),o=Ri(e),a=Ri(r);e.startsWith("/")||o.unshift({type:"pathname",value:"/"}),r.startsWith("/")||a.unshift({type:"pathname",value:"/"});const u={};return(()=>{for(let h=0;h<Math.max(o.length,a.length);h++){const f=o[h],m=a[h],g=h>=o.length-1,y=h>=a.length-1;if(m){if(m.type==="wildcard"){const x=decodeURI(mr(o.slice(h).map(w=>w.value)));return u["*"]=x,u._splat=x,!0}if(m.type==="pathname"){if(m.value==="/"&&!(f!=null&&f.value))return!0;if(f){if(t.caseSensitive){if(m.value!==f.value)return!1}else if(m.value.toLowerCase()!==f.value.toLowerCase())return!1}}if(!f)return!1;if(m.type==="param"){if(f.value==="/")return!1;f.value.charAt(0)!=="$"&&(u[m.value.substring(1)]=decodeURIComponent(f.value))}}if(!g&&y)return u["**"]=mr(o.slice(h+1).map(x=>x.value)),!!t.fuzzy&&(m==null?void 0:m.value)!=="/"}return!0})()?u:void 0}function pn(s){return!!(s!=null&&s.isNotFound)}function mS(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{return}}const tu="tsr-scroll-restoration-v1_3",gS=(s,e)=>{let t;return(...r)=>{t||(t=setTimeout(()=>{s(...r),t=null},e))}};function vS(){const s=mS();if(!s)return;const e=s.getItem(tu);let t=e?JSON.parse(e):{};return{state:t,set:r=>(t=ws(r,t)||t,s.setItem(tu,JSON.stringify(t)))}}const Kd=vS(),bh=s=>s.state.key||s.href;function yS(s){const e=[];let t;for(;t=s.parentNode;)e.unshift(`${s.tagName}:nth-child(${[].indexOf.call(t.children,s)+1})`),s=t;return`${e.join(" > ")}`.toLowerCase()}let nu=!1;function dy(s,e,t,r,o){var a;let u;try{u=JSON.parse(sessionStorage.getItem(s)||"{}")}catch(f){console.error(f);return}const c=e||((a=window.history.state)==null?void 0:a.key),h=u[c];nu=!0,(()=>{if(r&&h){for(const m in h){const g=h[m];if(m==="window")window.scrollTo({top:g.scrollY,left:g.scrollX,behavior:t});else if(m){const y=document.querySelector(m);y&&(y.scrollLeft=g.scrollX,y.scrollTop=g.scrollY)}}return}const f=window.location.hash.split("#")[1];if(f){const m=(window.history.state||{}).__hashScrollIntoViewOptions??!0;if(m){const g=document.getElementById(f);g&&g.scrollIntoView(m)}return}["window",...(o==null?void 0:o.filter(m=>m!=="window"))??[]].forEach(m=>{const g=m==="window"?window:document.querySelector(m);g&&g.scrollTo({top:0,left:0,behavior:t})})})(),nu=!1}function _S(s,e){if(Kd===void 0||((s.options.scrollRestoration??!1)&&(s.isScrollRestoring=!0),typeof document>"u"||s.isScrollRestorationSetup))return;s.isScrollRestorationSetup=!0,nu=!1;const r=s.options.getScrollRestorationKey||bh;window.history.scrollRestoration="manual";const o=a=>{if(nu||!s.isScrollRestoring)return;let u="";if(a.target===document||a.target===window)u="window";else{const h=a.target.getAttribute("data-scroll-restoration-id");h?u=`[data-scroll-restoration-id="${h}"]`:u=yS(a.target)}const c=r(s.state.location);Kd.set(h=>{const f=h[c]=h[c]||{},m=f[u]=f[u]||{};if(u==="window")m.scrollX=window.scrollX||0,m.scrollY=window.scrollY||0;else if(u){const g=document.querySelector(u);g&&(m.scrollX=g.scrollLeft||0,m.scrollY=g.scrollTop||0)}return h})};typeof document<"u"&&document.addEventListener("scroll",gS(o,100),!0),s.subscribe("onRendered",a=>{const u=r(a.toLocation);if(!s.resetNextScroll){s.resetNextScroll=!0;return}dy(tu,u,s.options.scrollRestorationBehavior||void 0,s.isScrollRestoring||void 0,s.options.scrollToTopSelectors||void 0),s.isScrollRestoring&&Kd.set(c=>(c[u]=c[u]||{},c))})}function wS(s){if(typeof document<"u"&&document.querySelector){const e=s.state.location.state.__hashScrollIntoViewOptions??!0;if(e&&s.state.location.hash!==""){const t=document.getElementById(s.state.location.hash);t&&t.scrollIntoView(e)}}}function xS(s,e){const t=Object.entries(s).flatMap(([o,a])=>Array.isArray(a)?a.map(u=>[o,String(u)]):[[o,String(a)]]);return""+new URLSearchParams(t).toString()}function Xd(s){if(!s)return"";const e=uS(s)?decodeURIComponent(s):decodeURIComponent(encodeURIComponent(s));return e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e}function SS(s,e){const t=s;return[...new URLSearchParams(t).entries()].reduce((a,[u,c])=>{const h=a[u];return h==null?a[u]=Xd(c):a[u]=Array.isArray(h)?[...h,Xd(c)]:[h,Xd(c)],a},{})}const bS=CS(JSON.parse),TS=kS(JSON.stringify,JSON.parse);function CS(s){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const t=SS(e);for(const r in t){const o=t[r];if(typeof o=="string")try{t[r]=s(o)}catch{}}return t}}function kS(s,e){function t(r){if(typeof r=="object"&&r!==null)try{return s(r)}catch{}else if(typeof r=="string"&&typeof e=="function")try{return e(r),s(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(a=>{const u=r[a];typeof u>"u"||u===void 0?delete r[a]:r[a]=t(u)});const o=xS(r).toString();return o?`?${o}`:""}}const En="__root__";function vs(s){return!!(s!=null&&s.isRedirect)}function Zd(s){return!!(s!=null&&s.isRedirect)&&s.href}function Ts(s){const e=s.resolvedLocation,t=s.location,r=(e==null?void 0:e.pathname)!==t.pathname,o=(e==null?void 0:e.href)!==t.href,a=(e==null?void 0:e.hash)!==t.hash;return{fromLocation:e,toLocation:t,pathChanged:r,hrefChanged:o,hashChanged:a}}class ES{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=t=>t(),this.update=t=>{var r;t.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const o=this.options;this.options={...this.options,...t},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(a=>[encodeURIComponent(a),a])):void 0,(!this.basepath||t.basepath&&t.basepath!==o.basepath)&&(t.basepath===void 0||t.basepath===""||t.basepath==="/"?this.basepath="/":this.basepath=`/${cS(t.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?aS({initialEntries:[this.basepath||"/"]}):oS()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new _h(AS(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(a=>!["redirected"].includes(a.status))}}}),_S(this)),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const t=this.options.notFoundRoute;t&&(t.init({originalIndex:99999999999,defaultSsr:this.options.defaultSsr}),this.routesById[t.id]=t);const r=u=>{u.forEach((c,h)=>{c.init({originalIndex:h,defaultSsr:this.options.defaultSsr});const f=this.routesById[c.id];if(fr(!f,`Duplicate routes found with id: ${String(c.id)}`),this.routesById[c.id]=c,!c.isRoot&&c.path){const g=xs(c.fullPath);(!this.routesByPath[g]||c.fullPath.endsWith("/"))&&(this.routesByPath[g]=c)}const m=c.children;m!=null&&m.length&&r(m)})};r([this.routeTree]);const o=[];Object.values(this.routesById).forEach((u,c)=>{var h;if(u.isRoot||!u.path)return;const f=Qh(u.fullPath),m=Ri(f);for(;m.length>1&&((h=m[0])==null?void 0:h.value)==="/";)m.shift();const g=m.map(y=>y.value==="/"?.75:y.type==="param"?.5:y.type==="wildcard"?.25:1);o.push({child:u,trimmed:f,parsed:m,index:c,scores:g})}),this.flatRoutes=o.sort((u,c)=>{const h=Math.min(u.scores.length,c.scores.length);for(let f=0;f<h;f++)if(u.scores[f]!==c.scores[f])return c.scores[f]-u.scores[f];if(u.scores.length!==c.scores.length)return c.scores.length-u.scores.length;for(let f=0;f<h;f++)if(u.parsed[f].value!==c.parsed[f].value)return u.parsed[f].value>c.parsed[f].value?1:-1;return u.index-c.index}).map((u,c)=>(u.child.rank=c,u.child))},this.subscribe=(t,r)=>{const o={eventType:t,fn:r};return this.subscribers.add(o),()=>{this.subscribers.delete(o)}},this.emit=t=>{this.subscribers.forEach(r=>{r.eventType===t.type&&r.fn(t)})},this.parseLocation=(t,r)=>{const o=({pathname:h,search:f,hash:m,state:g})=>{const y=this.options.parseSearch(f),x=this.options.stringifySearch(y);return{pathname:h,searchStr:x,search:fn(t==null?void 0:t.search,y),hash:m.split("#").reverse()[0]??"",href:`${h}${x}${m}`,state:fn(t==null?void 0:t.state,g)}},a=o(r??this.history.location),{__tempLocation:u,__tempKey:c}=a.state;if(u&&(!c||c===this.tempLocationKey)){const h=o(u);return h.state.key=a.state.key,delete h.state.__tempLocation,{...h,maskedLocation:a}}return a},this.resolvePathWithBase=(t,r)=>hS({basepath:this.basepath,base:t,to:xu(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.matchRoutes=(t,r,o)=>typeof t=="string"?this.matchRoutesInternal({pathname:t,search:r},o):this.matchRoutesInternal(t,r),this.getMatchedRoutes=(t,r)=>{let o={};const a=xs(t.pathname),u=m=>Al(this.basepath,a,{to:m.fullPath,caseSensitive:m.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let c=(r==null?void 0:r.to)!==void 0?this.routesByPath[r.to]:void 0;c?o=u(c):c=this.flatRoutes.find(m=>{const g=u(m);return g?(o=g,!0):!1});let h=c||this.routesById[En];const f=[h];for(;h.parentRoute;)h=h.parentRoute,f.unshift(h);return{matchedRoutes:f,routeParams:o,foundRoute:c}},this.cancelMatch=t=>{const r=this.getMatch(t);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var t;(t=this.state.pendingMatches)==null||t.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=t=>{const r=(a={},u)=>{var c,h,f,m,g,y,x;const w=a._fromLocation?this.matchRoutes(a._fromLocation,{_buildLocation:!0}):this.state.matches,_=a.from!=null?w.find(B=>Al(this.basepath,xs(B.pathname),{to:a.from,caseSensitive:!1,fuzzy:!1})):void 0,b=(_==null?void 0:_.pathname)||this.latestLocation.pathname;fr(a.from==null||_!=null,"Could not find match for from: "+a.from);const T=(c=this.state.pendingMatches)!=null&&c.length?(h=pi(this.state.pendingMatches))==null?void 0:h.search:((f=pi(w))==null?void 0:f.search)||this.latestLocation.search,M=u==null?void 0:u.matchedRoutes.filter(B=>w.find(H=>H.routeId===B.id));let L;if(a.to){const B=(_==null?void 0:_.fullPath)||((m=pi(w))==null?void 0:m.fullPath)||this.latestLocation.pathname;L=this.resolvePathWithBase(B,`${a.to}`)}else{const B=this.routesById[(g=M==null?void 0:M.find(H=>{const ee=Pl({path:H.fullPath,params:(u==null?void 0:u.routeParams)??{},decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;return mr([this.basepath,ee])===b}))==null?void 0:g.id];L=this.resolvePathWithBase(b,(B==null?void 0:B.to)??b)}const V={...(y=pi(w))==null?void 0:y.params};let E=(a.params??!0)===!0?V:{...V,...ws(a.params,V)};Object.keys(E).length>0&&(u==null||u.matchedRoutes.map(B=>{var H;return((H=B.options.params)==null?void 0:H.stringify)??B.options.stringifyParams}).filter(Boolean).forEach(B=>{E={...E,...B(E)}})),L=Pl({path:L,params:E??{},leaveWildcards:!1,leaveParams:t.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;let P=T;if(t._includeValidateSearch&&((x=this.options.search)!=null&&x.strict)){let B={};u==null||u.matchedRoutes.forEach(H=>{try{H.options.validateSearch&&(B={...B,...Qd(H.options.validateSearch,{...B,...P})??{}})}catch{}}),P=B}P=(B=>{const H=(u==null?void 0:u.matchedRoutes.reduce((X,J)=>{var z;const Z=[];if("search"in J.options)(z=J.options.search)!=null&&z.middlewares&&Z.push(...J.options.search.middlewares);else if(J.options.preSearchFilters||J.options.postSearchFilters){const K=({search:A,next:$})=>{let le=A;"preSearchFilters"in J.options&&J.options.preSearchFilters&&(le=J.options.preSearchFilters.reduce((re,ue)=>ue(re),A));const ne=$(le);return"postSearchFilters"in J.options&&J.options.postSearchFilters?J.options.postSearchFilters.reduce((re,ue)=>ue(re),ne):ne};Z.push(K)}if(t._includeValidateSearch&&J.options.validateSearch){const K=({search:A,next:$})=>{const le=$(A);try{return{...le,...Qd(J.options.validateSearch,le)??{}}}catch{return le}};Z.push(K)}return X.concat(Z)},[]))??[],ee=({search:X})=>a.search?a.search===!0?X:ws(a.search,X):{};H.push(ee);const te=(X,J)=>{if(X>=H.length)return J;const z=H[X];return z({search:J,next:K=>te(X+1,K)})};return te(0,B)})(P),P=fn(T,P);const C=this.options.stringifySearch(P),O=a.hash===!0?this.latestLocation.hash:a.hash?ws(a.hash,this.latestLocation.hash):void 0,U=O?`#${O}`:"";let W=a.state===!0?this.latestLocation.state:a.state?ws(a.state,this.latestLocation.state):{};return W=fn(this.latestLocation.state,W),{pathname:L,search:P,searchStr:C,state:W,hash:O??"",href:`${L}${C}${U}`,unmaskOnReload:a.unmaskOnReload}},o=(a={},u)=>{var c;const h=r(a);let f=u?r(u):void 0;if(!f){let y={};const x=(c=this.options.routeMasks)==null?void 0:c.find(w=>{const _=Al(this.basepath,h.pathname,{to:w.from,caseSensitive:!1,fuzzy:!1});return _?(y=_,!0):!1});if(x){const{from:w,..._}=x;u={...xh(t,["from"]),..._,params:y},f=r(u)}}const m=this.getMatchedRoutes(h,a),g=r(a,m);if(f){const y=this.getMatchedRoutes(f,u),x=r(u,y);g.maskedLocation=x}return g};return t.mask?o(t,{...xh(t,["from"]),...t.mask}):o(t)},this.commitLocation=({viewTransition:t,ignoreBlocker:r,...o})=>{const a=()=>{const h=["key","__TSR_index","__hashScrollIntoViewOptions"];h.forEach(m=>{o.state[m]=this.latestLocation.state[m]});const f=Ti(o.state,this.latestLocation.state);return h.forEach(m=>{delete o.state[m]}),f},u=this.latestLocation.href===o.href,c=this.commitLocationPromise;if(this.commitLocationPromise=hi(()=>{c==null||c.resolve()}),u&&a())this.load();else{let{maskedLocation:h,hashScrollIntoView:f,...m}=o;h&&(m={...h,state:{...h.state,__tempKey:void 0,__tempLocation:{...m,search:m.searchStr,state:{...m.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(m.unmaskOnReload??this.options.unmaskOnReload??!1)&&(m.state.__tempKey=this.tempLocationKey)),m.state.__hashScrollIntoViewOptions=f??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=t,this.history[o.replace?"replace":"push"](m.href,m.state,{ignoreBlocker:r})}return this.resetNextScroll=o.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:t,resetScroll:r,hashScrollIntoView:o,viewTransition:a,ignoreBlocker:u,href:c,...h}={})=>{if(c){const m=this.history.location.state.__TSR_index,g=Ho(c,{__TSR_index:t?m:m+1});h.to=g.pathname,h.search=this.options.parseSearch(g.search),h.hash=g.hash.slice(1)}const f=this.buildLocation({...h,_includeValidateSearch:!0});return this.commitLocation({...f,viewTransition:a,replace:t,resetScroll:r,hashScrollIntoView:o,ignoreBlocker:u})},this.navigate=({to:t,reloadDocument:r,href:o,...a})=>{if(r){if(!o){const u=this.buildLocation({to:t,...a});o=this.history.createHref(u.href)}a.replace?window.location.replace(o):window.location.href=o;return}return this.buildAndCommitLocation({...a,href:o,to:t})},this.load=async t=>{this.latestLocation=this.parseLocation(this.latestLocation);let r,o,a;for(a=new Promise(u=>{this.startTransition(async()=>{var c;try{const h=this.latestLocation,f=this.state.resolvedLocation;this.cancelMatches();let m;oi(()=>{m=this.matchRoutes(h),this.__store.setState(g=>({...g,status:"pending",isLoading:!0,location:h,pendingMatches:m,cachedMatches:g.cachedMatches.filter(y=>!m.find(x=>x.id===y.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",...Ts({resolvedLocation:f,location:h})}),this.emit({type:"onBeforeLoad",...Ts({resolvedLocation:f,location:h})}),await this.loadMatches({sync:t==null?void 0:t.sync,matches:m,location:h,onReady:async()=>{this.startViewTransition(async()=>{let g,y,x;oi(()=>{this.__store.setState(w=>{const _=w.matches,b=w.pendingMatches||w.matches;return g=_.filter(T=>!b.find(M=>M.id===T.id)),y=b.filter(T=>!_.find(M=>M.id===T.id)),x=_.filter(T=>b.find(M=>M.id===T.id)),{...w,isLoading:!1,loadedAt:Date.now(),matches:b,pendingMatches:void 0,cachedMatches:[...w.cachedMatches,...g.filter(T=>T.status!=="error")]}}),this.clearExpiredCache()}),[[g,"onLeave"],[y,"onEnter"],[x,"onStay"]].forEach(([w,_])=>{w.forEach(b=>{var T,M;(M=(T=this.looseRoutesById[b.routeId].options)[_])==null||M.call(T,b)})})})}})}catch(h){Zd(h)?(r=h,this.isServer||this.navigate({...r,replace:!0,ignoreBlocker:!0})):pn(h)&&(o=h),this.__store.setState(f=>({...f,statusCode:r?r.statusCode:o?404:f.matches.some(m=>m.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===a&&((c=this.commitLocationPromise)==null||c.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),u()})}),this.latestLoadPromise=a,await a;this.latestLoadPromise&&a!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(u=>({...u,statusCode:404}))},this.startViewTransition=t=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let o;if(typeof r=="object"&&this.isViewTransitionTypesSupported){const a=this.latestLocation,u=this.state.resolvedLocation,c=typeof r.types=="function"?r.types(Ts({resolvedLocation:u,location:a})):r.types;o={update:t,types:c}}else o=t;document.startViewTransition(o)}else t()},this.updateMatch=(t,r)=>{var o;let a;const u=(o=this.state.pendingMatches)==null?void 0:o.find(m=>m.id===t),c=this.state.matches.find(m=>m.id===t),h=this.state.cachedMatches.find(m=>m.id===t),f=u?"pendingMatches":c?"matches":h?"cachedMatches":"";return f&&this.__store.setState(m=>{var g;return{...m,[f]:(g=m[f])==null?void 0:g.map(y=>y.id===t?a=r(y):y)}}),a},this.getMatch=t=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===t),this.loadMatches=async({location:t,matches:r,preload:o,onReady:a,updateMatch:u=this.updateMatch,sync:c})=>{let h,f=!1;const m=async()=>{f||(f=!0,await(a==null?void 0:a()))},g=x=>!!(o&&!this.state.matches.find(w=>w.id===x)),y=(x,w)=>{var _,b,T,M;if(Zd(w)&&!w.reloadDocument)throw w;if(vs(w)||pn(w)){if(u(x.id,L=>({...L,status:vs(w)?"redirected":pn(w)?"notFound":"error",isFetching:!1,error:w,beforeLoadPromise:void 0,loaderPromise:void 0})),w.routeId||(w.routeId=x.routeId),(_=x.beforeLoadPromise)==null||_.resolve(),(b=x.loaderPromise)==null||b.resolve(),(T=x.loadPromise)==null||T.resolve(),vs(w))throw f=!0,w=this.resolveRedirect({...w,_fromLocation:t}),w;if(pn(w))throw this._handleNotFound(r,w,{updateMatch:u}),(M=this.serverSsr)==null||M.onMatchSettled({router:this,match:this.getMatch(x.id)}),w}};try{await new Promise((x,w)=>{(async()=>{var _,b,T,M;try{const L=(P,R,C)=>{var O,U;const{id:W,routeId:B}=r[P],H=this.looseRoutesById[B];if(R instanceof Promise)throw R;R.routerCode=C,h=h??P,y(this.getMatch(W),R);try{(U=(O=H.options).onError)==null||U.call(O,R)}catch(ee){R=ee,y(this.getMatch(W),R)}u(W,ee=>{var te,X;return(te=ee.beforeLoadPromise)==null||te.resolve(),(X=ee.loadPromise)==null||X.resolve(),{...ee,error:R,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[P,{id:R,routeId:C}]of r.entries()){const O=this.getMatch(R),U=(_=r[P-1])==null?void 0:_.id,W=this.looseRoutesById[C],B=W.options.pendingMs??this.options.defaultPendingMs,H=!!(a&&!this.isServer&&!g(R)&&(W.options.loader||W.options.beforeLoad||sv(W))&&typeof B=="number"&&B!==1/0&&(W.options.pendingComponent??((b=this.options)==null?void 0:b.defaultPendingComponent)));let ee=!0;if((O.beforeLoadPromise||O.loaderPromise)&&(H&&setTimeout(()=>{try{m()}catch{}},B),await O.beforeLoadPromise,ee=this.getMatch(R).status!=="success"),ee){try{u(R,de=>{const Q=de.loadPromise;return{...de,loadPromise:hi(()=>{Q==null||Q.resolve()}),beforeLoadPromise:hi()}});const te=new AbortController;let X;H&&(X=setTimeout(()=>{try{m()}catch{}},B));const{paramsError:J,searchError:z}=this.getMatch(R);J&&L(P,J,"PARSE_PARAMS"),z&&L(P,z,"VALIDATE_SEARCH");const Z=()=>U?this.getMatch(U).context:this.options.context??{};u(R,de=>({...de,isFetching:"beforeLoad",fetchCount:de.fetchCount+1,abortController:te,pendingTimeout:X,context:{...Z(),...de.__routeContext}}));const{search:K,params:A,context:$,cause:le}=this.getMatch(R),ne=g(R),re={search:K,abortController:te,params:A,preload:ne,context:$,location:t,navigate:de=>this.navigate({...de,_fromLocation:t}),buildLocation:this.buildLocation,cause:ne?"preload":le,matches:r},ue=await((M=(T=W.options).beforeLoad)==null?void 0:M.call(T,re))??{};(vs(ue)||pn(ue))&&L(P,ue,"BEFORE_LOAD"),u(R,de=>({...de,__beforeLoadContext:ue,context:{...Z(),...de.__routeContext,...ue},abortController:te}))}catch(te){L(P,te,"BEFORE_LOAD")}u(R,te=>{var X;return(X=te.beforeLoadPromise)==null||X.resolve(),{...te,beforeLoadPromise:void 0,isFetching:!1}})}}const V=r.slice(0,h),E=[];V.forEach(({id:P,routeId:R},C)=>{E.push((async()=>{const{loaderPromise:O}=this.getMatch(P);let U=!1,W=!1;if(O){await O;const B=this.getMatch(P);B.error&&y(B,B.error)}else{const B=E[C-1],H=this.looseRoutesById[R],ee=()=>{const{params:ne,loaderDeps:re,abortController:ue,context:de,cause:Q}=this.getMatch(P),pe=g(P);return{params:ne,deps:re,preload:!!pe,parentMatchPromise:B,abortController:ue,context:de,location:t,navigate:Te=>this.navigate({...Te,_fromLocation:t}),cause:pe?"preload":Q,route:H}},te=Date.now()-this.getMatch(P).updatedAt,X=g(P),J=X?H.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:H.options.staleTime??this.options.defaultStaleTime??0,z=H.options.shouldReload,Z=typeof z=="function"?z(ee()):z;u(P,ne=>({...ne,loaderPromise:hi(),preload:!!X&&!this.state.matches.find(re=>re.id===P)}));const K=()=>{var ne,re,ue,de,Q,pe;const Te=this.getMatch(P);if(!Te)return;const Ve={matches:r,match:Te,params:Te.params,loaderData:Te.loaderData},ze=(re=(ne=H.options).head)==null?void 0:re.call(ne,Ve),It=ze==null?void 0:ze.meta,we=ze==null?void 0:ze.links,se=ze==null?void 0:ze.scripts,he=(de=(ue=H.options).scripts)==null?void 0:de.call(ue,Ve),Me=(pe=(Q=H.options).headers)==null?void 0:pe.call(Q,Ve);u(P,Le=>({...Le,meta:It,links:we,headScripts:se,headers:Me,scripts:he}))},A=async()=>{var ne,re,ue,de,Q;try{const pe=async()=>{const Te=this.getMatch(P);Te.minPendingPromise&&await Te.minPendingPromise};try{this.loadRouteChunk(H),u(P,Ve=>({...Ve,isFetching:"loader"}));const Te=await((re=(ne=H.options).loader)==null?void 0:re.call(ne,ee()));y(this.getMatch(P),Te),await H._lazyPromise,await pe(),await H._componentsPromise,oi(()=>{u(P,Ve=>({...Ve,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:Te})),K()})}catch(Te){let Ve=Te;await pe(),y(this.getMatch(P),Te);try{(de=(ue=H.options).onError)==null||de.call(ue,Te)}catch(ze){Ve=ze,y(this.getMatch(P),ze)}oi(()=>{u(P,ze=>({...ze,error:Ve,status:"error",isFetching:!1})),K()})}(Q=this.serverSsr)==null||Q.onMatchSettled({router:this,match:this.getMatch(P)})}catch(pe){oi(()=>{u(P,Te=>({...Te,loaderPromise:void 0})),K()}),y(this.getMatch(P),pe)}},{status:$,invalid:le}=this.getMatch(P);U=$==="success"&&(le||(Z??te>J)),X&&H.options.preload===!1||(U&&!c?(W=!0,(async()=>{try{await A();const{loaderPromise:ne,loadPromise:re}=this.getMatch(P);ne==null||ne.resolve(),re==null||re.resolve(),u(P,ue=>({...ue,loaderPromise:void 0}))}catch(ne){Zd(ne)&&await this.navigate(ne)}})()):$!=="success"||U&&c?await A():K())}if(!W){const{loaderPromise:B,loadPromise:H}=this.getMatch(P);B==null||B.resolve(),H==null||H.resolve()}return u(P,B=>({...B,isFetching:W?B.isFetching:!1,loaderPromise:W?B.loaderPromise:void 0,invalid:!1})),this.getMatch(P)})())}),await Promise.all(E),x()}catch(L){w(L)}})()}),await m()}catch(x){if(vs(x)||pn(x))throw pn(x)&&!o&&await m(),x}return r},this.invalidate=t=>{const r=o=>{var a;return((a=t==null?void 0:t.filter)==null?void 0:a.call(t,o))??!0?{...o,invalid:!0,...o.status==="error"?{status:"pending",error:void 0}:{}}:o};return this.__store.setState(o=>{var a;return{...o,matches:o.matches.map(r),cachedMatches:o.cachedMatches.map(r),pendingMatches:(a=o.pendingMatches)==null?void 0:a.map(r)}}),this.load({sync:t==null?void 0:t.sync})},this.resolveRedirect=t=>{const r=t;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=t=>{const r=t==null?void 0:t.filter;r!==void 0?this.__store.setState(o=>({...o,cachedMatches:o.cachedMatches.filter(a=>!r(a))})):this.__store.setState(o=>({...o,cachedMatches:[]}))},this.clearExpiredCache=()=>{const t=r=>{const o=this.looseRoutesById[r.routeId];if(!o.options.loader)return!0;const a=(r.preload?o.options.preloadGcTime??this.options.defaultPreloadGcTime:o.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<a)};this.clearCache({filter:t})},this.loadRouteChunk=t=>(t._lazyPromise===void 0&&(t.lazyFn?t._lazyPromise=t.lazyFn().then(r=>{const{id:o,...a}=r.options;Object.assign(t.options,a)}):t._lazyPromise=Promise.resolve()),t._componentsPromise===void 0&&(t._componentsPromise=t._lazyPromise.then(()=>Promise.all(hy.map(async r=>{const o=t.options[r];o!=null&&o.preload&&await o.preload()})))),t._componentsPromise),this.preloadRoute=async t=>{const r=this.buildLocation(t);let o=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:t});const a=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(c=>c.id)),u=new Set([...a,...this.state.cachedMatches.map(c=>c.id)]);oi(()=>{o.forEach(c=>{u.has(c.id)||this.__store.setState(h=>({...h,cachedMatches:[...h.cachedMatches,c]}))})});try{return o=await this.loadMatches({matches:o,location:r,preload:!0,updateMatch:(c,h)=>{a.has(c)?o=o.map(f=>f.id===c?h(f):f):this.updateMatch(c,h)}}),o}catch(c){if(vs(c))return c.reloadDocument?void 0:await this.preloadRoute({...c,_fromLocation:r});pn(c)||console.error(c);return}},this.matchRoute=(t,r)=>{const o={...t,to:t.to?this.resolvePathWithBase(t.from||"",t.to):void 0,params:t.params||{},leaveParams:!0},a=this.buildLocation(o);if(r!=null&&r.pending&&this.state.status!=="pending")return!1;const c=((r==null?void 0:r.pending)===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,h=Al(this.basepath,c.pathname,{...r,to:a.pathname});return!h||t.params&&!Ti(h,t.params,{partial:!0})?!1:h&&((r==null?void 0:r.includeSearch)??!0)?Ti(c.search,a.search,{partial:!0})?h:!1:h},this._handleNotFound=(t,r,{updateMatch:o=this.updateMatch}={})=>{var a;const u=this.routesById[r.routeId??""]??this.routeTree,c={};for(const f of t)c[f.routeId]=f;!u.options.notFoundComponent&&((a=this.options)!=null&&a.defaultNotFoundComponent)&&(u.options.notFoundComponent=this.options.defaultNotFoundComponent),fr(u.options.notFoundComponent);const h=c[u.id];fr(h,"Could not find match for route: "+u.id),o(h.id,f=>({...f,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&u.parentRoute&&(r.routeId=u.parentRoute.id,this._handleNotFound(t,r,{updateMatch:o}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(t=>t.status==="notFound"||t.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??TS,parseSearch:e.parseSearch??bS}),typeof document<"u"&&(window.__TSR_ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(e,t){const{foundRoute:r,matchedRoutes:o,routeParams:a}=this.getMatchedRoutes(e,t==null?void 0:t.dest);let u=!1;(r?r.path!=="/"&&a["**"]:xs(e.pathname))&&(this.options.notFoundRoute?o.push(this.options.notFoundRoute):u=!0);const c=(()=>{if(u){if(this.options.notFoundMode!=="root")for(let g=o.length-1;g>=0;g--){const y=o[g];if(y.children)return y.id}return En}})(),h=o.map(g=>{var y;let x;const w=((y=g.options.params)==null?void 0:y.parse)??g.options.parseParams;if(w)try{const _=w(a);Object.assign(a,_)}catch(_){if(x=new PS(_.message,{cause:_}),t!=null&&t.throwOnError)throw x;return x}}),f=[],m=g=>(g==null?void 0:g.id)?g.context??this.options.context??{}:this.options.context??{};return o.forEach((g,y)=>{var x,w;const _=f[y-1],[b,T,M]=(()=>{const H=(_==null?void 0:_.search)??e.search,ee=(_==null?void 0:_._strictSearch)??{};try{const te=Qd(g.options.validateSearch,{...H})??{};return[{...H,...te},{...ee,...te},void 0]}catch(te){let X=te;if(te instanceof ru||(X=new ru(te.message,{cause:te})),t!=null&&t.throwOnError)throw X;return[H,{},X]}})(),L=((w=(x=g.options).loaderDeps)==null?void 0:w.call(x,{search:b}))??"",V=L?JSON.stringify(L):"",{usedParams:E,interpolatedPath:P}=Pl({path:g.fullPath,params:a,decodeCharMap:this.pathParamsDecodeCharMap}),R=Pl({path:g.id,params:a,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath+V,C=this.getMatch(R),O=this.state.matches.find(H=>H.routeId===g.id),U=O?"stay":"enter";let W;if(C)W={...C,cause:U,params:O?fn(O.params,a):a,_strictParams:E,search:fn(O?O.search:C.search,b),_strictSearch:T};else{const H=g.options.loader||g.options.beforeLoad||g.lazyFn||sv(g)?"pending":"success";W={id:R,index:y,routeId:g.id,params:O?fn(O.params,a):a,_strictParams:E,pathname:mr([this.basepath,P]),updatedAt:Date.now(),search:O?fn(O.search,b):b,_strictSearch:T,searchError:void 0,status:H,isFetching:!1,error:void 0,paramsError:h[y],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:U,loaderDeps:O?fn(O.loaderDeps,L):L,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:g.options.staticData||{},loadPromise:hi(),fullPath:g.fullPath}}t!=null&&t.preload||(W.globalNotFound=c===g.id),W.searchError=M;const B=m(_);W.context={...B,...W.__routeContext,...W.__beforeLoadContext},f.push(W)}),f.forEach((g,y)=>{var x,w;const _=this.looseRoutesById[g.routeId];if(!this.getMatch(g.id)&&(t==null?void 0:t._buildLocation)!==!0){const T=f[y-1],M=m(T),L={deps:g.loaderDeps,params:g.params,context:M,location:e,navigate:V=>this.navigate({...V,_fromLocation:e}),buildLocation:this.buildLocation,cause:g.cause,abortController:g.abortController,preload:!!g.preload,matches:f};g.__routeContext=((w=(x=_.options).context)==null?void 0:w.call(x,L))??{},g.context={...M,...g.__routeContext,...g.__beforeLoadContext}}}),f}}class ru extends Error{}class PS extends Error{}function AS(s){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:s,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Qd(s,e){if(s==null)return{};if("~standard"in s){const t=s["~standard"].validate(e);if(t instanceof Promise)throw new ru("Async validation not supported");if(t.issues)throw new ru(JSON.stringify(t.issues,void 0,2),{cause:t});return t.value}return"parse"in s?s.parse(e):typeof s=="function"?s(e):{}}const hy=["component","errorComponent","pendingComponent","notFoundComponent"];function sv(s){var e;for(const t of hy)if((e=s.options[t])!=null&&e.preload)return!0;return!1}const NS="Error preloading route! ☝️";class fy{constructor(e){if(this.init=t=>{var r,o;this.originalIndex=t.originalIndex;const a=this.options,u=!(a!=null&&a.path)&&!(a!=null&&a.id);if(this.parentRoute=(o=(r=this.options).getParentRoute)==null?void 0:o.call(r),u)this._path=En;else if(!this.parentRoute)throw new Error("Child Route instances must pass a 'getParentRoute: () => ParentRoute' option that returns a Route instance.");let c=u?En:a==null?void 0:a.path;c&&c!=="/"&&(c=Qh(c));const h=(a==null?void 0:a.id)||c;let f=u?En:mr([this.parentRoute.id===En?"":this.parentRoute.id,h]);c===En&&(c="/"),f!==En&&(f=mr(["/",f]));const m=f===En?"/":mr([this.parentRoute.fullPath,c]);this._path=c,this._id=f,this._fullPath=m,this._to=m,this._ssr=(a==null?void 0:a.ssr)??t.defaultSsr??!0},this.clone=t=>{this._path=t._path,this._id=t._id,this._fullPath=t._fullPath,this._to=t._to,this._ssr=t._ssr,this.options.getParentRoute=t.options.getParentRoute,this.children=t.children},this.addChildren=t=>this._addFileChildren(t),this._addFileChildren=t=>(Array.isArray(t)&&(this.children=t),typeof t=="object"&&t!==null&&(this.children=Object.values(t)),this),this._addFileTypes=()=>this,this.updateLoader=t=>(Object.assign(this.options,t),this),this.update=t=>(Object.assign(this.options,t),this),this.lazy=t=>(this.lazyFn=t,this),this.options=e||{},this.isRoot=!(e!=null&&e.getParentRoute),e!=null&&e.id&&(e!=null&&e.path))throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}}class RS extends fy{constructor(e){super(e)}}function Jh(s){const e=s.errorComponent??Su;return I.jsx(MS,{getResetKey:s.getResetKey,onCatch:s.onCatch,children:({error:t,reset:r})=>t?k.createElement(e,{error:t,reset:r}):s.children})}class MS extends k.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,t){t.error&&t.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,t){this.props.onCatch&&this.props.onCatch(e,t)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Su({error:s}){const[e,t]=k.useState(!1);return I.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[I.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[I.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),I.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>t(r=>!r),children:e?"Hide Error":"Show Error"})]}),I.jsx("div",{style:{height:".25rem"}}),e?I.jsx("div",{children:I.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:s.message?I.jsx("code",{children:s.message}):null})}):null]})}var Jd={exports:{}},eh={},th={exports:{}},nh={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function OS(){if(iv)return nh;iv=1;var s=na();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var t=typeof Object.is=="function"?Object.is:e,r=s.useState,o=s.useEffect,a=s.useLayoutEffect,u=s.useDebugValue;function c(g,y){var x=y(),w=r({inst:{value:x,getSnapshot:y}}),_=w[0].inst,b=w[1];return a(function(){_.value=x,_.getSnapshot=y,h(_)&&b({inst:_})},[g,x,y]),o(function(){return h(_)&&b({inst:_}),g(function(){h(_)&&b({inst:_})})},[g]),u(x),x}function h(g){var y=g.getSnapshot;g=g.value;try{var x=y();return!t(g,x)}catch{return!0}}function f(g,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:c;return nh.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:m,nh}var ov;function IS(){return ov||(ov=1,th.exports=OS()),th.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function DS(){if(av)return eh;av=1;var s=na(),e=IS();function t(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var r=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,a=s.useRef,u=s.useEffect,c=s.useMemo,h=s.useDebugValue;return eh.useSyncExternalStoreWithSelector=function(f,m,g,y,x){var w=a(null);if(w.current===null){var _={hasValue:!1,value:null};w.current=_}else _=w.current;w=c(function(){function T(P){if(!M){if(M=!0,L=P,P=y(P),x!==void 0&&_.hasValue){var R=_.value;if(x(R,P))return V=R}return V=P}if(R=V,r(L,P))return R;var C=y(P);return x!==void 0&&x(R,C)?(L=P,R):(L=P,V=C)}var M=!1,L,V,E=g===void 0?null:g;return[function(){return T(m())},E===null?void 0:function(){return T(E())}]},[m,g,y,x]);var b=o(f,w[0],w[1]);return u(function(){_.hasValue=!0,_.value=b},[b]),h(b),b},eh}var lv;function LS(){return lv||(lv=1,Jd.exports=DS()),Jd.exports}var FS=LS();function VS(s,e=t=>t){return FS.useSyncExternalStoreWithSelector(s.subscribe,()=>s.state,()=>s.state,e,BS)}function BS(s,e){if(Object.is(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;if(s instanceof Map&&e instanceof Map){if(s.size!==e.size)return!1;for(const[r,o]of s)if(!e.has(r)||!Object.is(o,e.get(r)))return!1;return!0}if(s instanceof Set&&e instanceof Set){if(s.size!==e.size)return!1;for(const r of s)if(!e.has(r))return!1;return!0}const t=Object.keys(s);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(s[t[r]],e[t[r]]))return!1;return!0}const rh=k.createContext(null);function py(){return typeof document>"u"?rh:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=rh,rh)}function On(s){const e=k.useContext(py());return s==null||s.warn,e}function Rt(s){const e=On({warn:(s==null?void 0:s.router)===void 0}),t=(s==null?void 0:s.router)||e,r=k.useRef(void 0);return VS(t.__store,o=>{if(s!=null&&s.select){if(s.structuralSharing??t.options.defaultStructuralSharing){const a=fn(r.current,s.select(o));return r.current=a,a}return s.select(o)}return o})}const bu=k.createContext(void 0),zS=k.createContext(void 0);function Qr(s){const e=k.useContext(s.from?zS:bu);return Rt({select:r=>{const o=r.matches.find(a=>s.from?s.from===a.routeId:a.id===e);if(fr(!((s.shouldThrow??!0)&&!o),`Could not find ${s.from?`an active match from "${s.from}"`:"a nearest match!"}`),o!==void 0)return s.select?s.select(o):o},structuralSharing:s.structuralSharing})}function my(s){return Qr({from:s.from,strict:s.strict,structuralSharing:s.structuralSharing,select:e=>s.select?s.select(e.loaderData):e.loaderData})}function gy(s){const{select:e,...t}=s;return Qr({...t,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function ef(s){return Qr({from:s.from,strict:s.strict,shouldThrow:s.shouldThrow,structuralSharing:s.structuralSharing,select:e=>s.select?s.select(e.params):e.params})}function vy(s){return Qr({from:s.from,strict:s.strict,shouldThrow:s.shouldThrow,structuralSharing:s.structuralSharing,select:e=>s.select?s.select(e.search):e.search})}function yy(s){const{navigate:e}=On();return k.useCallback(t=>e({from:s==null?void 0:s.from,...t}),[s==null?void 0:s.from,e])}var tf=ay();const US=iy(tf),Bo=typeof window<"u"?k.useLayoutEffect:k.useEffect;function sh(s){const e=k.useRef({value:s,prev:null}),t=e.current.value;return s!==t&&(e.current={value:s,prev:t}),e.current.prev}function jS(s,e,t={},r={}){const o=k.useRef(typeof IntersectionObserver=="function"),a=k.useRef(null);return k.useEffect(()=>{if(!(!s.current||!o.current||r.disabled))return a.current=new IntersectionObserver(([u])=>{e(u)},t),a.current.observe(s.current),()=>{var u;(u=a.current)==null||u.disconnect()}},[e,t,r.disabled,s]),a.current}function GS(s){const e=k.useRef(null);return k.useImperativeHandle(s,()=>e.current,[]),e}function WS(){const s=On(),e=k.useRef({router:s,mounted:!1}),t=Rt({select:({isLoading:g})=>g}),[r,o]=k.useState(!1),a=Rt({select:g=>g.matches.some(y=>y.status==="pending"),structuralSharing:!0}),u=sh(t),c=t||r||a,h=sh(c),f=t||a,m=sh(f);return s.isServer||(s.startTransition=g=>{o(!0),k.startTransition(()=>{g(),o(!1)})}),k.useEffect(()=>{const g=s.history.subscribe(s.load),y=s.buildLocation({to:s.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return xs(s.latestLocation.href)!==xs(y.href)&&s.commitLocation({...y,replace:!0}),()=>{g()}},[s,s.history]),Bo(()=>{if(typeof window<"u"&&s.clientSsr||e.current.router===s&&e.current.mounted)return;e.current={router:s,mounted:!0},(async()=>{try{await s.load()}catch(y){console.error(y)}})()},[s]),Bo(()=>{u&&!t&&s.emit({type:"onLoad",...Ts(s.state)})},[u,s,t]),Bo(()=>{m&&!f&&s.emit({type:"onBeforeRouteMount",...Ts(s.state)})},[f,m,s]),Bo(()=>{h&&!c&&(s.emit({type:"onResolved",...Ts(s.state)}),s.__store.setState(g=>({...g,status:"idle",resolvedLocation:g.location})),wS(s))},[c,h,s]),null}function qS(s){const e=Rt({select:t=>`not-found-${t.location.pathname}-${t.status}`});return I.jsx(Jh,{getResetKey:()=>e,onCatch:(t,r)=>{var o;if(pn(t))(o=s.onCatch)==null||o.call(s,t,r);else throw t},errorComponent:({error:t})=>{var r;if(pn(t))return(r=s.fallback)==null?void 0:r.call(s,t);throw t},children:s.children})}function $S(){return I.jsx("p",{children:"Not Found"})}function ql(s){return I.jsx(I.Fragment,{children:s.children})}function _y(s,e,t){return e.options.notFoundComponent?I.jsx(e.options.notFoundComponent,{data:t}):s.options.defaultNotFoundComponent?I.jsx(s.options.defaultNotFoundComponent,{data:t}):I.jsx($S,{})}var ih,uv;function HS(){if(uv)return ih;uv=1;const s={},e=s.hasOwnProperty,t=(C,O)=>{for(const U in C)e.call(C,U)&&O(U,C[U])},r=(C,O)=>(O&&t(O,(U,W)=>{C[U]=W}),C),o=(C,O)=>{const U=C.length;let W=-1;for(;++W<U;)O(C[W])},a=C=>"\\u"+("0000"+C).slice(-4),u=(C,O)=>{let U=C.toString(16);return O?U:U.toUpperCase()},c=s.toString,h=Array.isArray,f=C=>typeof Buffer=="function"&&Buffer.isBuffer(C),m=C=>c.call(C)=="[object Object]",g=C=>typeof C=="string"||c.call(C)=="[object String]",y=C=>typeof C=="number"||c.call(C)=="[object Number]",x=C=>typeof C=="bigint",w=C=>typeof C=="function",_=C=>c.call(C)=="[object Map]",b=C=>c.call(C)=="[object Set]",T={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},M=/[\\\b\f\n\r\t]/,L=/[0-9]/,V=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,E=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,P=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,R=(C,O)=>{const U=()=>{J=X,++O.indentLevel,X=O.indent.repeat(O.indentLevel)},W={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},B=O&&O.json;B&&(W.quotes="double",W.wrap=!0),O=r(W,O),O.quotes!="single"&&O.quotes!="double"&&O.quotes!="backtick"&&(O.quotes="single");const H=O.quotes=="double"?'"':O.quotes=="backtick"?"`":"'",ee=O.compact,te=O.lowercaseHex;let X=O.indent.repeat(O.indentLevel),J="";const z=O.__inline1__,Z=O.__inline2__,K=ee?"":`
`;let A,$=!0;const le=O.numbers=="binary",ne=O.numbers=="octal",re=O.numbers=="decimal",ue=O.numbers=="hexadecimal";if(B&&C&&w(C.toJSON)&&(C=C.toJSON()),!g(C)){if(_(C))return C.size==0?"new Map()":(ee||(O.__inline1__=!0,O.__inline2__=!1),"new Map("+R(Array.from(C),O)+")");if(b(C))return C.size==0?"new Set()":"new Set("+R(Array.from(C),O)+")";if(f(C))return C.length==0?"Buffer.from([])":"Buffer.from("+R(Array.from(C),O)+")";if(h(C))return A=[],O.wrap=!0,z&&(O.__inline1__=!1,O.__inline2__=!0),Z||U(),o(C,Q=>{$=!1,Z&&(O.__inline2__=!1),A.push((ee||Z?"":X)+R(Q,O))}),$?"[]":Z?"["+A.join(", ")+"]":"["+K+A.join(","+K)+K+(ee?"":J)+"]";if(y(C)||x(C)){if(B)return JSON.stringify(Number(C));let Q;if(re)Q=String(C);else if(ue){let pe=C.toString(16);te||(pe=pe.toUpperCase()),Q="0x"+pe}else le?Q="0b"+C.toString(2):ne&&(Q="0o"+C.toString(8));return x(C)?Q+"n":Q}else return x(C)?B?JSON.stringify(Number(C)):C+"n":m(C)?(A=[],O.wrap=!0,U(),t(C,(Q,pe)=>{$=!1,A.push((ee?"":X)+R(Q,O)+":"+(ee?"":" ")+R(pe,O))}),$?"{}":"{"+K+A.join(","+K)+K+(ee?"":J)+"}"):B?JSON.stringify(C)||"null":String(C)}const de=O.escapeEverything?E:P;return A=C.replace(de,(Q,pe,Te,Ve,ze,It)=>{if(pe){if(O.minimal)return pe;const se=pe.charCodeAt(0),he=pe.charCodeAt(1);if(O.es6){const Me=(se-55296)*1024+he-56320+65536;return"\\u{"+u(Me,te)+"}"}return a(u(se,te))+a(u(he,te))}if(Te)return a(u(Te.charCodeAt(0),te));if(Q=="\0"&&!B&&!L.test(It.charAt(ze+1)))return"\\0";if(Ve)return Ve==H||O.escapeEverything?"\\"+Ve:Ve;if(M.test(Q))return T[Q];if(O.minimal&&!V.test(Q))return Q;const we=u(Q.charCodeAt(0),te);return B||we.length>2?a(we):"\\x"+("00"+we).slice(-2)}),H=="`"&&(A=A.replace(/\$\{/g,"\\${")),O.isScriptContext&&(A=A.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,B?"\\u003C!--":"\\x3C!--")),O.wrap&&(A=H+A+H),A};return R.version="3.0.2",ih=R,ih}HS();function YS({children:s,log:e}){return typeof document<"u"?null:I.jsx("script",{className:"tsr-once",dangerouslySetInnerHTML:{__html:[s,"",'if (typeof __TSR_SSR__ !== "undefined") __TSR_SSR__.cleanScripts()'].filter(Boolean).join(`
`)}})}function KS(){const s=On(),t=(s.options.getScrollRestorationKey||bh)(s.latestLocation),r=t!==bh(s.latestLocation)?t:null;return!s.isScrollRestoring||!s.isServer?null:I.jsx(YS,{children:`(${dy.toString()})(${JSON.stringify(tu)},${JSON.stringify(r)}, undefined, true)`,log:!1})}const wy=k.memo(function({matchId:e}){var t,r;const o=On(),a=Rt({select:T=>{var M;return(M=T.matches.find(L=>L.id===e))==null?void 0:M.routeId}});fr(a);const u=o.routesById[a],c=u.options.pendingComponent??o.options.defaultPendingComponent,h=c?I.jsx(c,{}):null,f=u.options.errorComponent??o.options.defaultErrorComponent,m=u.options.onCatch??o.options.defaultOnCatch,g=u.isRoot?u.options.notFoundComponent??((t=o.options.notFoundRoute)==null?void 0:t.options.component):u.options.notFoundComponent,y=(!u.isRoot||u.options.wrapInSuspense)&&(u.options.wrapInSuspense??c??((r=u.options.errorComponent)==null?void 0:r.preload))?k.Suspense:ql,x=f?Jh:ql,w=g?qS:ql,_=Rt({select:T=>T.loadedAt}),b=Rt({select:T=>{var M;const L=T.matches.findIndex(V=>V.id===e);return(M=T.matches[L-1])==null?void 0:M.routeId}});return I.jsxs(I.Fragment,{children:[I.jsx(bu.Provider,{value:e,children:I.jsx(y,{fallback:h,children:I.jsx(x,{getResetKey:()=>_,errorComponent:f||Su,onCatch:(T,M)=>{if(pn(T))throw T;m==null||m(T,M)},children:I.jsx(w,{fallback:T=>{if(!g||T.routeId&&T.routeId!==a||!T.routeId&&!u.isRoot)throw T;return k.createElement(g,T)},children:I.jsx(ZS,{matchId:e})})})})}),b===En&&o.options.scrollRestoration?I.jsxs(I.Fragment,{children:[I.jsx(XS,{}),I.jsx(KS,{})]}):null]})});function XS(){const s=On(),e=k.useRef(void 0);return I.jsx("script",{suppressHydrationWarning:!0,ref:t=>{t&&(e.current===void 0||e.current.href!==s.latestLocation.href)&&(s.emit({type:"onRendered",...Ts(s.state)}),e.current=s.latestLocation)}},s.latestLocation.state.key)}const ZS=k.memo(function({matchId:e}){var t,r,o;const a=On(),{match:u,key:c,routeId:h}=Rt({select:y=>{const x=y.matches.findIndex(L=>L.id===e),w=y.matches[x],_=w.routeId,b=a.routesById[_].options.remountDeps??a.options.defaultRemountDeps,T=b==null?void 0:b({routeId:_,loaderDeps:w.loaderDeps,params:w._strictParams,search:w._strictSearch});return{key:T?JSON.stringify(T):void 0,routeId:_,match:xh(w,["id","status","error"])}},structuralSharing:!0}),f=a.routesById[h],m=k.useMemo(()=>{const y=f.options.component??a.options.defaultComponent;return y?I.jsx(y,{},c):I.jsx(xy,{})},[c,f.options.component,a.options.defaultComponent]),g=(f.options.errorComponent??a.options.defaultErrorComponent)||Su;if(u.status==="notFound")return fr(pn(u.error)),_y(a,f,u.error);if(u.status==="redirected")throw fr(vs(u.error)),(t=a.getMatch(u.id))==null?void 0:t.loadPromise;if(u.status==="error"){if(a.isServer)return I.jsx(g,{error:u.error,reset:void 0,info:{componentStack:""}});throw u.error}if(u.status==="pending"){const y=f.options.pendingMinMs??a.options.defaultPendingMinMs;if(y&&!((r=a.getMatch(u.id))!=null&&r.minPendingPromise)&&!a.isServer){const x=hi();Promise.resolve().then(()=>{a.updateMatch(u.id,w=>({...w,minPendingPromise:x}))}),setTimeout(()=>{x.resolve(),a.updateMatch(u.id,w=>({...w,minPendingPromise:void 0}))},y)}throw(o=a.getMatch(u.id))==null?void 0:o.loadPromise}return m}),xy=k.memo(function(){const e=On(),t=k.useContext(bu),r=Rt({select:f=>{var m;return(m=f.matches.find(g=>g.id===t))==null?void 0:m.routeId}}),o=e.routesById[r],a=Rt({select:f=>{const g=f.matches.find(y=>y.id===t);return fr(g),g.globalNotFound}}),u=Rt({select:f=>{var m;const g=f.matches,y=g.findIndex(x=>x.id===t);return(m=g[y+1])==null?void 0:m.id}});if(a)return _y(e,o,void 0);if(!u)return null;const c=I.jsx(wy,{matchId:u}),h=e.options.defaultPendingComponent?I.jsx(e.options.defaultPendingComponent,{}):null;return t===En?I.jsx(k.Suspense,{fallback:h,children:c}):c});function QS(){const s=On(),e=s.options.defaultPendingComponent?I.jsx(s.options.defaultPendingComponent,{}):null,t=s.isServer||typeof document<"u"&&s.clientSsr?ql:k.Suspense,r=I.jsxs(t,{fallback:e,children:[I.jsx(WS,{}),I.jsx(JS,{})]});return s.options.InnerWrap?I.jsx(s.options.InnerWrap,{children:r}):r}function JS(){const s=Rt({select:t=>{var r;return(r=t.matches[0])==null?void 0:r.id}}),e=Rt({select:t=>t.loadedAt});return I.jsx(bu.Provider,{value:s,children:I.jsx(Jh,{getResetKey:()=>e,errorComponent:Su,onCatch:t=>{t.message||t.toString()},children:s?I.jsx(wy,{matchId:s}):null})})}function eb(s){return Rt({select:e=>{const t=e.matches;return s!=null&&s.select?s.select(t):t},structuralSharing:s==null?void 0:s.structuralSharing})}function tb(s,e){const t=On(),[r,o]=k.useState(!1),a=k.useRef(!1),u=GS(e),{activeProps:c=()=>({className:"active"}),inactiveProps:h=()=>({}),activeOptions:f,to:m,preload:g,preloadDelay:y,hashScrollIntoView:x,replace:w,startTransition:_,resetScroll:b,viewTransition:T,children:M,target:L,disabled:V,style:E,className:P,onClick:R,onFocus:C,onMouseEnter:O,onMouseLeave:U,onTouchStart:W,ignoreBlocker:B,...H}=s,{params:ee,search:te,hash:X,state:J,mask:z,reloadDocument:Z,...K}=H,A=k.useMemo(()=>{try{return new URL(`${m}`),"external"}catch{}return"internal"},[m]),$=Rt({select:Pe=>Pe.location.search,structuralSharing:!0}),le=eb({select:Pe=>{var Oe;return s.from??((Oe=Pe[Pe.length-1])==null?void 0:Oe.fullPath)}}),ne=k.useMemo(()=>({...s,from:le}),[s,le]),re=k.useMemo(()=>t.buildLocation(ne),[t,ne,$]),ue=k.useMemo(()=>ne.reloadDocument?!1:g??t.options.defaultPreload,[t.options.defaultPreload,g,ne.reloadDocument]),de=y??t.options.defaultPreloadDelay??0,Q=Rt({select:Pe=>{if(f!=null&&f.exact){if(!dS(Pe.location.pathname,re.pathname,t.basepath))return!1}else{const Oe=Jl(Pe.location.pathname,t.basepath).split("/");if(!Jl(re.pathname,t.basepath).split("/").every((tr,Ds)=>tr===Oe[Ds]))return!1}return((f==null?void 0:f.includeSearch)??!0)&&!Ti(Pe.location.search,re.search,{partial:!(f!=null&&f.exact),ignoreUndefined:!(f!=null&&f.explicitUndefined)})?!1:f!=null&&f.includeHash?Pe.location.hash===re.hash:!0}}),pe=k.useCallback(()=>{t.preloadRoute(ne).catch(Pe=>{console.warn(Pe),console.warn(NS)})},[ne,t]),Te=k.useCallback(Pe=>{Pe!=null&&Pe.isIntersecting&&pe()},[pe]);if(jS(u,Te,{rootMargin:"100px"},{disabled:!!V||ue!=="viewport"}),Bo(()=>{a.current||!V&&ue==="render"&&(pe(),a.current=!0)},[V,pe,ue]),A==="external")return{...K,ref:u,type:A,href:m,...M&&{children:M},...L&&{target:L},...V&&{disabled:V},...E&&{style:E},...P&&{className:P},...R&&{onClick:R},...C&&{onFocus:C},...O&&{onMouseEnter:O},...U&&{onMouseLeave:U},...W&&{onTouchStart:W}};const Ve=Pe=>{if(!V&&!nb(Pe)&&!Pe.defaultPrevented&&(!L||L==="_self")&&Pe.button===0){Pe.preventDefault(),tf.flushSync(()=>{o(!0)});const Oe=t.subscribe("onResolved",()=>{Oe(),o(!1)});return t.navigate({...ne,replace:w,resetScroll:b,hashScrollIntoView:x,startTransition:_,viewTransition:T,ignoreBlocker:B})}},ze=Pe=>{V||ue&&pe()},It=ze,we=Pe=>{if(V)return;const Oe=Pe.target||{};if(ue){if(Oe.preloadTimeout)return;Oe.preloadTimeout=setTimeout(()=>{Oe.preloadTimeout=null,pe()},de)}},se=Pe=>{if(V)return;const Oe=Pe.target||{};Oe.preloadTimeout&&(clearTimeout(Oe.preloadTimeout),Oe.preloadTimeout=null)},he=Pe=>Oe=>{var bt;(bt=Oe.persist)==null||bt.call(Oe),Pe.filter(Boolean).forEach(on=>{Oe.defaultPrevented||on(Oe)})},Me=Q?ws(c,{})??{}:{},Le=Q?{}:ws(h,{}),Ce=[P,Me.className,Le.className].filter(Boolean).join(" "),Re={...E,...Me.style,...Le.style};return{...K,...Me,...Le,href:V?void 0:re.maskedLocation?t.history.createHref(re.maskedLocation.href):t.history.createHref(re.href),ref:u,onClick:he([R,Ve]),onFocus:he([C,ze]),onMouseEnter:he([O,we]),onMouseLeave:he([U,se]),onTouchStart:he([W,It]),disabled:!!V,target:L,...Object.keys(Re).length&&{style:Re},...Ce&&{className:Ce},...V&&{role:"link","aria-disabled":!0},...Q&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}const Yo=k.forwardRef((s,e)=>{const{_asChild:t,...r}=s,{type:o,ref:a,...u}=tb(r,e),c=typeof r.children=="function"?r.children({isActive:u["data-status"]==="active"}):r.children;return typeof t>"u"&&delete u.disabled,k.createElement(t||"a",{...u,ref:a},c)});function nb(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}class rb extends fy{constructor(e){super(e),this.useMatch=t=>Qr({select:t==null?void 0:t.select,from:this.id,structuralSharing:t==null?void 0:t.structuralSharing}),this.useRouteContext=t=>Qr({...t,from:this.id,select:r=>t!=null&&t.select?t.select(r.context):r.context}),this.useSearch=t=>vy({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useParams=t=>ef({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useLoaderDeps=t=>gy({...t,from:this.id}),this.useLoaderData=t=>my({...t,from:this.id}),this.useNavigate=()=>yy({from:this.fullPath}),this.Link=ra.forwardRef((t,r)=>I.jsx(Yo,{ref:r,from:this.fullPath,...t})),this.$$typeof=Symbol.for("react.memo")}}function nf(s){return new rb(s)}class sb extends RS{constructor(e){super(e),this.useMatch=t=>Qr({select:t==null?void 0:t.select,from:this.id,structuralSharing:t==null?void 0:t.structuralSharing}),this.useRouteContext=t=>Qr({...t,from:this.id,select:r=>t!=null&&t.select?t.select(r.context):r.context}),this.useSearch=t=>vy({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useParams=t=>ef({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useLoaderDeps=t=>gy({...t,from:this.id}),this.useLoaderData=t=>my({...t,from:this.id}),this.useNavigate=()=>yy({from:this.fullPath}),this.Link=ra.forwardRef((t,r)=>I.jsx(Yo,{ref:r,from:this.fullPath,...t})),this.$$typeof=Symbol.for("react.memo")}}function ib(s){return new sb(s)}const ob=s=>new ab(s);class ab extends ES{constructor(e){super(e)}}function lb({router:s,children:e,...t}){s.update({...s.options,...t,context:{...s.options.context,...t.context}});const r=py(),o=I.jsx(r.Provider,{value:s,children:e});return s.options.Wrap?I.jsx(s.options.Wrap,{children:o}):o}function ub({router:s,...e}){return I.jsx(lb,{router:s,...e,children:I.jsx(QS,{})})}function Sy(s){var e,t,r="";if(typeof s=="string"||typeof s=="number")r+=s;else if(typeof s=="object")if(Array.isArray(s)){var o=s.length;for(e=0;e<o;e++)s[e]&&(t=Sy(s[e]))&&(r&&(r+=" "),r+=t)}else for(t in s)s[t]&&(r&&(r+=" "),r+=t);return r}function by(){for(var s,e,t=0,r="",o=arguments.length;t<o;t++)(s=arguments[t])&&(e=Sy(s))&&(r&&(r+=" "),r+=e);return r}const rf="-",cb=s=>{const e=hb(s),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=s;return{getClassGroupId:u=>{const c=u.split(rf);return c[0]===""&&c.length!==1&&c.shift(),Ty(c,e)||db(u)},getConflictingClassGroupIds:(u,c)=>{const h=t[u]||[];return c&&r[u]?[...h,...r[u]]:h}}},Ty=(s,e)=>{var u;if(s.length===0)return e.classGroupId;const t=s[0],r=e.nextPart.get(t),o=r?Ty(s.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const a=s.join(rf);return(u=e.validators.find(({validator:c})=>c(a)))==null?void 0:u.classGroupId},cv=/^\[(.+)\]$/,db=s=>{if(cv.test(s)){const e=cv.exec(s)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},hb=s=>{const{theme:e,classGroups:t}=s,r={nextPart:new Map,validators:[]};for(const o in t)Th(t[o],r,o,e);return r},Th=(s,e,t,r)=>{s.forEach(o=>{if(typeof o=="string"){const a=o===""?e:dv(e,o);a.classGroupId=t;return}if(typeof o=="function"){if(fb(o)){Th(o(r),e,t,r);return}e.validators.push({validator:o,classGroupId:t});return}Object.entries(o).forEach(([a,u])=>{Th(u,dv(e,a),t,r)})})},dv=(s,e)=>{let t=s;return e.split(rf).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},fb=s=>s.isThemeGetter,pb=s=>{if(s<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const o=(a,u)=>{t.set(a,u),e++,e>s&&(e=0,r=t,t=new Map)};return{get(a){let u=t.get(a);if(u!==void 0)return u;if((u=r.get(a))!==void 0)return o(a,u),u},set(a,u){t.has(a)?t.set(a,u):o(a,u)}}},Ch="!",kh=":",mb=kh.length,gb=s=>{const{prefix:e,experimentalParseClassName:t}=s;let r=o=>{const a=[];let u=0,c=0,h=0,f;for(let w=0;w<o.length;w++){let _=o[w];if(u===0&&c===0){if(_===kh){a.push(o.slice(h,w)),h=w+mb;continue}if(_==="/"){f=w;continue}}_==="["?u++:_==="]"?u--:_==="("?c++:_===")"&&c--}const m=a.length===0?o:o.substring(h),g=vb(m),y=g!==m,x=f&&f>h?f-h:void 0;return{modifiers:a,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:x}};if(e){const o=e+kh,a=r;r=u=>u.startsWith(o)?a(u.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(t){const o=r;r=a=>t({className:a,parseClassName:o})}return r},vb=s=>s.endsWith(Ch)?s.substring(0,s.length-1):s.startsWith(Ch)?s.substring(1):s,yb=s=>{const e=Object.fromEntries(s.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let a=[];return r.forEach(u=>{u[0]==="["||e[u]?(o.push(...a.sort(),u),a=[]):a.push(u)}),o.push(...a.sort()),o}},_b=s=>({cache:pb(s.cacheSize),parseClassName:gb(s),sortModifiers:yb(s),...cb(s)}),wb=/\s+/,xb=(s,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:a}=e,u=[],c=s.trim().split(wb);let h="";for(let f=c.length-1;f>=0;f-=1){const m=c[f],{isExternal:g,modifiers:y,hasImportantModifier:x,baseClassName:w,maybePostfixModifierPosition:_}=t(m);if(g){h=m+(h.length>0?" "+h:h);continue}let b=!!_,T=r(b?w.substring(0,_):w);if(!T){if(!b){h=m+(h.length>0?" "+h:h);continue}if(T=r(w),!T){h=m+(h.length>0?" "+h:h);continue}b=!1}const M=a(y).join(":"),L=x?M+Ch:M,V=L+T;if(u.includes(V))continue;u.push(V);const E=o(T,b);for(let P=0;P<E.length;++P){const R=E[P];u.push(L+R)}h=m+(h.length>0?" "+h:h)}return h};function Sb(){let s=0,e,t,r="";for(;s<arguments.length;)(e=arguments[s++])&&(t=Cy(e))&&(r&&(r+=" "),r+=t);return r}const Cy=s=>{if(typeof s=="string")return s;let e,t="";for(let r=0;r<s.length;r++)s[r]&&(e=Cy(s[r]))&&(t&&(t+=" "),t+=e);return t};function bb(s,...e){let t,r,o,a=u;function u(h){const f=e.reduce((m,g)=>g(m),s());return t=_b(f),r=t.cache.get,o=t.cache.set,a=c,c(h)}function c(h){const f=r(h);if(f)return f;const m=xb(h,t);return o(h,m),m}return function(){return a(Sb.apply(null,arguments))}}const vt=s=>{const e=t=>t[s]||[];return e.isThemeGetter=!0,e},ky=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Ey=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Tb=/^\d+\/\d+$/,Cb=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,kb=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Eb=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Pb=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ab=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ai=s=>Tb.test(s),Ie=s=>!!s&&!Number.isNaN(Number(s)),jr=s=>!!s&&Number.isInteger(Number(s)),oh=s=>s.endsWith("%")&&Ie(s.slice(0,-1)),cr=s=>Cb.test(s),Nb=()=>!0,Rb=s=>kb.test(s)&&!Eb.test(s),Py=()=>!1,Mb=s=>Pb.test(s),Ob=s=>Ab.test(s),Ib=s=>!ve(s)&&!ye(s),Db=s=>Ui(s,Ry,Py),ve=s=>ky.test(s),gs=s=>Ui(s,My,Rb),ah=s=>Ui(s,zb,Ie),hv=s=>Ui(s,Ay,Py),Lb=s=>Ui(s,Ny,Ob),Nl=s=>Ui(s,Oy,Mb),ye=s=>Ey.test(s),Fo=s=>ji(s,My),Fb=s=>ji(s,Ub),fv=s=>ji(s,Ay),Vb=s=>ji(s,Ry),Bb=s=>ji(s,Ny),Rl=s=>ji(s,Oy,!0),Ui=(s,e,t)=>{const r=ky.exec(s);return r?r[1]?e(r[1]):t(r[2]):!1},ji=(s,e,t=!1)=>{const r=Ey.exec(s);return r?r[1]?e(r[1]):t:!1},Ay=s=>s==="position"||s==="percentage",Ny=s=>s==="image"||s==="url",Ry=s=>s==="length"||s==="size"||s==="bg-size",My=s=>s==="length",zb=s=>s==="number",Ub=s=>s==="family-name",Oy=s=>s==="shadow",jb=()=>{const s=vt("color"),e=vt("font"),t=vt("text"),r=vt("font-weight"),o=vt("tracking"),a=vt("leading"),u=vt("breakpoint"),c=vt("container"),h=vt("spacing"),f=vt("radius"),m=vt("shadow"),g=vt("inset-shadow"),y=vt("text-shadow"),x=vt("drop-shadow"),w=vt("blur"),_=vt("perspective"),b=vt("aspect"),T=vt("ease"),M=vt("animate"),L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...V(),ye,ve],P=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],C=()=>[ye,ve,h],O=()=>[ai,"full","auto",...C()],U=()=>[jr,"none","subgrid",ye,ve],W=()=>["auto",{span:["full",jr,ye,ve]},jr,ye,ve],B=()=>[jr,"auto",ye,ve],H=()=>["auto","min","max","fr",ye,ve],ee=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],te=()=>["start","end","center","stretch","center-safe","end-safe"],X=()=>["auto",...C()],J=()=>[ai,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],z=()=>[s,ye,ve],Z=()=>[...V(),fv,hv,{position:[ye,ve]}],K=()=>["no-repeat",{repeat:["","x","y","space","round"]}],A=()=>["auto","cover","contain",Vb,Db,{size:[ye,ve]}],$=()=>[oh,Fo,gs],le=()=>["","none","full",f,ye,ve],ne=()=>["",Ie,Fo,gs],re=()=>["solid","dashed","dotted","double"],ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],de=()=>[Ie,oh,fv,hv],Q=()=>["","none",w,ye,ve],pe=()=>["none",Ie,ye,ve],Te=()=>["none",Ie,ye,ve],Ve=()=>[Ie,ye,ve],ze=()=>[ai,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[cr],breakpoint:[cr],color:[Nb],container:[cr],"drop-shadow":[cr],ease:["in","out","in-out"],font:[Ib],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[cr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[cr],shadow:[cr],spacing:["px",Ie],text:[cr],"text-shadow":[cr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ai,ve,ye,b]}],container:["container"],columns:[{columns:[Ie,ve,ye,c]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[jr,"auto",ye,ve]}],basis:[{basis:[ai,"full","auto",c,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ie,ai,"auto","initial","none",ve]}],grow:[{grow:["",Ie,ye,ve]}],shrink:[{shrink:["",Ie,ye,ve]}],order:[{order:[jr,"first","last","none",ye,ve]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:W()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:W()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":H()}],"auto-rows":[{"auto-rows":H()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...ee(),"normal"]}],"justify-items":[{"justify-items":[...te(),"normal"]}],"justify-self":[{"justify-self":["auto",...te()]}],"align-content":[{content:["normal",...ee()]}],"align-items":[{items:[...te(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...te(),{baseline:["","last"]}]}],"place-content":[{"place-content":ee()}],"place-items":[{"place-items":[...te(),"baseline"]}],"place-self":[{"place-self":["auto",...te()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:X()}],mx:[{mx:X()}],my:[{my:X()}],ms:[{ms:X()}],me:[{me:X()}],mt:[{mt:X()}],mr:[{mr:X()}],mb:[{mb:X()}],ml:[{ml:X()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:J()}],w:[{w:[c,"screen",...J()]}],"min-w":[{"min-w":[c,"screen","none",...J()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[u]},...J()]}],h:[{h:["screen","lh",...J()]}],"min-h":[{"min-h":["screen","lh","none",...J()]}],"max-h":[{"max-h":["screen","lh",...J()]}],"font-size":[{text:["base",t,Fo,gs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ye,ah]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",oh,ve]}],"font-family":[{font:[Fb,ve,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,ye,ve]}],"line-clamp":[{"line-clamp":[Ie,"none",ye,ah]}],leading:[{leading:[a,...C()]}],"list-image":[{"list-image":["none",ye,ve]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ye,ve]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ie,"from-font","auto",ye,gs]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[Ie,"auto",ye,ve]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye,ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye,ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Z()}],"bg-repeat":[{bg:K()}],"bg-size":[{bg:A()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},jr,ye,ve],radial:["",ye,ve],conic:[jr,ye,ve]},Bb,Lb]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:$()}],"gradient-via-pos":[{via:$()}],"gradient-to-pos":[{to:$()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:le()}],"rounded-s":[{"rounded-s":le()}],"rounded-e":[{"rounded-e":le()}],"rounded-t":[{"rounded-t":le()}],"rounded-r":[{"rounded-r":le()}],"rounded-b":[{"rounded-b":le()}],"rounded-l":[{"rounded-l":le()}],"rounded-ss":[{"rounded-ss":le()}],"rounded-se":[{"rounded-se":le()}],"rounded-ee":[{"rounded-ee":le()}],"rounded-es":[{"rounded-es":le()}],"rounded-tl":[{"rounded-tl":le()}],"rounded-tr":[{"rounded-tr":le()}],"rounded-br":[{"rounded-br":le()}],"rounded-bl":[{"rounded-bl":le()}],"border-w":[{border:ne()}],"border-w-x":[{"border-x":ne()}],"border-w-y":[{"border-y":ne()}],"border-w-s":[{"border-s":ne()}],"border-w-e":[{"border-e":ne()}],"border-w-t":[{"border-t":ne()}],"border-w-r":[{"border-r":ne()}],"border-w-b":[{"border-b":ne()}],"border-w-l":[{"border-l":ne()}],"divide-x":[{"divide-x":ne()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ne()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...re(),"hidden","none"]}],"divide-style":[{divide:[...re(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...re(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ie,ye,ve]}],"outline-w":[{outline:["",Ie,Fo,gs]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",m,Rl,Nl]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",g,Rl,Nl]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[Ie,gs]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":ne()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",y,Rl,Nl]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[Ie,ye,ve]}],"mix-blend":[{"mix-blend":[...ue(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ue()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ie]}],"mask-image-linear-from-pos":[{"mask-linear-from":de()}],"mask-image-linear-to-pos":[{"mask-linear-to":de()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":de()}],"mask-image-t-to-pos":[{"mask-t-to":de()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":de()}],"mask-image-r-to-pos":[{"mask-r-to":de()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":de()}],"mask-image-b-to-pos":[{"mask-b-to":de()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":de()}],"mask-image-l-to-pos":[{"mask-l-to":de()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":de()}],"mask-image-x-to-pos":[{"mask-x-to":de()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":de()}],"mask-image-y-to-pos":[{"mask-y-to":de()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[ye,ve]}],"mask-image-radial-from-pos":[{"mask-radial-from":de()}],"mask-image-radial-to-pos":[{"mask-radial-to":de()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":V()}],"mask-image-conic-pos":[{"mask-conic":[Ie]}],"mask-image-conic-from-pos":[{"mask-conic-from":de()}],"mask-image-conic-to-pos":[{"mask-conic-to":de()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Z()}],"mask-repeat":[{mask:K()}],"mask-size":[{mask:A()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ye,ve]}],filter:[{filter:["","none",ye,ve]}],blur:[{blur:Q()}],brightness:[{brightness:[Ie,ye,ve]}],contrast:[{contrast:[Ie,ye,ve]}],"drop-shadow":[{"drop-shadow":["","none",x,Rl,Nl]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",Ie,ye,ve]}],"hue-rotate":[{"hue-rotate":[Ie,ye,ve]}],invert:[{invert:["",Ie,ye,ve]}],saturate:[{saturate:[Ie,ye,ve]}],sepia:[{sepia:["",Ie,ye,ve]}],"backdrop-filter":[{"backdrop-filter":["","none",ye,ve]}],"backdrop-blur":[{"backdrop-blur":Q()}],"backdrop-brightness":[{"backdrop-brightness":[Ie,ye,ve]}],"backdrop-contrast":[{"backdrop-contrast":[Ie,ye,ve]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ie,ye,ve]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ie,ye,ve]}],"backdrop-invert":[{"backdrop-invert":["",Ie,ye,ve]}],"backdrop-opacity":[{"backdrop-opacity":[Ie,ye,ve]}],"backdrop-saturate":[{"backdrop-saturate":[Ie,ye,ve]}],"backdrop-sepia":[{"backdrop-sepia":["",Ie,ye,ve]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ye,ve]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ie,"initial",ye,ve]}],ease:[{ease:["linear","initial",T,ye,ve]}],delay:[{delay:[Ie,ye,ve]}],animate:[{animate:["none",M,ye,ve]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[_,ye,ve]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:pe()}],"rotate-x":[{"rotate-x":pe()}],"rotate-y":[{"rotate-y":pe()}],"rotate-z":[{"rotate-z":pe()}],scale:[{scale:Te()}],"scale-x":[{"scale-x":Te()}],"scale-y":[{"scale-y":Te()}],"scale-z":[{"scale-z":Te()}],"scale-3d":["scale-3d"],skew:[{skew:Ve()}],"skew-x":[{"skew-x":Ve()}],"skew-y":[{"skew-y":Ve()}],transform:[{transform:[ye,ve,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ze()}],"translate-x":[{"translate-x":ze()}],"translate-y":[{"translate-y":ze()}],"translate-z":[{"translate-z":ze()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye,ve]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye,ve]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[Ie,Fo,gs,ah]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Gb=bb(jb);function Mt(...s){return Gb(by(s))}function Iy({className:s,...e}){return I.jsx("div",{"data-slot":"card",className:Mt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...e})}function Wb({className:s,...e}){return I.jsx("div",{"data-slot":"card-header",className:Mt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...e})}function qb({className:s,...e}){return I.jsx("div",{"data-slot":"card-title",className:Mt("leading-none font-semibold",s),...e})}function $b({className:s,...e}){return I.jsx("div",{"data-slot":"card-description",className:Mt("text-muted-foreground text-sm",s),...e})}function Hb({className:s,...e}){return I.jsx("div",{"data-slot":"card-action",className:Mt("col-start-2 row-span-2 row-start-1 self-start justify-self-end",s),...e})}function Dy({className:s,...e}){return I.jsx("div",{"data-slot":"card-content",className:Mt("px-6",s),...e})}function pv(s,e){if(typeof s=="function")return s(e);s!=null&&(s.current=e)}function Ly(...s){return e=>{let t=!1;const r=s.map(o=>{const a=pv(o,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let o=0;o<r.length;o++){const a=r[o];typeof a=="function"?a():pv(s[o],null)}}}}function yr(...s){return k.useCallback(Ly(...s),s)}function sf(s){const e=Kb(s),t=k.forwardRef((r,o)=>{const{children:a,...u}=r,c=k.Children.toArray(a),h=c.find(Zb);if(h){const f=h.props.children,m=c.map(g=>g===h?k.Children.count(f)>1?k.Children.only(null):k.isValidElement(f)?f.props.children:null:g);return I.jsx(e,{...u,ref:o,children:k.isValidElement(f)?k.cloneElement(f,void 0,m):null})}return I.jsx(e,{...u,ref:o,children:a})});return t.displayName=`${s}.Slot`,t}var Yb=sf("Slot");function Kb(s){const e=k.forwardRef((t,r)=>{const{children:o,...a}=t;if(k.isValidElement(o)){const u=Jb(o),c=Qb(a,o.props);return o.type!==k.Fragment&&(c.ref=r?Ly(r,u):u),k.cloneElement(o,c)}return k.Children.count(o)>1?k.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var Xb=Symbol("radix.slottable");function Zb(s){return k.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===Xb}function Qb(s,e){const t={...e};for(const r in e){const o=s[r],a=e[r];/^on[A-Z]/.test(r)?o&&a?t[r]=(...c)=>{const h=a(...c);return o(...c),h}:o&&(t[r]=o):r==="style"?t[r]={...o,...a}:r==="className"&&(t[r]=[o,a].filter(Boolean).join(" "))}return{...s,...t}}function Jb(s){var r,o;let e=(r=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=(o=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:o.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}const mv=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,gv=by,eT=(s,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return gv(s,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:o,defaultVariants:a}=e,u=Object.keys(o).map(f=>{const m=t==null?void 0:t[f],g=a==null?void 0:a[f];if(m===null)return null;const y=mv(m)||mv(g);return o[f][y]}),c=t&&Object.entries(t).reduce((f,m)=>{let[g,y]=m;return y===void 0||(f[g]=y),f},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,m)=>{let{class:g,className:y,...x}=m;return Object.entries(x).every(w=>{let[_,b]=w;return Array.isArray(b)?b.includes({...a,...c}[_]):{...a,...c}[_]===b})?[...f,g,y]:f},[]);return gv(s,u,h,t==null?void 0:t.class,t==null?void 0:t.className)},tT=eT("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Hn({className:s,variant:e,size:t,asChild:r=!1,...o}){const a=r?Yb:"button";return I.jsx(a,{"data-slot":"button",className:Mt(tT({variant:e,size:t,className:s})),...o})}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rT=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),vv=s=>{const e=rT(s);return e.charAt(0).toUpperCase()+e.slice(1)},Fy=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),sT=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=k.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:a,iconNode:u,...c},h)=>k.createElement("svg",{ref:h,...iT,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:Fy("lucide",o),...!a&&!sT(c)&&{"aria-hidden":"true"},...c},[...u.map(([f,m])=>k.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=(s,e)=>{const t=k.forwardRef(({className:r,...o},a)=>k.createElement(oT,{ref:a,iconNode:e,className:Fy(`lucide-${nT(vv(s))}`,`lucide-${s}`,r),...o}));return t.displayName=vv(s),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Eh=of("arrow-left",aT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],uT=of("check",lT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],dT=of("x",cT),hT=[{id:"advection",title:"Advection Test",description:"Tests fluid velocity advection with manual bilinear interpolation and rg32float textures.",status:"stable"},{id:"diffusion",title:"Diffusion Test",description:"Tests fluid property diffusion using compute shaders with texture ping-ponging.",status:"stable"}];function fT(){const s=On(),e=o=>{switch(o){case"stable":return"bg-green-100 text-green-800 border-green-200";case"experimental":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"planned":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},t=o=>{s.navigate({to:"/tests/$testId",params:{testId:o}})},r=()=>I.jsx("div",{className:"border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60",children:I.jsx("div",{className:"container mx-auto px-4 py-4",children:I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx(Hn,{variant:"ghost",size:"sm",asChild:!0,children:I.jsxs(Yo,{to:"/",className:"flex items-center gap-2",children:[I.jsx(Eh,{className:"h-4 w-4"}),"Back to Home"]})}),I.jsx("div",{className:"h-6 w-px bg-border"}),I.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Fluid Simulation Tests"})]})})});return I.jsxs("div",{className:"min-h-screen bg-gray-50",children:[I.jsx(r,{}),I.jsx("div",{className:"container mx-auto py-8",children:I.jsx("div",{className:"max-w-4xl mx-auto px-6",children:I.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:hT.map(o=>I.jsxs(Iy,{children:[I.jsxs(Wb,{children:[I.jsx(qb,{children:o.title}),I.jsx(Hb,{children:I.jsx("span",{className:Mt("px-3 py-1 rounded-full text-xs font-medium border",e(o.status)),children:o.status})})]}),I.jsxs(Dy,{children:[I.jsx($b,{className:"mb-6",children:o.description}),o.status==="stable"?I.jsx(Hn,{onClick:()=>t(o.id),className:"w-full",children:"Launch Test"}):I.jsx(Hn,{disabled:!0,variant:"secondary",className:"w-full",children:o.status==="experimental"?"In Progress":"Planned"})]})]},o.id))})})})]})}const pT=ra.memo(function({isInitialized:e,isPlaying:t,setIsPlaying:r,onStep:o,onRestart:a,title:u,customControls:c}){const h=()=>e?t?{text:"Playing",type:"playing"}:{text:"Ready",type:"ready"}:{text:"Initializing...",type:"loading"},f=T=>{switch(T){case"playing":return"bg-green-100 text-green-800 border-green-200";case"ready":return"bg-blue-100 text-blue-800 border-blue-200";case"loading":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=k.useCallback(()=>{if(e&&o)try{o()}catch(T){console.error(`Failed to step ${u}:`,T)}},[e,o,u]),g=k.useCallback(()=>{e&&o&&r(!0)},[e,o,r]),y=k.useCallback(()=>{r(!1)},[r]),x=k.useCallback(()=>{t?y():g()},[t,g,y]),w=k.useCallback(async()=>{if(!(!e||!a))try{await a()}catch(T){console.error(`Failed to restart ${u}:`,T)}},[e,a,u]);k.useEffect(()=>{const T=M=>{if(!(M.target instanceof HTMLInputElement||M.target instanceof HTMLTextAreaElement||M.target instanceof HTMLSelectElement))switch(M.code){case"Space":M.preventDefault(),e&&o&&x();break;case"KeyR":!M.ctrlKey&&!M.metaKey&&!M.altKey&&!M.shiftKey&&(M.preventDefault(),e&&a&&w());break;case"KeyS":M.preventDefault(),e&&o&&!t&&m();break}};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[e,t,o,a,x,w,m]);const _=o||a,b=h();return I.jsxs("div",{className:"flex flex-col items-center gap-4 md:min-w-[200px]",children:[c&&I.jsxs("div",{className:"w-full flex flex-col items-center gap-2",children:[I.jsx("h3",{className:"text-sm font-semibold text-gray-700 text-center mb-1",children:"Settings"}),c]}),_&&I.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[I.jsx("h3",{className:"text-sm font-semibold text-gray-700 text-center mb-1",children:"Controls"}),o&&I.jsxs(I.Fragment,{children:[I.jsx(Hn,{onClick:g,disabled:!e||t,variant:"default",size:"lg",title:"Play simulation (Spacebar)",className:"w-full",children:"Play"}),I.jsx(Hn,{onClick:y,disabled:!e||!t,variant:"default",size:"lg",title:"Pause simulation (Spacebar)",className:"w-full",children:"Pause"}),I.jsx(Hn,{onClick:m,disabled:!e||t,variant:"default",size:"lg",title:"Step simulation once (S key)",className:"w-full",children:"Step"})]}),a&&I.jsx(Hn,{onClick:w,disabled:!e,variant:"destructive",size:"lg",title:"Restart simulation (R key)",className:"w-full",children:"Restart"})]}),I.jsxs("div",{className:"flex flex-row items-center gap-2",children:[I.jsx("h3",{className:"text-sm font-semibold text-gray-700 inline-block",children:"Status"}),I.jsx("span",{className:Mt("px-3 py-1 rounded-full text-xs font-medium border",f(b.type)),children:b.text})]})]})}),yv=512;function Vy({title:s,onInitialize:e,onStep:t,onRestart:r,canvasHeight:o=yv,canvasWidth:a=yv,customControls:u}){const c=k.useRef(null),h=k.useRef(null),[f,m]=k.useState(!1),[g,y]=k.useState(!1),[x,w]=k.useState(null);k.useEffect(()=>{(async()=>{if(!(!c.current||f)){console.log(`Initializing ${s}`);try{e&&await e(c),m(!0),w(null)}catch(M){console.error(`Failed to initialize ${s}:`,M),m(!1),w(M instanceof Error?M.message:"Unknown error")}}})()},[s,e,f]),k.useEffect(()=>{if(!g||!f||!t)return;const T=()=>{if(g&&f&&t)try{t(),h.current=requestAnimationFrame(T)}catch(M){console.error(`Failed to step ${s}:`,M),y(!1)}};return h.current=requestAnimationFrame(T),()=>{h.current!==null&&(cancelAnimationFrame(h.current),h.current=null)}},[g,f,t,s]);const _=k.useCallback(()=>{if(f&&t)try{t()}catch(T){console.error(`Failed to step ${s}:`,T)}},[f,t,s]),b=k.useCallback(async()=>{if(!(!f||!r))try{await r(c)}catch(T){console.error(`Failed to restart ${s}:`,T)}},[f,r,s]);return I.jsx("div",{className:"p-5",children:I.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col items-center gap-6",children:[x&&I.jsxs("div",{className:"text-red-500 text-sm max-w-md text-center bg-red-50 p-3 rounded-lg border border-red-200",children:[I.jsx("strong",{children:"Error:"})," ",x]}),I.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6 w-full justify-center",children:[I.jsx("div",{className:"flex-shrink-0",children:I.jsx("canvas",{width:a,height:o,ref:c,className:"border border-gray-300 rounded-lg shadow-lg"})}),I.jsx(pT,{isInitialized:f,isPlaying:g,setIsPlaying:y,onStep:_,onRestart:b,title:s,customControls:u&&u(c)})]})]})})}class af{constructor(e){j(this,"textures",new Map);this.device=e}createTexture(e,t){if(this.textures.has(e))throw new Error(`Texture ${e} already exists inside TextureManager!`);this.textures.set(e,{front:this.device.createTexture(t)})}createPingPongTexture(e,t){if(this.textures.has(e))throw new Error(`Texture "${e}" already exists inside TextureManager!`);const r=this.device.createTexture(t),o=this.device.createTexture(t);this.textures.set(e,{front:r,back:o})}swap(e){const t=this.textures.get(e);if(!t)throw new Error(`Texture '${e}' not found`);if(!("back"in t))throw new Error(`Cannot swap static single texture ${e}`);const{front:r,back:o}=t;this.textures.set(e,{front:o,back:r})}getCurrentTexture(e){const t=this.textures.get(e);if(!t)throw new Error(`Texture "${e}" does not exist`);return t.front}getBackTexture(e){const t=this.textures.get(e);if(!t)throw new Error(`Texture ${e} does not exist`);if(!("back"in t))throw new Error(`Texture ${e} is not a ping-pong texture-- it has no back buffer, only a front`);return t.back}destroy(){for(const[e,t]of this.textures.entries())t.front.destroy(),"back"in t&&t.back.destroy();this.textures.clear()}}class mT{constructor(e,t){j(this,"querySet",null);j(this,"resolveBuffer",null);j(this,"resultBuffer",null);j(this,"canTimestamp");j(this,"lastGpuTime",0);this.canTimestamp=t,t&&(this.querySet=e.createQuerySet({type:"timestamp",count:2}),this.resolveBuffer=e.createBuffer({size:this.querySet.count*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.resultBuffer=e.createBuffer({size:this.resolveBuffer.size,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}))}getTimestampWrites(){if(!(!this.canTimestamp||!this.querySet))return{querySet:this.querySet,beginningOfPassWriteIndex:0,endOfPassWriteIndex:1}}resolveTimestamps(e){!this.canTimestamp||!this.querySet||!this.resolveBuffer||!this.resultBuffer||(e.resolveQuerySet(this.querySet,0,this.querySet.count,this.resolveBuffer,0),this.resultBuffer.mapState==="unmapped"&&e.copyBufferToBuffer(this.resolveBuffer,0,this.resultBuffer,0,this.resultBuffer.size))}async readResults(){if(!(!this.canTimestamp||!this.resultBuffer)&&this.resultBuffer.mapState==="unmapped")try{await this.resultBuffer.mapAsync(GPUMapMode.READ);const e=new BigInt64Array(this.resultBuffer.getMappedRange());this.lastGpuTime=Number(e[1]-e[0])/1e3,this.resultBuffer.unmap()}catch(e){console.warn("Failed to read GPU timing results:",e)}}getLastGpuTime(){return this.lastGpuTime}isSupported(){return this.canTimestamp}destroy(){var e,t,r;(e=this.querySet)==null||e.destroy(),(t=this.resolveBuffer)==null||t.destroy(),(r=this.resultBuffer)==null||r.destroy(),this.querySet=null,this.resolveBuffer=null,this.resultBuffer=null}}var pr=(s=>(s[s.WEBGPU_NOT_SUPPORTED=0]="WEBGPU_NOT_SUPPORTED",s[s.NO_ADAPTER=1]="NO_ADAPTER",s[s.NO_DEVICE=2]="NO_DEVICE",s[s.NO_CONTEXT=3]="NO_CONTEXT",s[s.NO_CANVAS=4]="NO_CANVAS",s[s.NO_RESOURCES=5]="NO_RESOURCES",s))(pr||{});class nn extends Error{constructor(e,t){super(e),this.code=t,this.name="WebGPUError"}}async function lf(s){if(!navigator.gpu)throw new nn("WebGPU is not supported on this browser. Please use Google Chrome or Microsoft Edge to run this application",0);const e=await navigator.gpu.requestAdapter();if(!e)throw new nn("No GPU Adapter found",1);const t=e.features.has("timestamp-query");if(!t)throw new nn("Timestamp query is not supported on this GPU");const r=await e.requestDevice({requiredFeatures:[...t?["timestamp-query"]:[]]});if(!r)throw new nn("No GPU Device Found",2);const o=s.getContext("webgpu");if(!o)throw new nn("Could not get Canvas Context",3);const a=navigator.gpu.getPreferredCanvasFormat();return o.configure({device:r,format:a}),{device:r,context:o,canvasFormat:a,canTimestamp:t}}const gT={enableAdvection:!0,enableDiffusion:!0,enableDivergence:!0,enablePressureProjection:!0,enablePressureBoundaryConditions:!0,enableGradientSubtraction:!0,enableVelocityBoundaryConditions:!0,enableDissipation:!0},vT={enableAdvection:!0,enableBoundaryConditions:!0,enableDiffusion:!0,enableDissipation:!0,enableAdvectParticles:!0};class uf{constructor(e,t){j(this,"pipeline");j(this,"bindGroupLayout");j(this,"initialized",!1);this.config=e,this.device=t,this.initializePipeline()}initializePipeline(){const{pipeline:e,bindGroupLayout:t}=this.setupPipeline();this.pipeline=e,this.bindGroupLayout=t,this.initialized=!0}setupPipeline(){const e=this.createBindGroupLayout();return{pipeline:this.device.createComputePipeline({label:`${this.config.name} Pipeline`,layout:this.device.createPipelineLayout({bindGroupLayouts:[e]}),compute:{module:this.config.shader,entryPoint:this.config.entryPoint}}),bindGroupLayout:e}}validateArgs(e,t){for(const r of t)if(!e[r])throw new Error(`${r} is required for ${this.config.name}`)}execute(e,t,r){if(!this.initialized)throw new Error(`Compute Pass "${this.config.name} is not intialized yet"`);const o=this.createBindGroup(t);e.setPipeline(this.pipeline),e.setBindGroup(0,o),e.dispatchWorkgroups(r,r)}}class yT{constructor(e){j(this,"view");j(this,"offset",0);this.view=new DataView(e)}alignTo(e){this.offset=Math.ceil(this.offset/e)*e}writeFloat32(e){this.alignTo(4),this.view.setFloat32(this.offset,e,!0),this.offset+=4}writeInt32(e){this.alignTo(4),this.view.setInt32(this.offset,e,!0),this.offset+=4}writeUint32(e){this.alignTo(4),this.view.setUint32(this.offset,e,!0),this.offset+=4}writeVec2f(e,t){this.alignTo(8),this.writeFloat32(e),this.writeFloat32(t)}writeVec3f(e,t,r){this.alignTo(16),this.writeFloat32(e),this.writeFloat32(t),this.writeFloat32(r),this.offset+=4}writeVec4f(e,t,r,o){this.alignTo(16),this.writeFloat32(e),this.writeFloat32(t),this.writeFloat32(r),this.writeFloat32(o)}writeMat4x4f(e){if(this.alignTo(16),e.length!==16)throw new Error("Matrix must have 16 elements");for(let t=0;t<16;t++)this.writeFloat32(e[t])}writeFloat32Array(e){for(const t of e)this.writeFloat32(t)}writeInt32Array(e){for(const t of e)this.writeInt32(t)}writeUint32Array(e){for(const t of e)this.writeUint32(t)}getCurrentOffset(){return this.offset}skip(e){this.offset+=e}padTo(e){this.alignTo(e)}}class _T{constructor(e,t,r=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST){j(this,"buffer",null);j(this,"lastDataHash",null);this.device=e,this.label=t,this.usage=r}updateBuffer(e){var r;const t=this.getDataHash(e);return this.buffer&&this.buffer.size>=e.byteLength&&this.lastDataHash===t?this.buffer:((!this.buffer||this.buffer.size<e.byteLength)&&((r=this.buffer)==null||r.destroy(),this.buffer=this.device.createBuffer({label:`${this.label} Uniform Buffer`,size:Math.max(e.byteLength,256),usage:this.usage})),this.writeDataToBuffer(e),this.lastDataHash=t,this.buffer)}destroy(){var e;(e=this.buffer)==null||e.destroy(),this.buffer=null,this.lastDataHash=null}writeDataToBuffer(e){if(!this.buffer)throw new Error("Buffer not initialized");if("writeToBuffer"in e)e.writeToBuffer(this.device,this.buffer,0);else if("toFloat32Array"in e){const t=e.toFloat32Array();this.device.queue.writeBuffer(this.buffer,0,t)}else throw new Error(`UniformData must implement either writeToBuffer() or toFloat32Array(). Got: ${Object.getOwnPropertyNames(e)}`)}getDataHash(e){const t=e.getHashData();if(typeof t=="string")return t;const r=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);let o=0;for(let a=0;a<r.length;a++)o=(o<<5)-o+r[a]&4294967295;return o.toString()}}const yi=class yi{constructor(e,t){j(this,"byteLength",2*4);this.timestep=e,this.advectionFactor=t}toFloat32Array(){return yi.reusableArray[0]=this.timestep,yi.reusableArray[1]=this.advectionFactor,yi.reusableArray}getHashData(){return this.toFloat32Array()}};j(yi,"reusableArray",new Float32Array(2));let su=yi;const _i=class _i{constructor(e,t){j(this,"byteLength",2*4);this.timestep=e,this.diffusionFactor=t}toFloat32Array(){const e=1/this.diffusionFactor/this.timestep,t=1/(4+e);return _i.reusableArray[0]=e,_i.reusableArray[1]=t,_i.reusableArray}getHashData(){return this.toFloat32Array()}};j(_i,"reusableArray",new Float32Array(2));let iu=_i;const Go=class Go{constructor(e){j(this,"byteLength",1*4);this.gridScale=e}toFloat32Array(){const e=.5/this.gridScale;return Go.reusableArray[0]=e,Go.reusableArray}getHashData(){return this.toFloat32Array()}};j(Go,"reusableArray",new Float32Array(1));let Ph=Go;const wi=class wi{constructor(e){j(this,"byteLength",2*4);this.gridScale=e}toFloat32Array(){const e=1/this.gridScale,t=-(e*e),r=.25;return wi.reusableArray[0]=t,wi.reusableArray[1]=r,wi.reusableArray}getHashData(){return this.toFloat32Array()}};j(wi,"reusableArray",new Float32Array(2));let Ah=wi;const Wo=class Wo{constructor(e){j(this,"byteLength",1*4);this.gridScale=e}toFloat32Array(){const e=.5/this.gridScale;return Wo.reusableArray[0]=e,Wo.reusableArray}getHashData(){return this.toFloat32Array()}};j(Wo,"reusableArray",new Float32Array(1));let Nh=Wo;const xi=class xi{constructor(e,t=1){j(this,"byteLength",2*4);this.boundaryType=e,this.scale=t}toFloat32Array(){return xi.reusableArray[0]=this.boundaryType,xi.reusableArray[1]=this.scale,xi.reusableArray}getHashData(){return this.toFloat32Array()}};j(xi,"reusableArray",new Float32Array(2));let Uo=xi;const Hr=class Hr{constructor(e,t,r,o){j(this,"byteLength",4*4);this.positionX=e,this.positionY=t,this.radius=r,this.intensity=o}toFloat32Array(){return Hr.reusableArray[0]=this.positionX,Hr.reusableArray[1]=this.positionY,Hr.reusableArray[2]=this.radius,Hr.reusableArray[3]=this.intensity,Hr.reusableArray}getHashData(){return this.toFloat32Array()}};j(Hr,"reusableArray",new Float32Array(4));let Rh=Hr;const qn=class qn{constructor(e,t,r,o,a,u){j(this,"byteLength",6*4);this.positionX=e,this.positionY=t,this.velocityX=r,this.velocityY=o,this.radius=a,this.intensity=u}toFloat32Array(){return qn.reusableArray[0]=this.positionX,qn.reusableArray[1]=this.positionY,qn.reusableArray[2]=this.velocityX,qn.reusableArray[3]=this.velocityY,qn.reusableArray[4]=this.radius,qn.reusableArray[5]=this.intensity,qn.reusableArray}getHashData(){return this.toFloat32Array()}};j(qn,"reusableArray",new Float32Array(6));let Mh=qn;const qo=class qo{constructor(e){j(this,"byteLength",1*4);this.dissipationFactor=e}toFloat32Array(){return qo.reusableArray[0]=this.dissipationFactor,qo.reusableArray}getHashData(){return this.toFloat32Array()}};j(qo,"reusableArray",new Float32Array(1));let ou=qo;const $o=class $o{constructor(e){j(this,"byteLength",1*4);this.timestep=e}toFloat32Array(){return $o.reusableArray[0]=this.timestep,$o.reusableArray}getHashData(){return this.toFloat32Array()}};j($o,"reusableArray",new Float32Array(1));let Oh=$o;var Mi=(s=>(s[s.VELOCITY=0]="VELOCITY",s[s.PRESSURE=1]="PRESSURE",s[s.DENSITY=2]="DENSITY",s[s.PARTICLES=3]="PARTICLES",s))(Mi||{});class cf{constructor(e,t){j(this,"pipeline");j(this,"bindGroupLayout");j(this,"uniformBuffer");this.config=e,this.device=t,this.bindGroupLayout=this.createBindGroupLayout(),this.pipeline=this.device.createRenderPipeline({label:`${this.config.name} Pipeline`,layout:this.device.createPipelineLayout({label:`${this.config.name} Pipeline Layout`,bindGroupLayouts:[this.bindGroupLayout]}),vertex:this.config.vertex,fragment:this.config.fragment}),this.uniformBuffer=this.device.createBuffer({label:`${this.config.name} Uniform Buffer`,size:12*4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST})}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Texture Rendering Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"unfilterable-float",viewDimension:"2d",multisampled:!1}},{binding:1,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"non-filtering"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}}]})}createBindGroup({textureManager:e,sampler:t,texture:r}){return this.device.createBindGroup({label:"Smoke Texture Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.getCurrentTexture(r).createView()},{binding:1,resource:t},{binding:2,resource:{buffer:this.uniformBuffer}}]})}writeToUniformBuffer({noise:e,shaderMode:t,smokeColor:r}){const o=new ArrayBuffer(48),a=new yT(o);a.writeUint32(t),a.writeFloat32(e.stddev),a.writeFloat32(e.mean),a.writeVec3f(e.offsets[0],e.offsets[1],e.offsets[2]),a.writeVec3f(r[0],r[1],r[2]),this.device.queue.writeBuffer(this.uniformBuffer,0,o)}execute(e,t,r){const o=this.createBindGroup(r);e.setPipeline(this.pipeline),e.setBindGroup(0,o),e.draw(t.vertexCount,t.instanceCount)}destroy(){this.uniformBuffer.destroy()}}class In extends Error{constructor(t,r){super(t);j(this,"baseMessage");this.context=r,this.baseMessage=t;let o=t;if(r&&Object.keys(r).length>0){o+=`

Context:`;for(const[u,c]of Object.entries(r))o+=`
  ${u}: ${String(c)}`}const a=this.getSuggestion();a&&(o+=`

Suggestion: ${a}`),this.message=o,this.name=this.constructor.name}}class _v extends In{constructor(t,r){super(`Shader "${t}" not found in registry`,{requestedShader:t,availableShaders:r.length>0?r.join(", "):"none",registrySize:r.length});j(this,"code","SHADER_NOT_FOUND");j(this,"category","REGISTRY")}getSuggestion(){const{requestedShader:t,availableShaders:r}=this.context;if(typeof r=="string"&&r!=="none"){const a=r.split(", ").find(u=>u.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(u.toLowerCase()));if(a)return`Did you mean "${a}"? Register the shader first: shaderRegistry.register("${t}", shaderContent)`}return`Register the shader first: shaderRegistry.register("${t}", shaderContent)`}}class wT extends In{constructor(t){super("Circular import detected",{importChain:t.join(" → "),circularFile:t[t.length-1],chainLength:t.length});j(this,"code","CIRCULAR_IMPORT");j(this,"category","IMPORT")}getSuggestion(){return`Review your @include statements to remove the circular dependency. The file "${this.context.circularFile}" is being imported in a cycle.`}}class xT extends In{constructor(t,r){super(`Maximum import depth of ${t} exceeded`,{maxDepth:t,currentDepth:r.length,importStack:r.join(" → "),deepestFile:r[r.length-1]});j(this,"code","MAX_IMPORT_DEPTH");j(this,"category","IMPORT")}getSuggestion(){return"Reduce nesting depth of @include statements or check for circular imports. This might indicate an infinite recursion in your includes."}}class ST extends In{constructor(t,r){super("Invalid @include directive syntax",{invalidDirective:t,lineContext:r||"unknown",expectedFormat:'@include "filename.wgsl"'});j(this,"code","INVALID_INCLUDE_SYNTAX");j(this,"category","SYNTAX")}getSuggestion(){return'Use the correct syntax: @include "filename.wgsl". Make sure the filename is enclosed in double quotes.'}}class bT extends In{constructor(t,r,o){super(`Variable '${t}' not found in template`,{missingVariable:t,availableVariables:r.length>0?r.join(", "):"none",variableCount:r.length,templateContext:o||"unknown"});j(this,"code","VARIABLE_NOT_FOUND");j(this,"category","VARIABLE")}getSuggestion(){const{missingVariable:t,availableVariables:r}=this.context;if(typeof r=="string"&&r!=="none"){const a=r.split(", ").find(u=>u.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(u.toLowerCase()));if(a)return`Did you mean "${a}"? Add the variable to your options: { variables: { "${t}": value } }`}return`Add the variable to your options: { variables: { "${t}": value } }`}}class lh extends In{constructor(t,r){super(t,r);j(this,"code","REGISTRY_ERROR");j(this,"category","REGISTRY")}getSuggestion(){return"Check your shader registration and ensure all required shaders are properly registered."}}class TT extends In{constructor(t,r){super(t,r);j(this,"code","VARIABLE_ERROR");j(this,"category","VARIABLE")}getSuggestion(){return"Check your variable definitions and ensure all required variables are provided with correct types."}}class CT extends In{constructor(t,r){super("Invalid @define directive syntax",{invalidDirective:t,lineContext:r||"unknown",expectedFormat:"@define IDENTIFIER value"});j(this,"code","INVALID_DEFINE_SYNTAX");j(this,"category","SYNTAX")}getSuggestion(){return"Use the correct syntax: @define IDENTIFIER value. Example: @define PI 3.14159"}}class kT extends In{constructor(t,r,o,a){super(`Identifier '${t}' is already defined`,{identifier:t,previousValue:r,newValue:o,lineContext:a||"unknown"});j(this,"code","DUPLICATE_DEFINE");j(this,"category","SYNTAX")}getSuggestion(){const{identifier:t,previousValue:r}=this.context;return`'${t}' was previously defined as '${r}'. Use a different identifier name or remove the duplicate definition.`}}class ET extends In{constructor(t,r){super(`Invalid @define identifier '${t}'`,{identifier:t,lineContext:r||"unknown",validPattern:"Must start with letter or underscore, followed by letters, digits, or underscores"});j(this,"code","INVALID_DEFINE_IDENTIFIER");j(this,"category","SYNTAX")}getSuggestion(){const{identifier:t}=this.context;return`'${t}' is not a valid identifier. Use only letters, digits, and underscores, starting with a letter or underscore.`}}const Gr={maximumImportDepth:10,importRegex:/@include\s*"([^"]+)"/g,importMatchRegex:/@include\s*"([^"]+)"/,variableRegex:/\$\{(\w+)\}/g,identifierRegex:/^[A-Za-z_][A-Za-z0-9_]*$/,defineMatchRegex:/@define\s+([A-Za-z_][A-Za-z0-9_]*)\s+(.+)$/,defineKeyword:"@define"},ys=class ys{constructor(){j(this,"registry",new Map)}static getInstance(){return ys.instance||(ys.instance=new ys),ys.instance}register(e,t){if(!e.trim())throw new lh("Shader name cannot be empty",{name:e});if(!t.trim())throw new lh("Shader content cannot be empty",{name:e,contentLength:t.length});return this.registry.set(e,t),this}registerMultiple(e){const t=[];if(Object.entries(e).forEach(([r,o])=>{try{this.register(r,o)}catch(a){a instanceof In?t.push(`${r}: ${a.message}`):t.push(`${r}: ${a instanceof Error?a.message:String(a)}`)}}),t.length>0)throw new lh(`Failed to register ${t.length} shader(s)`,{failedShaders:t,successfulCount:Object.keys(e).length-t.length,totalCount:Object.keys(e).length});return this}get(e){return this.registry.get(e)}getAvailable(){return Array.from(this.registry.keys())}process(e,t){const r=this.get(e);if(!r)throw new _v(e,this.getAvailable());return this.processContent(r,t,0,[])}processContent(e,t,r=0,o=[]){if(r>Gr.maximumImportDepth)throw new xT(Gr.maximumImportDepth,o);const{processedShader:a,defines:u}=this.processDefines(e);return e=a,e=this.includeImports(e,t,r,o),e=this.applyDefines(e,u),t!=null&&t.variables&&(e=this.injectShaderVariables(e,t.variables)),e}processDefines(e){const t=new Map,r=e.split(`
`),o=[];for(let a=0;a<r.length;a++){const u=r[a],c=u.match(Gr.defineMatchRegex);if(c){const[h,f,m]=c,g=`line ${a+1}: "${u.trim()}"`;if(!Gr.identifierRegex.test(f))throw new ET(f,g);if(t.has(f))throw new kT(f,t.get(f),m.trim(),g);t.set(f,m.trim()),o.push("")}else if(u.includes(Gr.defineKeyword)){const h=`line ${a+1}: "${u.trim()}"`;throw new CT(u.trim(),h)}else o.push(u)}return{processedShader:o.join(`
`),defines:t}}applyDefines(e,t){if(t.size===0)return e;const r=Array.from(t.entries()).sort((o,a)=>a[0].length-o[0].length);for(const[o,a]of r){const u=new RegExp(`\\b${o}\\b`,"g");e=e.replace(u,a)}return e}includeImports(e,t,r=0,o=[]){const a=e.match(Gr.importRegex);return a&&a.forEach(u=>{const c=u.match(Gr.importMatchRegex);if(!c)throw new ST(u,this.getLineContext(e,u));const h=c[1];if(o.includes(h))throw new wT([...o,h]);const f=this.get(h);if(!f)throw new _v(h,this.getAvailable());const m=this.processContent(f,t,r+1,[...o,h]);e=e.replace(u,m)}),e}getLineContext(e,t){const r=e.split(`
`),o=r.findIndex(c=>c.includes(t));if(o===-1)return"unknown line";const a=o+1,u=r[o].trim();return`line ${a}: "${u}"`}injectShaderVariables(e,t){const r=Object.keys(t);return e.replace(Gr.variableRegex,(o,a)=>{if(a in t){const u=t[a];if(typeof u!="string"&&typeof u!="number")throw new TT(`Invalid variable type for '${a}'`,{variableName:a,actualType:typeof u,expectedTypes:"string | number",value:String(u)});return String(u)}throw new bT(a,r,this.getLineContext(e,o))})}};j(ys,"instance");let Ih=ys;const By=Ih.getInstance();function Gi(s,e){return By.process(s,e)}const PT=`// Advect the velocities in the texture

@include "bilinearInterpolate.wgsl"

struct AdvectionInput {
    timestep: f32,   // delta time
    rdx: f32,        // 1 / the grid scale
};

@group(0) @binding(0) var velocity: texture_2d<f32>;
@group(0) @binding(1) var advection_in: texture_2d<f32>;
@group(0) @binding(2) var advection_out: texture_storage_2d<\${OUT_FORMAT}, write>;
@group(0) @binding(3) var<uniform> input: AdvectionInput;


@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) texture_coord: vec3<u32>,
) {
    let coord = vec2<i32>(texture_coord.xy);
    let texture_size = vec2<i32>(textureDimensions(velocity));
    let current_velocity = textureLoad(velocity, coord, 0).xy;
    let prev_coord = vec2f(coord) - input.timestep * input.rdx * current_velocity;

    // Clamp to valid texture bounds
    let clamped_prev_coord = clamp(prev_coord, vec2f(0.0), vec2f(f32(texture_size.x) - 1.0, f32(texture_size.y) - 1.0));
    
    // Use manual bilinear interpolation instead of sampler
    let advected_quantity = bilinear_interpolate(advection_in, clamped_prev_coord);
    
    textureStore(advection_out, coord, vec4<f32>(advected_quantity.x, advected_quantity.y, 0.0, 0.0));
}`,AT=`// Jacobi iteration solver for Poisson equation Ax = b (A = Laplacian)
// Diffusion: x=velocity, b=velocity
// Pressure: x=pressure, b=velocity divergence

struct JacobiInput {
    alpha: f32,
    rBeta: f32,
};

@group(0) @binding(0) var x_in: texture_2d<f32>;
@group(0) @binding(1) var b_in: texture_2d<f32>;
@group(0) @binding(2) var texture_out: texture_storage_2d<\${FORMAT}, write>;
@group(0) @binding(3) var<uniform> input: JacobiInput;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) u_coords: vec3<u32>
) {
    let coords = u_coords.xy;
    let texture_size = textureDimensions(x_in);
    let i_coords = vec2i(coords);
    
    // Imposes Neumann boundaries (reflecting)
    
    let left_x = max(i_coords.x - 1, 1 - i_coords.x);
    let xl = textureLoad(x_in, vec2u(u32(left_x), coords.y), 0);
    
    let right_x = min(i_coords.x + 1, 2 * i32(texture_size.x) - 3 - i_coords.x);
    let xr = textureLoad(x_in, vec2u(u32(right_x), coords.y), 0);
    
    let top_y = max(i_coords.y - 1, 1 - i_coords.y);
    let xt = textureLoad(x_in, vec2u(coords.x, u32(top_y)), 0);
    
    let bottom_y = min(i_coords.y + 1, 2 * i32(texture_size.y) - 3 - i_coords.y);
    let xb = textureLoad(x_in, vec2u(coords.x, u32(bottom_y)), 0);

    let bc = textureLoad(b_in, coords, 0);

    let result = (xl + xr + xt + xb + input.alpha * bc) * input.rBeta;
    textureStore(texture_out, coords, result);
}`,NT=`// Calculate divergence of velocity field

struct DivergenceInput {
    half_rdx: f32, // Half the grid scale
}

@group(0) @binding(0) var velocity_in: texture_2d<f32>;
@group(0) @binding(1) var divergence_out: texture_storage_2d<r32float, write>;
@group(0) @binding(2) var<uniform> input: DivergenceInput;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) global_id: vec3<u32>,
) {
    let coord = vec2<i32>(global_id.xy);
    let texture_size = vec2<i32>(textureDimensions(velocity_in));

    // Edge case: Simply write 0
    if (coord.x == 0 || coord.x == texture_size.x - 1 || coord.y == 0 || coord.y == texture_size.y - 1) {
        textureStore(divergence_out, coord, vec4f(0.0));
        return;
    }

    let center = textureLoad(velocity_in, coord, 0);
    let left = textureLoad(velocity_in, coord + vec2<i32>(-1, 0), 0);
    let right = textureLoad(velocity_in, coord + vec2<i32>(1, 0), 0);
    let down = textureLoad(velocity_in, coord + vec2<i32>(0, 1), 0);
    let up = textureLoad(velocity_in, coord + vec2<i32>(0, -1), 0);

    let divergence = (right.x - left.x + down.y - up.y) * input.half_rdx;
    textureStore(divergence_out, coord, vec4f(divergence, 0.0, 0.0, 0.0));
}`,RT=`// Calculates the gradient of the pressure, and subtracts it from the velocity field

struct GradientSubtractionInput {
    half_rdx: f32, // Half the grid scale
};

@group(0) @binding(0) var pressure_in: texture_2d<f32>;
@group(0) @binding(1) var velocity_in: texture_2d<f32>;
@group(0) @binding(2) var subtraction_out: texture_storage_2d<rg32float, write>;
@group(0) @binding(3) var<uniform> input: GradientSubtractionInput;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) u_coords: vec3<u32>
) {
    let coord = vec2<i32>(u_coords.xy);
    let texture_size = vec2<i32>(textureDimensions(pressure_in));

    // Edge case, just write 0
    if (coord.x == 0 || coord.x == texture_size.x - 1 || coord.y == 0 || coord.y == texture_size.y - 1) {
        textureStore(subtraction_out, coord, vec4<f32>(0.0, 0.0, 0.0, 0.0));
        return;
    }

    let left    = textureLoad(pressure_in, coord - vec2<i32>(1, 0), 0);
    let right   = textureLoad(pressure_in, coord + vec2<i32>(1, 0), 0);
    let up      = textureLoad(pressure_in, coord - vec2<i32>(0, 1), 0);
    let down    = textureLoad(pressure_in, coord + vec2<i32>(0, 1), 0);

    let pressure_gradient = vec2<f32>(right.x - left.x, down.x - up.x) * input.half_rdx;
    let velocity = textureLoad(velocity_in, coord, 0);
    let result = velocity.xy - pressure_gradient;
    textureStore(subtraction_out, coord, vec4<f32>(result.x, result.y, 0.0, 0.0));
}`,MT=`// Boundary conditions shader
// Enforces different boundary conditions on vector and scalar fields

struct BoundaryInput {
    boundary_type: u32, // BoundaryType: NO_SLIP_VELOCITY = 0, FREE_SLIP_VELOCITY = 1, SCALAR_NEUMANN = 2
    scale: f32,         // For scaling boundary values
};

@group(0) @binding(0) var field_in: texture_2d<f32>;
@group(0) @binding(1) var field_out: texture_storage_2d<\${FORMAT}, write>;
@group(0) @binding(2) var<uniform> input: BoundaryInput;

fn enforce_no_slip_velocity(coord: vec2<i32>, texture_size: vec2<i32>) -> vec4<f32> {
    // No-slip: velocity = 0 at boundaries
    // For velocity field (2 components)
    
    // Corners: zero velocity
    if ((coord.x == 0 || coord.x == texture_size.x - 1) && 
        (coord.y == 0 || coord.y == texture_size.y - 1)) {
        return vec4<f32>(0.0, 0.0, 0.0, 0.0);
    }
    
    // Left and right boundaries
    if (coord.x == 0) {
        let interior = textureLoad(field_in, vec2<i32>(1, coord.y), 0);
        return vec4<f32>(-interior.x, 0.0, 0.0, 0.0); // Reflect x-component, zero y-component
    }
    if (coord.x == texture_size.x - 1) {
        let interior = textureLoad(field_in, vec2<i32>(texture_size.x - 2, coord.y), 0);
        return vec4<f32>(-interior.x, 0.0, 0.0, 0.0); // Reflect x-component, zero y-component
    }
    
    // Top and bottom boundaries
    if (coord.y == 0) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, 1), 0);
        return vec4<f32>(0.0, -interior.y, 0.0, 0.0); // Zero x-component, reflect y-component
    }
    if (coord.y == texture_size.y - 1) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, texture_size.y - 2), 0);
        return vec4<f32>(0.0, -interior.y, 0.0, 0.0); // Zero x-component, reflect y-component
    }
    
    // Interior points: copy unchanged
    return textureLoad(field_in, coord, 0);
}

fn enforce_free_slip_velocity(coord: vec2<i32>, texture_size: vec2<i32>) -> vec4<f32> {
    // Free-slip: normal component = 0, tangential component unchanged
    
    // Corners: zero velocity
    if ((coord.x == 0 || coord.x == texture_size.x - 1) && 
        (coord.y == 0 || coord.y == texture_size.y - 1)) {
        return vec4<f32>(0.0, 0.0, 0.0, 0.0);
    }
    
    // Left and right boundaries (normal is x-direction)
    if (coord.x == 0) {
        let interior = textureLoad(field_in, vec2<i32>(1, coord.y), 0);
        return vec4<f32>(0.0, interior.y, 0.0, 0.0); // Zero normal (x), preserve tangential (y)
    }
    if (coord.x == texture_size.x - 1) {
        let interior = textureLoad(field_in, vec2<i32>(texture_size.x - 2, coord.y), 0);
        return vec4<f32>(0.0, interior.y, 0.0, 0.0); // Zero normal (x), preserve tangential (y)
    }
    
    // Top and bottom boundaries (normal is y-direction)
    if (coord.y == 0) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, 1), 0);
        return vec4<f32>(interior.x, 0.0, 0.0, 0.0); // Preserve tangential (x), zero normal (y)
    }
    if (coord.y == texture_size.y - 1) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, texture_size.y - 2), 0);
        return vec4<f32>(interior.x, 0.0, 0.0, 0.0); // Preserve tangential (x), zero normal (y)
    }
    
    // Interior points: copy unchanged
    return textureLoad(field_in, coord, 0);
}

fn enforce_scalar_boundary(coord: vec2<i32>, texture_size: vec2<i32>) -> vec4<f32> {
    // Neumann boundary conditions for scalar fields (pressure, density, etc.)
    // Zero-gradient: boundary value = adjacent interior value
    
    // Corners: copy from diagonal interior
    if (coord.x == 0 && coord.y == 0) {
        let interior = textureLoad(field_in, vec2<i32>(1, 1), 0);
        return interior;
    }
    if (coord.x == texture_size.x - 1 && coord.y == 0) {
        let interior = textureLoad(field_in, vec2<i32>(texture_size.x - 2, 1), 0);
        return interior;
    }
    if (coord.x == 0 && coord.y == texture_size.y - 1) {
        let interior = textureLoad(field_in, vec2<i32>(1, texture_size.y - 2), 0);
        return interior;
    }
    if (coord.x == texture_size.x - 1 && coord.y == texture_size.y - 1) {
        let interior = textureLoad(field_in, vec2<i32>(texture_size.x - 2, texture_size.y - 2), 0);
        return interior;
    }
    
    // Edge boundaries: copy from adjacent interior
    if (coord.x == 0) {
        let interior = textureLoad(field_in, vec2<i32>(1, coord.y), 0);
        return interior;
    }
    if (coord.x == texture_size.x - 1) {
        let interior = textureLoad(field_in, vec2<i32>(texture_size.x - 2, coord.y), 0);
        return interior;
    }
    if (coord.y == 0) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, 1), 0);
        return interior;
    }
    if (coord.y == texture_size.y - 1) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, texture_size.y - 2), 0);
        return interior;
    }
    
    // Interior points: copy unchanged
    return textureLoad(field_in, coord, 0);
}

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) global_id: vec3<u32>,
) {
    let coord = vec2<i32>(global_id.xy);
    let texture_size = vec2<i32>(textureDimensions(field_in));
    
    // Check if we're at a boundary
    let is_boundary = coord.x == 0 || coord.x == texture_size.x - 1 || 
                     coord.y == 0 || coord.y == texture_size.y - 1;
    
    var result: vec4<f32>;
    
    if (!is_boundary) {
        // Interior points: copy unchanged
        result = textureLoad(field_in, coord, 0);
    } else {
        // Apply boundary conditions based on type
        switch (input.boundary_type) {
            case 0u: { // No-slip velocity
                result = enforce_no_slip_velocity(coord, texture_size);
            }
            case 1u: { // Free-slip velocity
                result = enforce_free_slip_velocity(coord, texture_size);
            }
            case 2u: { // Scalar (Neumann)
                result = enforce_scalar_boundary(coord, texture_size);
            }
            default: {
                result = textureLoad(field_in, coord, 0);
            }
        }
    }
    
    textureStore(field_out, coord, result);
} `,OT=`// Add smoke density at a specific position

struct AddSmokeInput {
    position_x: f32,
    position_y: f32,
    radius: f32,
    intensity: f32,
};

@group(0) @binding(0) var smoke_in: texture_2d<f32>;
@group(0) @binding(1) var smoke_out: texture_storage_2d<r32float, write>;
@group(0) @binding(2) var<uniform> input: AddSmokeInput;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) texture_coord: vec3<u32>,
) {
    let coord = vec2<i32>(texture_coord.xy);
    let texture_size = vec2<i32>(textureDimensions(smoke_in));
    
    if (coord.x >= texture_size.x || coord.y >= texture_size.y) {
        return;
    }
    
    // Get current smoke density
    let current_smoke = textureLoad(smoke_in, coord, 0).r;
    
    // Calculate distance from click position
    let pixel_pos = vec2<f32>(f32(coord.x), f32(coord.y));
    let click_pos = vec2<f32>(input.position_x, input.position_y);
    let distance = length(pixel_pos - click_pos);
    
    // Add smoke with smooth falloff
    var added_smoke = 0.0;
    if (distance <= input.radius) {
        let falloff = 1.0 - (distance / input.radius);
        let smooth_falloff = falloff * falloff * (3.0 - 2.0 * falloff); // Smoothstep
        added_smoke = input.intensity * smooth_falloff;
    }
    
    let new_smoke = min(current_smoke + added_smoke, 1.0); // Clamp to [0,1]
    textureStore(smoke_out, coord, vec4<f32>(new_smoke, 0.0, 0.0, 0.0));
} `,IT=`// Add velocity at a specific position based on mouse movement

struct AddVelocityInput {
    position_x: f32,
    position_y: f32,
    velocity_x: f32,
    velocity_y: f32,
    radius: f32,
    intensity: f32,
};

@group(0) @binding(0) var velocity_in: texture_2d<f32>;
@group(0) @binding(1) var velocity_out: texture_storage_2d<rg32float, write>;
@group(0) @binding(2) var<uniform> input: AddVelocityInput;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) texture_coord: vec3<u32>,
) {
    let coord = vec2<i32>(texture_coord.xy);
    let texture_size = vec2<i32>(textureDimensions(velocity_in));
    
    if (coord.x >= texture_size.x || coord.y >= texture_size.y) {
        return;
    }
    
    // Get current velocity
    let current_velocity = textureLoad(velocity_in, coord, 0).xy;
    
    // Calculate distance from mouse position
    let pixel_pos = vec2<f32>(f32(coord.x), f32(coord.y));
    let mouse_pos = vec2<f32>(input.position_x, input.position_y);
    let distance = length(pixel_pos - mouse_pos);
    
    // Add velocity with smooth falloff
    var added_velocity = vec2<f32>(0.0, 0.0);
    if (distance <= input.radius) {
        let falloff = 1.0 - (distance / input.radius);
        let smooth_falloff = falloff * falloff * (3.0 - 2.0 * falloff); // Smoothstep
        let velocity_delta = vec2<f32>(input.velocity_x, input.velocity_y);
        added_velocity = velocity_delta * input.intensity * smooth_falloff;
    }
    
    let new_velocity = current_velocity + added_velocity;
    textureStore(velocity_out, coord, vec4<f32>(new_velocity.x, new_velocity.y, 0.0, 0.0));
} `,DT=`struct DissipationUniforms {
  dissipation_factor: f32,
}

@group(0) @binding(0) var input_texture: texture_2d<f32>;
@group(0) @binding(1) var output_texture: texture_storage_2d<\${FORMAT}, write>;
@group(0) @binding(2) var<uniform> uniforms: DissipationUniforms;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(@builtin(global_invocation_id) global_id: vec3<u32>) {
  let coord = vec2<i32>(global_id.xy);
  let dimensions = textureDimensions(input_texture);
  
  // Check bounds
  if (coord.x >= i32(dimensions.x) || coord.y >= i32(dimensions.y)) {
    return;
  }
  
  let current_value = textureLoad(input_texture, coord, 0);
  let dissipated_value = current_value * uniforms.dissipation_factor;
  
  textureStore(output_texture, coord, vec4<f32>(dissipated_value));
} `,LT=`// Manual bilinear interpolation function
fn bilinear_interpolate(texture: texture_2d<f32>, coord: vec2<f32>) -> vec2<f32> {
    let texture_size = vec2<f32>(textureDimensions(texture));
    
    // Get the four surrounding pixel coordinates
    let coord_floor = floor(coord);
    let coord_fract = coord - coord_floor;
    
    let coord_i = vec2<i32>(coord_floor);
    let coord_i_plus1 = coord_i + vec2<i32>(1, 1);
    
    // Clamp coordinates to texture bounds
    let max_coord = vec2<i32>(texture_size) - vec2<i32>(1, 1);
    let tl = clamp(coord_i, vec2<i32>(0, 0), max_coord);
    let tr = clamp(vec2<i32>(coord_i.x + 1, coord_i.y), vec2<i32>(0, 0), max_coord);
    let bl = clamp(vec2<i32>(coord_i.x, coord_i.y + 1), vec2<i32>(0, 0), max_coord);
    let br = clamp(coord_i_plus1, vec2<i32>(0, 0), max_coord);
    
    // Sample the four surrounding texels
    let val_tl = textureLoad(texture, tl, 0).xy;
    let val_tr = textureLoad(texture, tr, 0).xy;
    let val_bl = textureLoad(texture, bl, 0).xy;
    let val_br = textureLoad(texture, br, 0).xy;
    
    // Perform bilinear interpolation
    let top = mix(val_tl, val_tr, coord_fract.x);
    let bottom = mix(val_bl, val_br, coord_fract.x);
    let result = mix(top, bottom, coord_fract.y);
    
    return result;
}`,FT=`// --- VERTEX --- //

struct VertexOutput {
    @builtin(position) position: vec4f,
    @location(0) texCoord: vec2f,
}

@vertex
fn vertex_main(
    @builtin(vertex_index) vertexIndex: u32,
) -> VertexOutput {
    let squareVertices: array<vec2f, 6> = array<vec2f, 6>(
        vec2f(-1.0, -1.0),
        vec2f(1.0, -1.0),
        vec2f(-1.0, 1.0),
        vec2f(-1.0, 1.0),
        vec2f(1.0, -1.0),
        vec2f(1.0, 1.0),
    );
    var output: VertexOutput;
    let xy = squareVertices[vertexIndex];
    output.position = vec4f(xy, 0.0, 1.0);
    // Normalize to 0-1, and flip y
    let normalized = xy * 0.5 + 0.5;
    output.texCoord = vec2f(normalized.x, 1.0 - normalized.y);
    return output;
}

// --- FRAGMENT --- //

@define PI 3.141592653589793238462
@define VELOCITY_MODE 0
@define PRESSURE_MODE 1
@define DENSITY_MODE 2
@define PARTICLES_MODE 3

struct FragmentInput {
    shaderMode: u32,
    // mean and std of gaussian noise sampling
    stddev: f32,
    mean: f32,
    // 3 pseudo random sampled values from the GPU
    offsets: vec3f,
    // RGB color for smoke shading
    smokeColor: vec3f,
}

@group(0) @binding(0) var texture: texture_2d<f32>;
@group(0) @binding(1) var textureSampler: sampler;
@group(0) @binding(2) var<uniform> uniformInput: FragmentInput;

// All components are in the range [0…1], including hue.
fn hsv2rgb(c: vec3f) -> vec3f
{
    let K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
    let p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
    return c.z * mix(K.xxx, clamp(p - K.xxx, vec3f(0.0), vec3f(1.0)), c.y);
}

fn shadeVelocity(value: vec2f, input: VertexOutput) -> vec4f {
    let DAMP = 30.0;
    let angle = acos((value.y * value.y) / (dot(value.xy, value.xy)));
    let magnitude = sqrt(dot(value.xy, value.xy)) / DAMP;
    let color = hsv2rgb(vec3f(angle / 8 + PI / 2, 1, 1));
    return vec4f(color * magnitude, 0);
}

fn shadePressure(value: f32, input: VertexOutput) -> vec4f {
    // Pressure
    let DAMP = 30.0;
    if (value < 0) {
        return vec4f(-value, 0, 0, 1) / DAMP;
    } else {
        return vec4f(0, 0, value, 1) / DAMP;
    }
}

fn shadeDensity(value: f32, input: VertexOutput) -> vec4f {
    let density = clamp(value, 0.0, 1.0);
    
    // Get base color from uniform
    let baseColor = uniformInput.smokeColor;
    
    // Add complementary tinting to shadows for more visual interest
    let shadowTint = vec3f(0.1, 0.05, 0.2); // Cool blue tint for shadows
    let highlightBoost = vec3f(1.3, 1.2, 1.4); // Warm boost for highlights
    
    // Enhanced gradient stops with better contrast and vibrancy
    let color1 = (baseColor * 0.05) + shadowTint;
    let color2 = (baseColor * 0.2) + shadowTint * 0.5;
    let color3 = baseColor * 0.4;
    let color4 = baseColor * 0.7;
    let color5 = baseColor * 1.0 + vec3f(0.1, 0.1, 0.1);
    let color6 = baseColor * highlightBoost;
    let color7 = mix(baseColor * 1.5, vec3f(1.0, 1.0, 1.0), 0.3);
    let color8 = vec3f(1.2, 1.2, 1.2);
    
    var finalColor: vec3f;
    
    // multi-stop gradient
    if (density < 0.15) {
        let t = density / 0.15;
        finalColor = mix(color1, color2, smoothstep(0.0, 1.0, t));
    } else if (density < 0.3) {
        let t = (density - 0.15) / 0.15;
        finalColor = mix(color2, color3, smoothstep(0.0, 1.0, t));
    } else if (density < 0.45) {
        let t = (density - 0.3) / 0.15;
        finalColor = mix(color3, color4, smoothstep(0.0, 1.0, t));
    } else if (density < 0.6) {
        let t = (density - 0.45) / 0.15;
        finalColor = mix(color4, color5, smoothstep(0.0, 1.0, t));
    } else if (density < 0.75) {
        let t = (density - 0.6) / 0.15;
        finalColor = mix(color5, color6, smoothstep(0.0, 1.0, t));
    } else if (density < 0.9) {
        let t = (density - 0.75) / 0.15;
        finalColor = mix(color6, color7, smoothstep(0.0, 1.0, t));
    } else {
        let t = (density - 0.9) / 0.1;
        finalColor = mix(color7, color8, smoothstep(0.0, 1.0, t));
    }
    
    // Add subtle saturation boost for mid-tones
    let luminance = dot(finalColor, vec3f(0.299, 0.587, 0.114));
    let saturationBoost = 1.0 + (1.0 - abs(luminance - 0.5) * 2.0) * 0.2;
    finalColor = mix(vec3f(luminance), finalColor, saturationBoost);
    
    let alpha = density * density * (3.0 - 2.0 * density); // Smoothstep for better falloff
    
    return vec4f(finalColor, alpha);
}

fn rand(co: vec2f) -> f32 {
    let r = fract(sin(dot(co.xy, vec2f(12.9898,78.233))) * 43758.5453);
    if (r == 0.0) {
        return 0.000000000001;
    }
    else {
        return r;
    }
}

fn gaussrand(co: vec2f) -> vec4f {
    let offsets = uniformInput.offsets;
    let U = rand(co + vec2(offsets.x, offsets.x));
    let V = rand(co + vec2(offsets.y, offsets.y));
    let R = rand(co + vec2(offsets.z, offsets.z));
    var Z = sqrt(-2.0 * log(U)) * sin(2.0 * PI * V);
    Z = Z * uniformInput.stddev + uniformInput.mean;
    return vec4f(Z, Z, Z, 0.0);
}

fn addNoise(color: vec4f, texCoord: vec2f) -> vec4f {
    let magnitude = sqrt(dot(color.xy, color.xy));
    let noise = gaussrand(texCoord) ;
    let baseNoise = gaussrand(texCoord) * 0.2;
    return color + noise * magnitude + baseNoise;
}

@fragment
fn fragment_main(input: VertexOutput) -> @location(0)vec4f {
    let value = textureSample(texture, textureSampler, input.texCoord);

    var output: vec4f;

    switch uniformInput.shaderMode {
        case VELOCITY_MODE: {
            output = shadeVelocity(value.xy, input);
        }
        case PRESSURE_MODE: {
            output = shadePressure(value.x, input);
        }
        case DENSITY_MODE: {
            output = shadeDensity(value.x, input);
        }
        default: {
            output = vec4(1, 1, 1, 1);
        }
    }

    return addNoise(output, input.texCoord);
}`,VT=`@include "bilinearInterpolate.wgsl"

struct AdvectParticlesUniforms {
    timestep: f32,
}

@group(0) @binding(0) var velocity: texture_2d<f32>;
@group(0) @binding(1) var particle_position: texture_2d<f32>;
@group(0) @binding(2) var particle_position_out: texture_storage_2d<rg32float, write>;
@group(0) @binding(3) var<uniform> uniforms: AdvectParticlesUniforms;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(@builtin(global_invocation_id) global_id: vec3<u32>) {
   let grid_size = vec2f(textureDimensions(velocity));
   let current_position = textureLoad(particle_position, global_id.xy, 0).xy;
   let velocity_at_position = bilinear_interpolate(velocity, current_position);
   let new_position = current_position + velocity_at_position * uniforms.timestep;
   textureStore(particle_position_out, global_id.xy, vec4f(new_position, 0.0, 0.0));
}`,qe={ADVECTION:"advectionShader.wgsl",JACOBI_ITERATION:"jacobiIteration.wgsl",DIVERGENCE:"divergenceShader.wgsl",GRADIENT_SUBTRACTION:"gradientSubtractionShader.wgsl",BOUNDARY_CONDITIONS:"boundaryConditionsShader.wgsl",ADD_SMOKE:"addSmokeShader.wgsl",ADD_VELOCITY:"addVelocityShader.wgsl",DISSIPATION:"dissipationShader.wgsl",BILINEAR_INTERPOLATE:"bilinearInterpolate.wgsl",TEXTURE:"textureShader.wgsl",ADVECT_PARTICLES:"advectParticlesShader.wgsl"};By.registerMultiple({[qe.ADVECTION]:PT,[qe.JACOBI_ITERATION]:AT,[qe.DIVERGENCE]:NT,[qe.GRADIENT_SUBTRACTION]:RT,[qe.BOUNDARY_CONDITIONS]:MT,[qe.ADD_SMOKE]:OT,[qe.ADD_VELOCITY]:IT,[qe.DISSIPATION]:DT,[qe.BILINEAR_INTERPOLATE]:LT,[qe.TEXTURE]:FT,[qe.ADVECT_PARTICLES]:VT});function Yt(s,e){return Gi(s,e)}const Ci=16,zy=8,BT=Math.ceil(Ci/zy),zT=.5;var Uy=(s=>(s.NORTH="N",s.NORTHEAST="NE",s.EAST="E",s.SOUTHEAST="SE",s.SOUTH="S",s.SOUTHWEST="SW",s.WEST="W",s.NORTHWEST="NW",s))(Uy||{});const jy={N:[0,-1],NE:[1,-1],E:[1,0],SE:[1,1],S:[0,1],SW:[-1,1],W:[-1,0],NW:[-1,-1]};function UT(s,e,t="E"){const r=[0,0],o=jy[t],a=[o[0],o[1]],u=new Float32Array([r,r,r,r,r,r,a,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,a,a,a,r,r,r,r,r,r,r,r,a,r,r,r,r,r,a,a,a,r,r,r,r,r,r,r,r,r,r,r,r,r,r,a,a,a,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r].flat());e.queue.writeTexture({texture:s},u,{bytesPerRow:Ci*2*4},{width:Ci,height:Ci})}class jT extends uf{constructor(e){super({name:"Advection Pass",entryPoint:"compute_main",shader:e.createShaderModule({label:"Advection Shader",code:Gi(qe.ADVECTION,{variables:{WORKGROUP_SIZE:zy,OUT_FORMAT:"rg32float"}})})},e)}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Advection Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){if(!e.textureManager)throw new Error("No texture manager supplied");if(!e.uniformBuffer)throw new Error("No uniform buffer supplied");return this.device.createBindGroup({label:"Advection Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:2,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class GT{constructor(){j(this,"resources",null);j(this,"sampler",null);j(this,"textureManager",null);j(this,"advectionPass",null);j(this,"renderingPass",null)}async initialize(e,t="E"){if(!e.current)throw new nn("Could not initialize WebGPU: Canvas not found",pr.NO_CANVAS);this.resources=await lf(e.current),this.textureManager=new af(this.resources.device),this.textureManager.createPingPongTexture("velocity",{label:"Velocity Texture",size:[Ci,Ci],format:"rg32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST}),this.sampler=this.resources.device.createSampler({label:"Texture Sampler"}),UT(this.textureManager.getCurrentTexture("velocity"),this.resources.device,t),this.advectionPass=new jT(this.resources.device);const r=this.resources.device.createShaderModule({label:"Texture Shader",code:Gi(qe.TEXTURE)});this.renderingPass=new cf({name:"Advection Test Rendering",vertex:{module:r,entryPoint:"vertex_main"},fragment:{module:r,entryPoint:"fragment_main",targets:[{format:this.resources.canvasFormat}]}},this.resources.device),this.step({renderOnly:!0})}step({renderOnly:e}={renderOnly:!1}){if(!this.resources||!this.textureManager||!this.advectionPass||!this.renderingPass)throw new nn("Could not step advection test: Resources not initialized. Run initialize() first.",pr.NO_RESOURCES);const t=this.resources.device.createCommandEncoder();if(!e){const o=new Float32Array([.03333333333333333,zT]),a=this.resources.device.createBuffer({label:"Advection UBO",size:o.byteLength,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});this.resources.device.queue.writeBuffer(a,0,o);const u=t.beginComputePass({label:"Advection Test Compute Pass"});this.advectionPass.execute(u,{uniformBuffer:a,textureManager:this.textureManager},BT),u.end(),this.textureManager.swap("velocity")}const r=t.beginRenderPass({label:"Advection Test Render Pass",colorAttachments:[{view:this.resources.context.getCurrentTexture().createView(),loadOp:"clear",storeOp:"store",clearValue:{r:0,g:0,b:0,a:0}}]});this.renderingPass.writeToUniformBuffer({shaderMode:Mi.VELOCITY,noise:{mean:0,stddev:.05,offsets:[Math.random(),Math.random(),Math.random()]},smokeColor:[0,1,0]}),this.renderingPass.execute(r,{vertexCount:6},{sampler:this.sampler,textureManager:this.textureManager,texture:"velocity"}),r.end(),this.resources.device.queue.submit([t.finish()])}}function WT(){const s=k.useRef(null),[e,t]=k.useState("E"),r=async h=>{!h.current||s.current||(s.current=new GT,await s.current.initialize(h,e))},o=()=>{s.current&&s.current.step()},a=async h=>{s.current&&h.current&&await s.current.initialize(h,e)},u=async(h,f)=>{t(h),s.current&&f.current&&await s.current.initialize(f,h)},c=({canvasRef:h})=>I.jsxs("div",{className:"flex flex-col items-center gap-2 mb-4",children:[I.jsx("label",{htmlFor:"direction-select",className:"text-sm font-medium text-gray-700",children:"Advection Direction:"}),I.jsx("select",{id:"direction-select",value:e,onChange:f=>u(f.target.value,h),className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Object.values(Uy).map(f=>I.jsxs("option",{value:f,children:[f," (",jy[f].join(", "),")"]},f))})]});return I.jsx(Vy,{title:"Advection Test",onInitialize:r,onStep:o,onRestart:a,customControls:h=>I.jsx(c,{canvasRef:h})})}const ki=16,Gy=8,qT=Math.ceil(ki/Gy),$T=20;function HT(s,e){const t=[0,0],r=[1,1],o=new Float32Array([t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t].flat());e.queue.writeTexture({texture:s},o,{bytesPerRow:ki*2*4},{width:ki,height:ki})}let YT=class extends uf{constructor(e){super({entryPoint:"compute_main",name:"Diffusion",shader:e.createShaderModule({code:Gi(qe.JACOBI_ITERATION,{variables:{WORKGROUP_SIZE:Gy,FORMAT:"rg32float"}}),label:"Diffusion Shader"})},e)}createBindGroupLayout(){return this.device.createBindGroupLayout({label:`${this.config.name} Bind Group Layout`,entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{viewDimension:"2d",sampleType:"unfilterable-float"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{viewDimension:"2d",sampleType:"unfilterable-float"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",viewDimension:"2d",access:"write-only"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup({textureManager:e,uniformBuffer:t}){if(!e)throw new Error("Supply texture manager to diffusion pass");if(!t)throw new Error("Supply uniform buffer to diffusion pass");return this.device.createBindGroup({label:"Diffusion Bind Layout",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.getCurrentTexture("velocity").createView()},{binding:1,resource:e.getCurrentTexture("velocity").createView()},{binding:2,resource:e.getBackTexture("velocity").createView()},{binding:3,resource:{label:"",buffer:t}}]})}async execute(e,t,r){var o;for(let a=0;a<$T;a++){const u=this.createBindGroup(t);e.setPipeline(this.pipeline),e.setBindGroup(0,u),e.dispatchWorkgroups(r,r),(o=t.textureManager)==null||o.swap("velocity")}}};class KT{constructor(){j(this,"resources",null);j(this,"textureManager",null);j(this,"sampler",null);j(this,"diffusionPass",null);j(this,"renderingPass",null)}async initialize(e){if(!e.current)throw new nn("Could not initialize WebGPU: Canvas not found",pr.NO_CANVAS);this.resources=await lf(e.current),this.textureManager=new af(this.resources.device),this.sampler=this.resources.device.createSampler({label:"Diffusion Rendering Sampler "}),this.textureManager.createPingPongTexture("velocity",{label:"Velocity Texture",size:[ki,ki],format:"rg32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST}),HT(this.textureManager.getCurrentTexture("velocity"),this.resources.device),this.diffusionPass=new YT(this.resources.device);const t=this.resources.device.createShaderModule({label:"Texture Shader",code:Gi(qe.TEXTURE)});this.renderingPass=new cf({name:"Diffusion Test Rendering",vertex:{module:t,entryPoint:"vertex_main"},fragment:{module:t,entryPoint:"fragment_main",targets:[{format:this.resources.canvasFormat}]}},this.resources.device),this.step({renderOnly:!0})}step({renderOnly:e}={renderOnly:!1}){if(!this.resources||!this.textureManager||!this.diffusionPass||!this.renderingPass)throw new nn("Could not step diffusion test: Resources not initialized. Run initialize() first.",pr.NO_RESOURCES);const t=this.resources.device.createCommandEncoder();if(!e){const u=1/.01/.03333333333333333,c=new Float32Array([u,1/(4+u)]),h=this.resources.device.createBuffer({label:"Diffusion UBO",size:c.byteLength,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM});this.resources.device.queue.writeBuffer(h,0,c);const f=t.beginComputePass({label:"Diffusion Test Compute Pass"});this.diffusionPass.execute(f,{uniformBuffer:h,textureManager:this.textureManager},qT),f.end(),this.textureManager.swap("velocity")}const r=t.beginRenderPass({label:"Diffusion Test Render Pass",colorAttachments:[{view:this.resources.context.getCurrentTexture().createView(),loadOp:"clear",storeOp:"store",clearValue:{r:0,g:0,b:0,a:0}}]});this.renderingPass.writeToUniformBuffer({shaderMode:Mi.VELOCITY,noise:{mean:0,stddev:.05,offsets:[Math.random(),Math.random(),Math.random()]},smokeColor:[0,1,0]}),this.renderingPass.execute(r,{vertexCount:6},{sampler:this.sampler,textureManager:this.textureManager,texture:"velocity"}),r.end(),this.resources.device.queue.submit([t.finish()])}}function XT(){const s=k.useRef(null),e=async o=>{!o.current||s.current||(s.current=new KT,await s.current.initialize(o))},t=()=>{s.current&&s.current.step()},r=async o=>{s.current&&o.current&&await s.current.initialize(o)};return I.jsx(Vy,{title:"Diffusion Test",onInitialize:e,onStep:t,onRestart:r})}function ZT(){const{testId:s}=ef({from:"/tests/$testId"}),e=()=>I.jsx("div",{className:"border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60",children:I.jsx("div",{className:"container mx-auto px-4 py-4",children:I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx(Hn,{variant:"ghost",size:"sm",asChild:!0,children:I.jsxs(Yo,{to:"/tests",className:"flex items-center gap-2",children:[I.jsx(Eh,{className:"h-4 w-4"}),"Back to Tests"]})}),I.jsx("div",{className:"h-6 w-px bg-border"}),I.jsxs("h1",{className:"text-lg font-semibold text-gray-900 capitalize",children:[s," Test"]})]})})}),t=()=>{switch(s){case"advection":return I.jsx(WT,{});case"diffusion":return I.jsx(XT,{});default:return I.jsxs("div",{className:"p-8 text-center",children:[I.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Test Not Found"}),I.jsxs("p",{className:"text-gray-600 mb-6",children:['The test "',s,'" could not be found.']}),I.jsx(Hn,{variant:"outline",asChild:!0,children:I.jsxs(Yo,{to:"/tests",children:[I.jsx(Eh,{className:"h-4 w-4 mr-2"}),"Back to Tests"]})})]})}};return I.jsxs("div",{className:"min-h-screen bg-gray-50",children:[I.jsx(e,{}),I.jsx("div",{className:"container mx-auto",children:t()})]})}class Ml{constructor(e=60){j(this,"samples",[]);j(this,"maxSamples");this.maxSamples=e}addSample(e){e<0||(this.samples.push(e),this.samples.length>this.maxSamples&&this.samples.shift())}get(){return this.samples.length===0?0:this.samples.reduce((t,r)=>t+r,0)/this.samples.length}clear(){this.samples=[]}}class QT{constructor(e=!1){j(this,"jsAverage",new Ml);j(this,"fpsAverage",new Ml);j(this,"timestepAverage",new Ml);j(this,"gpuAverage",new Ml);j(this,"timers",new Map);j(this,"lastFrameTime",performance.now());j(this,"gpuSupported",!1);this.gpuSupported=e}setGpuSupported(e){this.gpuSupported=e}startTimer(e){this.timers.set(e,performance.now())}endTimer(e){const t=this.timers.get(e);if(!t)return 0;const r=performance.now()-t;return this.timers.delete(e),r}recordJS(e){this.jsAverage.addSample(e)}recordGPU(e){this.gpuAverage.addSample(e)}recordTimestep(e){this.timestepAverage.addSample(e*1e3)}recordFrame(){const e=performance.now(),t=(e-this.lastFrameTime)/1e3;t>0&&this.fpsAverage.addSample(1/t),this.lastFrameTime=e}getMetrics(){return{js:this.jsAverage.get(),fps:this.fpsAverage.get(),timestep:this.timestepAverage.get(),gpu:this.gpuAverage.get(),gpuSupported:this.gpuSupported}}clear(){this.jsAverage.clear(),this.fpsAverage.clear(),this.timestepAverage.clear(),this.gpuAverage.clear(),this.timers.clear()}}const JT=[{key:"fps",label:"fps:",format:s=>`${s.toFixed(0)}`,className:s=>{const e=s;return e>=55?"text-green-400":e>=30?"text-yellow-400":"text-red-400"}},{key:"js",label:"js:",format:s=>`${s.toFixed(1)}ms`},{key:"gpu",label:"gpu:",format:(s,e)=>e.gpuSupported?`${s.toFixed(1)}µs`:"N/A",condition:s=>s.gpuSupported||!0},{key:"timestep",label:"dt:",format:s=>`${s.toFixed(1)}ms`}],eC=[{key:"mouseMoveCallsPerSecond",label:"mouse:",format:s=>`${s.toFixed(1)}/s`,className:s=>s>100?"text-red-400":s>60?"text-yellow-400":"text-green-400"},{key:"mouseDownCallsPerSecond",label:"click:",format:s=>`${s.toFixed(1)}/s`}],tC=ra.memo(({metrics:s,eventMetrics:e,isVisible:t})=>{if(!t)return null;const r=e&&Object.values(e).some(o=>o>0);return I.jsx(Iy,{className:"fixed top-4 left-4 z-50 w-32 bg-black/80 text-white border-gray-600",children:I.jsxs(Dy,{className:"p-3 space-y-1",children:[JT.map(o=>{if(o.condition&&!o.condition(s))return null;const a=s[o.key],u=o.format(a,s),c=typeof o.className=="function"?o.className(a,s):o.className;return I.jsxs("div",{className:"flex justify-between text-xs font-mono",children:[I.jsx("span",{children:o.label}),I.jsx("span",{className:c,children:u})]},o.key)}),r&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"border-t border-gray-600 my-2"}),I.jsx("div",{className:"text-xs font-mono text-gray-300 mb-1",children:"events"}),eC.map(o=>{if(!e||e[o.key]===void 0)return null;const a=e[o.key],u=o.format(a),c=typeof o.className=="function"?o.className(a):o.className;return I.jsxs("div",{className:"flex justify-between text-xs font-mono",children:[I.jsx("span",{children:o.label}),I.jsx("span",{className:c,children:u})]},o.key)})]})]})})}),nC=()=>{const[s,e]=k.useState(!1);return k.useEffect(()=>{const t=r=>{r.key.toLowerCase()==="p"&&e(o=>!o)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),s};class rC{constructor(e,t=1e3){j(this,"callTimes",[]);j(this,"lastCleanupTime",performance.now());j(this,"maxAge");j(this,"name");this.name=e,this.maxAge=t}recordCall(){const e=performance.now();this.callTimes.push(e),e-this.lastCleanupTime>this.maxAge&&(this.cleanup(e),this.lastCleanupTime=e)}getCallsPerSecond(){const e=performance.now();if(this.cleanup(e),this.callTimes.length===0)return 0;const t=e-this.maxAge;return this.callTimes.filter(o=>o>t).length*(1e3/this.maxAge)}getStats(){return{name:this.name,callsPerSecond:this.getCallsPerSecond(),totalCalls:this.callTimes.length}}reset(){this.callTimes=[],this.lastCleanupTime=performance.now()}cleanup(e){const t=e-this.maxAge;this.callTimes=this.callTimes.filter(r=>r>t)}}class sC{constructor(e,t){j(this,"pendingEvents",[]);j(this,"rafId",null);j(this,"isProcessing",!1);j(this,"callback");j(this,"onEventBatch");this.callback=e,this.onEventBatch=t}addEvent(e){this.pendingEvents.push(e),this.rafId===null&&!this.isProcessing&&(this.rafId=requestAnimationFrame(()=>{this.processBatch()}))}destroy(){this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.pendingEvents=[]}processBatch(){if(this.pendingEvents.length===0)return;this.isProcessing=!0;const e=[...this.pendingEvents];this.pendingEvents=[],this.rafId=null,this.onEventBatch&&this.onEventBatch(e.length);try{this.callback(e)}finally{this.isProcessing=!1}}}var $l=(s=>(s[s.NO_SLIP_VELOCITY=0]="NO_SLIP_VELOCITY",s[s.FREE_SLIP_VELOCITY=1]="FREE_SLIP_VELOCITY",s[s.SCALAR_NEUMANN=2]="SCALAR_NEUMANN",s))($l||{});const iC={read_read_write_uniform:{label:"Read-Read-Write-Uniform Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]},read_write_uniform:{label:"Read-Write-Uniform Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"r32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]},pressure:{label:"Pressure Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"r32float",access:"write-only",viewDimension:"2d"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]},gradient:{label:"Gradient Subtraction Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]},boundary:{label:"Boundary Conditions Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}};class _r{static getBindGroupLayout(e,t){let r=this.layoutMap.get(e);if(r||(r=new Map,this.layoutMap.set(e,r)),r.has(t))return r.get(t);const o=iC[t];if(!o)throw new Error(`Unknown layout type: ${t}`);const a=e.createBindGroupLayout(o);return r.set(t,a),a}static destroyDevice(e){const t=this.layoutMap.get(e);t&&(t.clear(),this.layoutMap.delete(e))}static destroyAll(){for(const[e,t]of this.layoutMap.entries())t.clear();this.layoutMap.clear()}}j(_r,"layoutMap",new Map);class Dn extends uf{constructor(t,r,o){super(t,r);j(this,"uniformManager");this.uniformManager=new _T(r,o)}executeWithUniforms(t,r,o,a){const u=this.uniformManager.updateBuffer(r),c=this.createBindGroup({textureManager:o,uniformBuffer:u});t.setPipeline(this.pipeline),t.setBindGroup(0,c),t.dispatchWorkgroups(a,a)}destroy(){this.uniformManager.destroy()}}class df extends Dn{constructor(){super(...arguments);j(this,"cachedBindGroupSwaps",null)}getCachedBindGroups(t,r){if(this.cachedBindGroupSwaps)return this.cachedBindGroupSwaps;const o=this.uniformManager.updateBuffer(t),a=this.createBindGroup({textureManager:r,uniformBuffer:o});r.swap(this.getSwapTextureId());const u=this.createBindGroup({textureManager:r,uniformBuffer:o});return r.swap(this.getSwapTextureId()),this.cachedBindGroupSwaps=[a,u],this.cachedBindGroupSwaps}executeIterations(t,r,o,a,u){const c=this.getCachedBindGroups(r,o);t.setPipeline(this.pipeline);for(let h=0;h<u;h++)t.setBindGroup(0,c[h%2]),t.dispatchWorkgroups(a,a)}}class oC extends Dn{constructor(e,t){super({name:"Smoke Density Advection",entryPoint:"compute_main",shader:e.createShaderModule({label:"Advection Shader",code:Yt(qe.ADVECTION,{variables:{WORKGROUP_SIZE:t,OUT_FORMAT:"r32float"}})})},e,"Smoke Advection Uniforms")}createBindGroupLayout(){return _r.getBindGroupLayout(this.device,"pressure")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Advection Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("smokeDensity").createView()},{binding:2,resource:e.textureManager.getBackTexture("smokeDensity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class aC extends df{constructor(e,t){super({name:"Diffusion",entryPoint:"compute_main",shader:e.createShaderModule({label:"Diffusion Shader",code:Yt(qe.JACOBI_ITERATION,{variables:{WORKGROUP_SIZE:t,FORMAT:"r32float"}})})},e,"Smoke Diffusion Uniforms")}getSwapTextureId(){return"smokeDensity"}createBindGroupLayout(){return _r.getBindGroupLayout(this.device,"pressure")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Diffusion Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("smokeDensity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("smokeDensity").createView()},{binding:2,resource:e.textureManager.getBackTexture("smokeDensity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class lC extends Dn{constructor(e,t){super({name:"Advection",entryPoint:"compute_main",shader:e.createShaderModule({label:"Advection Shader",code:Yt(qe.ADVECTION,{variables:{WORKGROUP_SIZE:t,OUT_FORMAT:"rg32float"}})})},e,"Velocity Advection Uniforms")}createBindGroupLayout(){return _r.getBindGroupLayout(this.device,"read_read_write_uniform")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Advection Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:2,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class uC extends df{constructor(e,t){super({name:"Diffusion",entryPoint:"compute_main",shader:e.createShaderModule({label:"Diffusion Shader",code:Yt(qe.JACOBI_ITERATION,{variables:{WORKGROUP_SIZE:t,FORMAT:"rg32float"}})})},e,"Velocity Diffusion Uniforms")}getSwapTextureId(){return"velocity"}createBindGroupLayout(){return _r.getBindGroupLayout(this.device,"read_read_write_uniform")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Diffusion Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:2,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class cC extends Dn{constructor(e,t){super({name:"Divergence",entryPoint:"compute_main",shader:e.createShaderModule({label:"Divergence Shader",code:Yt(qe.DIVERGENCE,{variables:{WORKGROUP_SIZE:t}})})},e,"Divergence Uniforms")}createBindGroupLayout(){return _r.getBindGroupLayout(this.device,"read_write_uniform")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Divergence Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("divergence").createView()},{binding:2,resource:{buffer:e.uniformBuffer}}]})}}class dC extends df{constructor(e,t){super({name:"Pressure",entryPoint:"compute_main",shader:e.createShaderModule({label:"Pressure Shader",code:Yt(qe.JACOBI_ITERATION,{variables:{WORKGROUP_SIZE:t,FORMAT:"r32float"}})})},e,"Pressure Uniforms")}getSwapTextureId(){return"pressure"}createBindGroupLayout(){return _r.getBindGroupLayout(this.device,"pressure")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Pressure Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("pressure").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("divergence").createView()},{binding:2,resource:e.textureManager.getBackTexture("pressure").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class hC extends Dn{constructor(e,t){super({name:"Gradient Subtraction",entryPoint:"compute_main",shader:e.createShaderModule({label:"Gradient Subtraction Shader",code:Yt(qe.GRADIENT_SUBTRACTION,{variables:{WORKGROUP_SIZE:t}})})},e,"Gradient Subtraction Uniforms")}createBindGroupLayout(){return _r.getBindGroupLayout(this.device,"gradient")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Gradient Subtraction Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("pressure").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:2,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class fC extends Dn{constructor(t,r){const o=Yt(qe.BOUNDARY_CONDITIONS,{variables:{WORKGROUP_SIZE:r,FORMAT:"rg32float"}}),a=Yt(qe.BOUNDARY_CONDITIONS,{variables:{WORKGROUP_SIZE:r,FORMAT:"r32float"}}),u=t.createShaderModule({label:"Boundary Conditions Velocity Shader",code:o}),c=t.createShaderModule({label:"Boundary Conditions Scalar Shader",code:a});super({name:"Boundary Conditions",entryPoint:"compute_main",shader:u},t,"Boundary Conditions Uniforms");j(this,"velocityShader");j(this,"scalarShader");j(this,"velocityPipeline",null);j(this,"scalarPipeline",null);this.velocityShader=u,this.scalarShader=c}getVelocityBindGroupLayout(){return this.device.createBindGroupLayout({label:"Boundary Velocity Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}getScalarBindGroupLayout(){return this.device.createBindGroupLayout({label:"Boundary Scalar Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"r32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}getVelocityPipeline(){return this.velocityPipeline||(this.velocityPipeline=this.device.createComputePipeline({label:"Boundary Conditions Velocity Pipeline",layout:this.device.createPipelineLayout({bindGroupLayouts:[this.getVelocityBindGroupLayout()]}),compute:{module:this.velocityShader,entryPoint:"compute_main"}})),this.velocityPipeline}getScalarPipeline(){return this.scalarPipeline||(this.scalarPipeline=this.device.createComputePipeline({label:"Boundary Conditions Scalar Pipeline",layout:this.device.createPipelineLayout({bindGroupLayouts:[this.getScalarBindGroupLayout()]}),compute:{module:this.scalarShader,entryPoint:"compute_main"}})),this.scalarPipeline}createBindGroupLayout(){return this.getVelocityBindGroupLayout()}createBindGroup(t){throw new Error("Use executeForTexture method instead")}executeForTexture(t,r,o,a,u){const c=r==="velocity",h=c?this.getVelocityPipeline():this.getScalarPipeline(),f=this.uniformManager.updateBuffer(o),m=this.device.createBindGroup({label:`Boundary ${r} Bind Group`,layout:c?this.getVelocityBindGroupLayout():this.getScalarBindGroupLayout(),entries:[{binding:0,resource:a.getCurrentTexture(r).createView()},{binding:1,resource:a.getBackTexture(r).createView()},{binding:2,resource:{buffer:f}}]});t.setPipeline(h),t.setBindGroup(0,m),t.dispatchWorkgroups(u,u)}destroy(){this.velocityPipeline=null,this.scalarPipeline=null,super.destroy()}}class pC extends Dn{constructor(e,t){super({name:"Add Smoke",entryPoint:"compute_main",shader:e.createShaderModule({label:"Add Smoke Shader",code:Yt(qe.ADD_SMOKE,{variables:{WORKGROUP_SIZE:t}})})},e,"Add Smoke Uniforms")}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Add Smoke Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"r32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Add Smoke Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("smokeDensity").createView()},{binding:1,resource:e.textureManager.getBackTexture("smokeDensity").createView()},{binding:2,resource:{buffer:e.uniformBuffer}}]})}}class mC extends Dn{constructor(e,t){super({name:"Add Velocity",entryPoint:"compute_main",shader:e.createShaderModule({label:"Add Velocity Shader",code:Yt(qe.ADD_VELOCITY,{variables:{WORKGROUP_SIZE:t}})})},e,"Add Velocity Uniforms")}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Add Velocity Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Add Velocity Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:2,resource:{buffer:e.uniformBuffer}}]})}}class gC extends Dn{constructor(e,t){super({name:"Smoke Dissipation",entryPoint:"compute_main",shader:e.createShaderModule({label:"Smoke Dissipation Shader",code:Yt(qe.DISSIPATION,{variables:{WORKGROUP_SIZE:t,FORMAT:"r32float",CHANNELS:1}})})},e,"Smoke Dissipation Uniforms")}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Smoke Dissipation Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"r32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Smoke Dissipation Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("smokeDensity").createView()},{binding:1,resource:e.textureManager.getBackTexture("smokeDensity").createView()},{binding:2,resource:{buffer:e.uniformBuffer}}]})}}class vC extends Dn{constructor(e,t){super({name:"Advect Particles",entryPoint:"compute_main",shader:e.createShaderModule({label:"Advect Particles Shader",code:Yt(qe.ADVECT_PARTICLES,{variables:{WORKGROUP_SIZE:t}})})},e,"Advect Particles Uniforms")}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Advect Particles Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Advect Particles Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("smokeParticlePosition").createView()},{binding:2,resource:e.textureManager.getBackTexture("smokeParticlePosition").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class yC extends Dn{constructor(e,t){super({name:"Velocity Dissipation",entryPoint:"compute_main",shader:e.createShaderModule({label:"Velocity Dissipation Shader",code:Yt(qe.DISSIPATION,{variables:{WORKGROUP_SIZE:t,FORMAT:"rg32float",CHANNELS:2}})})},e,"Velocity Dissipation Uniforms")}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Velocity Dissipation Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Velocity Dissipation Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:2,resource:{buffer:e.uniformBuffer}}]})}}const Pn=4,Tu={grid:{size:{width:2**9,height:2**8},scale:1},compute:{workgroupSize:16,get workgroupCount(){return Math.ceil(Tu.grid.size.width/this.workgroupSize)}},physics:{maxTimestep:1/30,diffusionFactor:10,velocityAdvection:10,smokeAdvection:20,smokeDiffusion:1.1,smokeDissipationFactor:.995,velocityDissipationFactor:.995},interaction:{radius:20,smokeIntensity:.18,velocityIntensity:2},iterations:{diffusion:20,pressure:40},particles:{smokeDimensions:{width:2**7,height:2**7}},noise:{stddev:.08,mean:0},lavaLamp:{spawnAreaHeightPercent:.1,velocityRange:{horizontal:{min:-2,max:2},vertical:{min:1,max:8}},pillDuration:{min:500,max:3e3},pillInterval:50,spawnInterval:{min:1e3,max:3e3},velocityScale:40,subPills:{count:{min:4,max:8},spawnDelay:{min:50,max:100},velocityVariation:1.1,positionVariation:30}}};class Ei{constructor(e,t,r){j(this,"data");j(this,"width");j(this,"height");this.width=e,this.height=t,this.data=new Array(e*t),r!==void 0&&this.data.fill(r)}static fromArray(e,t,r,o=!1){if(e.length!==t*r)throw new Error(`Data length ${e.length} does not match dimensions ${t}x${r}`);const a=new Ei(t,r);if(o){const u=new Array(e.length);for(let c=0;c<r;c++){const h=r-1-c;for(let f=0;f<t;f++){const m=h*t+f,g=c*t+f;u[g]=e[m]}}a.data=u}else a.data=[...e];return a}get(e,t){if(e<0||e>=this.width||t<0||t>=this.height)throw new Error(`Coordinates (${e}, ${t}) out of bounds for ${this.width}x${this.height} array`);return this.data[t*this.width+e]}set(e,t,r){if(e<0||e>=this.width||t<0||t>=this.height)throw new Error(`Coordinates (${e}, ${t}) out of bounds for ${this.width}x${this.height} array`);this.data[t*this.width+e]=r}getIndex(e){if(e<0||e>=this.data.length)throw new Error(`Index ${e} out of bounds for array of length ${this.data.length}`);return this.data[e]}setIndex(e,t){if(e<0||e>=this.data.length)throw new Error(`Index ${e} out of bounds for array of length ${this.data.length}`);this.data[e]=t}get length(){return this.data.length}forEach(e){for(let t=0;t<this.height;t++)for(let r=0;r<this.width;r++){const o=t*this.width+r;e(this.data[o],r,t,o)}}map(e){const t=new Ei(this.width,this.height);return this.forEach((r,o,a,u)=>{t.setIndex(u,e(r,o,a,u))}),t}fill(e){this.data.fill(e)}clone(){return Ei.fromArray(this.data,this.width,this.height)}getAtNormalized(e,t){if(e<0||e>1||t<0||t>1)throw new Error(`Normalized coordinates (${e}, ${t}) must be in range [0, 1]`);const r=Math.floor(e*this.width),o=Math.floor(t*this.height),a=Math.min(r,this.width-1),u=Math.min(o,this.height-1);return this.get(a,u)}}function wv(s,e,t,r=1,o=!1){const a=Math.floor(e/r),u=Math.floor(t/r);if(s.length!==a*u)throw new Error(`Data length ${s.length} does not match expected downsampled dimensions ${a}x${u}`);return Ei.fromArray(Array.from(s),a,u,o)}function _C(s,e,t,r=1,o=!1){const a=Math.floor(e/r),u=Math.floor(t/r);if(s.length!==a*u)throw new Error(`Data length ${s.length} does not match expected downsampled dimensions ${a}x${u}`);return Ei.fromArray(s,a,u,o)}class wC{constructor(e=100){j(this,"bounds",null);j(this,"updateTime",0);j(this,"cacheTimeout");this.cacheTimeout=e}getBounds(e){const t=performance.now();return(!this.bounds||!e||t-this.updateTime>this.cacheTimeout)&&e&&(this.bounds=e.getBoundingClientRect(),this.updateTime=t),this.bounds}clear(){this.bounds=null}}function xC(s,e,t,r){const o=s-t.left,a=e-t.top,u=o/t.width*r.width,c=a/t.height*r.height;return{x:u,y:c}}function Hl(s,e,t,r){const o=s/r.width*t.width,a=e/r.height*t.height,u=o+t.left,c=a+t.top;return{clientX:u,clientY:c}}class SC{constructor(e=100){j(this,"boundsCache");j(this,"canvas",null);j(this,"simulation",null);this.boundsCache=new wC(e)}initialize(e,t){this.canvas=e,this.simulation=t}clearCache(){this.boundsCache.clear()}clientToGrid(e,t){if(!this.canvas||!this.simulation)return null;const r=this.boundsCache.getBounds(this.canvas),o=this.simulation.getGridSize();return!r||!o?null:xC(e,t,r,o)}gridToClient(e,t){if(!this.canvas||!this.simulation)return null;const r=this.boundsCache.getBounds(this.canvas),o=this.simulation.getGridSize();return!r||!o?null:Hl(e,t,r,o)}}function bC(s,e=150){return window.innerHeight-s<=e}function TC(s,e){const{baseX:t,baseY:r,baseVelocityX:o,baseVelocityY:a,baseDuration:u,lavaLampConfig:c,gridSize:h}=s,{simulation:f,canvasBounds:m,isLavaLampMode:g,intervalTracker:y,isWindowFocused:x}=e,w=t+(Math.random()-.5)*2*c.subPills.positionVariation,_=r+(Math.random()-.5)*2*c.subPills.positionVariation,b=c.subPills.velocityVariation,T=o+(Math.random()-.5)*2*Math.abs(o)*b,M=a+(Math.random()-.5)*2*Math.abs(a)*b,L=u+(Math.random()-.5)*u*.4,V=c.pillInterval;let E=0,P=!1;const R=setInterval(()=>{if(!f||!g||!x){if(P){const U=w+T*E/1e3*c.velocityScale,W=_+M*E/1e3*c.velocityScale;Hl(U,W,m,h)}clearInterval(R),y.delete(R);return}const C=w+T*E/1e3*c.velocityScale,O=_+M*E/1e3*c.velocityScale;if(C>=0&&C<h.width&&O>=0&&O<h.height&&(f.addSmoke(C,O),f.addVelocity(C,O,T,M),Hl(C,O,m,h)&&(P||(P=!0))),E+=V,E>=L){if(P){const U=w+T*E/1e3*c.velocityScale,W=_+M*E/1e3*c.velocityScale;Hl(U,W,m,h)}clearInterval(R),y.delete(R)}},V);y.add(R)}function CC(s){const{simulation:e,intervalTracker:t}=s;if(!e)return;const r=e.getGridSize();if(!r)return;const o=Tu.lavaLamp,a=["top","bottom","left","right"],u=a[Math.floor(Math.random()*a.length)];let c,h,f,m;switch(u){case"top":c=Math.random()*r.width,h=Math.random()*(r.height*o.spawnAreaHeightPercent),f=Math.random()*(o.velocityRange.horizontal.max-o.velocityRange.horizontal.min)+o.velocityRange.horizontal.min,m=Math.random()*(o.velocityRange.vertical.max-o.velocityRange.vertical.min)+o.velocityRange.vertical.min;break;case"bottom":c=Math.random()*r.width,h=r.height-Math.random()*(r.height*o.spawnAreaHeightPercent),f=Math.random()*(o.velocityRange.horizontal.max-o.velocityRange.horizontal.min)+o.velocityRange.horizontal.min,m=-(Math.random()*(o.velocityRange.vertical.max-o.velocityRange.vertical.min)+o.velocityRange.vertical.min);break;case"left":c=Math.random()*(r.width*o.spawnAreaHeightPercent),h=Math.random()*r.height,f=Math.random()*(o.velocityRange.vertical.max-o.velocityRange.vertical.min)+o.velocityRange.vertical.min,m=Math.random()*(o.velocityRange.horizontal.max-o.velocityRange.horizontal.min)+o.velocityRange.horizontal.min;break;case"right":c=r.width-Math.random()*(r.width*o.spawnAreaHeightPercent),h=Math.random()*r.height,f=-(Math.random()*(o.velocityRange.vertical.max-o.velocityRange.vertical.min)+o.velocityRange.vertical.min),m=Math.random()*(o.velocityRange.horizontal.max-o.velocityRange.horizontal.min)+o.velocityRange.horizontal.min;break}const g=Math.random()*(o.pillDuration.max-o.pillDuration.min)+o.pillDuration.min,y=Math.floor(Math.random()*(o.subPills.count.max-o.subPills.count.min+1))+o.subPills.count.min;for(let x=0;x<y;x++){const w=Math.random()*(o.subPills.spawnDelay.max-o.subPills.spawnDelay.min)+o.subPills.spawnDelay.min,_=setTimeout(()=>{TC({baseX:c,baseY:h,baseVelocityX:f,baseVelocityY:m,baseDuration:g,lavaLampConfig:o,gridSize:r},s),t.delete(_)},x*w);t.add(_)}}function kC(s,e){const{isLavaLampMode:t,intervalTracker:r,isWindowFocused:o}=s;if(!t||!o)return;const a=Tu.lavaLamp,u=Math.random()*(a.spawnInterval.max-a.spawnInterval.min)+a.spawnInterval.min,c=setTimeout(()=>{s.isWindowFocused&&s.isLavaLampMode?(CC(s),r.delete(c),e()):r.delete(c)},u);r.add(c)}function Ol(s){s.forEach(e=>{clearTimeout(e)}),s.clear()}function EC(s,e){const t={...s.grid,...e.grid},r={...s.compute,...e.compute},o={...r,workgroupCount:Math.ceil(t.size.width/r.workgroupSize)};return{grid:t,compute:o,physics:{...s.physics,...e.physics},interaction:{...s.interaction,...e.interaction},iterations:{...s.iterations,...e.iterations},particles:{...s.particles,...e.particles},noise:{...s.noise,...e.noise},lavaLamp:{...s.lavaLamp,...e.lavaLamp}}}class PC{constructor(e){j(this,"resources",null);j(this,"textureManager",null);j(this,"performanceTracker",new QT);j(this,"gpuTimer",null);j(this,"advectionPass",null);j(this,"smokeAdvectionPass",null);j(this,"smokeDiffusionPass",null);j(this,"smokeDissipationPass",null);j(this,"velocityDissipationPass",null);j(this,"diffusionPass",null);j(this,"divergencePass",null);j(this,"pressurePass",null);j(this,"gradientSubtractionPass",null);j(this,"boundaryConditionsPass",null);j(this,"addSmokePass",null);j(this,"addVelocityPass",null);j(this,"renderingPass",null);j(this,"advectParticlesPass",null);j(this,"isInitialized",!1);j(this,"lastFrameTime",performance.now());j(this,"config");j(this,"smokeColor",[.65,.35,.85]);this.config=EC(Tu,e||{})}setSmokeColor(e){this.smokeColor=e}async initialize(e){if(this.isInitialized){console.warn("Simulation is already initialized");return}if(!e.current)throw new nn("Could not initialize WebGPU: Canvas not found",pr.NO_CANVAS);this.resources=await lf(e.current),this.gpuTimer=new mT(this.resources.device,this.resources.canTimestamp),this.performanceTracker.setGpuSupported(this.resources.canTimestamp),this.textureManager=new af(this.resources.device),this.textureManager.createPingPongTexture("velocity",{label:"Velocity Texture",size:this.config.grid.size,format:"rg32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC}),this.textureManager.createTexture("divergence",{label:"Divergence texture",size:this.config.grid.size,format:"r32float",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST}),this.textureManager.createPingPongTexture("pressure",{label:"Pressure Texture",size:this.config.grid.size,format:"r32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC}),this.textureManager.createPingPongTexture("smokeParticlePosition",{label:"Smoke Position Texture",size:this.config.particles.smokeDimensions,format:"rg32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST}),this.textureManager.createPingPongTexture("smokeDensity",{label:"Smoke Density Texture",size:this.config.grid.size,format:"r32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC}),xv(this.textureManager,this.resources.device,this.config),this.advectionPass=new lC(this.resources.device,this.config.compute.workgroupSize),this.smokeAdvectionPass=new oC(this.resources.device,this.config.compute.workgroupSize),this.smokeDiffusionPass=new aC(this.resources.device,this.config.compute.workgroupSize),this.smokeDissipationPass=new gC(this.resources.device,this.config.compute.workgroupSize),this.velocityDissipationPass=new yC(this.resources.device,this.config.compute.workgroupSize),this.diffusionPass=new uC(this.resources.device,this.config.compute.workgroupSize),this.divergencePass=new cC(this.resources.device,this.config.compute.workgroupSize),this.pressurePass=new dC(this.resources.device,this.config.compute.workgroupSize),this.gradientSubtractionPass=new hC(this.resources.device,this.config.compute.workgroupSize),this.boundaryConditionsPass=new fC(this.resources.device,this.config.compute.workgroupSize),this.advectParticlesPass=new vC(this.resources.device,this.config.compute.workgroupSize),this.addSmokePass=new pC(this.resources.device,this.config.compute.workgroupSize),this.addVelocityPass=new mC(this.resources.device,this.config.compute.workgroupSize);const t=this.resources.device.createShaderModule({label:"Texture Shader",code:Gi(qe.TEXTURE)});this.renderingPass=new cf({name:"Texture Rendering",vertex:{module:t,entryPoint:"vertex_main"},fragment:{module:t,entryPoint:"fragment_main",targets:[{format:this.resources.canvasFormat}]}},this.resources.device),this.isInitialized=!0,this.step({renderOnly:!0})}step(e={}){var _;const t=performance.now();this.performanceTracker.recordFrame();const r=performance.now(),o=Math.min((r-this.lastFrameTime)/1e3,this.config.physics.maxTimestep);this.lastFrameTime=r,this.performanceTracker.recordTimestep(o);const{renderOnly:a=!1,shaderMode:u=Mi.DENSITY,texture:c="smokeDensity",velocity:h={},smoke:f={}}=e,m={...gT,...h},g={...vT,...f};if(!this.resources||!this.textureManager||!this.advectionPass||!this.diffusionPass||!this.divergencePass||!this.pressurePass||!this.gradientSubtractionPass||!this.smokeAdvectionPass||!this.smokeDiffusionPass||!this.smokeDissipationPass||!this.velocityDissipationPass||!this.boundaryConditionsPass||!this.addSmokePass||!this.addVelocityPass||!this.renderingPass||!this.advectParticlesPass||!this.isInitialized)throw new nn("Could not step simulation: Resources not initialized. Run initialize() first.",pr.NO_RESOURCES);const y=this.resources.device.createCommandEncoder();a||this.executeComputePasses(y,m,g,o),this.resources.context.configure({device:this.resources.device,format:this.resources.canvasFormat});const x=y.beginRenderPass({label:"Texture Render Pass",colorAttachments:[{view:this.resources.context.getCurrentTexture().createView(),loadOp:"clear",storeOp:"store",clearValue:{r:0,g:0,b:0,a:0}}],...((_=this.gpuTimer)==null?void 0:_.getTimestampWrites())&&{timestampWrites:this.gpuTimer.getTimestampWrites()}});this.renderingPass.writeToUniformBuffer({shaderMode:u,noise:{mean:this.config.noise.mean,stddev:this.config.noise.stddev,offsets:[Math.random(),Math.random(),Math.random()]},smokeColor:this.smokeColor}),this.renderingPass.execute(x,{vertexCount:6},{textureManager:this.textureManager,sampler:this.resources.device.createSampler({label:"Render Sampler"}),texture:c}),x.end(),this.gpuTimer&&this.gpuTimer.resolveTimestamps(y),this.resources.device.queue.submit([y.finish()]),this.gpuTimer&&this.gpuTimer.readResults().then(()=>{this.performanceTracker.recordGPU(this.gpuTimer.getLastGpuTime())});const w=performance.now()-t;this.performanceTracker.recordJS(w)}executeComputePasses(e,t,r,o){const a=e.beginComputePass({label:"Compute Pass"});if(t.enableAdvection){const u=new su(o,this.config.physics.velocityAdvection);this.advectionPass.executeWithUniforms(a,u,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("velocity")}if(t.enableDiffusion){const u=new iu(o,this.config.physics.diffusionFactor);this.diffusionPass.executeIterations(a,u,this.textureManager,this.config.compute.workgroupCount,this.config.iterations.diffusion)}if(t.enableDivergence){const u=new Ph(this.config.grid.scale);this.divergencePass.executeWithUniforms(a,u,this.textureManager,this.config.compute.workgroupCount)}if(t.enablePressureProjection){const u=new Ah(this.config.grid.scale);this.pressurePass.executeIterations(a,u,this.textureManager,this.config.compute.workgroupCount,this.config.iterations.pressure)}if(t.enablePressureBoundaryConditions){const u=new Uo($l.SCALAR_NEUMANN);this.boundaryConditionsPass.executeForTexture(a,"pressure",u,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("pressure")}if(t.enableGradientSubtraction){const u=new Nh(this.config.grid.scale);this.gradientSubtractionPass.executeWithUniforms(a,u,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("velocity")}if(t.enableVelocityBoundaryConditions){const u=new Uo($l.NO_SLIP_VELOCITY);this.boundaryConditionsPass.executeForTexture(a,"velocity",u,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("velocity")}if(t.enableDissipation){const u=new ou(this.config.physics.velocityDissipationFactor);this.velocityDissipationPass.executeWithUniforms(a,u,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("velocity")}if(r.enableAdvection){const u=new su(o,this.config.physics.smokeAdvection);this.smokeAdvectionPass.executeWithUniforms(a,u,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("smokeDensity")}if(r.enableBoundaryConditions){const u=new Uo($l.SCALAR_NEUMANN);this.boundaryConditionsPass.executeForTexture(a,"smokeDensity",u,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("smokeDensity")}if(r.enableDiffusion){const u=new iu(o,this.config.physics.smokeDiffusion);this.smokeDiffusionPass.executeIterations(a,u,this.textureManager,this.config.compute.workgroupCount,this.config.iterations.diffusion),this.textureManager.swap("smokeDensity")}if(r.enableDissipation){const u=new ou(this.config.physics.smokeDissipationFactor);this.smokeDissipationPass.executeWithUniforms(a,u,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("smokeDensity")}if(r.enableAdvectParticles){const u=new Oh(o);this.advectParticlesPass.executeWithUniforms(a,u,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("smokeParticlePosition")}a.end()}getPerformanceMetrics(){return this.performanceTracker.getMetrics()}getGridSize(){return this.config.grid.size}async sampleTextures(e=1){if(!this.resources||!this.textureManager||!this.isInitialized)throw new nn("Could not sample textures: Resources not initialized",pr.NO_RESOURCES);const t=this.config.grid.size,r=Math.floor(t.width/e),o=Math.floor(t.height/e),a=r*o,u=this.resources.device.createBuffer({label:"Smoke Density Staging Buffer",size:a*Pn,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),c=this.resources.device.createBuffer({label:"Velocity Staging Buffer",size:a*Pn*2,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),h=this.resources.device.createBuffer({label:"Pressure Staging Buffer",size:a*Pn,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),f=this.resources.device.createCommandEncoder({label:"Texture Sampling Command Encoder"});f.copyTextureToBuffer({texture:this.textureManager.getCurrentTexture("smokeDensity")},{buffer:u,bytesPerRow:r*Pn},{width:r,height:o}),f.copyTextureToBuffer({texture:this.textureManager.getCurrentTexture("velocity")},{buffer:c,bytesPerRow:r*Pn*2},{width:r,height:o}),f.copyTextureToBuffer({texture:this.textureManager.getCurrentTexture("pressure")},{buffer:h,bytesPerRow:r*Pn},{width:r,height:o}),this.resources.device.queue.submit([f.finish()]),await this.resources.device.queue.onSubmittedWorkDone(),await Promise.all([u.mapAsync(GPUMapMode.READ),c.mapAsync(GPUMapMode.READ),h.mapAsync(GPUMapMode.READ)]);const m=new Float32Array(u.getMappedRange()),g=new Float32Array(c.getMappedRange()),y=new Float32Array(h.getMappedRange()),x=[];for(let _=0;_<g.length;_+=2)x.push([g[_],g[_+1]]);const w={smokeDensity:wv(new Float32Array(m),t.width,t.height,e,!0),velocity:_C(x,t.width,t.height,e,!0),pressure:wv(new Float32Array(y),t.width,t.height,e,!0)};return u.unmap(),c.unmap(),h.unmap(),u.destroy(),c.destroy(),h.destroy(),w}reset(e=Mi.DENSITY,t="smokeDensity"){if(!this.resources||!this.textureManager||!this.isInitialized)throw new nn("Could not reset simulation: Resources not initialized",pr.NO_RESOURCES);this.lastFrameTime=performance.now(),xv(this.textureManager,this.resources.device,this.config),this.step({renderOnly:!0,shaderMode:e,texture:t})}addSmoke(e,t){if(!this.resources||!this.textureManager||!this.addSmokePass||!this.isInitialized)return;const r=this.resources.device.createCommandEncoder(),o=new Rh(e,t,this.config.interaction.radius,this.config.interaction.smokeIntensity),a=r.beginComputePass({label:"Add Smoke Compute Pass"});this.addSmokePass.executeWithUniforms(a,o,this.textureManager,this.config.compute.workgroupCount),a.end(),this.textureManager.swap("smokeDensity"),this.resources.device.queue.submit([r.finish()])}addVelocity(e,t,r,o){if(!this.resources||!this.textureManager||!this.addVelocityPass||!this.isInitialized)return;const a=this.resources.device.createCommandEncoder(),u=new Mh(e,t,r,o,this.config.interaction.radius,this.config.interaction.velocityIntensity),c=a.beginComputePass({label:"Add Velocity Compute Pass"});this.addVelocityPass.executeWithUniforms(c,u,this.textureManager,this.config.compute.workgroupCount),c.end(),this.textureManager.swap("velocity"),this.resources.device.queue.submit([a.finish()])}destroy(){var e,t,r,o,a,u,c,h,f,m,g,y,x,w,_,b;this.isInitialized&&((e=this.textureManager)==null||e.destroy(),(t=this.renderingPass)==null||t.destroy(),(r=this.gpuTimer)==null||r.destroy(),(o=this.advectionPass)==null||o.destroy(),(a=this.smokeAdvectionPass)==null||a.destroy(),(u=this.smokeDiffusionPass)==null||u.destroy(),(c=this.smokeDissipationPass)==null||c.destroy(),(h=this.velocityDissipationPass)==null||h.destroy(),(f=this.diffusionPass)==null||f.destroy(),(m=this.divergencePass)==null||m.destroy(),(g=this.pressurePass)==null||g.destroy(),(y=this.gradientSubtractionPass)==null||y.destroy(),(x=this.boundaryConditionsPass)==null||x.destroy(),(w=this.addSmokePass)==null||w.destroy(),(_=this.addVelocityPass)==null||_.destroy(),(b=this.resources)!=null&&b.device&&_r.destroyDevice(this.resources.device),this.resources=null,this.textureManager=null,this.renderingPass=null,console.log("SmokeSimulation destroyed"),this.isInitialized=!1)}}function xv(s,e,t){const r=t.grid.size,o=t.particles.smokeDimensions,a=r.width*r.height,u=o.width*o.height,c=new Float32Array(a*2),h=new Float32Array(a),f=new Float32Array(a),m=new Float32Array(u*2);for(let b=0;b<o.height;b++)for(let T=0;T<o.width;T++){const M=(T+b*o.width)*2;m[M]=T/o.width*r.width,m[M+1]=b/o.height*r.height}const g=s.getCurrentTexture("velocity");e.queue.writeTexture({texture:g},c,{bytesPerRow:r.width*2*Pn},r);const y=s.getCurrentTexture("smokeDensity");e.queue.writeTexture({texture:y},h,{bytesPerRow:r.width*Pn},r);const x=s.getCurrentTexture("smokeParticlePosition");e.queue.writeTexture({texture:x},m,{bytesPerRow:o.width*Pn*2},o);const w=s.getCurrentTexture("pressure"),_=s.getBackTexture("pressure");e.queue.writeTexture({texture:w},f,{bytesPerRow:r.width*Pn},r),e.queue.writeTexture({texture:_},f,{bytesPerRow:r.width*Pn},r)}class AC extends Error{constructor(e){super(`AudioVisualizationMediator: ${e}`)}}const Wy="15.1.22",Sv=(s,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:s}),bv=(s,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:s}),Dh=(s,e)=>({startTime:e,type:"setValue",value:s}),qy=(s,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:s}),$y=(s,e,{startTime:t,target:r,timeConstant:o})=>r+(e-r)*Math.exp((t-s)/o),mi=s=>s.type==="exponentialRampToValue",au=s=>s.type==="linearRampToValue",$r=s=>mi(s)||au(s),hf=s=>s.type==="setValue",hr=s=>s.type==="setValueCurve",lu=(s,e,t,r)=>{const o=s[e];return o===void 0?r:$r(o)||hf(o)?o.value:hr(o)?o.values[o.values.length-1]:$y(t,lu(s,e-1,o.startTime,r),o)},Tv=(s,e,t,r,o)=>t===void 0?[r.insertTime,o]:$r(t)?[t.endTime,t.value]:hf(t)?[t.startTime,t.value]:hr(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,lu(s,e-1,t.startTime,o)],Lh=s=>s.type==="cancelAndHold",Fh=s=>s.type==="cancelScheduledValues",Wr=s=>Lh(s)||Fh(s)?s.cancelTime:mi(s)||au(s)?s.endTime:s.startTime,Cv=(s,e,t,{endTime:r,value:o})=>t===o?o:0<t&&0<o||t<0&&o<0?t*(o/t)**((s-e)/(r-e)):0,kv=(s,e,t,{endTime:r,value:o})=>t+(s-e)/(r-e)*(o-t),NC=(s,e)=>{const t=Math.floor(e),r=Math.ceil(e);return t===r?s[t]:(1-(e-t))*s[t]+(1-(r-e))*s[r]},RC=(s,{duration:e,startTime:t,values:r})=>{const o=(s-t)/e*(r.length-1);return NC(r,o)},Il=s=>s.type==="setTarget";class MC{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=Wr(e);if(Lh(e)||Fh(e)){const r=this._automationEvents.findIndex(a=>Fh(e)&&hr(a)?a.startTime+a.duration>=t:Wr(a)>=t),o=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),Lh(e)){const a=this._automationEvents[this._automationEvents.length-1];if(o!==void 0&&$r(o)){if(a!==void 0&&Il(a))throw new Error("The internal list is malformed.");const u=a===void 0?o.insertTime:hr(a)?a.startTime+a.duration:Wr(a),c=a===void 0?this._defaultValue:hr(a)?a.values[a.values.length-1]:a.value,h=mi(o)?Cv(t,u,c,o):kv(t,u,c,o),f=mi(o)?Sv(h,t,this._currenTime):bv(h,t,this._currenTime);this._automationEvents.push(f)}if(a!==void 0&&Il(a)&&this._automationEvents.push(Dh(this.getValue(t),t)),a!==void 0&&hr(a)&&a.startTime+a.duration>t){const u=t-a.startTime,c=(a.values.length-1)/a.duration,h=Math.max(2,1+Math.ceil(u*c)),f=u/(h-1)*c,m=a.values.slice(0,h);if(f<1)for(let g=1;g<h;g+=1){const y=f*g%1;m[g]=a.values[g-1]*(1-y)+a.values[g]*y}this._automationEvents[this._automationEvents.length-1]=qy(m,a.startTime,u)}}}else{const r=this._automationEvents.findIndex(u=>Wr(u)>t),o=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(o!==void 0&&hr(o)&&Wr(o)+o.duration>t)return!1;const a=mi(e)?Sv(e.value,e.endTime,this._currenTime):au(e)?bv(e.value,t,this._currenTime):e;if(r===-1)this._automationEvents.push(a);else{if(hr(e)&&t+e.duration>Wr(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,a)}}return!0}flush(e){const t=this._automationEvents.findIndex(r=>Wr(r)>e);if(t>1){const r=this._automationEvents.slice(t-1),o=r[0];Il(o)&&r.unshift(Dh(lu(this._automationEvents,t-2,o.startTime,this._defaultValue),o.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(u=>Wr(u)>e),r=this._automationEvents[t],o=(t===-1?this._automationEvents.length:t)-1,a=this._automationEvents[o];if(a!==void 0&&Il(a)&&(r===void 0||!$r(r)||r.insertTime>e))return $y(e,lu(this._automationEvents,o-1,a.startTime,this._defaultValue),a);if(a!==void 0&&hf(a)&&(r===void 0||!$r(r)))return a.value;if(a!==void 0&&hr(a)&&(r===void 0||!$r(r)||a.startTime+a.duration>e))return e<a.startTime+a.duration?RC(e,a):a.values[a.values.length-1];if(a!==void 0&&$r(a)&&(r===void 0||!$r(r)))return a.value;if(r!==void 0&&mi(r)){const[u,c]=Tv(this._automationEvents,o,a,r,this._defaultValue);return Cv(e,u,c,r)}if(r!==void 0&&au(r)){const[u,c]=Tv(this._automationEvents,o,a,r,this._defaultValue);return kv(e,u,c,r)}return this._defaultValue}}const OC=s=>({cancelTime:s,type:"cancelAndHold"}),IC=s=>({cancelTime:s,type:"cancelScheduledValues"}),DC=(s,e)=>({endTime:e,type:"exponentialRampToValue",value:s}),LC=(s,e)=>({endTime:e,type:"linearRampToValue",value:s}),FC=(s,e,t)=>({startTime:e,target:s,timeConstant:t,type:"setTarget"}),VC=()=>new DOMException("","AbortError"),BC=s=>(e,t,[r,o,a],u)=>{s(e[o],[t,r,a],c=>c[0]===t&&c[1]===r,u)},zC=s=>(e,t,r)=>{const o=[];for(let a=0;a<r.numberOfInputs;a+=1)o.push(new Set);s.set(e,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},UC=s=>(e,t)=>{s.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},Oi=new WeakSet,Hy=new WeakMap,ff=new WeakMap,Yy=new WeakMap,pf=new WeakMap,Cu=new WeakMap,Ky=new WeakMap,Vh=new WeakMap,Bh=new WeakMap,zh=new WeakMap,Xy={construct(){return Xy}},jC=s=>{try{const e=new Proxy(s,Xy);new e}catch{return!1}return!0},Ev=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Pv=(s,e)=>{const t=[];let r=s.replace(/^[\s]+/,""),o=r.match(Ev);for(;o!==null;){const a=o[1].slice(1,-1),u=o[0].replace(/([\s]+)?;?$/,"").replace(a,new URL(a,e).toString());t.push(u),r=r.slice(o[0].length).replace(/^[\s]+/,""),o=r.match(Ev)}return[t.join(";"),r]},Av=s=>{if(s!==void 0&&!Array.isArray(s))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Nv=s=>{if(!jC(s))throw new TypeError("The given value for processorCtor should be a constructor.");if(s.prototype===null||typeof s.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},GC=(s,e,t,r,o,a,u,c,h,f,m,g,y)=>{let x=0;return(w,_,b={credentials:"omit"})=>{const T=m.get(w);if(T!==void 0&&T.has(_))return Promise.resolve();const M=f.get(w);if(M!==void 0){const E=M.get(_);if(E!==void 0)return E}const L=a(w),V=L.audioWorklet===void 0?o(_).then(([E,P])=>{const[R,C]=Pv(E,P),O=`${R};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${C}
})})(window,'_AWGS')`;return t(O)}).then(()=>{const E=y._AWGS.pop();if(E===void 0)throw new SyntaxError;r(L.currentTime,L.sampleRate,()=>E(class{},void 0,(P,R)=>{if(P.trim()==="")throw e();const C=Bh.get(L);if(C!==void 0){if(C.has(P))throw e();Nv(R),Av(R.parameterDescriptors),C.set(P,R)}else Nv(R),Av(R.parameterDescriptors),Bh.set(L,new Map([[P,R]]))},L.sampleRate,void 0,void 0))}):Promise.all([o(_),Promise.resolve(s(g,g))]).then(([[E,P],R])=>{const C=x+1;x=C;const[O,U]=Pv(E,P),ee=`${O};((AudioWorkletProcessor,registerProcessor)=>{${U}
})(${R?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${R?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${R?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${C}',class extends AudioWorkletProcessor{process(){return !1}})`,te=new Blob([ee],{type:"application/javascript; charset=utf-8"}),X=URL.createObjectURL(te);return L.audioWorklet.addModule(X,b).then(()=>{if(c(L))return L;const J=u(L);return J.audioWorklet.addModule(X,b).then(()=>J)}).then(J=>{if(h===null)throw new SyntaxError;try{new h(J,`__sac${C}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(X))});return M===void 0?f.set(w,new Map([[_,V]])):M.set(_,V),V.then(()=>{const E=m.get(w);E===void 0?m.set(w,new Set([_])):E.add(_)}).finally(()=>{const E=f.get(w);E!==void 0&&E.delete(_)}),V}},Rn=(s,e)=>{const t=s.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},ku=(s,e)=>{const t=Array.from(s).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[r]=t;return s.delete(r),r},Zy=(s,e,t,r)=>{const o=Rn(s,e),a=ku(o,u=>u[0]===t&&u[1]===r);return o.size===0&&s.delete(e),a},sa=s=>Rn(Ky,s),Ii=s=>{if(Oi.has(s))throw new Error("The AudioNode is already stored.");Oi.add(s),sa(s).forEach(e=>e(!0))},Qy=s=>"port"in s,ia=s=>{if(!Oi.has(s))throw new Error("The AudioNode is not stored.");Oi.delete(s),sa(s).forEach(e=>e(!1))},Uh=(s,e)=>{!Qy(s)&&e.every(t=>t.size===0)&&ia(s)},WC=(s,e,t,r,o,a,u,c,h,f,m,g,y)=>{const x=new WeakMap;return(w,_,b,T,M)=>{const{activeInputs:L,passiveInputs:V}=a(_),{outputs:E}=a(w),P=c(w),R=C=>{const O=h(_),U=h(w);if(C){const W=Zy(V,w,b,T);s(L,w,W,!1),!M&&!g(w)&&t(U,O,b,T),y(_)&&Ii(_)}else{const W=r(L,w,b,T);e(V,T,W,!1),!M&&!g(w)&&o(U,O,b,T);const B=u(_);if(B===0)m(_)&&Uh(_,L);else{const H=x.get(_);H!==void 0&&clearTimeout(H),x.set(_,setTimeout(()=>{m(_)&&Uh(_,L)},B*1e3))}}};return f(E,[_,b,T],C=>C[0]===_&&C[1]===b&&C[2]===T,!0)?(P.add(R),m(w)?s(L,w,[b,T,R],!0):e(V,T,[w,b,R],!0),!0):!1}},qC=s=>(e,t,[r,o,a],u)=>{const c=e.get(r);c===void 0?e.set(r,new Set([[o,t,a]])):s(c,[o,t,a],h=>h[0]===o&&h[1]===t,u)},$C=s=>(e,t)=>{const r=s(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(r).connect(e.destination);const o=()=>{t.removeEventListener("ended",o),t.disconnect(r),r.disconnect()};t.addEventListener("ended",o)},HC=s=>(e,t)=>{s(e).add(t)},YC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},KC=(s,e,t,r,o,a)=>class extends s{constructor(c,h){const f=o(c),m={...YC,...h},g=r(f,m),y=a(f)?e():null;super(c,!1,g,y),this._nativeAnalyserNode=g}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(c){this._nativeAnalyserNode.fftSize=c}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(c){const h=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=c,!(c>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=h,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(c){const h=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=c,!(this._nativeAnalyserNode.maxDecibels>c))throw this._nativeAnalyserNode.minDecibels=h,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(c){this._nativeAnalyserNode.smoothingTimeConstant=c}getByteFrequencyData(c){this._nativeAnalyserNode.getByteFrequencyData(c)}getByteTimeDomainData(c){this._nativeAnalyserNode.getByteTimeDomainData(c)}getFloatFrequencyData(c){this._nativeAnalyserNode.getFloatFrequencyData(c)}getFloatTimeDomainData(c){this._nativeAnalyserNode.getFloatTimeDomainData(c)}},Ot=(s,e)=>s.context===e,XC=(s,e,t)=>()=>{const r=new WeakMap,o=async(a,u)=>{let c=e(a);if(!Ot(c,u)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant};c=s(u,f)}return r.set(u,c),await t(a,u,c),c};return{render(a,u){const c=r.get(u);return c!==void 0?Promise.resolve(c):o(a,u)}}},uu=s=>{try{s.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Qn=()=>new DOMException("","IndexSizeError"),mf=s=>{s.getChannelData=(e=>t=>{try{return e.call(s,t)}catch(r){throw r.code===12?Qn():r}})(s.getChannelData)},ZC={numberOfChannels:1},QC=(s,e,t,r,o,a,u,c)=>{let h=null;return class Jy{constructor(m){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:g,numberOfChannels:y,sampleRate:x}={...ZC,...m};h===null&&(h=new o(1,1,44100));const w=r!==null&&e(a,a)?new r({length:g,numberOfChannels:y,sampleRate:x}):h.createBuffer(y,g,x);if(w.numberOfChannels===0)throw t();return typeof w.copyFromChannel!="function"?(u(w),mf(w)):e(uu,()=>uu(w))||c(w),s.add(w),w}static[Symbol.hasInstance](m){return m!==null&&typeof m=="object"&&Object.getPrototypeOf(m)===Jy.prototype||s.has(m)}}},en=-34028234663852886e22,Ft=34028234663852886e22,gr=s=>Oi.has(s),JC={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},e1=(s,e,t,r,o,a,u,c)=>class extends s{constructor(f,m){const g=a(f),y={...JC,...m},x=o(g,y),w=u(g),_=w?e():null;super(f,!1,x,_),this._audioBufferSourceNodeRenderer=_,this._isBufferNullified=!1,this._isBufferSet=y.buffer!==null,this._nativeAudioBufferSourceNode=x,this._onended=null,this._playbackRate=t(this,w,x.playbackRate,Ft,en)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(f){if(this._nativeAudioBufferSourceNode.buffer=f,f!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(f){this._nativeAudioBufferSourceNode.loop=f}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(f){this._nativeAudioBufferSourceNode.loopEnd=f}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(f){this._nativeAudioBufferSourceNode.loopStart=f}get onended(){return this._onended}set onended(f){const m=typeof f=="function"?c(this,f):null;this._nativeAudioBufferSourceNode.onended=m;const g=this._nativeAudioBufferSourceNode.onended;this._onended=g!==null&&g===m?f:g}get playbackRate(){return this._playbackRate}start(f=0,m=0,g){if(this._nativeAudioBufferSourceNode.start(f,m,g),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=g===void 0?[f,m]:[f,m,g]),this.context.state!=="closed"){Ii(this);const y=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",y),gr(this)&&ia(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",y)}}stop(f=0){this._nativeAudioBufferSourceNode.stop(f),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=f)}},t1=(s,e,t,r,o)=>()=>{const a=new WeakMap;let u=null,c=null;const h=async(f,m)=>{let g=t(f);const y=Ot(g,m);if(!y){const x={buffer:g.buffer,channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,loop:g.loop,loopEnd:g.loopEnd,loopStart:g.loopStart,playbackRate:g.playbackRate.value};g=e(m,x),u!==null&&g.start(...u),c!==null&&g.stop(c)}return a.set(m,g),y?await s(m,f.playbackRate,g.playbackRate):await r(m,f.playbackRate,g.playbackRate),await o(f,m,g),g};return{set start(f){u=f},set stop(f){c=f},render(f,m){const g=a.get(m);return g!==void 0?Promise.resolve(g):h(f,m)}}},n1=s=>"playbackRate"in s,r1=s=>"frequency"in s&&"gain"in s,s1=s=>"offset"in s,i1=s=>!("frequency"in s)&&"gain"in s,o1=s=>"detune"in s&&"frequency"in s&&!("gain"in s),a1=s=>"pan"in s,Vt=s=>Rn(Hy,s),oa=s=>Rn(Yy,s),jh=(s,e)=>{const{activeInputs:t}=Vt(s);t.forEach(o=>o.forEach(([a])=>{e.includes(s)||jh(a,[...e,s])}));const r=n1(s)?[s.playbackRate]:Qy(s)?Array.from(s.parameters.values()):r1(s)?[s.Q,s.detune,s.frequency,s.gain]:s1(s)?[s.offset]:i1(s)?[s.gain]:o1(s)?[s.detune,s.frequency]:a1(s)?[s.pan]:[];for(const o of r){const a=oa(o);a!==void 0&&a.activeInputs.forEach(([u])=>jh(u,e))}gr(s)&&ia(s)},e_=s=>{jh(s.destination,[])},l1=s=>s===void 0||typeof s=="number"||typeof s=="string"&&(s==="balanced"||s==="interactive"||s==="playback"),u1=(s,e,t,r,o,a,u,c,h)=>class extends s{constructor(m={}){if(h===null)throw new Error("Missing the native AudioContext constructor.");let g;try{g=new h(m)}catch(w){throw w.code===12&&w.message==="sampleRate is not in range"?t():w}if(g===null)throw r();if(!l1(m.latencyHint))throw new TypeError(`The provided value '${m.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(m.sampleRate!==void 0&&g.sampleRate!==m.sampleRate)throw t();super(g,2);const{latencyHint:y}=m,{sampleRate:x}=g;if(this._baseLatency=typeof g.baseLatency=="number"?g.baseLatency:y==="balanced"?512/x:y==="interactive"||y===void 0?256/x:y==="playback"?1024/x:Math.max(2,Math.min(128,Math.round(y*x/128)))*128/x,this._nativeAudioContext=g,h.name==="webkitAudioContext"?(this._nativeGainNode=g.createGain(),this._nativeOscillatorNode=g.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(g.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,g.state==="running"){this._state="suspended";const w=()=>{this._state==="suspended"&&(this._state=null),g.removeEventListener("statechange",w)};g.addEventListener("statechange",w)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),e_(this)}))}createMediaElementSource(m){return new o(this,{mediaElement:m})}createMediaStreamDestination(){return new a(this)}createMediaStreamSource(m){return new u(this,{mediaStream:m})}createMediaStreamTrackSource(m){return new c(this,{mediaStreamTrack:m})}resume(){return this._state==="suspended"?new Promise((m,g)=>{const y=()=>{this._nativeAudioContext.removeEventListener("statechange",y),this._nativeAudioContext.state==="running"?m():this.resume().then(m,g)};this._nativeAudioContext.addEventListener("statechange",y)}):this._nativeAudioContext.resume().catch(m=>{throw m===void 0||m.code===15?e():m})}suspend(){return this._nativeAudioContext.suspend().catch(m=>{throw m===void 0?e():m})}},c1=(s,e,t,r,o,a,u,c)=>class extends s{constructor(f,m){const g=a(f),y=u(g),x=o(g,m,y),w=y?e(c):null;super(f,!1,x,w),this._isNodeOfNativeOfflineAudioContext=y,this._nativeAudioDestinationNode=x}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(f){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(f>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=f}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(f){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=f}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},d1=s=>{const e=new WeakMap,t=async(r,o)=>{const a=o.destination;return e.set(o,a),await s(r,o,a),a};return{render(r,o){const a=e.get(o);return a!==void 0?Promise.resolve(a):t(r,o)}}},h1=(s,e,t,r,o,a,u,c)=>(h,f)=>{const m=f.listener,g=()=>{const E=new Float32Array(1),P=e(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),R=u(f);let C=!1,O=[0,0,-1,0,1,0],U=[0,0,0];const W=()=>{if(C)return;C=!0;const te=r(f,256,9,0);te.onaudioprocess=({inputBuffer:X})=>{const J=[a(X,E,0),a(X,E,1),a(X,E,2),a(X,E,3),a(X,E,4),a(X,E,5)];J.some((Z,K)=>Z!==O[K])&&(m.setOrientation(...J),O=J);const z=[a(X,E,6),a(X,E,7),a(X,E,8)];z.some((Z,K)=>Z!==U[K])&&(m.setPosition(...z),U=z)},P.connect(te)},B=te=>X=>{X!==O[te]&&(O[te]=X,m.setOrientation(...O))},H=te=>X=>{X!==U[te]&&(U[te]=X,m.setPosition(...U))},ee=(te,X,J)=>{const z=t(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:X});z.connect(P,0,te),z.start(),Object.defineProperty(z.offset,"defaultValue",{get(){return X}});const Z=s({context:h},R,z.offset,Ft,en);return c(Z,"value",K=>()=>K.call(Z),K=>A=>{try{K.call(Z,A)}catch($){if($.code!==9)throw $}W(),R&&J(A)}),Z.cancelAndHoldAtTime=(K=>R?()=>{throw o()}:(...A)=>{const $=K.apply(Z,A);return W(),$})(Z.cancelAndHoldAtTime),Z.cancelScheduledValues=(K=>R?()=>{throw o()}:(...A)=>{const $=K.apply(Z,A);return W(),$})(Z.cancelScheduledValues),Z.exponentialRampToValueAtTime=(K=>R?()=>{throw o()}:(...A)=>{const $=K.apply(Z,A);return W(),$})(Z.exponentialRampToValueAtTime),Z.linearRampToValueAtTime=(K=>R?()=>{throw o()}:(...A)=>{const $=K.apply(Z,A);return W(),$})(Z.linearRampToValueAtTime),Z.setTargetAtTime=(K=>R?()=>{throw o()}:(...A)=>{const $=K.apply(Z,A);return W(),$})(Z.setTargetAtTime),Z.setValueAtTime=(K=>R?()=>{throw o()}:(...A)=>{const $=K.apply(Z,A);return W(),$})(Z.setValueAtTime),Z.setValueCurveAtTime=(K=>R?()=>{throw o()}:(...A)=>{const $=K.apply(Z,A);return W(),$})(Z.setValueCurveAtTime),Z};return{forwardX:ee(0,0,B(0)),forwardY:ee(1,0,B(1)),forwardZ:ee(2,-1,B(2)),positionX:ee(6,0,H(0)),positionY:ee(7,0,H(1)),positionZ:ee(8,0,H(2)),upX:ee(3,0,B(3)),upY:ee(4,1,B(4)),upZ:ee(5,0,B(5))}},{forwardX:y,forwardY:x,forwardZ:w,positionX:_,positionY:b,positionZ:T,upX:M,upY:L,upZ:V}=m.forwardX===void 0?g():m;return{get forwardX(){return y},get forwardY(){return x},get forwardZ(){return w},get positionX(){return _},get positionY(){return b},get positionZ(){return T},get upX(){return M},get upY(){return L},get upZ(){return V}}},cu=s=>"context"in s,aa=s=>cu(s[0]),Ms=(s,e,t,r)=>{for(const o of s)if(t(o)){if(r)return!1;throw Error("The set contains at least one similar element.")}return s.add(e),!0},Rv=(s,e,[t,r],o)=>{Ms(s,[e,t,r],a=>a[0]===e&&a[1]===t,o)},Mv=(s,[e,t,r],o)=>{const a=s.get(e);a===void 0?s.set(e,new Set([[t,r]])):Ms(a,[t,r],u=>u[0]===t,o)},Wi=s=>"inputs"in s,du=(s,e,t,r)=>{if(Wi(e)){const o=e.inputs[r];return s.connect(o,t,0),[o,t,0]}return s.connect(e,t,r),[e,t,r]},t_=(s,e,t)=>{for(const r of s)if(r[0]===e&&r[1]===t)return s.delete(r),r;return null},f1=(s,e,t)=>ku(s,r=>r[0]===e&&r[1]===t),n_=(s,e)=>{if(!sa(s).delete(e))throw new Error("Missing the expected event listener.")},r_=(s,e,t)=>{const r=Rn(s,e),o=ku(r,a=>a[0]===t);return r.size===0&&s.delete(e),o},hu=(s,e,t,r)=>{Wi(e)?s.disconnect(e.inputs[r],t,0):s.disconnect(e,t,r)},tt=s=>Rn(ff,s),Ko=s=>Rn(pf,s),Es=s=>Vh.has(s),Yl=s=>!Oi.has(s),Ov=(s,e)=>new Promise(t=>{if(e!==null)t(!0);else{const r=s.createScriptProcessor(256,1,1),o=s.createGain(),a=s.createBuffer(1,2,44100),u=a.getChannelData(0);u[0]=1,u[1]=1;const c=s.createBufferSource();c.buffer=a,c.loop=!0,c.connect(r).connect(s.destination),c.connect(o),c.disconnect(o),r.onaudioprocess=h=>{const f=h.inputBuffer.getChannelData(0);Array.prototype.some.call(f,m=>m===1)?t(!0):t(!1),c.stop(),r.onaudioprocess=null,c.disconnect(r),r.disconnect(s.destination)},c.start()}}),uh=(s,e)=>{const t=new Map;for(const r of s)for(const o of r){const a=t.get(o);t.set(o,a===void 0?1:a+1)}t.forEach((r,o)=>e(o,r))},fu=s=>"context"in s,p1=s=>{const e=new Map;s.connect=(t=>(r,o=0,a=0)=>{const u=fu(r)?t(r,o,a):t(r,o),c=e.get(r);return c===void 0?e.set(r,[{input:a,output:o}]):c.every(h=>h.input!==a||h.output!==o)&&c.push({input:a,output:o}),u})(s.connect.bind(s)),s.disconnect=(t=>(r,o,a)=>{if(t.apply(s),r===void 0)e.clear();else if(typeof r=="number")for(const[u,c]of e){const h=c.filter(f=>f.output!==r);h.length===0?e.delete(u):e.set(u,h)}else if(e.has(r))if(o===void 0)e.delete(r);else{const u=e.get(r);if(u!==void 0){const c=u.filter(h=>h.output!==o&&(h.input!==a||a===void 0));c.length===0?e.delete(r):e.set(r,c)}}for(const[u,c]of e)c.forEach(h=>{fu(u)?s.connect(u,h.output,h.input):s.connect(u,h.output)})})(s.disconnect)},m1=(s,e,t,r)=>{const{activeInputs:o,passiveInputs:a}=oa(e),{outputs:u}=Vt(s),c=sa(s),h=f=>{const m=tt(s),g=Ko(e);if(f){const y=r_(a,s,t);Rv(o,s,y,!1),!r&&!Es(s)&&m.connect(g,t)}else{const y=f1(o,s,t);Mv(a,y,!1),!r&&!Es(s)&&m.disconnect(g,t)}};return Ms(u,[e,t],f=>f[0]===e&&f[1]===t,!0)?(c.add(h),gr(s)?Rv(o,s,[t,h],!0):Mv(a,[s,t,h],!0),!0):!1},g1=(s,e,t,r)=>{const{activeInputs:o,passiveInputs:a}=Vt(e),u=t_(o[r],s,t);return u===null?[Zy(a,s,t,r)[2],!1]:[u[2],!0]},v1=(s,e,t)=>{const{activeInputs:r,passiveInputs:o}=oa(e),a=t_(r,s,t);return a===null?[r_(o,s,t)[1],!1]:[a[2],!0]},gf=(s,e,t,r,o)=>{const[a,u]=g1(s,t,r,o);if(a!==null&&(n_(s,a),u&&!e&&!Es(s)&&hu(tt(s),tt(t),r,o)),gr(t)){const{activeInputs:c}=Vt(t);Uh(t,c)}},vf=(s,e,t,r)=>{const[o,a]=v1(s,t,r);o!==null&&(n_(s,o),a&&!e&&!Es(s)&&tt(s).disconnect(Ko(t),r))},y1=(s,e)=>{const t=Vt(s),r=[];for(const o of t.outputs)aa(o)?gf(s,e,...o):vf(s,e,...o),r.push(o[0]);return t.outputs.clear(),r},_1=(s,e,t)=>{const r=Vt(s),o=[];for(const a of r.outputs)a[1]===t&&(aa(a)?gf(s,e,...a):vf(s,e,...a),o.push(a[0]),r.outputs.delete(a));return o},w1=(s,e,t,r,o)=>{const a=Vt(s);return Array.from(a.outputs).filter(u=>u[0]===t&&(r===void 0||u[1]===r)&&(o===void 0||u[2]===o)).map(u=>(aa(u)?gf(s,e,...u):vf(s,e,...u),a.outputs.delete(u),u[0]))},x1=(s,e,t,r,o,a,u,c,h,f,m,g,y,x,w,_)=>class extends f{constructor(T,M,L,V){super(L),this._context=T,this._nativeAudioNode=L;const E=m(T);g(E)&&t(Ov,()=>Ov(E,_))!==!0&&p1(L),ff.set(this,L),Ky.set(this,new Set),T.state!=="closed"&&M&&Ii(this),s(this,V,L)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(T){this._nativeAudioNode.channelCount=T}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(T){this._nativeAudioNode.channelCountMode=T}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(T){this._nativeAudioNode.channelInterpretation=T}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(T,M=0,L=0){if(M<0||M>=this._nativeAudioNode.numberOfOutputs)throw o();const V=m(this._context),E=w(V);if(y(T)||x(T))throw a();if(cu(T)){const C=tt(T);try{const U=du(this._nativeAudioNode,C,M,L),W=Yl(this);(E||W)&&this._nativeAudioNode.disconnect(...U),this.context.state!=="closed"&&!W&&Yl(T)&&Ii(T)}catch(U){throw U.code===12?a():U}if(e(this,T,M,L,E)){const U=h([this],T);uh(U,r(E))}return T}const P=Ko(T);if(P.name==="playbackRate"&&P.maxValue===1024)throw u();try{this._nativeAudioNode.connect(P,M),(E||Yl(this))&&this._nativeAudioNode.disconnect(P,M)}catch(C){throw C.code===12?a():C}if(m1(this,T,M,E)){const C=h([this],T);uh(C,r(E))}}disconnect(T,M,L){let V;const E=m(this._context),P=w(E);if(T===void 0)V=y1(this,P);else if(typeof T=="number"){if(T<0||T>=this.numberOfOutputs)throw o();V=_1(this,P,T)}else{if(M!==void 0&&(M<0||M>=this.numberOfOutputs)||cu(T)&&L!==void 0&&(L<0||L>=T.numberOfInputs))throw o();if(V=w1(this,P,T,M,L),V.length===0)throw a()}for(const R of V){const C=h([this],R);uh(C,c)}}},S1=(s,e,t,r,o,a,u,c,h,f,m,g,y)=>(x,w,_,b=null,T=null)=>{const M=_.value,L=new MC(M),V=w?r(L):null,E={get defaultValue(){return M},get maxValue(){return b===null?_.maxValue:b},get minValue(){return T===null?_.minValue:T},get value(){return _.value},set value(P){_.value=P,E.setValueAtTime(P,x.context.currentTime)},cancelAndHoldAtTime(P){if(typeof _.cancelAndHoldAtTime=="function")V===null&&L.flush(x.context.currentTime),L.add(o(P)),_.cancelAndHoldAtTime(P);else{const R=Array.from(L).pop();V===null&&L.flush(x.context.currentTime),L.add(o(P));const C=Array.from(L).pop();_.cancelScheduledValues(P),R!==C&&C!==void 0&&(C.type==="exponentialRampToValue"?_.exponentialRampToValueAtTime(C.value,C.endTime):C.type==="linearRampToValue"?_.linearRampToValueAtTime(C.value,C.endTime):C.type==="setValue"?_.setValueAtTime(C.value,C.startTime):C.type==="setValueCurve"&&_.setValueCurveAtTime(C.values,C.startTime,C.duration))}return E},cancelScheduledValues(P){return V===null&&L.flush(x.context.currentTime),L.add(a(P)),_.cancelScheduledValues(P),E},exponentialRampToValueAtTime(P,R){if(P===0)throw new RangeError;if(!Number.isFinite(R)||R<0)throw new RangeError;const C=x.context.currentTime;return V===null&&L.flush(C),Array.from(L).length===0&&(L.add(f(M,C)),_.setValueAtTime(M,C)),L.add(u(P,R)),_.exponentialRampToValueAtTime(P,R),E},linearRampToValueAtTime(P,R){const C=x.context.currentTime;return V===null&&L.flush(C),Array.from(L).length===0&&(L.add(f(M,C)),_.setValueAtTime(M,C)),L.add(c(P,R)),_.linearRampToValueAtTime(P,R),E},setTargetAtTime(P,R,C){return V===null&&L.flush(x.context.currentTime),L.add(h(P,R,C)),_.setTargetAtTime(P,R,C),E},setValueAtTime(P,R){return V===null&&L.flush(x.context.currentTime),L.add(f(P,R)),_.setValueAtTime(P,R),E},setValueCurveAtTime(P,R,C){const O=P instanceof Float32Array?P:new Float32Array(P);if(g!==null&&g.name==="webkitAudioContext"){const U=R+C,W=x.context.sampleRate,B=Math.ceil(R*W),H=Math.floor(U*W),ee=H-B,te=new Float32Array(ee);for(let J=0;J<ee;J+=1){const z=(O.length-1)/C*((B+J)/W-R),Z=Math.floor(z),K=Math.ceil(z);te[J]=Z===K?O[Z]:(1-(z-Z))*O[Z]+(1-(K-z))*O[K]}V===null&&L.flush(x.context.currentTime),L.add(m(te,R,C)),_.setValueCurveAtTime(te,R,C);const X=H/W;X<U&&y(E,te[te.length-1],X),y(E,O[O.length-1],U)}else V===null&&L.flush(x.context.currentTime),L.add(m(O,R,C)),_.setValueCurveAtTime(O,R,C);return E}};return t.set(E,_),e.set(E,x),s(E,V),E},b1=s=>({replay(e){for(const t of s)if(t.type==="exponentialRampToValue"){const{endTime:r,value:o}=t;e.exponentialRampToValueAtTime(o,r)}else if(t.type==="linearRampToValue"){const{endTime:r,value:o}=t;e.linearRampToValueAtTime(o,r)}else if(t.type==="setTarget"){const{startTime:r,target:o,timeConstant:a}=t;e.setTargetAtTime(o,r,a)}else if(t.type==="setValue"){const{startTime:r,value:o}=t;e.setValueAtTime(o,r)}else if(t.type==="setValueCurve"){const{duration:r,startTime:o,values:a}=t;e.setValueCurveAtTime(a,o,r)}else throw new Error("Can't apply an unknown automation.")}});class s_{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((r,o)=>e.call(t,r,o,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const T1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},C1=(s,e,t,r,o,a,u,c,h,f,m,g,y,x)=>class extends e{constructor(_,b,T){var M;const L=c(_),V=h(L),E=m({...T1,...T});y(E);const P=Bh.get(L),R=P==null?void 0:P.get(b),C=V||L.state!=="closed"?L:(M=u(L))!==null&&M!==void 0?M:L,O=o(C,V?null:_.baseLatency,f,b,R,E),U=V?r(b,E,R):null;super(_,!0,O,U);const W=[];O.parameters.forEach((H,ee)=>{const te=t(this,V,H);W.push([ee,te])}),this._nativeAudioWorkletNode=O,this._onprocessorerror=null,this._parameters=new s_(W),V&&s(L,this);const{activeInputs:B}=a(this);g(O,B)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(_){const b=typeof _=="function"?x(this,_):null;this._nativeAudioWorkletNode.onprocessorerror=b;const T=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=T!==null&&T===b?_:T}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function pu(s,e,t,r,o){if(typeof s.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),s.copyFromChannel(e[t],r,o);else{const a=s.getChannelData(r);if(e[t].byteLength===0)e[t]=a.slice(o,o+128);else{const u=new Float32Array(a.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(u)}}}const i_=(s,e,t,r,o)=>{typeof s.copyToChannel=="function"?e[t].byteLength!==0&&s.copyToChannel(e[t],r,o):e[t].byteLength!==0&&s.getChannelData(r).set(e[t],o)},mu=(s,e)=>{const t=[];for(let r=0;r<s;r+=1){const o=[],a=typeof e=="number"?e:e[r];for(let u=0;u<a;u+=1)o.push(new Float32Array(128));t.push(o)}return t},k1=(s,e)=>{const t=Rn(zh,s),r=tt(e);return Rn(t,r)},E1=async(s,e,t,r,o,a,u)=>{const c=e===null?Math.ceil(s.context.length/128)*128:e.length,h=r.channelCount*r.numberOfInputs,f=o.reduce((b,T)=>b+T,0),m=f===0?null:t.createBuffer(f,c,t.sampleRate);if(a===void 0)throw new Error("Missing the processor constructor.");const g=Vt(s),y=await k1(t,s),x=mu(r.numberOfInputs,r.channelCount),w=mu(r.numberOfOutputs,o),_=Array.from(s.parameters.keys()).reduce((b,T)=>({...b,[T]:new Float32Array(128)}),{});for(let b=0;b<c;b+=128){if(r.numberOfInputs>0&&e!==null)for(let T=0;T<r.numberOfInputs;T+=1)for(let M=0;M<r.channelCount;M+=1)pu(e,x[T],M,M,b);a.parameterDescriptors!==void 0&&e!==null&&a.parameterDescriptors.forEach(({name:T},M)=>{pu(e,_,T,h+M,b)});for(let T=0;T<r.numberOfInputs;T+=1)for(let M=0;M<o[T];M+=1)w[T][M].byteLength===0&&(w[T][M]=new Float32Array(128));try{const T=x.map((L,V)=>g.activeInputs[V].size===0?[]:L),M=u(b/t.sampleRate,t.sampleRate,()=>y.process(T,w,_));if(m!==null)for(let L=0,V=0;L<r.numberOfOutputs;L+=1){for(let E=0;E<o[L];E+=1)i_(m,w[L],E,V+E,b);V+=o[L]}if(!M)break}catch(T){s.dispatchEvent(new ErrorEvent("processorerror",{colno:T.colno,filename:T.filename,lineno:T.lineno,message:T.message}));break}}return m},P1=(s,e,t,r,o,a,u,c,h,f,m,g,y,x,w,_)=>(b,T,M)=>{const L=new WeakMap;let V=null;const E=async(P,R)=>{let C=m(P),O=null;const U=Ot(C,R),W=Array.isArray(T.outputChannelCount)?T.outputChannelCount:Array.from(T.outputChannelCount);if(g===null){const B=W.reduce((X,J)=>X+J,0),H=o(R,{channelCount:Math.max(1,B),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,B)}),ee=[];for(let X=0;X<P.numberOfOutputs;X+=1)ee.push(r(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:W[X]}));const te=u(R,{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1});te.connect=e.bind(null,ee),te.disconnect=h.bind(null,ee),O=[H,ee,te]}else U||(C=new g(R,b));if(L.set(R,O===null?C:O[2]),O!==null){if(V===null){if(M===void 0)throw new Error("Missing the processor constructor.");if(y===null)throw new Error("Missing the native OfflineAudioContext constructor.");const J=P.channelCount*P.numberOfInputs,z=M.parameterDescriptors===void 0?0:M.parameterDescriptors.length,Z=J+z;V=E1(P,Z===0?null:await(async()=>{const A=new y(Z,Math.ceil(P.context.length/128)*128,R.sampleRate),$=[],le=[];for(let ue=0;ue<T.numberOfInputs;ue+=1)$.push(u(A,{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1})),le.push(o(A,{channelCount:T.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:T.channelCount}));const ne=await Promise.all(Array.from(P.parameters.values()).map(async ue=>{const de=a(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ue.value});return await x(A,ue,de.offset),de})),re=r(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,J+z)});for(let ue=0;ue<T.numberOfInputs;ue+=1){$[ue].connect(le[ue]);for(let de=0;de<T.channelCount;de+=1)le[ue].connect(re,de,ue*T.channelCount+de)}for(const[ue,de]of ne.entries())de.connect(re,0,J+ue),de.start(0);return re.connect(A.destination),await Promise.all($.map(ue=>w(P,A,ue))),_(A)})(),R,T,W,M,f)}const B=await V,H=t(R,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[ee,te,X]=O;B!==null&&(H.buffer=B,H.start(0)),H.connect(ee);for(let J=0,z=0;J<P.numberOfOutputs;J+=1){const Z=te[J];for(let K=0;K<W[J];K+=1)ee.connect(Z,z+K,K);z+=W[J]}return X}if(U)for(const[B,H]of P.parameters.entries())await s(R,H,C.parameters.get(B));else for(const[B,H]of P.parameters.entries())await x(R,H,C.parameters.get(B));return await w(P,R,C),C};return{render(P,R){c(R,P);const C=L.get(R);return C!==void 0?Promise.resolve(C):E(P,R)}}},A1=(s,e,t,r,o,a,u,c,h,f,m,g,y,x,w,_,b,T,M,L)=>class extends w{constructor(E,P){super(E,P),this._nativeContext=E,this._audioWorklet=s===void 0?void 0:{addModule:(R,C)=>s(this,R,C)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new o(this)}createBuffer(E,P,R){return new t({length:P,numberOfChannels:E,sampleRate:R})}createBufferSource(){return new r(this)}createChannelMerger(E=6){return new a(this,{numberOfInputs:E})}createChannelSplitter(E=6){return new u(this,{numberOfOutputs:E})}createConstantSource(){return new c(this)}createConvolver(){return new h(this)}createDelay(E=1){return new m(this,{maxDelayTime:E})}createDynamicsCompressor(){return new g(this)}createGain(){return new y(this)}createIIRFilter(E,P){return new x(this,{feedback:P,feedforward:E})}createOscillator(){return new _(this)}createPanner(){return new b(this)}createPeriodicWave(E,P,R={disableNormalization:!1}){return new T(this,{...R,imag:P,real:E})}createStereoPanner(){return new M(this)}createWaveShaper(){return new L(this)}decodeAudioData(E,P,R){return f(this._nativeContext,E).then(C=>(typeof P=="function"&&P(C),C),C=>{throw typeof R=="function"&&R(C),C})}},N1={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},R1=(s,e,t,r,o,a,u,c)=>class extends s{constructor(f,m){const g=a(f),y={...N1,...m},x=o(g,y),w=u(g),_=w?t():null;super(f,!1,x,_),this._Q=e(this,w,x.Q,Ft,en),this._detune=e(this,w,x.detune,1200*Math.log2(Ft),-1200*Math.log2(Ft)),this._frequency=e(this,w,x.frequency,f.sampleRate/2,0),this._gain=e(this,w,x.gain,40*Math.log10(Ft),en),this._nativeBiquadFilterNode=x,c(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(f){this._nativeBiquadFilterNode.type=f}getFrequencyResponse(f,m,g){try{this._nativeBiquadFilterNode.getFrequencyResponse(f,m,g)}catch(y){throw y.code===11?r():y}if(f.length!==m.length||m.length!==g.length)throw r()}},M1=(s,e,t,r,o)=>()=>{const a=new WeakMap,u=async(c,h)=>{let f=t(c);const m=Ot(f,h);if(!m){const g={Q:f.Q.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,gain:f.gain.value,type:f.type};f=e(h,g)}return a.set(h,f),m?(await s(h,c.Q,f.Q),await s(h,c.detune,f.detune),await s(h,c.frequency,f.frequency),await s(h,c.gain,f.gain)):(await r(h,c.Q,f.Q),await r(h,c.detune,f.detune),await r(h,c.frequency,f.frequency),await r(h,c.gain,f.gain)),await o(c,h,f),f};return{render(c,h){const f=a.get(h);return f!==void 0?Promise.resolve(f):u(c,h)}}},O1=(s,e)=>(t,r)=>{const o=e.get(t);if(o!==void 0)return o;const a=s.get(t);if(a!==void 0)return a;try{const u=r();return u instanceof Promise?(s.set(t,u),u.catch(()=>!1).then(c=>(s.delete(t),e.set(t,c),c))):(e.set(t,u),u)}catch{return e.set(t,!1),!1}},I1={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},D1=(s,e,t,r,o)=>class extends s{constructor(u,c){const h=r(u),f={...I1,...c},m=t(h,f),g=o(h)?e():null;super(u,!1,m,g)}},L1=(s,e,t)=>()=>{const r=new WeakMap,o=async(a,u)=>{let c=e(a);if(!Ot(c,u)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfInputs:c.numberOfInputs};c=s(u,f)}return r.set(u,c),await t(a,u,c),c};return{render(a,u){const c=r.get(u);return c!==void 0?Promise.resolve(c):o(a,u)}}},F1={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},V1=(s,e,t,r,o,a)=>class extends s{constructor(c,h){const f=r(c),m=a({...F1,...h}),g=t(f,m),y=o(f)?e():null;super(c,!1,g,y)}},B1=(s,e,t)=>()=>{const r=new WeakMap,o=async(a,u)=>{let c=e(a);if(!Ot(c,u)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfOutputs:c.numberOfOutputs};c=s(u,f)}return r.set(u,c),await t(a,u,c),c};return{render(a,u){const c=r.get(u);return c!==void 0?Promise.resolve(c):o(a,u)}}},z1=s=>(e,t,r)=>s(t,e,r),U1=s=>(e,t,r=0,o=0)=>{const a=e[r];if(a===void 0)throw s();return fu(t)?a.connect(t,0,o):a.connect(t,0)},j1=s=>(e,t)=>{const r=s(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=e.createBuffer(1,2,44100);return r.buffer=o,r.loop=!0,r.connect(t),r.start(),()=>{r.stop(),r.disconnect(t)}},G1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},W1=(s,e,t,r,o,a,u)=>class extends s{constructor(h,f){const m=o(h),g={...G1,...f},y=r(m,g),x=a(m),w=x?t():null;super(h,!1,y,w),this._constantSourceNodeRenderer=w,this._nativeConstantSourceNode=y,this._offset=e(this,x,y.offset,Ft,en),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(h){const f=typeof h=="function"?u(this,h):null;this._nativeConstantSourceNode.onended=f;const m=this._nativeConstantSourceNode.onended;this._onended=m!==null&&m===f?h:m}start(h=0){if(this._nativeConstantSourceNode.start(h),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=h),this.context.state!=="closed"){Ii(this);const f=()=>{this._nativeConstantSourceNode.removeEventListener("ended",f),gr(this)&&ia(this)};this._nativeConstantSourceNode.addEventListener("ended",f)}}stop(h=0){this._nativeConstantSourceNode.stop(h),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=h)}},q1=(s,e,t,r,o)=>()=>{const a=new WeakMap;let u=null,c=null;const h=async(f,m)=>{let g=t(f);const y=Ot(g,m);if(!y){const x={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,offset:g.offset.value};g=e(m,x),u!==null&&g.start(u),c!==null&&g.stop(c)}return a.set(m,g),y?await s(m,f.offset,g.offset):await r(m,f.offset,g.offset),await o(f,m,g),g};return{set start(f){u=f},set stop(f){c=f},render(f,m){const g=a.get(m);return g!==void 0?Promise.resolve(g):h(f,m)}}},$1=s=>e=>(s[0]=e,s[0]),H1={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Y1=(s,e,t,r,o,a)=>class extends s{constructor(c,h){const f=r(c),m={...H1,...h},g=t(f,m),x=o(f)?e():null;super(c,!1,g,x),this._isBufferNullified=!1,this._nativeConvolverNode=g,m.buffer!==null&&a(this,m.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(c){if(this._nativeConvolverNode.buffer=c,c===null&&this._nativeConvolverNode.buffer!==null){const h=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=h.createBuffer(1,1,h.sampleRate),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(c){this._nativeConvolverNode.normalize=c}},K1=(s,e,t)=>()=>{const r=new WeakMap,o=async(a,u)=>{let c=e(a);if(!Ot(c,u)){const f={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize};c=s(u,f)}return r.set(u,c),Wi(c)?await t(a,u,c.inputs[0]):await t(a,u,c),c};return{render(a,u){const c=r.get(u);return c!==void 0?Promise.resolve(c):o(a,u)}}},X1=(s,e)=>(t,r,o)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,r,o)}catch(a){throw a.name==="SyntaxError"?s():a}},Z1=()=>new DOMException("","DataCloneError"),Iv=s=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(r=>{const o=()=>{t.onmessage=null,e.close(),t.close(),r()};t.onmessage=()=>o();try{e.postMessage(s,[s])}catch{}finally{o()}})},Q1=(s,e,t,r,o,a,u,c,h,f,m)=>(g,y)=>{const x=u(g)?g:a(g);if(o.has(y)){const w=t();return Promise.reject(w)}try{o.add(y)}catch{}return e(h,()=>h(x))?x.decodeAudioData(y).then(w=>(Iv(y).catch(()=>{}),e(c,()=>c(w))||m(w),s.add(w),w)):new Promise((w,_)=>{const b=async()=>{try{await Iv(y)}catch{}},T=M=>{_(M),b()};try{x.decodeAudioData(y,M=>{typeof M.copyFromChannel!="function"&&(f(M),mf(M)),s.add(M),b().then(()=>w(M))},M=>{T(M===null?r():M)})}catch(M){T(M)}})},J1=(s,e,t,r,o,a,u,c)=>(h,f)=>{const m=e.get(h);if(m===void 0)throw new Error("Missing the expected cycle count.");const g=a(h.context),y=c(g);if(m===f){if(e.delete(h),!y&&u(h)){const x=r(h),{outputs:w}=t(h);for(const _ of w)if(aa(_)){const b=r(_[0]);s(x,b,_[1],_[2])}else{const b=o(_[0]);x.connect(b,_[1])}}}else e.set(h,m-f)},ek={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},tk=(s,e,t,r,o,a,u)=>class extends s{constructor(h,f){const m=o(h),g={...ek,...f},y=r(m,g),x=a(m),w=x?t(g.maxDelayTime):null;super(h,!1,y,w),this._delayTime=e(this,x,y.delayTime),u(this,g.maxDelayTime)}get delayTime(){return this._delayTime}},nk=(s,e,t,r,o)=>a=>{const u=new WeakMap,c=async(h,f)=>{let m=t(h);const g=Ot(m,f);if(!g){const y={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,delayTime:m.delayTime.value,maxDelayTime:a};m=e(f,y)}return u.set(f,m),g?await s(f,h.delayTime,m.delayTime):await r(f,h.delayTime,m.delayTime),await o(h,f,m),m};return{render(h,f){const m=u.get(f);return m!==void 0?Promise.resolve(m):c(h,f)}}},rk=s=>(e,t,r,o)=>s(e[o],a=>a[0]===t&&a[1]===r),sk=s=>(e,t)=>{s(e).delete(t)},ik=s=>"delayTime"in s,ok=(s,e,t)=>function r(o,a){const u=cu(a)?a:t(s,a);if(ik(u))return[];if(o[0]===u)return[o];if(o.includes(u))return[];const{outputs:c}=e(u);return Array.from(c).map(h=>r([...o,u],h[0])).reduce((h,f)=>h.concat(f),[])},Dl=(s,e,t)=>{const r=e[t];if(r===void 0)throw s();return r},ak=s=>(e,t=void 0,r=void 0,o=0)=>t===void 0?e.forEach(a=>a.disconnect()):typeof t=="number"?Dl(s,e,t).disconnect():fu(t)?r===void 0?e.forEach(a=>a.disconnect(t)):o===void 0?Dl(s,e,r).disconnect(t,0):Dl(s,e,r).disconnect(t,0,o):r===void 0?e.forEach(a=>a.disconnect(t)):Dl(s,e,r).disconnect(t,0),lk={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},uk=(s,e,t,r,o,a,u,c)=>class extends s{constructor(f,m){const g=a(f),y={...lk,...m},x=r(g,y),w=u(g),_=w?t():null;super(f,!1,x,_),this._attack=e(this,w,x.attack),this._knee=e(this,w,x.knee),this._nativeDynamicsCompressorNode=x,this._ratio=e(this,w,x.ratio),this._release=e(this,w,x.release),this._threshold=e(this,w,x.threshold),c(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(f){const m=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=f,f>2)throw this._nativeDynamicsCompressorNode.channelCount=m,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(f){const m=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=f,f==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=m,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},ck=(s,e,t,r,o)=>()=>{const a=new WeakMap,u=async(c,h)=>{let f=t(c);const m=Ot(f,h);if(!m){const g={attack:f.attack.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,knee:f.knee.value,ratio:f.ratio.value,release:f.release.value,threshold:f.threshold.value};f=e(h,g)}return a.set(h,f),m?(await s(h,c.attack,f.attack),await s(h,c.knee,f.knee),await s(h,c.ratio,f.ratio),await s(h,c.release,f.release),await s(h,c.threshold,f.threshold)):(await r(h,c.attack,f.attack),await r(h,c.knee,f.knee),await r(h,c.ratio,f.ratio),await r(h,c.release,f.release),await r(h,c.threshold,f.threshold)),await o(c,h,f),f};return{render(c,h){const f=a.get(h);return f!==void 0?Promise.resolve(f):u(c,h)}}},dk=()=>new DOMException("","EncodingError"),hk=s=>e=>new Promise((t,r)=>{if(s===null){r(new SyntaxError);return}const o=s.document.head;if(o===null)r(new SyntaxError);else{const a=s.document.createElement("script"),u=new Blob([e],{type:"application/javascript"}),c=URL.createObjectURL(u),h=s.onerror,f=()=>{s.onerror=h,URL.revokeObjectURL(c)};s.onerror=(m,g,y,x,w)=>{if(g===c||g===s.location.href&&y===1&&x===1)return f(),r(w),!1;if(h!==null)return h(m,g,y,x,w)},a.onerror=()=>{f(),r(new SyntaxError)},a.onload=()=>{f(),t()},a.src=c,a.type="module",o.appendChild(a)}}),fk=s=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,r,o){if(r!==null){let a=this._listeners.get(r);a===void 0&&(a=s(this,r),typeof r=="function"&&this._listeners.set(r,a)),this._nativeEventTarget.addEventListener(t,a,o)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,r,o){const a=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(t,a===void 0?null:a,o)}},pk=s=>(e,t,r)=>{Object.defineProperties(s,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{s!==null&&(delete s.currentFrame,delete s.currentTime)}},mk=s=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw s()},gk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},vk=(s,e,t,r,o,a)=>class extends s{constructor(c,h){const f=o(c),m={...gk,...h},g=r(f,m),y=a(f),x=y?t():null;super(c,!1,g,x),this._gain=e(this,y,g.gain,Ft,en)}get gain(){return this._gain}},yk=(s,e,t,r,o)=>()=>{const a=new WeakMap,u=async(c,h)=>{let f=t(c);const m=Ot(f,h);if(!m){const g={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:f.gain.value};f=e(h,g)}return a.set(h,f),m?await s(h,c.gain,f.gain):await r(h,c.gain,f.gain),await o(c,h,f),f};return{render(c,h){const f=a.get(h);return f!==void 0?Promise.resolve(f):u(c,h)}}},_k=(s,e)=>t=>e(s,t),wk=s=>e=>{const t=s(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},xk=s=>e=>{var t;return(t=s.get(e))!==null&&t!==void 0?t:0},Sk=s=>e=>{const t=s(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},bk=s=>e=>s.get(e),St=()=>new DOMException("","InvalidStateError"),Tk=s=>e=>{const t=s.get(e);if(t===void 0)throw St();return t},Ck=(s,e)=>t=>{let r=s.get(t);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),s.set(t,r),r},kk=s=>e=>{const t=s.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},Eu=()=>new DOMException("","InvalidAccessError"),Ek=s=>{s.getFrequencyResponse=(e=>(t,r,o)=>{if(t.length!==r.length||r.length!==o.length)throw Eu();return e.call(s,t,r,o)})(s.getFrequencyResponse)},Pk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Ak=(s,e,t,r,o,a)=>class extends s{constructor(c,h){const f=r(c),m=o(f),g={...Pk,...h},y=e(f,m?null:c.baseLatency,g),x=m?t(g.feedback,g.feedforward):null;super(c,!1,y,x),Ek(y),this._nativeIIRFilterNode=y,a(this,1)}getFrequencyResponse(c,h,f){return this._nativeIIRFilterNode.getFrequencyResponse(c,h,f)}},o_=(s,e,t,r,o,a,u,c,h,f,m)=>{const g=f.length;let y=c;for(let x=0;x<g;x+=1){let w=t[0]*f[x];for(let _=1;_<o;_+=1){const b=y-_&h-1;w+=t[_]*a[b],w-=s[_]*u[b]}for(let _=o;_<r;_+=1)w+=t[_]*a[y-_&h-1];for(let _=o;_<e;_+=1)w-=s[_]*u[y-_&h-1];a[y]=f[x],u[y]=w,y=y+1&h-1,m[x]=w}return y},Nk=(s,e,t,r)=>{const o=t instanceof Float64Array?t:new Float64Array(t),a=r instanceof Float64Array?r:new Float64Array(r),u=o.length,c=a.length,h=Math.min(u,c);if(o[0]!==1){for(let w=0;w<u;w+=1)a[w]/=o[0];for(let w=1;w<c;w+=1)o[w]/=o[0]}const f=32,m=new Float32Array(f),g=new Float32Array(f),y=e.createBuffer(s.numberOfChannels,s.length,s.sampleRate),x=s.numberOfChannels;for(let w=0;w<x;w+=1){const _=s.getChannelData(w),b=y.getChannelData(w);m.fill(0),g.fill(0),o_(o,u,a,c,h,m,g,0,f,_,b)}return y},Rk=(s,e,t,r,o)=>(a,u)=>{const c=new WeakMap;let h=null;const f=async(m,g)=>{let y=null,x=e(m);const w=Ot(x,g);if(g.createIIRFilter===void 0?y=s(g,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):w||(x=g.createIIRFilter(u,a)),c.set(g,y===null?x:y),y!==null){if(h===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const b=new t(m.context.destination.channelCount,m.context.length,g.sampleRate);h=(async()=>{await r(m,b,b.destination);const T=await o(b);return Nk(T,g,a,u)})()}const _=await h;return y.buffer=_,y.start(0),y}return await r(m,g,x),x};return{render(m,g){const y=c.get(g);return y!==void 0?Promise.resolve(y):f(m,g)}}},Mk=(s,e,t,r,o,a)=>u=>(c,h)=>{const f=s.get(c);if(f===void 0){if(!u&&a(c)){const m=r(c),{outputs:g}=t(c);for(const y of g)if(aa(y)){const x=r(y[0]);e(m,x,y[1],y[2])}else{const x=o(y[0]);m.disconnect(x,y[1])}}s.set(c,h)}else s.set(c,f+h)},Ok=(s,e)=>t=>{const r=s.get(t);return e(r)||e(t)},Ik=(s,e)=>t=>s.has(t)||e(t),Dk=(s,e)=>t=>s.has(t)||e(t),Lk=(s,e)=>t=>{const r=s.get(t);return e(r)||e(t)},Fk=s=>e=>s!==null&&e instanceof s,Vk=s=>e=>s!==null&&typeof s.AudioNode=="function"&&e instanceof s.AudioNode,Bk=s=>e=>s!==null&&typeof s.AudioParam=="function"&&e instanceof s.AudioParam,zk=(s,e)=>t=>s(t)||e(t),Uk=s=>e=>s!==null&&e instanceof s,jk=s=>s!==null&&s.isSecureContext,Gk=(s,e,t,r)=>class extends s{constructor(a,u){const c=t(a),h=e(c,u);if(r(c))throw TypeError();super(a,!0,h,null),this._nativeMediaElementAudioSourceNode=h}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},Wk={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},qk=(s,e,t,r)=>class extends s{constructor(a,u){const c=t(a);if(r(c))throw new TypeError;const h={...Wk,...u},f=e(c,h);super(a,!1,f,null),this._nativeMediaStreamAudioDestinationNode=f}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},$k=(s,e,t,r)=>class extends s{constructor(a,u){const c=t(a),h=e(c,u);if(r(c))throw new TypeError;super(a,!0,h,null),this._nativeMediaStreamAudioSourceNode=h}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},Hk=(s,e,t)=>class extends s{constructor(o,a){const u=t(o),c=e(u,a);super(o,!0,c,null)}},Yk=(s,e,t,r,o,a)=>class extends t{constructor(c,h){super(c),this._nativeContext=c,Cu.set(this,c),r(c)&&o.set(c,new Set),this._destination=new s(this,h),this._listener=e(this,c),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(c){const h=typeof c=="function"?a(this,c):null;this._nativeContext.onstatechange=h;const f=this._nativeContext.onstatechange;this._onstatechange=f!==null&&f===h?c:f}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Xo=s=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=s.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},Kk=(s,e)=>(t,r,o)=>{const a=new Set;return t.connect=(u=>(c,h=0,f=0)=>{const m=a.size===0;if(e(c))return u.call(t,c,h,f),s(a,[c,h,f],g=>g[0]===c&&g[1]===h&&g[2]===f,!0),m&&r(),c;u.call(t,c,h),s(a,[c,h],g=>g[0]===c&&g[1]===h,!0),m&&r()})(t.connect),t.disconnect=(u=>(c,h,f)=>{const m=a.size>0;if(c===void 0)u.apply(t),a.clear();else if(typeof c=="number"){u.call(t,c);for(const y of a)y[1]===c&&a.delete(y)}else{e(c)?u.call(t,c,h,f):u.call(t,c,h);for(const y of a)y[0]===c&&(h===void 0||y[1]===h)&&(f===void 0||y[2]===f)&&a.delete(y)}const g=a.size===0;m&&g&&o()})(t.disconnect),t},rt=(s,e,t)=>{const r=e[t];r!==void 0&&r!==s[t]&&(s[t]=r)},yt=(s,e)=>{rt(s,e,"channelCount"),rt(s,e,"channelCountMode"),rt(s,e,"channelInterpretation")},Dv=s=>typeof s.getFloatTimeDomainData=="function",Xk=s=>{s.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);s.getByteTimeDomainData(t);const r=Math.max(t.length,s.fftSize);for(let o=0;o<r;o+=1)e[o]=(t[o]-128)*.0078125;return e}},Zk=(s,e)=>(t,r)=>{const o=t.createAnalyser();if(yt(o,r),!(r.maxDecibels>r.minDecibels))throw e();return rt(o,r,"fftSize"),rt(o,r,"maxDecibels"),rt(o,r,"minDecibels"),rt(o,r,"smoothingTimeConstant"),s(Dv,()=>Dv(o))||Xk(o),o},Qk=s=>s===null?null:s.hasOwnProperty("AudioBuffer")?s.AudioBuffer:null,at=(s,e,t)=>{const r=e[t];r!==void 0&&r!==s[t].value&&(s[t].value=r)},Jk=s=>{s.start=(e=>{let t=!1;return(r=0,o=0,a)=>{if(t)throw St();e.call(s,r,o,a),t=!0}})(s.start)},yf=s=>{s.start=(e=>(t=0,r=0,o)=>{if(typeof o=="number"&&o<0||r<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(s,t,r,o)})(s.start)},_f=s=>{s.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(s,t)})(s.stop)},eE=(s,e,t,r,o,a,u,c,h,f,m)=>(g,y)=>{const x=g.createBufferSource();return yt(x,y),at(x,y,"playbackRate"),rt(x,y,"buffer"),rt(x,y,"loop"),rt(x,y,"loopEnd"),rt(x,y,"loopStart"),e(t,()=>t(g))||Jk(x),e(r,()=>r(g))||h(x),e(o,()=>o(g))||f(x,g),e(a,()=>a(g))||yf(x),e(u,()=>u(g))||m(x,g),e(c,()=>c(g))||_f(x),s(g,x),x},tE=s=>s===null?null:s.hasOwnProperty("AudioContext")?s.AudioContext:s.hasOwnProperty("webkitAudioContext")?s.webkitAudioContext:null,nE=(s,e)=>(t,r,o)=>{const a=t.destination;if(a.channelCount!==r)try{a.channelCount=r}catch{}o&&a.channelCountMode!=="explicit"&&(a.channelCountMode="explicit"),a.maxChannelCount===0&&Object.defineProperty(a,"maxChannelCount",{value:r});const u=s(t,{channelCount:r,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return e(u,"channelCount",c=>()=>c.call(u),c=>h=>{c.call(u,h);try{a.channelCount=h}catch(f){if(h>a.maxChannelCount)throw f}}),e(u,"channelCountMode",c=>()=>c.call(u),c=>h=>{c.call(u,h),a.channelCountMode=h}),e(u,"channelInterpretation",c=>()=>c.call(u),c=>h=>{c.call(u,h),a.channelInterpretation=h}),Object.defineProperty(u,"maxChannelCount",{get:()=>a.maxChannelCount}),u.connect(a),u},rE=s=>s===null?null:s.hasOwnProperty("AudioWorkletNode")?s.AudioWorkletNode:null,sE=s=>{const{port1:e}=new MessageChannel;try{e.postMessage(s)}finally{e.close()}},iE=(s,e,t,r,o)=>(a,u,c,h,f,m)=>{if(c!==null)try{const g=new c(a,h,m),y=new Map;let x=null;if(Object.defineProperties(g,{channelCount:{get:()=>m.channelCount,set:()=>{throw s()}},channelCountMode:{get:()=>"explicit",set:()=>{throw s()}},onprocessorerror:{get:()=>x,set:w=>{typeof x=="function"&&g.removeEventListener("processorerror",x),x=typeof w=="function"?w:null,typeof x=="function"&&g.addEventListener("processorerror",x)}}}),g.addEventListener=(w=>(..._)=>{if(_[0]==="processorerror"){const b=typeof _[1]=="function"?_[1]:typeof _[1]=="object"&&_[1]!==null&&typeof _[1].handleEvent=="function"?_[1].handleEvent:null;if(b!==null){const T=y.get(_[1]);T!==void 0?_[1]=T:(_[1]=M=>{M.type==="error"?(Object.defineProperties(M,{type:{value:"processorerror"}}),b(M)):b(new ErrorEvent(_[0],{...M}))},y.set(b,_[1]))}}return w.call(g,"error",_[1],_[2]),w.call(g,..._)})(g.addEventListener),g.removeEventListener=(w=>(..._)=>{if(_[0]==="processorerror"){const b=y.get(_[1]);b!==void 0&&(y.delete(_[1]),_[1]=b)}return w.call(g,"error",_[1],_[2]),w.call(g,_[0],_[1],_[2])})(g.removeEventListener),m.numberOfOutputs!==0){const w=t(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return g.connect(w).connect(a.destination),o(g,()=>w.disconnect(),()=>w.connect(a.destination))}return g}catch(g){throw g.code===11?r():g}if(f===void 0)throw r();return sE(m),e(a,u,f,m)},a_=(s,e)=>s===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(s*e))))),oE=s=>new Promise((e,t)=>{const{port1:r,port2:o}=new MessageChannel;r.onmessage=({data:a})=>{r.close(),o.close(),e(a)},r.onmessageerror=({data:a})=>{r.close(),o.close(),t(a)},o.postMessage(s)}),aE=async(s,e)=>{const t=await oE(e);return new s(t)},lE=(s,e,t,r)=>{let o=zh.get(s);o===void 0&&(o=new WeakMap,zh.set(s,o));const a=aE(t,r);return o.set(e,a),a},uE=(s,e,t,r,o,a,u,c,h,f,m,g,y)=>(x,w,_,b)=>{if(b.numberOfInputs===0&&b.numberOfOutputs===0)throw h();const T=Array.isArray(b.outputChannelCount)?b.outputChannelCount:Array.from(b.outputChannelCount);if(T.some(se=>se<1))throw h();if(T.length!==b.numberOfOutputs)throw e();if(b.channelCountMode!=="explicit")throw h();const M=b.channelCount*b.numberOfInputs,L=T.reduce((se,he)=>se+he,0),V=_.parameterDescriptors===void 0?0:_.parameterDescriptors.length;if(M+V>6||L>6)throw h();const E=new MessageChannel,P=[],R=[];for(let se=0;se<b.numberOfInputs;se+=1)P.push(u(x,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1})),R.push(o(x,{channelCount:b.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:b.channelCount}));const C=[];if(_.parameterDescriptors!==void 0)for(const{defaultValue:se,maxValue:he,minValue:Me,name:Le}of _.parameterDescriptors){const Ce=a(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:b.parameterData[Le]!==void 0?b.parameterData[Le]:se===void 0?0:se});Object.defineProperties(Ce.offset,{defaultValue:{get:()=>se===void 0?0:se},maxValue:{get:()=>he===void 0?Ft:he},minValue:{get:()=>Me===void 0?en:Me}}),C.push(Ce)}const O=r(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,M+V)}),U=a_(w,x.sampleRate),W=c(x,U,M+V,Math.max(1,L)),B=o(x,{channelCount:Math.max(1,L),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,L)}),H=[];for(let se=0;se<b.numberOfOutputs;se+=1)H.push(r(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:T[se]}));for(let se=0;se<b.numberOfInputs;se+=1){P[se].connect(R[se]);for(let he=0;he<b.channelCount;he+=1)R[se].connect(O,he,se*b.channelCount+he)}const ee=new s_(_.parameterDescriptors===void 0?[]:_.parameterDescriptors.map(({name:se},he)=>{const Me=C[he];return Me.connect(O,0,M+he),Me.start(0),[se,Me.offset]}));O.connect(W);let te=b.channelInterpretation,X=null;const J=b.numberOfOutputs===0?[W]:H,z={get bufferSize(){return U},get channelCount(){return b.channelCount},set channelCount(se){throw t()},get channelCountMode(){return b.channelCountMode},set channelCountMode(se){throw t()},get channelInterpretation(){return te},set channelInterpretation(se){for(const he of P)he.channelInterpretation=se;te=se},get context(){return W.context},get inputs(){return P},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get onprocessorerror(){return X},set onprocessorerror(se){typeof X=="function"&&z.removeEventListener("processorerror",X),X=typeof se=="function"?se:null,typeof X=="function"&&z.addEventListener("processorerror",X)},get parameters(){return ee},get port(){return E.port2},addEventListener(...se){return W.addEventListener(se[0],se[1],se[2])},connect:s.bind(null,J),disconnect:f.bind(null,J),dispatchEvent(...se){return W.dispatchEvent(se[0])},removeEventListener(...se){return W.removeEventListener(se[0],se[1],se[2])}},Z=new Map;E.port1.addEventListener=(se=>(...he)=>{if(he[0]==="message"){const Me=typeof he[1]=="function"?he[1]:typeof he[1]=="object"&&he[1]!==null&&typeof he[1].handleEvent=="function"?he[1].handleEvent:null;if(Me!==null){const Le=Z.get(he[1]);Le!==void 0?he[1]=Le:(he[1]=Ce=>{m(x.currentTime,x.sampleRate,()=>Me(Ce))},Z.set(Me,he[1]))}}return se.call(E.port1,he[0],he[1],he[2])})(E.port1.addEventListener),E.port1.removeEventListener=(se=>(...he)=>{if(he[0]==="message"){const Me=Z.get(he[1]);Me!==void 0&&(Z.delete(he[1]),he[1]=Me)}return se.call(E.port1,he[0],he[1],he[2])})(E.port1.removeEventListener);let K=null;Object.defineProperty(E.port1,"onmessage",{get:()=>K,set:se=>{typeof K=="function"&&E.port1.removeEventListener("message",K),K=typeof se=="function"?se:null,typeof K=="function"&&(E.port1.addEventListener("message",K),E.port1.start())}}),_.prototype.port=E.port1;let A=null;lE(x,z,_,b).then(se=>A=se);const le=mu(b.numberOfInputs,b.channelCount),ne=mu(b.numberOfOutputs,T),re=_.parameterDescriptors===void 0?[]:_.parameterDescriptors.reduce((se,{name:he})=>({...se,[he]:new Float32Array(128)}),{});let ue=!0;const de=()=>{b.numberOfOutputs>0&&W.disconnect(B);for(let se=0,he=0;se<b.numberOfOutputs;se+=1){const Me=H[se];for(let Le=0;Le<T[se];Le+=1)B.disconnect(Me,he+Le,Le);he+=T[se]}},Q=new Map;W.onaudioprocess=({inputBuffer:se,outputBuffer:he})=>{if(A!==null){const Me=g(z);for(let Le=0;Le<U;Le+=128){for(let Ce=0;Ce<b.numberOfInputs;Ce+=1)for(let Re=0;Re<b.channelCount;Re+=1)pu(se,le[Ce],Re,Re,Le);_.parameterDescriptors!==void 0&&_.parameterDescriptors.forEach(({name:Ce},Re)=>{pu(se,re,Ce,M+Re,Le)});for(let Ce=0;Ce<b.numberOfInputs;Ce+=1)for(let Re=0;Re<T[Ce];Re+=1)ne[Ce][Re].byteLength===0&&(ne[Ce][Re]=new Float32Array(128));try{const Ce=le.map((Pe,Oe)=>{if(Me[Oe].size>0)return Q.set(Oe,U/128),Pe;const on=Q.get(Oe);return on===void 0?[]:(Pe.every(tr=>tr.every(Ds=>Ds===0))&&(on===1?Q.delete(Oe):Q.set(Oe,on-1)),Pe)});ue=m(x.currentTime+Le/x.sampleRate,x.sampleRate,()=>A.process(Ce,ne,re));for(let Pe=0,Oe=0;Pe<b.numberOfOutputs;Pe+=1){for(let bt=0;bt<T[Pe];bt+=1)i_(he,ne[Pe],bt,Oe+bt,Le);Oe+=T[Pe]}}catch(Ce){ue=!1,z.dispatchEvent(new ErrorEvent("processorerror",{colno:Ce.colno,filename:Ce.filename,lineno:Ce.lineno,message:Ce.message}))}if(!ue){for(let Ce=0;Ce<b.numberOfInputs;Ce+=1){P[Ce].disconnect(R[Ce]);for(let Re=0;Re<b.channelCount;Re+=1)R[Le].disconnect(O,Re,Ce*b.channelCount+Re)}if(_.parameterDescriptors!==void 0){const Ce=_.parameterDescriptors.length;for(let Re=0;Re<Ce;Re+=1){const Pe=C[Re];Pe.disconnect(O,0,M+Re),Pe.stop()}}O.disconnect(W),W.onaudioprocess=null,pe?de():ze();break}}}};let pe=!1;const Te=u(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ve=()=>W.connect(Te).connect(x.destination),ze=()=>{W.disconnect(Te),Te.disconnect()},It=()=>{if(ue){ze(),b.numberOfOutputs>0&&W.connect(B);for(let se=0,he=0;se<b.numberOfOutputs;se+=1){const Me=H[se];for(let Le=0;Le<T[se];Le+=1)B.connect(Me,he+Le,Le);he+=T[se]}}pe=!0},we=()=>{ue&&(Ve(),de()),pe=!1};return Ve(),y(z,It,we)},l_=(s,e)=>{const t=s.createBiquadFilter();return yt(t,e),at(t,e,"Q"),at(t,e,"detune"),at(t,e,"frequency"),at(t,e,"gain"),rt(t,e,"type"),t},cE=(s,e)=>(t,r)=>{const o=t.createChannelMerger(r.numberOfInputs);return s!==null&&s.name==="webkitAudioContext"&&e(t,o),yt(o,r),o},dE=s=>{const e=s.numberOfOutputs;Object.defineProperty(s,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw St()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw St()}}),Object.defineProperty(s,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw St()}})},la=(s,e)=>{const t=s.createChannelSplitter(e.numberOfOutputs);return yt(t,e),dE(t),t},hE=(s,e,t,r,o)=>(a,u)=>{if(a.createConstantSource===void 0)return t(a,u);const c=a.createConstantSource();return yt(c,u),at(c,u,"offset"),e(r,()=>r(a))||yf(c),e(o,()=>o(a))||_f(c),s(a,c),c},qi=(s,e)=>(s.connect=e.connect.bind(e),s.disconnect=e.disconnect.bind(e),s),fE=(s,e,t,r)=>(o,{offset:a,...u})=>{const c=o.createBuffer(1,2,44100),h=e(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),f=t(o,{...u,gain:a}),m=c.getChannelData(0);m[0]=1,m[1]=1,h.buffer=c,h.loop=!0;const g={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(w){f.channelCount=w},get channelCountMode(){return f.channelCountMode},set channelCountMode(w){f.channelCountMode=w},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(w){f.channelInterpretation=w},get context(){return f.context},get inputs(){return[]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get offset(){return f.gain},get onended(){return h.onended},set onended(w){h.onended=w},addEventListener(...w){return h.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return h.dispatchEvent(w[0])},removeEventListener(...w){return h.removeEventListener(w[0],w[1],w[2])},start(w=0){h.start.call(h,w)},stop(w=0){h.stop.call(h,w)}},y=()=>h.connect(f),x=()=>h.disconnect(f);return s(o,h),r(qi(g,f),y,x)},pE=(s,e)=>(t,r)=>{const o=t.createConvolver();if(yt(o,r),r.disableNormalization===o.normalize&&(o.normalize=!r.disableNormalization),rt(o,r,"buffer"),r.channelCount>2||(e(o,"channelCount",a=>()=>a.call(o),a=>u=>{if(u>2)throw s();return a.call(o,u)}),r.channelCountMode==="max"))throw s();return e(o,"channelCountMode",a=>()=>a.call(o),a=>u=>{if(u==="max")throw s();return a.call(o,u)}),o},u_=(s,e)=>{const t=s.createDelay(e.maxDelayTime);return yt(t,e),at(t,e,"delayTime"),t},mE=s=>(e,t)=>{const r=e.createDynamicsCompressor();if(yt(r,t),t.channelCount>2||t.channelCountMode==="max")throw s();return at(r,t,"attack"),at(r,t,"knee"),at(r,t,"ratio"),at(r,t,"release"),at(r,t,"threshold"),r},Kt=(s,e)=>{const t=s.createGain();return yt(t,e),at(t,e,"gain"),t},gE=s=>(e,t,r)=>{if(e.createIIRFilter===void 0)return s(e,t,r);const o=e.createIIRFilter(r.feedforward,r.feedback);return yt(o,r),o};function vE(s,e){const t=e[0]*e[0]+e[1]*e[1];return[(s[0]*e[0]+s[1]*e[1])/t,(s[1]*e[0]-s[0]*e[1])/t]}function yE(s,e){return[s[0]*e[0]-s[1]*e[1],s[0]*e[1]+s[1]*e[0]]}function Lv(s,e){let t=[0,0];for(let r=s.length-1;r>=0;r-=1)t=yE(t,e),t[0]+=s[r];return t}const _E=(s,e,t,r)=>(o,a,{channelCount:u,channelCountMode:c,channelInterpretation:h,feedback:f,feedforward:m})=>{const g=a_(a,o.sampleRate),y=f instanceof Float64Array?f:new Float64Array(f),x=m instanceof Float64Array?m:new Float64Array(m),w=y.length,_=x.length,b=Math.min(w,_);if(w===0||w>20)throw r();if(y[0]===0)throw e();if(_===0||_>20)throw r();if(x[0]===0)throw e();if(y[0]!==1){for(let C=0;C<_;C+=1)x[C]/=y[0];for(let C=1;C<w;C+=1)y[C]/=y[0]}const T=t(o,g,u,u);T.channelCount=u,T.channelCountMode=c,T.channelInterpretation=h;const M=32,L=[],V=[],E=[];for(let C=0;C<u;C+=1){L.push(0);const O=new Float32Array(M),U=new Float32Array(M);O.fill(0),U.fill(0),V.push(O),E.push(U)}T.onaudioprocess=C=>{const O=C.inputBuffer,U=C.outputBuffer,W=O.numberOfChannels;for(let B=0;B<W;B+=1){const H=O.getChannelData(B),ee=U.getChannelData(B);L[B]=o_(y,w,x,_,b,V[B],E[B],L[B],M,H,ee)}};const P=o.sampleRate/2;return qi({get bufferSize(){return g},get channelCount(){return T.channelCount},set channelCount(C){T.channelCount=C},get channelCountMode(){return T.channelCountMode},set channelCountMode(C){T.channelCountMode=C},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(C){T.channelInterpretation=C},get context(){return T.context},get inputs(){return[T]},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},addEventListener(...C){return T.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return T.dispatchEvent(C[0])},getFrequencyResponse(C,O,U){if(C.length!==O.length||O.length!==U.length)throw s();const W=C.length;for(let B=0;B<W;B+=1){const H=-Math.PI*(C[B]/P),ee=[Math.cos(H),Math.sin(H)],te=Lv(x,ee),X=Lv(y,ee),J=vE(te,X);O[B]=Math.sqrt(J[0]*J[0]+J[1]*J[1]),U[B]=Math.atan2(J[1],J[0])}},removeEventListener(...C){return T.removeEventListener(C[0],C[1],C[2])}},T)},wE=(s,e)=>s.createMediaElementSource(e.mediaElement),xE=(s,e)=>{const t=s.createMediaStreamDestination();return yt(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},SE=(s,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((a,u)=>a.id<u.id?-1:a.id>u.id?1:0);const r=t.slice(0,1),o=s.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(o,"mediaStream",{value:e}),o},bE=(s,e)=>(t,{mediaStreamTrack:r})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(r);const o=new MediaStream([r]),a=t.createMediaStreamSource(o);if(r.kind!=="audio")throw s();if(e(t))throw new TypeError;return a},TE=s=>s===null?null:s.hasOwnProperty("OfflineAudioContext")?s.OfflineAudioContext:s.hasOwnProperty("webkitOfflineAudioContext")?s.webkitOfflineAudioContext:null,CE=(s,e,t,r,o,a)=>(u,c)=>{const h=u.createOscillator();return yt(h,c),at(h,c,"detune"),at(h,c,"frequency"),c.periodicWave!==void 0?h.setPeriodicWave(c.periodicWave):rt(h,c,"type"),e(t,()=>t(u))||yf(h),e(r,()=>r(u))||a(h,u),e(o,()=>o(u))||_f(h),s(u,h),h},kE=s=>(e,t)=>{const r=e.createPanner();return r.orientationX===void 0?s(e,t):(yt(r,t),at(r,t,"orientationX"),at(r,t,"orientationY"),at(r,t,"orientationZ"),at(r,t,"positionX"),at(r,t,"positionY"),at(r,t,"positionZ"),rt(r,t,"coneInnerAngle"),rt(r,t,"coneOuterAngle"),rt(r,t,"coneOuterGain"),rt(r,t,"distanceModel"),rt(r,t,"maxDistance"),rt(r,t,"panningModel"),rt(r,t,"refDistance"),rt(r,t,"rolloffFactor"),r)},EE=(s,e,t,r,o,a,u,c,h,f)=>(m,{coneInnerAngle:g,coneOuterAngle:y,coneOuterGain:x,distanceModel:w,maxDistance:_,orientationX:b,orientationY:T,orientationZ:M,panningModel:L,positionX:V,positionY:E,positionZ:P,refDistance:R,rolloffFactor:C,...O})=>{const U=m.createPanner();if(O.channelCount>2||O.channelCountMode==="max")throw u();yt(U,O);const W={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},B=t(m,{...W,channelInterpretation:"speakers",numberOfInputs:6}),H=r(m,{...O,gain:1}),ee=r(m,{...W,gain:1}),te=r(m,{...W,gain:0}),X=r(m,{...W,gain:0}),J=r(m,{...W,gain:0}),z=r(m,{...W,gain:0}),Z=r(m,{...W,gain:0}),K=o(m,256,6,1),A=a(m,{...W,curve:new Float32Array([1,1]),oversample:"none"});let $=[b,T,M],le=[V,E,P];const ne=new Float32Array(1);K.onaudioprocess=({inputBuffer:Q})=>{const pe=[h(Q,ne,0),h(Q,ne,1),h(Q,ne,2)];pe.some((Ve,ze)=>Ve!==$[ze])&&(U.setOrientation(...pe),$=pe);const Te=[h(Q,ne,3),h(Q,ne,4),h(Q,ne,5)];Te.some((Ve,ze)=>Ve!==le[ze])&&(U.setPosition(...Te),le=Te)},Object.defineProperty(te.gain,"defaultValue",{get:()=>0}),Object.defineProperty(X.gain,"defaultValue",{get:()=>0}),Object.defineProperty(J.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0});const re={get bufferSize(){},get channelCount(){return U.channelCount},set channelCount(Q){if(Q>2)throw u();H.channelCount=Q,U.channelCount=Q},get channelCountMode(){return U.channelCountMode},set channelCountMode(Q){if(Q==="max")throw u();H.channelCountMode=Q,U.channelCountMode=Q},get channelInterpretation(){return U.channelInterpretation},set channelInterpretation(Q){H.channelInterpretation=Q,U.channelInterpretation=Q},get coneInnerAngle(){return U.coneInnerAngle},set coneInnerAngle(Q){U.coneInnerAngle=Q},get coneOuterAngle(){return U.coneOuterAngle},set coneOuterAngle(Q){U.coneOuterAngle=Q},get coneOuterGain(){return U.coneOuterGain},set coneOuterGain(Q){if(Q<0||Q>1)throw e();U.coneOuterGain=Q},get context(){return U.context},get distanceModel(){return U.distanceModel},set distanceModel(Q){U.distanceModel=Q},get inputs(){return[H]},get maxDistance(){return U.maxDistance},set maxDistance(Q){if(Q<0)throw new RangeError;U.maxDistance=Q},get numberOfInputs(){return U.numberOfInputs},get numberOfOutputs(){return U.numberOfOutputs},get orientationX(){return ee.gain},get orientationY(){return te.gain},get orientationZ(){return X.gain},get panningModel(){return U.panningModel},set panningModel(Q){U.panningModel=Q},get positionX(){return J.gain},get positionY(){return z.gain},get positionZ(){return Z.gain},get refDistance(){return U.refDistance},set refDistance(Q){if(Q<0)throw new RangeError;U.refDistance=Q},get rolloffFactor(){return U.rolloffFactor},set rolloffFactor(Q){if(Q<0)throw new RangeError;U.rolloffFactor=Q},addEventListener(...Q){return H.addEventListener(Q[0],Q[1],Q[2])},dispatchEvent(...Q){return H.dispatchEvent(Q[0])},removeEventListener(...Q){return H.removeEventListener(Q[0],Q[1],Q[2])}};g!==re.coneInnerAngle&&(re.coneInnerAngle=g),y!==re.coneOuterAngle&&(re.coneOuterAngle=y),x!==re.coneOuterGain&&(re.coneOuterGain=x),w!==re.distanceModel&&(re.distanceModel=w),_!==re.maxDistance&&(re.maxDistance=_),b!==re.orientationX.value&&(re.orientationX.value=b),T!==re.orientationY.value&&(re.orientationY.value=T),M!==re.orientationZ.value&&(re.orientationZ.value=M),L!==re.panningModel&&(re.panningModel=L),V!==re.positionX.value&&(re.positionX.value=V),E!==re.positionY.value&&(re.positionY.value=E),P!==re.positionZ.value&&(re.positionZ.value=P),R!==re.refDistance&&(re.refDistance=R),C!==re.rolloffFactor&&(re.rolloffFactor=C),($[0]!==1||$[1]!==0||$[2]!==0)&&U.setOrientation(...$),(le[0]!==0||le[1]!==0||le[2]!==0)&&U.setPosition(...le);const ue=()=>{H.connect(U),s(H,A,0,0),A.connect(ee).connect(B,0,0),A.connect(te).connect(B,0,1),A.connect(X).connect(B,0,2),A.connect(J).connect(B,0,3),A.connect(z).connect(B,0,4),A.connect(Z).connect(B,0,5),B.connect(K).connect(m.destination)},de=()=>{H.disconnect(U),c(H,A,0,0),A.disconnect(ee),ee.disconnect(B),A.disconnect(te),te.disconnect(B),A.disconnect(X),X.disconnect(B),A.disconnect(J),J.disconnect(B),A.disconnect(z),z.disconnect(B),A.disconnect(Z),Z.disconnect(B),B.disconnect(K),K.disconnect(m.destination)};return f(qi(re,U),ue,de)},PE=s=>(e,{disableNormalization:t,imag:r,real:o})=>{const a=r instanceof Float32Array?r:new Float32Array(r),u=o instanceof Float32Array?o:new Float32Array(o),c=e.createPeriodicWave(u,a,{disableNormalization:t});if(Array.from(r).length<2)throw s();return c},ua=(s,e,t,r)=>s.createScriptProcessor(e,t,r),AE=(s,e)=>(t,r)=>{const o=r.channelCountMode;if(o==="clamped-max")throw e();if(t.createStereoPanner===void 0)return s(t,r);const a=t.createStereoPanner();return yt(a,r),at(a,r,"pan"),Object.defineProperty(a,"channelCountMode",{get:()=>o,set:u=>{if(u!==o)throw e()}}),a},NE=(s,e,t,r,o,a)=>{const c=new Float32Array([1,1]),h=Math.PI/2,f={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},m={...f,oversample:"none"},g=(w,_,b,T)=>{const M=new Float32Array(16385),L=new Float32Array(16385);for(let O=0;O<16385;O+=1){const U=O/16384*h;M[O]=Math.cos(U),L[O]=Math.sin(U)}const V=t(w,{...f,gain:0}),E=r(w,{...m,curve:M}),P=r(w,{...m,curve:c}),R=t(w,{...f,gain:0}),C=r(w,{...m,curve:L});return{connectGraph(){_.connect(V),_.connect(P.inputs===void 0?P:P.inputs[0]),_.connect(R),P.connect(b),b.connect(E.inputs===void 0?E:E.inputs[0]),b.connect(C.inputs===void 0?C:C.inputs[0]),E.connect(V.gain),C.connect(R.gain),V.connect(T,0,0),R.connect(T,0,1)},disconnectGraph(){_.disconnect(V),_.disconnect(P.inputs===void 0?P:P.inputs[0]),_.disconnect(R),P.disconnect(b),b.disconnect(E.inputs===void 0?E:E.inputs[0]),b.disconnect(C.inputs===void 0?C:C.inputs[0]),E.disconnect(V.gain),C.disconnect(R.gain),V.disconnect(T,0,0),R.disconnect(T,0,1)}}},y=(w,_,b,T)=>{const M=new Float32Array(16385),L=new Float32Array(16385),V=new Float32Array(16385),E=new Float32Array(16385),P=Math.floor(16385/2);for(let J=0;J<16385;J+=1)if(J>P){const z=(J-P)/(16384-P)*h;M[J]=Math.cos(z),L[J]=Math.sin(z),V[J]=0,E[J]=1}else{const z=J/(16384-P)*h;M[J]=1,L[J]=0,V[J]=Math.cos(z),E[J]=Math.sin(z)}const R=e(w,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),C=t(w,{...f,gain:0}),O=r(w,{...m,curve:M}),U=t(w,{...f,gain:0}),W=r(w,{...m,curve:L}),B=r(w,{...m,curve:c}),H=t(w,{...f,gain:0}),ee=r(w,{...m,curve:V}),te=t(w,{...f,gain:0}),X=r(w,{...m,curve:E});return{connectGraph(){_.connect(R),_.connect(B.inputs===void 0?B:B.inputs[0]),R.connect(C,0),R.connect(U,0),R.connect(H,1),R.connect(te,1),B.connect(b),b.connect(O.inputs===void 0?O:O.inputs[0]),b.connect(W.inputs===void 0?W:W.inputs[0]),b.connect(ee.inputs===void 0?ee:ee.inputs[0]),b.connect(X.inputs===void 0?X:X.inputs[0]),O.connect(C.gain),W.connect(U.gain),ee.connect(H.gain),X.connect(te.gain),C.connect(T,0,0),H.connect(T,0,0),U.connect(T,0,1),te.connect(T,0,1)},disconnectGraph(){_.disconnect(R),_.disconnect(B.inputs===void 0?B:B.inputs[0]),R.disconnect(C,0),R.disconnect(U,0),R.disconnect(H,1),R.disconnect(te,1),B.disconnect(b),b.disconnect(O.inputs===void 0?O:O.inputs[0]),b.disconnect(W.inputs===void 0?W:W.inputs[0]),b.disconnect(ee.inputs===void 0?ee:ee.inputs[0]),b.disconnect(X.inputs===void 0?X:X.inputs[0]),O.disconnect(C.gain),W.disconnect(U.gain),ee.disconnect(H.gain),X.disconnect(te.gain),C.disconnect(T,0,0),H.disconnect(T,0,0),U.disconnect(T,0,1),te.disconnect(T,0,1)}}},x=(w,_,b,T,M)=>{if(_===1)return g(w,b,T,M);if(_===2)return y(w,b,T,M);throw o()};return(w,{channelCount:_,channelCountMode:b,pan:T,...M})=>{if(b==="max")throw o();const L=s(w,{...M,channelCount:1,channelCountMode:b,numberOfInputs:2}),V=t(w,{...M,channelCount:_,channelCountMode:b,gain:1}),E=t(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:T});let{connectGraph:P,disconnectGraph:R}=x(w,_,V,E,L);Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(E.gain,"maxValue",{get:()=>1}),Object.defineProperty(E.gain,"minValue",{get:()=>-1});const C={get bufferSize(){},get channelCount(){return V.channelCount},set channelCount(B){V.channelCount!==B&&(O&&R(),{connectGraph:P,disconnectGraph:R}=x(w,B,V,E,L),O&&P()),V.channelCount=B},get channelCountMode(){return V.channelCountMode},set channelCountMode(B){if(B==="clamped-max"||B==="max")throw o();V.channelCountMode=B},get channelInterpretation(){return V.channelInterpretation},set channelInterpretation(B){V.channelInterpretation=B},get context(){return V.context},get inputs(){return[V]},get numberOfInputs(){return V.numberOfInputs},get numberOfOutputs(){return V.numberOfOutputs},get pan(){return E.gain},addEventListener(...B){return V.addEventListener(B[0],B[1],B[2])},dispatchEvent(...B){return V.dispatchEvent(B[0])},removeEventListener(...B){return V.removeEventListener(B[0],B[1],B[2])}};let O=!1;const U=()=>{P(),O=!0},W=()=>{R(),O=!1};return a(qi(C,L),U,W)}},RE=(s,e,t,r,o,a,u)=>(c,h)=>{const f=c.createWaveShaper();if(a!==null&&a.name==="webkitAudioContext"&&c.createGain().gain.automationRate===void 0)return t(c,h);yt(f,h);const m=h.curve===null||h.curve instanceof Float32Array?h.curve:new Float32Array(h.curve);if(m!==null&&m.length<2)throw e();rt(f,{curve:m},"curve"),rt(f,h,"oversample");let g=null,y=!1;return u(f,"curve",_=>()=>_.call(f),_=>b=>(_.call(f,b),y&&(r(b)&&g===null?g=s(c,f):!r(b)&&g!==null&&(g(),g=null)),b)),o(f,()=>{y=!0,r(f.curve)&&(g=s(c,f))},()=>{y=!1,g!==null&&(g(),g=null)})},ME=(s,e,t,r,o)=>(a,{curve:u,oversample:c,...h})=>{const f=a.createWaveShaper(),m=a.createWaveShaper();yt(f,h),yt(m,h);const g=t(a,{...h,gain:1}),y=t(a,{...h,gain:-1}),x=t(a,{...h,gain:1}),w=t(a,{...h,gain:-1});let _=null,b=!1,T=null;const M={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(E){g.channelCount=E,y.channelCount=E,f.channelCount=E,x.channelCount=E,m.channelCount=E,w.channelCount=E},get channelCountMode(){return f.channelCountMode},set channelCountMode(E){g.channelCountMode=E,y.channelCountMode=E,f.channelCountMode=E,x.channelCountMode=E,m.channelCountMode=E,w.channelCountMode=E},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(E){g.channelInterpretation=E,y.channelInterpretation=E,f.channelInterpretation=E,x.channelInterpretation=E,m.channelInterpretation=E,w.channelInterpretation=E},get context(){return f.context},get curve(){return T},set curve(E){if(E!==null&&E.length<2)throw e();if(E===null)f.curve=E,m.curve=E;else{const P=E.length,R=new Float32Array(P+2-P%2),C=new Float32Array(P+2-P%2);R[0]=E[0],C[0]=-E[P-1];const O=Math.ceil((P+1)/2),U=(P+1)/2-1;for(let W=1;W<O;W+=1){const B=W/O*U,H=Math.floor(B),ee=Math.ceil(B);R[W]=H===ee?E[H]:(1-(B-H))*E[H]+(1-(ee-B))*E[ee],C[W]=H===ee?-E[P-1-H]:-((1-(B-H))*E[P-1-H])-(1-(ee-B))*E[P-1-ee]}R[O]=P%2===1?E[O-1]:(E[O-2]+E[O-1])/2,f.curve=R,m.curve=C}T=E,b&&(r(T)&&_===null?_=s(a,g):_!==null&&(_(),_=null))},get inputs(){return[g]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get oversample(){return f.oversample},set oversample(E){f.oversample=E,m.oversample=E},addEventListener(...E){return g.addEventListener(E[0],E[1],E[2])},dispatchEvent(...E){return g.dispatchEvent(E[0])},removeEventListener(...E){return g.removeEventListener(E[0],E[1],E[2])}};u!==null&&(M.curve=u instanceof Float32Array?u:new Float32Array(u)),c!==M.oversample&&(M.oversample=c);const L=()=>{g.connect(f).connect(x),g.connect(y).connect(m).connect(w).connect(x),b=!0,r(T)&&(_=s(a,g))},V=()=>{g.disconnect(f),f.disconnect(x),g.disconnect(y),y.disconnect(m),m.disconnect(w),w.disconnect(x),b=!1,_!==null&&(_(),_=null)};return o(qi(M,x),L,V)},zt=()=>new DOMException("","NotSupportedError"),OE={numberOfChannels:1},IE=(s,e,t,r,o)=>class extends s{constructor(u,c,h){let f;if(typeof u=="number"&&c!==void 0&&h!==void 0)f={length:c,numberOfChannels:u,sampleRate:h};else if(typeof u=="object")f=u;else throw new Error("The given parameters are not valid.");const{length:m,numberOfChannels:g,sampleRate:y}={...OE,...f},x=r(g,m,y);e(Xo,()=>Xo(x))||x.addEventListener("statechange",(()=>{let w=0;const _=b=>{this._state==="running"&&(w>0?(x.removeEventListener("statechange",_),b.stopImmediatePropagation(),this._waitForThePromiseToSettle(b)):w+=1)};return _})()),super(x,g),this._length=m,this._nativeOfflineAudioContext=x,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,e_(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},DE={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},LE=(s,e,t,r,o,a,u)=>class extends s{constructor(h,f){const m=o(h),g={...DE,...f},y=t(m,g),x=a(m),w=x?r():null,_=h.sampleRate/2;super(h,!1,y,w),this._detune=e(this,x,y.detune,153600,-153600),this._frequency=e(this,x,y.frequency,_,-_),this._nativeOscillatorNode=y,this._onended=null,this._oscillatorNodeRenderer=w,this._oscillatorNodeRenderer!==null&&g.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=g.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(h){const f=typeof h=="function"?u(this,h):null;this._nativeOscillatorNode.onended=f;const m=this._nativeOscillatorNode.onended;this._onended=m!==null&&m===f?h:m}get type(){return this._nativeOscillatorNode.type}set type(h){this._nativeOscillatorNode.type=h,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(h){this._nativeOscillatorNode.setPeriodicWave(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=h)}start(h=0){if(this._nativeOscillatorNode.start(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=h),this.context.state!=="closed"){Ii(this);const f=()=>{this._nativeOscillatorNode.removeEventListener("ended",f),gr(this)&&ia(this)};this._nativeOscillatorNode.addEventListener("ended",f)}}stop(h=0){this._nativeOscillatorNode.stop(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=h)}},FE=(s,e,t,r,o)=>()=>{const a=new WeakMap;let u=null,c=null,h=null;const f=async(m,g)=>{let y=t(m);const x=Ot(y,g);if(!x){const w={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,detune:y.detune.value,frequency:y.frequency.value,periodicWave:u===null?void 0:u,type:y.type};y=e(g,w),c!==null&&y.start(c),h!==null&&y.stop(h)}return a.set(g,y),x?(await s(g,m.detune,y.detune),await s(g,m.frequency,y.frequency)):(await r(g,m.detune,y.detune),await r(g,m.frequency,y.frequency)),await o(m,g,y),y};return{set periodicWave(m){u=m},set start(m){c=m},set stop(m){h=m},render(m,g){const y=a.get(g);return y!==void 0?Promise.resolve(y):f(m,g)}}},VE={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},BE=(s,e,t,r,o,a,u)=>class extends s{constructor(h,f){const m=o(h),g={...VE,...f},y=t(m,g),x=a(m),w=x?r():null;super(h,!1,y,w),this._nativePannerNode=y,this._orientationX=e(this,x,y.orientationX,Ft,en),this._orientationY=e(this,x,y.orientationY,Ft,en),this._orientationZ=e(this,x,y.orientationZ,Ft,en),this._positionX=e(this,x,y.positionX,Ft,en),this._positionY=e(this,x,y.positionY,Ft,en),this._positionZ=e(this,x,y.positionZ,Ft,en),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(h){this._nativePannerNode.coneInnerAngle=h}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(h){this._nativePannerNode.coneOuterAngle=h}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(h){this._nativePannerNode.coneOuterGain=h}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(h){this._nativePannerNode.distanceModel=h}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(h){this._nativePannerNode.maxDistance=h}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(h){this._nativePannerNode.panningModel=h}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(h){this._nativePannerNode.refDistance=h}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(h){this._nativePannerNode.rolloffFactor=h}},zE=(s,e,t,r,o,a,u,c,h,f)=>()=>{const m=new WeakMap;let g=null;const y=async(x,w)=>{let _=null,b=a(x);const T={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation},M={...T,coneInnerAngle:b.coneInnerAngle,coneOuterAngle:b.coneOuterAngle,coneOuterGain:b.coneOuterGain,distanceModel:b.distanceModel,maxDistance:b.maxDistance,panningModel:b.panningModel,refDistance:b.refDistance,rolloffFactor:b.rolloffFactor},L=Ot(b,w);if("bufferSize"in b)_=r(w,{...T,gain:1});else if(!L){const V={...M,orientationX:b.orientationX.value,orientationY:b.orientationY.value,orientationZ:b.orientationZ.value,positionX:b.positionX.value,positionY:b.positionY.value,positionZ:b.positionZ.value};b=o(w,V)}if(m.set(w,_===null?b:_),_!==null){if(g===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const W=new u(6,x.context.length,w.sampleRate),B=e(W,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});B.connect(W.destination),g=(async()=>{const H=await Promise.all([x.orientationX,x.orientationY,x.orientationZ,x.positionX,x.positionY,x.positionZ].map(async(ee,te)=>{const X=t(W,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:te===0?1:0});return await c(W,ee,X.offset),X}));for(let ee=0;ee<6;ee+=1)H[ee].connect(B,0,ee),H[ee].start(0);return f(W)})()}const V=await g,E=r(w,{...T,gain:1});await h(x,w,E);const P=[];for(let W=0;W<V.numberOfChannels;W+=1)P.push(V.getChannelData(W));let R=[P[0][0],P[1][0],P[2][0]],C=[P[3][0],P[4][0],P[5][0]],O=r(w,{...T,gain:1}),U=o(w,{...M,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:C[0],positionY:C[1],positionZ:C[2]});E.connect(O).connect(U.inputs[0]),U.connect(_);for(let W=128;W<V.length;W+=128){const B=[P[0][W],P[1][W],P[2][W]],H=[P[3][W],P[4][W],P[5][W]];if(B.some((ee,te)=>ee!==R[te])||H.some((ee,te)=>ee!==C[te])){R=B,C=H;const ee=W/w.sampleRate;O.gain.setValueAtTime(0,ee),O=r(w,{...T,gain:0}),U=o(w,{...M,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:C[0],positionY:C[1],positionZ:C[2]}),O.gain.setValueAtTime(1,ee),E.connect(O).connect(U.inputs[0]),U.connect(_)}}return _}return L?(await s(w,x.orientationX,b.orientationX),await s(w,x.orientationY,b.orientationY),await s(w,x.orientationZ,b.orientationZ),await s(w,x.positionX,b.positionX),await s(w,x.positionY,b.positionY),await s(w,x.positionZ,b.positionZ)):(await c(w,x.orientationX,b.orientationX),await c(w,x.orientationY,b.orientationY),await c(w,x.orientationZ,b.orientationZ),await c(w,x.positionX,b.positionX),await c(w,x.positionY,b.positionY),await c(w,x.positionZ,b.positionZ)),Wi(b)?await h(x,w,b.inputs[0]):await h(x,w,b),b};return{render(x,w){const _=m.get(w);return _!==void 0?Promise.resolve(_):y(x,w)}}},UE={disableNormalization:!1},jE=(s,e,t,r)=>class c_{constructor(a,u){const c=e(a),h=r({...UE,...u}),f=s(c,h);return t.add(f),f}static[Symbol.hasInstance](a){return a!==null&&typeof a=="object"&&Object.getPrototypeOf(a)===c_.prototype||t.has(a)}},GE=(s,e)=>(t,r,o)=>(s(r).replay(o),e(r,t,o)),WE=(s,e,t)=>async(r,o,a)=>{const u=s(r);await Promise.all(u.activeInputs.map((c,h)=>Array.from(c).map(async([f,m])=>{const y=await e(f).render(f,o),x=r.context.destination;!t(f)&&(r!==x||!t(r))&&y.connect(a,m,h)})).reduce((c,h)=>[...c,...h],[]))},qE=(s,e,t)=>async(r,o,a)=>{const u=e(r);await Promise.all(Array.from(u.activeInputs).map(async([c,h])=>{const m=await s(c).render(c,o);t(c)||m.connect(a,h)}))},$E=(s,e,t,r)=>o=>s(Xo,()=>Xo(o))?Promise.resolve(s(r,r)).then(a=>{if(!a){const u=t(o,512,0,1);o.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>o.currentTime,u.connect(o.destination)}return o.startRendering()}):new Promise(a=>{const u=e(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=c=>{u.disconnect(),a(c.renderedBuffer)},u.connect(o.destination),o.startRendering()}),HE=s=>(e,t)=>{s.set(e,t)},YE=s=>(e,t)=>s.set(e,t),KE=(s,e,t,r,o,a,u,c)=>(h,f)=>t(h).render(h,f).then(()=>Promise.all(Array.from(r(f)).map(m=>t(m).render(m,f)))).then(()=>o(f)).then(m=>(typeof m.copyFromChannel!="function"?(u(m),mf(m)):e(a,()=>a(m))||c(m),s.add(m),m)),XE={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},ZE=(s,e,t,r,o,a)=>class extends s{constructor(c,h){const f=o(c),m={...XE,...h},g=t(f,m),y=a(f),x=y?r():null;super(c,!1,g,x),this._pan=e(this,y,g.pan)}get pan(){return this._pan}},QE=(s,e,t,r,o)=>()=>{const a=new WeakMap,u=async(c,h)=>{let f=t(c);const m=Ot(f,h);if(!m){const g={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,pan:f.pan.value};f=e(h,g)}return a.set(h,f),m?await s(h,c.pan,f.pan):await r(h,c.pan,f.pan),Wi(f)?await o(c,h,f.inputs[0]):await o(c,h,f),f};return{render(c,h){const f=a.get(h);return f!==void 0?Promise.resolve(f):u(c,h)}}},JE=s=>()=>{if(s===null)return!1;try{new s({length:1,sampleRate:44100})}catch{return!1}return!0},eP=(s,e)=>async()=>{if(s===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),o=URL.createObjectURL(t);let a=!1,u=!1;try{await r.audioWorklet.addModule(o);const c=new s(r,"a",{numberOfOutputs:0}),h=r.createOscillator();c.port.onmessage=()=>a=!0,c.onprocessorerror=()=>u=!0,h.connect(c),h.start(0),await r.startRendering(),await new Promise(f=>setTimeout(f))}catch{}finally{URL.revokeObjectURL(o)}return a&&!u},tP=(s,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),r=s(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{t.oncomplete=()=>{r.disconnect(),o(t.currentTime!==0)},t.startRendering()})},nP=()=>new DOMException("","UnknownError"),rP={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},sP=(s,e,t,r,o,a,u)=>class extends s{constructor(h,f){const m=o(h),g={...rP,...f},y=t(m,g),w=a(m)?r():null;super(h,!0,y,w),this._isCurveNullified=!1,this._nativeWaveShaperNode=y,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(h){if(h===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(h.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=h}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(h){this._nativeWaveShaperNode.oversample=h}},iP=(s,e,t)=>()=>{const r=new WeakMap,o=async(a,u)=>{let c=e(a);if(!Ot(c,u)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,curve:c.curve,oversample:c.oversample};c=s(u,f)}return r.set(u,c),Wi(c)?await t(a,u,c.inputs[0]):await t(a,u,c),c};return{render(a,u){const c=r.get(u);return c!==void 0?Promise.resolve(c):o(a,u)}}},oP=()=>typeof window>"u"?null:window,aP=(s,e)=>t=>{t.copyFromChannel=(r,o,a=0)=>{const u=s(a),c=s(o);if(c>=t.numberOfChannels)throw e();const h=t.length,f=t.getChannelData(c),m=r.length;for(let g=u<0?-u:0;g+u<h&&g<m;g+=1)r[g]=f[g+u]},t.copyToChannel=(r,o,a=0)=>{const u=s(a),c=s(o);if(c>=t.numberOfChannels)throw e();const h=t.length,f=t.getChannelData(c),m=r.length;for(let g=u<0?-u:0;g+u<h&&g<m;g+=1)f[g+u]=r[g]}},lP=s=>e=>{e.copyFromChannel=(t=>(r,o,a=0)=>{const u=s(a),c=s(o);if(u<e.length)return t.call(e,r,c,u)})(e.copyFromChannel),e.copyToChannel=(t=>(r,o,a=0)=>{const u=s(a),c=s(o);if(u<e.length)return t.call(e,r,c,u)})(e.copyToChannel)},uP=s=>(e,t)=>{const r=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),s(e,"buffer",o=>()=>{const a=o.call(e);return a===r?null:a},o=>a=>o.call(e,a===null?r:a))},cP=(s,e)=>(t,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw s()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw s()}});const o=t.createBufferSource();e(r,()=>{const c=r.numberOfInputs;for(let h=0;h<c;h+=1)o.connect(r,0,h)},()=>o.disconnect(r))},d_=(s,e,t)=>s.copyFromChannel===void 0?s.getChannelData(t)[0]:(s.copyFromChannel(e,t),e[0]),h_=s=>{if(s===null)return!1;const e=s.length;return e%2!==0?s[Math.floor(e/2)]!==0:s[e/2-1]+s[e/2]!==0},ca=(s,e,t,r)=>{let o=s;for(;!o.hasOwnProperty(e);)o=Object.getPrototypeOf(o);const{get:a,set:u}=Object.getOwnPropertyDescriptor(o,e);Object.defineProperty(s,e,{get:t(a),set:r(u)})},dP=s=>({...s,outputChannelCount:s.outputChannelCount!==void 0?s.outputChannelCount:s.numberOfInputs===1&&s.numberOfOutputs===1?[s.channelCount]:Array.from({length:s.numberOfOutputs},()=>1)}),hP=s=>({...s,channelCount:s.numberOfOutputs}),fP=s=>{const{imag:e,real:t}=s;return e===void 0?t===void 0?{...s,imag:[0,0],real:[0,0]}:{...s,imag:Array.from(t,()=>0),real:t}:t===void 0?{...s,imag:e,real:Array.from(e,()=>0)}:{...s,imag:e,real:t}},f_=(s,e,t)=>{try{s.setValueAtTime(e,t)}catch(r){if(r.code!==9)throw r;f_(s,e,t+1e-7)}},pP=s=>{const e=s.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},mP=s=>{const e=s.createBufferSource(),t=s.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},gP=s=>{const e=s.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},wf=s=>{const e=s.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},p_=s=>{const e=s.createBuffer(1,1,44100),t=s.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},xf=s=>{const e=s.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},vP=s=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(s)}finally{e.close(),t.close()}},yP=s=>{s.start=(e=>(t=0,r=0,o)=>{const a=s.buffer,u=a===null?r:Math.min(a.duration,r);a!==null&&u>a.duration-.5/s.context.sampleRate?e.call(s,t,0,0):e.call(s,t,u,o)})(s.start)},m_=(s,e)=>{const t=e.createGain();s.connect(t);const r=(o=>()=>{o.call(s,t),s.removeEventListener("ended",r)})(s.disconnect);s.addEventListener("ended",r),qi(s,t),s.stop=(o=>{let a=!1;return(u=0)=>{if(a)try{o.call(s,u)}catch{t.gain.setValueAtTime(0,u)}else o.call(s,u),a=!0}})(s.stop)},$i=(s,e)=>t=>{const r={value:s};return Object.defineProperties(t,{currentTarget:r,target:r}),typeof e=="function"?e.call(s,t):e.handleEvent.call(s,t)},_P=BC(Ms),wP=qC(Ms),xP=rk(ku),g_=new WeakMap,SP=xk(g_),Ln=O1(new Map,new WeakMap),Kn=oP(),v_=Zk(Ln,Qn),Sf=wk(Vt),kt=WE(Vt,Sf,Es),bP=XC(v_,tt,kt),Qe=Tk(Cu),wr=TE(Kn),Ke=Uk(wr),y_=new WeakMap,__=fk($i),da=tE(Kn),bf=Fk(da),Tf=Vk(Kn),w_=Bk(Kn),Zo=rE(Kn),ht=x1(zC(Hy),WC(_P,wP,du,xP,hu,Vt,SP,sa,tt,Ms,gr,Es,Yl),Ln,Mk(Vh,hu,Vt,tt,Ko,gr),Qn,Eu,zt,J1(du,Vh,Vt,tt,Ko,Qe,gr,Ke),ok(y_,Vt,Rn),__,Qe,bf,Tf,w_,Ke,Zo),TP=KC(ht,bP,Qn,v_,Qe,Ke),Cf=new WeakSet,Fv=Qk(Kn),x_=$1(new Uint32Array(1)),kf=aP(x_,Qn),Ef=lP(x_),S_=QC(Cf,Ln,zt,Fv,wr,JE(Fv),kf,Ef),Pu=$C(Kt),b_=qE(Sf,oa,Es),Jn=z1(b_),Hi=eE(Pu,Ln,pP,mP,gP,wf,p_,xf,yP,uP(ca),m_),er=GE(Sk(oa),b_),CP=t1(Jn,Hi,tt,er,kt),Fn=S1(UC(Yy),y_,pf,b1,OC,IC,DC,LC,FC,Dh,qy,da,f_),kP=e1(ht,CP,Fn,St,Hi,Qe,Ke,$i),EP=c1(ht,d1,Qn,St,nE(Kt,ca),Qe,Ke,kt),PP=M1(Jn,l_,tt,er,kt),Os=YE(g_),AP=R1(ht,Fn,PP,Eu,l_,Qe,Ke,Os),ts=Kk(Ms,Tf),NP=cP(St,ts),ns=cE(da,NP),RP=L1(ns,tt,kt),MP=D1(ht,RP,ns,Qe,Ke),OP=B1(la,tt,kt),IP=V1(ht,OP,la,Qe,Ke,hP),DP=fE(Pu,Hi,Kt,ts),Yi=hE(Pu,Ln,DP,wf,xf),LP=q1(Jn,Yi,tt,er,kt),FP=W1(ht,Fn,LP,Yi,Qe,Ke,$i),T_=pE(zt,ca),VP=K1(T_,tt,kt),BP=Y1(ht,VP,T_,Qe,Ke,Os),zP=nk(Jn,u_,tt,er,kt),UP=tk(ht,Fn,zP,u_,Qe,Ke,Os),C_=mE(zt),jP=ck(Jn,C_,tt,er,kt),GP=uk(ht,Fn,jP,C_,zt,Qe,Ke,Os),WP=yk(Jn,Kt,tt,er,kt),qP=vk(ht,Fn,WP,Kt,Qe,Ke),$P=_E(Eu,St,ua,zt),Au=$E(Ln,Kt,ua,tP(Kt,wr)),HP=Rk(Hi,tt,wr,kt,Au),YP=gE($P),KP=Ak(ht,YP,HP,Qe,Ke,Os),XP=h1(Fn,ns,Yi,ua,zt,d_,Ke,ca),k_=new WeakMap,ZP=Yk(EP,XP,__,Ke,k_,$i),E_=CE(Pu,Ln,wf,p_,xf,m_),QP=FE(Jn,E_,tt,er,kt),JP=LE(ht,Fn,E_,QP,Qe,Ke,$i),P_=j1(Hi),eA=ME(P_,St,Kt,h_,ts),Nu=RE(P_,St,eA,h_,ts,da,ca),tA=EE(du,St,ns,Kt,ua,Nu,zt,hu,d_,ts),A_=kE(tA),nA=zE(Jn,ns,Yi,Kt,A_,tt,wr,er,kt,Au),rA=BE(ht,Fn,A_,nA,Qe,Ke,Os),sA=PE(Qn),iA=jE(sA,Qe,new WeakSet,fP),oA=NE(ns,la,Kt,Nu,zt,ts),N_=AE(oA,zt),aA=QE(Jn,N_,tt,er,kt),lA=ZE(ht,Fn,N_,aA,Qe,Ke),uA=iP(Nu,tt,kt),cA=sP(ht,St,Nu,uA,Qe,Ke,Os),R_=jk(Kn),Pf=pk(Kn),M_=new WeakMap,dA=Ck(M_,wr),hA=R_?GC(Ln,zt,hk(Kn),Pf,mk(VC),Qe,dA,Ke,Zo,new WeakMap,new WeakMap,eP(Zo,wr),Kn):void 0,fA=zk(bf,Ke),pA=Q1(Cf,Ln,Z1,dk,new WeakSet,Qe,fA,uu,Xo,kf,Ef),O_=A1(hA,TP,S_,kP,AP,MP,IP,FP,BP,pA,UP,GP,qP,KP,ZP,JP,rA,iA,lA,cA),mA=Gk(ht,wE,Qe,Ke),gA=qk(ht,xE,Qe,Ke),vA=$k(ht,SE,Qe,Ke),yA=bE(St,Ke),_A=Hk(ht,yA,Qe),wA=u1(O_,St,zt,nP,mA,gA,vA,_A,da),Af=kk(k_),xA=HC(Af),I_=U1(Qn),SA=sk(Af),D_=ak(Qn),L_=new WeakMap,bA=_k(L_,Rn),TA=uE(I_,Qn,St,ns,la,Yi,Kt,ua,zt,D_,Pf,bA,ts),CA=iE(St,TA,Kt,zt,ts),kA=P1(Jn,I_,Hi,ns,la,Yi,Kt,SA,D_,Pf,tt,Zo,wr,er,kt,Au),EA=bk(M_),PA=HE(L_),Vv=R_?C1(xA,ht,Fn,kA,CA,Vt,EA,Qe,Ke,Zo,dP,PA,vP,$i):void 0,AA=X1(zt,wr),NA=KE(Cf,Ln,Sf,Af,Au,uu,kf,Ef),RA=IE(O_,Ln,St,AA,NA),MA=Ok(Cu,bf),OA=Ik(ff,Tf),IA=Dk(pf,w_),DA=Lk(Cu,Ke);function vn(s){return s===void 0}function Be(s){return s!==void 0}function LA(s){return typeof s=="function"}function Jr(s){return typeof s=="number"}function Cs(s){return Object.prototype.toString.call(s)==="[object Object]"&&s.constructor===Object}function FA(s){return typeof s=="boolean"}function Nn(s){return Array.isArray(s)}function vr(s){return typeof s=="string"}function Ll(s){return vr(s)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(s)}function Ne(s,e){if(!s)throw new Error(e)}function rn(s,e,t=1/0){if(!(e<=s&&s<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${s}`)}function F_(s){!s.isOffline&&s.state!=="running"&&Nf('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let V_=!1,Bv=!1;function zv(s){V_=s}function VA(s){vn(s)&&V_&&!Bv&&(Bv=!0,Nf("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let B_=console;function BA(...s){B_.log(...s)}function Nf(...s){B_.warn(...s)}function zA(s){return new wA(s)}function UA(s,e,t){return new RA(s,e,t)}const tn=typeof self=="object"?self:null,jA=tn&&(tn.hasOwnProperty("AudioContext")||tn.hasOwnProperty("webkitAudioContext"));function GA(s,e,t){return Ne(Be(Vv),"AudioWorkletNode only works in a secure context (https or localhost)"),new(s instanceof(tn==null?void 0:tn.BaseAudioContext)?tn==null?void 0:tn.AudioWorkletNode:Vv)(s,e,t)}var $n=function(){return $n=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},$n.apply(this,arguments)};function z_(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(s);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(s,r[o])&&(t[r[o]]=s[r[o]]);return t}function Vn(s,e,t,r){var o=arguments.length,a=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(s,e,t,r);else for(var c=s.length-1;c>=0;c--)(u=s[c])&&(a=(o<3?u(a):o>3?u(e,t,a):u(e,t))||a);return o>3&&a&&Object.defineProperty(e,t,a),a}function dt(s,e,t,r){function o(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function c(m){try{f(r.next(m))}catch(g){u(g)}}function h(m){try{f(r.throw(m))}catch(g){u(g)}}function f(m){m.done?a(m.value):o(m.value).then(c,h)}f((r=r.apply(s,e||[])).next())})}function WA(s,e,t){if(t||arguments.length===2)for(var r=0,o=e.length,a;r<o;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return s.concat(a||Array.prototype.slice.call(e))}class qA{constructor(e,t,r,o){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(o||44100),.001),this.updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),r=new Worker(t);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Ps(s){return IA(s)}function Xr(s){return OA(s)}function Kl(s){return DA(s)}function fi(s){return MA(s)}function $A(s){return s instanceof S_}function HA(s,e){return s==="value"||Ps(e)||Xr(e)||$A(e)}function Pi(s,...e){if(!e.length)return s;const t=e.shift();if(Cs(s)&&Cs(t))for(const r in t)HA(r,t[r])?s[r]=t[r]:Cs(t[r])?(s[r]||Object.assign(s,{[r]:{}}),Pi(s[r],t[r])):Object.assign(s,{[r]:t[r]});return Pi(s,...e)}function YA(s,e){return s.length===e.length&&s.every((t,r)=>e[r]===t)}function be(s,e,t=[],r){const o={},a=Array.from(e);if(Cs(a[0])&&r&&!Reflect.has(a[0],r)&&(Object.keys(a[0]).some(c=>Reflect.has(s,c))||(Pi(o,{[r]:a[0]}),t.splice(t.indexOf(r),1),a.shift())),a.length===1&&Cs(a[0]))Pi(o,a[0]);else for(let u=0;u<t.length;u++)Be(a[u])&&(o[t[u]]=a[u]);return Pi(s,o)}function KA(s){return s.constructor.getDefaults()}function Ai(s,e){return vn(s)?e:s}function Uv(s,e){return e.forEach(t=>{Reflect.has(s,t)&&delete s[t]}),s}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class xr{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||tn&&this.toString()===tn.TONE_DEBUG_CLASS)&&BA(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}xr.version=Wy;const Rf=1e-6;function Di(s,e){return s>e+Rf}function Gh(s,e){return Di(s,e)||An(s,e)}function gu(s,e){return s+Rf<e}function An(s,e){return Math.abs(s-e)<Rf}function XA(s,e,t){return Math.max(Math.min(s,t),e)}class yn extends xr{constructor(){super(),this.name="Timeline",this._timeline=[];const e=be(yn.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Ne(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];Ne(Gh(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const r=this._search(e,t);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const r=this._search(e,t);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(An(this._timeline[t].time,e)){for(let r=t;r>=0&&An(this._timeline[r].time,e);r--)t=r;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&Gh(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let r=0;const o=this._timeline.length;let a=o;if(o>0&&this._timeline[o-1][t]<=e)return o-1;for(;r<a;){let u=Math.floor(r+(a-r)/2);const c=this._timeline[u],h=this._timeline[u+1];if(An(c[t],e)){for(let f=u;f<this._timeline.length;f++){const m=this._timeline[f];if(An(m[t],e))u=f;else break}return u}else{if(gu(c[t],e)&&Di(h[t],e))return u;Di(c[t],e)?a=u:r=u+1}}return-1}_iterate(e,t=0,r=this._timeline.length-1){this._timeline.slice(t,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const r=this._search(e);return r!==-1&&this._iterate(t,0,r),this}forEachAfter(e,t){const r=this._search(e);return this._iterate(t,r+1),this}forEachBetween(e,t,r){let o=this._search(e),a=this._search(t);return o!==-1&&a!==-1?(this._timeline[o].time!==e&&(o+=1),this._timeline[a].time===t&&(a-=1),this._iterate(r,o,a)):o===-1&&this._iterate(r,0,a),this}forEachFrom(e,t){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(t,r+1),this}forEachAtTime(e,t){const r=this._search(e);if(r!==-1&&An(this._timeline[r].time,e)){let o=r;for(let a=r;a>=0&&An(this._timeline[a].time,e);a--)o=a;this._iterate(a=>{t(a)},o,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const U_=[];function Ru(s){U_.push(s)}function ZA(s){U_.forEach(e=>e(s))}const j_=[];function Mu(s){j_.push(s)}function QA(s){j_.forEach(e=>e(s))}class ha extends xr{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(o=>{vn(this._events)&&(this._events={}),this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(t)}),this}once(e,t){const r=(...o)=>{t(...o),this.off(e,r)};return this.on(e,r),this}off(e,t){return e.split(/\W+/).forEach(o=>{if(vn(this._events)&&(this._events={}),this._events.hasOwnProperty(o))if(vn(t))this._events[o]=[];else{const a=this._events[o];for(let u=a.length-1;u>=0;u--)a[u]===t&&a.splice(u,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let o=0,a=r.length;o<a;o++)r[o].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const r=Object.getOwnPropertyDescriptor(ha.prototype,t);Object.defineProperty(e.prototype,t,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class G_ extends ha{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class fa extends G_{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new yn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const r=be(fa.getDefaults(),arguments,["context"]);r.context?(this._context=r.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=zA({latencyHint:r.latencyHint}),this._latencyHint=r.latencyHint),this._ticker=new qA(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(ZA(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,r){return this._context.createBuffer(e,t,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,r){return this._context.createPeriodicWave(e,t,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Ne(fi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Ne(fi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Ne(fi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Ne(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Ne(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Ne(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Ne(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return GA(this.rawContext,e,t)}addAudioWorkletModule(e){return dt(this,void 0,void 0,function*(){Ne(Be(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return dt(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return fi(this._context)?this._context.resume():Promise.resolve()}close(){return dt(this,void 0,void 0,function*(){fi(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&QA(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),r=t.getChannelData(0);for(let a=0;a<r.length;a++)r[a]=e;const o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=t,o.loop=!0,o.start(0),this._constants.set(e,o),o}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(e,t){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const r=++this._timeoutIds,o=()=>{const a=this.now();this._timeouts.add({callback:()=>{e(),o()},id:r,time:a+t})};return o(),r}}class JA extends G_{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return dt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function We(s,e){Nn(e)?e.forEach(t=>We(s,t)):Object.defineProperty(s,e,{enumerable:!0,writable:!1})}function Mf(s,e){Nn(e)?e.forEach(t=>Mf(s,t)):Object.defineProperty(s,e,{writable:!0})}const He=()=>{};class Xe extends xr{constructor(){super(),this.name="ToneAudioBuffer",this.onload=He;const e=be(Xe.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,vr(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:He,onload:He,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:sn().sampleRate}set(e){return e instanceof Xe?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return dt(this,void 0,void 0,function*(){const t=Xe.load(e).then(r=>{this.set(r),this.onload(this)});Xe.downloads.push(t);try{yield t}finally{const r=Xe.downloads.indexOf(t);Xe.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=Nn(e)&&e[0].length>0,r=t?e.length:1,o=t?e[0].length:e.length,a=sn(),u=a.createBuffer(r,o,a.sampleRate),c=!t&&r===1?[e]:e;for(let h=0;h<r;h++)u.copyToChannel(c[h],h);return this._buffer=u,this}toMono(e){if(Jr(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const r=this.numberOfChannels;for(let o=0;o<r;o++){const a=this.toArray(o);for(let u=0;u<a.length;u++)t[u]+=a[u]}t=t.map(o=>o/r),this.fromArray(t)}return this}toArray(e){if(Jr(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let r=0;r<this.numberOfChannels;r++)t[r]=this.getChannelData(r);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){Ne(this.loaded,"Buffer is not loaded");const r=Math.floor(e*this.sampleRate),o=Math.floor(t*this.sampleRate);Ne(r<o,"The start time must be less than the end time");const a=o-r,u=sn().createBuffer(this.numberOfChannels,a,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)u.copyToChannel(this.getChannelData(c).subarray(r,o),c);return new Xe(u)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Xe().fromArray(e)}static fromUrl(e){return dt(this,void 0,void 0,function*(){return yield new Xe().load(e)})}static load(e){return dt(this,void 0,void 0,function*(){const t=Xe.baseUrl===""||Xe.baseUrl.endsWith("/")?Xe.baseUrl:Xe.baseUrl+"/",r=yield fetch(t+e);if(!r.ok)throw new Error(`could not load url: ${e}`);const o=yield r.arrayBuffer();return yield sn().decodeAudioData(o)})}static supportsType(e){const t=e.split("."),r=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return dt(this,void 0,void 0,function*(){for(yield Promise.resolve();Xe.downloads.length;)yield Xe.downloads[0]})}}Xe.baseUrl="";Xe.downloads=[];class Ou extends fa{constructor(){super({clockSource:"offline",context:Kl(arguments[0])?arguments[0]:UA(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Kl(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Kl(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return dt(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const r=Math.floor(this.sampleRate/128);e&&t%r===0&&(yield new Promise(o=>setTimeout(o,1)))}})}render(){return dt(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Xe(t)})}close(){return Promise.resolve()}}const W_=new JA;let Ss=W_;function sn(){return Ss===W_&&jA&&eN(new fa),Ss}function eN(s,e=!1){e&&Ss.dispose(),fi(s)?Ss=new fa(s):Kl(s)?Ss=new Ou(s):Ss=s}function tN(){return Ss.resume()}if(tn&&!tn.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Wy} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function q_(s){return Math.pow(10,s/20)}function $_(s){return 20*(Math.log(s)/Math.LN10)}function H_(s){return Math.pow(2,s/12)}let Iu=440;function nN(){return Iu}function rN(s){Iu=s}function Wh(s){return Math.round(Y_(s))}function Y_(s){return 69+12*Math.log2(s/Iu)}function sN(s){return Iu*Math.pow(2,(s-69)/12)}class Of extends xr{constructor(e,t,r){super(),this.defaultUnits="s",this._val=t,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const r=parseInt(e,10),o=t==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*o:this._beatsToUnits(4/r)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,r)=>{let o=0;return e&&e!=="0"&&(o+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(o+=this._beatsToUnits(parseFloat(t))),r&&r!=="0"&&(o+=this._beatsToUnits(parseFloat(r)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Of&&this.fromType(this._val),vn(this._val))return this._noArg();if(vr(this._val)&&vn(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Cs(this._val)){let e=0;for(const t in this._val)if(Be(this._val[t])){const r=this._val[t],o=new this.constructor(this.context,t).valueOf()*r;e+=o}return e}if(Be(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return vr(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class mn extends Of{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new mn(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const r=new this.constructor(this.context,e).valueOf(),o=this.valueOf(),c=Math.round(o/r)*r-o;return o+c*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let a=1;a<9;a++){const u=Math.pow(2,a);t.push(u+"n."),t.push(u+"n"),t.push(u+"t")}t.push("0");let r=t[0],o=new mn(this.context,t[0]).toSeconds();return t.forEach(a=>{const u=new mn(this.context,a).toSeconds();Math.abs(u-e)<Math.abs(o-e)&&(r=a,o=u)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const r=Math.floor(t/this._getTimeSignature());let o=t%1*4;t=Math.floor(t)%this._getTimeSignature();const a=o.toString();return a.length>3&&(o=parseFloat(parseFloat(a).toFixed(3))),[r,t,o].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Wh(this.toFrequency())}_now(){return this.context.now()}}function Fl(s,e){return new mn(sn(),s,e)}class gn extends mn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return nN()}static set A4(e){rN(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:gn.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const o=iN[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?o:gn.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,r){let o=1;return e&&e!=="0"&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(o*=this._beatsToUnits(parseFloat(t))),r&&r!=="0"&&(o*=this._beatsToUnits(parseFloat(r)/4)),o}}})}transpose(e){return new gn(this.context,this.valueOf()*H_(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return Wh(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/gn.A4);let r=Math.round(12*t)+57;const o=Math.floor(r/12);return o<0&&(r+=-12*o),oN[r%12]+o.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return sN(e)}static ftom(e){return Wh(e)}}const iN={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},oN=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class jo extends mn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Ht extends xr{constructor(){super();const e=be(Ht.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:sn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return VA(e),new mn(this.context,e).toSeconds()}toFrequency(e){return new gn(this.context,e).toFrequency()}toTicks(e){return new jo(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(r=>{vn(e[r])&&delete t[r]}),t}get(){const e=KA(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const r=this[t];Be(r)&&Be(r.value)&&Be(r.setValueAtTime)?e[t]=r.value:r instanceof Ht?e[t]=r._getPartialProperties(e[t]):Nn(r)||Jr(r)||vr(r)||FA(r)?e[t]=r:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Be(this[t])&&(this[t]&&Be(this[t].value)&&Be(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof Ht?this[t].set(e[t]):this[t]=e[t])}),this}}class If extends yn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,r){return rn(t,0),this.add(Object.assign({},r,{state:e,time:t})),this}getLastState(e,t){const r=this._search(t);for(let o=r;o>=0;o--){const a=this._timeline[o];if(a.state===e)return a}}getNextState(e,t){const r=this._search(t);if(r!==-1)for(let o=r;o<this._timeline.length;o++){const a=this._timeline[o];if(a.state===e)return a}}}class je extends Ht{constructor(){const e=be(je.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Ne(Be(e.param)&&(Ps(e.param)||e.param instanceof je),"param must be an AudioParam");!Ps(e.param);)e.param=e.param._param;this._swappable=Be(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new yn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Be(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ht.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Be(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Be(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Be(this.maxValue)&&Be(this.minValue)&&rn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?q_(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?$_(e):e}setValueAtTime(e,t){const r=this.toSeconds(t),o=this._fromType(e);return Ne(isFinite(o)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(o),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,r),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),r=this._events.getAfter(t),o=this._events.get(t);let a=this._initialValue;if(o===null)a=this._initialValue;else if(o.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const u=this._events.getBefore(o.time);let c;u===null?c=this._initialValue:c=u.value,o.type==="setTargetAtTime"&&(a=this._exponentialApproach(o.time,c,o.value,o.constant,t))}else if(r===null)a=o.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let u=o.value;if(o.type==="setTargetAtTime"){const c=this._events.getBefore(o.time);c===null?u=this._initialValue:u=c.value}r.type==="linearRampToValueAtTime"?a=this._linearInterpolate(o.time,u,r.time,r.value,t):a=this._exponentialInterpolate(o.time,u,r.time,r.value,t)}else a=o.value;return this._toType(a)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const r=this._fromType(e),o=this.toSeconds(t);return Ne(isFinite(r)&&isFinite(o),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this._events.add({time:o,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,o),this._param.linearRampToValueAtTime(r,o),this}exponentialRampToValueAtTime(e,t){let r=this._fromType(e);r=An(r,0)?this._minOutput:r,this._assertRange(r);const o=this.toSeconds(t);return Ne(isFinite(r)&&isFinite(o),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:o,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,o),this._param.exponentialRampToValueAtTime(r,o),this}exponentialRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(t)),this}linearRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(t)),this}targetRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,t),this}exponentialApproachValueAtTime(e,t,r){t=this.toSeconds(t),r=this.toSeconds(r);const o=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,t,o),this.cancelAndHoldAtTime(t+r*.9),this.linearRampToValueAtTime(e,t+r),this}setTargetAtTime(e,t,r){const o=this._fromType(e);Ne(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const a=this.toSeconds(t);return this._assertRange(o),Ne(isFinite(o)&&isFinite(a),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:r,time:a,type:"setTargetAtTime",value:o}),this.log(this.units,"setTargetAtTime",e,a,r),this._param.setTargetAtTime(o,a,r),this}setValueCurveAtTime(e,t,r,o=1){r=this.toSeconds(r),t=this.toSeconds(t);const a=this._fromType(e[0])*o;this.setValueAtTime(this._toType(a),t);const u=r/(e.length-1);for(let c=1;c<e.length;c++){const h=this._fromType(e[c])*o;this.linearRampToValueAtTime(this._toType(h),t+c*u)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return Ne(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),r=this._fromType(this.getValueAtTime(t));Ne(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+r);const o=this._events.get(t),a=this._events.getAfter(t);return o&&An(o.time,t)?a?(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):a&&(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time),a.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),t):a.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),t)),this._events.add({time:t,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,t),this}rampTo(e,t=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,r):this.linearRampTo(e,t,r),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const r=this._events.get(t);if(r&&r.type==="setTargetAtTime"){const o=this._events.getAfter(r.time),a=o?o.time:t+2,u=(a-t)/10;for(let c=t;c<a;c+=u)e.linearRampToValueAtTime(this.getValueAtTime(c),c)}return this._events.forEachAfter(this.context.currentTime,o=>{o.type==="cancelScheduledValues"?e.cancelScheduledValues(o.time):o.type==="setTargetAtTime"?e.setTargetAtTime(o.value,o.time,o.constant):e[o.type](o.value,o.time)}),this}setParam(e){Ne(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,r,o,a){return r+(t-r)*Math.exp(-(a-e)/o)}_linearInterpolate(e,t,r,o,a){return t+(o-t)*((a-e)/(r-e))}_exponentialInterpolate(e,t,r,o,a){return t*Math.pow(o/t,(a-e)/(r-e))}}class Se extends Ht{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Be(this.input)?Ps(this.input)||this.input instanceof je?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Be(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Be(e)&&(e instanceof Se||Xr(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Ne(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,r=0){return Mn(this,e,t,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Nf("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,r=0){return K_(this,e,t,r),this}chain(...e){return As(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Be(this.input)&&(this.input instanceof Se?this.input.dispose():Xr(this.input)&&this.input.disconnect()),Be(this.output)&&(this.output instanceof Se?this.output.dispose():Xr(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function As(...s){const e=s.shift();s.reduce((t,r)=>(t instanceof Se?t.connect(r):Xr(t)&&Mn(t,r),r),e)}function Mn(s,e,t=0,r=0){for(Ne(Be(s),"Cannot connect from undefined node"),Ne(Be(e),"Cannot connect to undefined node"),(e instanceof Se||Xr(e))&&Ne(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Ne(s.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof Se||e instanceof je;)Be(e.input)&&(e=e.input);for(;s instanceof Se;)Be(s.output)&&(s=s.output);Ps(e)?s.connect(e,t):s.connect(e,t,r)}function K_(s,e,t=0,r=0){if(Be(e))for(;e instanceof Se;)e=e.input;for(;!Xr(s);)Be(s.output)&&(s=s.output);Ps(e)?s.disconnect(e,t):Xr(e)?s.disconnect(e,t,r):s.disconnect()}class De extends Se{constructor(){const e=be(De.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new je({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),We(this,"gain")}static getDefaults(){return Object.assign(Se.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Li extends Se{constructor(e){super(e),this.onended=He,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new De({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const r=this.toSeconds(t);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(Se.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:He})}_startGain(e,t=1){Ne(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+r):this._gainNode.gain.exponentialApproachValueAtTime(t,e,r)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Ne(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==He&&(this.onended(this),this.onended=He,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Ne(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=He,this}}class Df extends Li{constructor(){const e=be(Df.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Mn(this._source,this._gainNode),this.offset=new je({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Li.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Ye extends Se{constructor(){const e=be(Ye.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new Df({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Se.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,r=0){return Du(this,e,t,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,r){return this._param.exponentialRampTo(e,t,r),this}linearRampTo(e,t,r){return this._param.linearRampTo(e,t,r),this}targetRampTo(e,t,r){return this._param.targetRampTo(e,t,r),this}exponentialApproachValueAtTime(e,t,r){return this._param.exponentialApproachValueAtTime(e,t,r),this}setTargetAtTime(e,t,r){return this._param.setTargetAtTime(e,t,r),this}setValueCurveAtTime(e,t,r,o){return this._param.setValueCurveAtTime(e,t,r,o),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,r){return this._param.rampTo(e,t,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Du(s,e,t,r){(e instanceof je||Ps(e)||e instanceof Ye&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Ye&&(e.overridden=!0)),Mn(s,e,t,r)}class Lf extends je{constructor(){const e=be(Lf.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new yn(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(je.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,r){t=this.toSeconds(t),this.setRampPoint(t);const o=this._fromType(e),a=this._events.get(t),u=Math.round(Math.max(1/r,1));for(let c=0;c<=u;c++){const h=r*c+t,f=this._exponentialApproach(a.time,a.value,o,r,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}setValueAtTime(e,t){const r=this.toSeconds(t);super.setValueAtTime(e,t);const o=this._events.get(r),a=this._events.previousEvent(o),u=this._getTicksUntilEvent(a,r);return o.ticks=Math.max(u,0),this}linearRampToValueAtTime(e,t){const r=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const o=this._events.get(r),a=this._events.previousEvent(o),u=this._getTicksUntilEvent(a,r);return o.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const r=this._fromType(e),o=this._events.get(t),a=Math.round(Math.max((t-o.time)*10,1)),u=(t-o.time)/a;for(let c=0;c<=a;c++){const h=u*c+o.time,f=this._exponentialInterpolate(o.time,o.value,t,r,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(vn(e.ticks)){const u=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(u,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let o=this._fromType(this.getValueAtTime(t));const a=this._events.get(t);return a&&a.time===t&&a.type==="setValueAtTime"&&(o=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(r+o)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),r=this._events.get(t);return Math.max(this._getTicksUntilEvent(r,t),0)}getDurationOfTicks(e,t){const r=this.toSeconds(t),o=this.getTicksAtTime(t);return this.getTimeOfTick(o+e)-r}getTimeOfTick(e){const t=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&r&&r.type==="linearRampToValueAtTime"&&t.value!==r.value){const o=this._fromType(this.getValueAtTime(t.time)),u=(this._fromType(this.getValueAtTime(r.time))-o)/(r.time-t.time),c=Math.sqrt(Math.pow(o,2)-2*u*(t.ticks-e)),h=(-o+c)/u,f=(-o-c)/u;return(h>0?h:f)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const r=this.toSeconds(t),o=this.toSeconds(e),a=this.getTicksAtTime(r);return this.getTicksAtTime(r+o)-a}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class Ff extends Ye{constructor(){const e=be(Ff.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new Lf({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(Ye.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Vf extends Ht{constructor(){const e=be(Vf.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new If,this._tickOffset=new yn,this._ticksAtTime=new yn,this._secondsAtTime=new yn,this.frequency=new Ff({context:this.context,units:e.units,value:e.frequency}),We(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Ht.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),Be(t)&&this.setTicksAtTime(t,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const r=this._state.get(t);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),r=this._state.getLastState("stopped",t),o=this._ticksAtTime.get(t),a={state:"paused",time:t};this._state.add(a);let u=o||r,c=o?o.ticks:0,h=null;return this._state.forEachBetween(u.time,t+this.sampleTime,f=>{let m=u.time;const g=this._tickOffset.get(f.time);g&&g.time>=u.time&&(c=g.ticks,m=g.time),u.state==="started"&&f.state!=="started"&&(c+=this.frequency.getTicksAtTime(f.time)-this.frequency.getTicksAtTime(m),f.time!==a.time&&(h={state:f.state,time:f.time,ticks:c})),u=f}),this._state.remove(a),h&&this._ticksAtTime.add(h),c}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),r=this.frequency.timeToTicks(e,t);this.setTicksAtTime(r,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);const o=this._secondsAtTime.get(e);let a=o||t,u=o?o.seconds:0,c=null;return this._state.forEachBetween(a.time,e+this.sampleTime,h=>{let f=a.time;const m=this._tickOffset.get(h.time);m&&m.time>=a.time&&(u=m.seconds,f=m.time),a.state==="started"&&h.state!=="started"&&(u+=h.time-f,h.time!==r.time&&(c={state:h.state,time:h.time,seconds:u})),a=h}),this._state.remove(r),c&&this._secondsAtTime.add(c),u}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const r=this._tickOffset.get(t),o=this._state.get(t),a=Math.max(r.time,o.time),u=this.frequency.getTicksAtTime(a)+e-r.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(e,t,r){let o=this._state.get(e);this._state.forEachBetween(e,t,u=>{o&&o.state==="started"&&u.state!=="started"&&this.forEachTickBetween(Math.max(o.time,e),u.time-this.sampleTime,r),o=u});let a=null;if(o&&o.state==="started"){const u=Math.max(o.time,e),c=this.frequency.getTicksAtTime(u),h=this.frequency.getTicksAtTime(o.time),f=c-h;let m=Math.ceil(f)-f;m=An(m,1)?0:m;let g=this.frequency.getTimeOfTick(c+m);for(;g<t;){try{r(g,Math.round(this.getTicksAtTime(g)))}catch(y){a=y;break}g+=this.frequency.getDurationOfTicks(1,g)}}if(a)throw a;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Lu extends Ht{constructor(){const e=be(Lu.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=He,this._lastUpdate=0,this._state=new If("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new Vf({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,We(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Ht.getDefaults(),{callback:He,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){F_(this.context);const r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,t),r<this._lastUpdate&&this.emit("start",r,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const r=this.toSeconds(t),o=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(o+e,r)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,r=>{switch(r.state){case"started":const o=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,o);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,t,(r,o)=>{this.callback(r,o)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}ha.mixin(Lu);class ks extends Se{constructor(){const e=be(ks.getDefaults(),arguments,["delayTime","maxDelay"]);super(e),this.name="Delay";const t=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(t,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(t),this.delayTime=new je({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),We(this,"delayTime")}static getDefaults(){return Object.assign(Se.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Ki extends Se{constructor(){const e=be(Ki.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new De({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,We(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(Se.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Bf extends Se{constructor(){const e=be(Bf.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Ki({context:this.context}),this.output=new De({context:this.context}),this.volume=this.input.volume,As(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Se.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),As(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Ru(s=>{s.destination=new Bf({context:s})});Mu(s=>{s.destination.dispose()});class aN extends Se{constructor(){super(...arguments),this.name="Listener",this.positionX=new je({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new je({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new je({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new je({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new je({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new je({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new je({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new je({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new je({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Se.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Ru(s=>{s.listener=new aN({context:s})});Mu(s=>{s.listener.dispose()});class zf extends xr{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=be(zf.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const r=e.urls[t];this.add(t,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:He,onload:He,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Ne(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,r=He,o=He){return vr(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Xe(this.baseUrl+t,r,o))):this._buffers.set(e.toString(),new Xe(t,r,o)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class gi extends jo{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class lN extends Ht{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new yn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Ru(s=>{s.draw=new lN({context:s})});Mu(s=>{s.draw.dispose()});class uN extends xr{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Ne(Be(e.time),"Events must have a time property"),Ne(Be(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new cN(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const r of t)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let r,o=null;if(t>0)if(e.left.right===null)r=e.left,r.right=e.right,o=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,o=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,o=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,o=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),o&&this._rebalance(o)}e.dispose()}_rotateLeft(e){const t=e.parent,r=e.isLeftChild(),o=e.right;o&&(e.right=o.left,o.left=e),t!==null?r?t.left=o:t.right=o:this._setRoot(o)}_rotateRight(e){const t=e.parent,r=e.isLeftChild(),o=e.left;o&&(e.left=o.right,o.right=e),t!==null?r?t.left=o:t.right=o:this._setRoot(o)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let r=t[0];for(let o=1;o<t.length;o++)t[o].low>r.low&&(r=t[o]);return r.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(r=>t.push(r)),t.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const r=[];this._root.search(e,r),r.forEach(o=>{o.event&&t(o.event)})}return this}forEachFrom(e,t){if(this._root!==null){const r=[];this._root.searchAfter(e,r),r.forEach(o=>{o.event&&t(o.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class cN{constructor(e,t,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class dN extends xr{constructor(e){super(),this.name="TimelineValue",this._timeline=new yn({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Xn extends Se{constructor(){super(be(Xn.getDefaults(),arguments,["context"]))}connect(e,t=0,r=0){return Du(this,e,t,r),this}}class Xi extends Xn{constructor(){const e=be(Xi.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Nn(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):LA(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(Ye.getDefaults(),{length:1024})}setMap(e,t=1024){const r=new Float32Array(t);for(let o=0,a=t;o<a;o++){const u=o/(a-1)*2-1;r[o]=e(u,o)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(r=>r.includes(e));Ne(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Fu extends Xn{constructor(){const e=be(Fu.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Xi({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Xn.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class es{constructor(e,t){this.id=es._eventId++,this._remainderTime=0;const r=Object.assign(es.getDefaults(),t);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=Math.floor(r.time),this._remainderTime=r.time-this.time}static getDefaults(){return{callback:He,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}es._eventId=0;class Uf extends es{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(Uf.getDefaults(),t);this.duration=r.duration,this._interval=r.interval,this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},es.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return gu(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new gi(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){gu(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new gi(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Di(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Vu extends Ht{constructor(){const e=be(Vu.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new dN(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new yn,this._repeatedEvents=new uN,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new Lu({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),We(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Ht.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const r=t%(this._swingTicks*2)/(this._swingTicks*2),o=Math.sin(r*Math.PI)*this._swingAmount;e+=new gi(this.context,this._swingTicks*2/3).toSeconds()*o}zv(!0),this._timeline.forEachAtTime(t,r=>r.invoke(e)),zv(!1)}schedule(e,t){const r=new es(this,{callback:e,time:new jo(this.context,t).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,t,r,o=1/0){const a=new Uf(this,{callback:e,duration:new mn(this.context,o).toTicks(),interval:new mn(this.context,t).toTicks(),time:new jo(this.context,r).toTicks()});return this._addEvent(a,this._repeatedEvents)}scheduleOnce(e,t){const r=new es(this,{callback:e,once:!0,time:new jo(this.context,t).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(t,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new gi(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let r;return Be(t)&&(r=this.toTicks(t)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Nn(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new mn(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new mn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new gi(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new gi(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),r=this._clock.frequency.timeToTicks(e,t);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(t),o=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,t),a=t+o;this.emit("stop",a),this._clock.setTicksAtTime(e,a),this.emit("start",a,this._clock.getSecondsAtTime(a))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),r=this.getTicksAtTime(t),o=e-r%e;return this._clock.nextTickTime(o,t)}}syncSignal(e,t){const r=this.now();let o=this.bpm,a=1/(60/o.getValueAtTime(r)/this.PPQ),u=[];if(e.units==="time"){const h=.015625/a,f=new De(h),m=new Fu(-1),g=new De(h);o.chain(f,m,g),o=g,a=1/a,u=[f,m,g]}t||(e.getValueAtTime(r)!==0?t=e.getValueAtTime(r)/a:t=0);const c=new De(t);return o.connect(c),c.connect(e._param),u.push(c),this._syncedSignals.push({initial:e.value,nodes:u,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const r=this._syncedSignals[t];r.signal===e&&(r.nodes.forEach(o=>o.dispose()),r.signal.value=r.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Mf(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}ha.mixin(Vu);Ru(s=>{s.transport=new Vu({context:s})});Mu(s=>{s.transport.dispose()});class Bt extends Se{constructor(e){super(e),this.input=void 0,this._state=new If("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=He,this._syncedStop=He,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ki({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,We(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(Se.getDefaults(),{mute:!1,onstop:He,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,r){let o=vn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(o=this._clampToCurrentTime(o),!this._synced&&this._state.getValueAtTime(o)==="started")Ne(Di(o,this._state.get(o).time),"Start time must be strictly greater than previous start time"),this._state.cancel(o),this._state.setStateAtTime("started",o),this.log("restart",o),this.restart(o,t,r);else if(this.log("start",o),this._state.setStateAtTime("started",o),this._synced){const a=this._state.get(o);a&&(a.offset=this.toSeconds(Ai(t,0)),a.duration=r?this.toSeconds(r):void 0);const u=this.context.transport.schedule(c=>{this._start(c,t,r)},o);this._scheduled.push(u),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>o&&this._syncedStart(this.now(),this.context.transport.seconds)}else F_(this.context),this._start(o,t,r);return this}stop(e){let t=vn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Be(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const r=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(r)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Di(t,0)){const r=this._state.get(t);if(r&&r.state==="started"&&r.time!==t){const o=t-this.toSeconds(r.time);let a;r.duration&&(a=this.toSeconds(r.duration)-o),this._start(e,this.toSeconds(r.offset)+o,a)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=He,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class pa extends Li{constructor(){const e=be(pa.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Mn(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new je({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Xe(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Li.getDefaults(),{url:new Xe,loop:!1,loopEnd:0,loopStart:0,onload:He,onerror:He,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,r,o=1){Ne(this.buffer.loaded,"buffer is either not set or not loaded");const a=this.toSeconds(e);this._startGain(a,o),this.loop?t=Ai(t,this.loopStart):t=Ai(t,0);let u=Math.max(this.toSeconds(t),0);if(this.loop){const c=this.toSeconds(this.loopEnd)||this.buffer.duration,h=this.toSeconds(this.loopStart),f=c-h;Gh(u,c)&&(u=(u-h)%f+h),An(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,gu(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(a,u)),Be(r)){let c=this.toSeconds(r);c=Math.max(c,0),this.stop(a+c)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class vu extends Bt{constructor(){const e=be(vu.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Bt.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(Ne(e in jv,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const t=jv[this._type];this._source=new pa({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const li=44100*5,ch=2,dr={brown:null,pink:null,white:null},jv={get brown(){if(!dr.brown){const s=[];for(let e=0;e<ch;e++){const t=new Float32Array(li);s[e]=t;let r=0;for(let o=0;o<li;o++){const a=Math.random()*2-1;t[o]=(r+.02*a)/1.02,r=t[o],t[o]*=3.5}}dr.brown=new Xe().fromArray(s)}return dr.brown},get pink(){if(!dr.pink){const s=[];for(let e=0;e<ch;e++){const t=new Float32Array(li);s[e]=t;let r,o,a,u,c,h,f;r=o=a=u=c=h=f=0;for(let m=0;m<li;m++){const g=Math.random()*2-1;r=.99886*r+g*.0555179,o=.99332*o+g*.0750759,a=.969*a+g*.153852,u=.8665*u+g*.3104856,c=.55*c+g*.5329522,h=-.7616*h-g*.016898,t[m]=r+o+a+u+c+h+f+g*.5362,t[m]*=.11,f=g*.115926}}dr.pink=new Xe().fromArray(s)}return dr.pink},get white(){if(!dr.white){const s=[];for(let e=0;e<ch;e++){const t=new Float32Array(li);s[e]=t;for(let r=0;r<li;r++)t[r]=Math.random()*2-1}dr.white=new Xe().fromArray(s)}return dr.white}};function Is(s,e){return dt(this,void 0,void 0,function*(){const t=e/s.context.sampleRate,r=new Ou(1,t,s.context.sampleRate);return new s.constructor(Object.assign(s.get(),{frequency:2/t,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class jf extends Li{constructor(){const e=be(jf.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Mn(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new je({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new je({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),We(this,["frequency","detune"])}static getDefaults(){return Object.assign(Li.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class lt extends Bt{constructor(){const e=be(lt.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new Ye({context:this.context,units:"frequency",value:e.frequency}),We(this,"frequency"),this.detune=new Ye({context:this.context,units:"cents",value:e.detune}),We(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Bt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),r=new jf({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return lt._periodicWaveCache.find(t=>t.phase===this._phase&&YA(t.partials,this._partials));{const e=lt._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const r=this._getCachedPeriodicWave();if(Be(r)){const{partials:o,wave:a}=r;this._wave=a,this._partials=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[o,a]=this._getRealImaginary(e,this._phase),u=this.context.createPeriodicWave(o,a);this._wave=u,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),lt._periodicWaveCache.push({imag:a,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:o,type:this._type,wave:this._wave}),lt._periodicWaveCache.length>100&&lt._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){rn(e,0);let t=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(t=r[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const o=new Float32Array(e);this._partials.forEach((a,u)=>o[u]=a),this._partials=Array.from(o),this.type=this._type}}_getRealImaginary(e,t){let o=2048;const a=new Float32Array(o),u=new Float32Array(o);let c=1;if(e==="custom"){if(c=this._partials.length+1,this._partialCount=this._partials.length,o=c,this._partials.length===0)return[a,u]}else{const h=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);h?(c=parseInt(h[2],10)+1,this._partialCount=parseInt(h[2],10),e=h[1],c=Math.max(c,2),o=c):this._partialCount=0,this._partials=[]}for(let h=1;h<o;++h){const f=2/(h*Math.PI);let m;switch(e){case"sine":m=h<=c?1:0,this._partials[h-1]=m;break;case"square":m=h&1?2*f:0,this._partials[h-1]=m;break;case"sawtooth":m=f*(h&1?1:-1),this._partials[h-1]=m;break;case"triangle":h&1?m=2*(f*f)*(h-1>>1&1?-1:1):m=0,this._partials[h-1]=m;break;case"custom":m=this._partials[h-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}m!==0?(a[h]=-m*Math.sin(t*h),u[h]=m*Math.cos(t*h)):(a[h]=0,u[h]=0)}return[a,u]}_inverseFFT(e,t,r){let o=0;const a=e.length;for(let u=0;u<a;u++)o+=e[u]*Math.cos(u*r)+t[u]*Math.sin(u*r);return o}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let r=0;const o=Math.PI*2,a=32;for(let u=0;u<a;u++)r=Math.max(this._inverseFFT(e,t,u/a*o),r);return XA(-this._inverseFFT(e,t,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Is(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}lt._periodicWaveCache=[];class X_ extends Xn{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Xi({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ns extends Ye{constructor(){const e=be(Ns.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new De({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ye.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Bu extends Bt{constructor(){const e=be(Bu.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new X_({context:this.context}),this._modulationNode=new De({context:this.context}),this._carrier=new lt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new lt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ns({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),We(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(lt.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Is(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class zu extends Bt{constructor(){const e=be(zu.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new De({context:this.context,gain:0}),this._carrier=new lt({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new Ye({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new lt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ns({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Ns({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),We(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(lt.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Is(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class ma extends Bt{constructor(){const e=be(ma.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new De({context:this.context,gain:0}),this._thresh=new Xi({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new Ye({context:this.context,units:"audioRange",value:e.width}),this._triangle=new lt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),We(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Bt.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Is(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Uu extends Bt{constructor(){const e=be(Uu.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new Ye({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Ye({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,We(this,["frequency","detune"])}static getDefaults(){return Object.assign(lt.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,r=e/(this._oscillators.length-1);this._forEach((o,a)=>o.detune.value=t+r*a)}}get count(){return this._oscillators.length}set count(e){if(rn(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const r=new lt({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):He});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[t]=r}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,r)=>t.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Is(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class ju extends Bt{constructor(){const e=be(ju.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Ns({context:this.context,value:2}),this._pulse=new ma({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new lt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),We(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Bt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Is(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Gv={am:Bu,fat:Uu,fm:zu,oscillator:lt,pulse:ma,pwm:ju};class Qo extends Bt{constructor(){const e=be(Qo.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new Ye({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Ye({context:this.context,units:"cents",value:e.detune}),We(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(lt.getDefaults(),zu.getDefaults(),Bu.getDefaults(),Uu.getDefaults(),ma.getDefaults(),ju.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=Gv[e],r=this.now();if(this._oscillator){const o=this._oscillator;o.stop(r),this.context.setTimeout(()=>o.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof Gv[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Jr(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Jr(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&vr(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Is(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Gf extends Ye{constructor(){super(be(Gf.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new De({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,As(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Ye.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Gu extends Xn{constructor(){const e=be(Gu.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new Ns({context:this.context,value:e.max-e.min}),this._add=this.output=new Gf({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Xn.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Wf extends Xn{constructor(){super(be(Wf.getDefaults(),arguments)),this.name="Zero",this._gain=new De({context:this.context}),this.output=this._gain,this.input=void 0,Mn(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),K_(this.context.getConstant(0),this._gain),this}}class Jo extends Se{constructor(){const e=be(Jo.getDefaults(),arguments,["frequency","min","max"]);super(e),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=je.prototype._fromType,this._toType=je.prototype._toType,this._is=je.prototype._is,this._clampValue=je.prototype._clampValue,this._oscillator=new lt(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new De({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Ye({context:this.context,units:"audioRange",value:0}),this._zeros=new Wf({context:this.context}),this._a2g=new X_({context:this.context}),this._scaler=this.output=new Gu({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),We(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(lt.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const t=this.min,r=this.max;this._units=e,this.min=t,this.max=r}get state(){return this._oscillator.state}connect(e,t,r){return(e instanceof je||e instanceof Ye)&&(this.convert=e.convert,this.units=e.units),Du(this,e,t,r),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function Z_(s,e=1/0){const t=new WeakMap;return function(r,o){Reflect.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(a){rn(a,s,e),t.set(this,a)}})}}function Sr(s,e=1/0){const t=new WeakMap;return function(r,o){Reflect.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(a){rn(this.toSeconds(a),s,e),t.set(this,a)}})}}class Wu extends Bt{constructor(){const e=be(Wu.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Xe({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Bt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:He,onerror:He,playbackRate:1,reverse:!1})}load(e){return dt(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=He){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,r){return super.start(e,t,r),this}_start(e,t,r){this._loop?t=Ai(t,this._loopStart):t=Ai(t,0);const o=this.toSeconds(t),a=r;r=Ai(r,Math.max(this._buffer.duration-o,0));let u=this.toSeconds(r);u=u/this._playbackRate,e=this.toSeconds(e);const c=new pa({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+u),this._state.setStateAtTime("stopped",e+u,{implicitEnd:!0})),this._activeSources.add(c),this._loop&&vn(a)?c.start(e,o):c.start(e,o,u-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(t))}restart(e,t,r){return super.restart(e,t,r),this}_restart(e,t,r){var o;(o=[...this._activeSources].pop())===null||o===void 0||o.stop(e),this._start(e,t,r)}seek(e,t){const r=this.toSeconds(t);if(this._state.getValueAtTime(r)==="started"){const o=this.toSeconds(e);this._stop(r),this._start(r,o)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&rn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&rn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),r=this._state.getNextState("stopped",t);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(o=>o.cancelStop())),this._activeSources.forEach(o=>{o.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Vn([Sr(0)],Wu.prototype,"fadeIn",void 0);Vn([Sr(0)],Wu.prototype,"fadeOut",void 0);class hN extends Xn{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Xi({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Zn extends Se{constructor(){const e=be(Zn.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new Ye({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(Se.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(vr(e))return e;{let r;for(r in Vl)if(Vl[r][t]===e)return r;return e}}_setCurve(e,t,r){if(vr(r)&&Reflect.has(Vl,r)){const o=Vl[r];Cs(o)?e!=="_decayCurve"&&(this[e]=o[t]):this[e]=o}else if(Nn(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let o=this.toSeconds(this.attack);const a=this.toSeconds(this.decay),u=this.getValueAtTime(e);if(u>0){const c=1/o;o=(1-u)/c}if(o<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,o,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,o,e);else{this._sig.cancelAndHoldAtTime(e);let c=this._attackCurve;for(let h=1;h<c.length;h++)if(c[h-1]<=u&&u<=c[h]){c=this._attackCurve.slice(h),c[0]=u;break}this._sig.setValueCurveAtTime(c,e,o,t)}if(a&&this.sustain<1){const c=t*this.sustain,h=e+o;this.log("decay",h),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(c,a+h):this._sig.exponentialApproachValueAtTime(c,h,a)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(Ne(Nn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,r=1){return t=this.toSeconds(t),this.triggerAttack(t,r),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,r=0){return Du(this,e,t,r),this}asArray(){return dt(this,arguments,void 0,function*(e=1024){const t=e/this.context.sampleRate,r=new Ou(1,t,this.context.sampleRate),o=this.toSeconds(this.attack)+this.toSeconds(this.decay),a=o+this.toSeconds(this.release),u=a*.1,c=a+u,h=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/c,decay:t*this.toSeconds(this.decay)/c,release:t*this.toSeconds(this.release)/c,context:r}));return h._sig.toDestination(),h.triggerAttackRelease(t*(o+u)/c,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Vn([Sr(0)],Zn.prototype,"attack",void 0);Vn([Sr(0)],Zn.prototype,"decay",void 0);Vn([Z_(0,1)],Zn.prototype,"sustain",void 0);Vn([Sr(0)],Zn.prototype,"release",void 0);const Vl=(()=>{let e,t;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/127*(Math.PI/2));const o=[],a=6.4;for(e=0;e<127;e++){t=e/127;const y=Math.sin(t*(Math.PI*2)*a-Math.PI/2)+1;o[e]=y/10+t*.83}o[127]=1;const u=[],c=5;for(e=0;e<128;e++)u[e]=Math.ceil(e/127*c)/c;const h=[];for(e=0;e<128;e++)t=e/127,h[e]=.5*(1-Math.cos(Math.PI*t));const f=[];for(e=0;e<128;e++){t=e/127;const y=Math.pow(t,3)*4+.2,x=Math.cos(y*Math.PI*2*t);f[e]=Math.abs(x*(1-t))}function m(y){const x=new Array(y.length);for(let w=0;w<y.length;w++)x[w]=1-y[w];return x}function g(y){return y.slice(0).reverse()}return{bounce:{In:m(f),Out:f},cosine:{In:r,Out:g(r)},exponential:"exponential",linear:"linear",ripple:{In:o,Out:m(o)},sine:{In:h,Out:m(h)},step:{In:u,Out:m(u)}}})();class Fi extends Se{constructor(){const e=be(Fi.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new Ki({context:this.context,volume:e.volume}),this.volume=this._volume.volume,We(this,"volume")}static getDefaults(){return Object.assign(Se.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const r=this["_original_"+e]=this[e];this[e]=(...o)=>{const a=o[t],u=this.context.transport.schedule(c=>{o[t]=c,r.apply(this,o)},a);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,r,o){const a=this.toSeconds(r),u=this.toSeconds(t);return this.triggerAttack(e,a,o),this.triggerRelease(a+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Vi extends Fi{constructor(){const e=be(Vi.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Fi.getDefaults(),{detune:0,onsilence:He,portamento:0})}triggerAttack(e,t,r=1){this.log("triggerAttack",e,t,r);const o=this.toSeconds(t);return this._triggerEnvelopeAttack(o,r),this.setNote(e,o),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const r=this.toSeconds(t),o=e instanceof gn?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const a=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(o,a,r)}else this.frequency.setValueAtTime(o,r);return this}}Vn([Sr(0)],Vi.prototype,"portamento",void 0);class qu extends Zn{constructor(){super(be(qu.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new De({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Bi extends Vi{constructor(){const e=be(Bi.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new Qo(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new qu(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),We(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Vi.getDefaults(),{envelope:Object.assign(Uv(Zn.getDefaults(),Object.keys(Se.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Uv(Qo.getDefaults(),[...Object.keys(Bt.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+o)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class yu extends Se{constructor(){const e=be(yu.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new je({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new je({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new je({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new je({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(Se.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){Ne(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let u=0;u<e;u++){const h=Math.pow(u/e,2)*19980+20;t[u]=h}const r=new Float32Array(e),o=new Float32Array(e),a=this.context.createBiquadFilter();return a.type=this.type,a.Q.value=this.Q.value,a.frequency.value=this.frequency.value,a.gain.value=this.gain.value,a.getFrequencyResponse(t,r,o),r}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class _u extends Se{constructor(){const e=be(_u.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new De({context:this.context}),this.output=new De({context:this.context}),this._filters=[],this._filters=[],this.Q=new Ye({context:this.context,units:"positive",value:e.Q}),this.frequency=new Ye({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Ye({context:this.context,units:"cents",value:e.detune}),this.gain=new Ye({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,We(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(Se.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){Ne(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(r=>r.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=Jr(e)?e:parseInt(e,10),r=[-12,-24,-48,-96];let o=r.indexOf(t);Ne(o!==-1,`rolloff can only be ${r.join(", ")}`),o+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(a=>a.disconnect()),this._filters=new Array(o);for(let a=0;a<o;a++){const u=new yu({context:this.context});u.type=this._type,this.frequency.connect(u.frequency),this.detune.connect(u.detune),this.Q.connect(u.Q),this.gain.connect(u.gain),this._filters[a]=u}this._internalChannels=this._filters,As(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new yu({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),r=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((a,u)=>r[u]*=a)}),t.dispose(),r}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),Mf(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class qf extends Zn{constructor(){const e=be(qf.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="FrequencyEnvelope",this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Fu({context:this.context,value:e.exponent}),this._scale=this.output=new Gu({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Zn.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);rn(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class $u extends Bi{constructor(){const e=be($u.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,We(this,["oscillator","envelope"])}static getDefaults(){return Pi(Vi.getDefaults(),Bi.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const r=this.toSeconds(t),o=this.toFrequency(e instanceof gn?e.toFrequency():e),a=o*this.octaves;return this.oscillator.frequency.setValueAtTime(a,r),this.oscillator.frequency.exponentialRampToValueAtTime(o,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Vn([Z_(0)],$u.prototype,"octaves",void 0);Vn([Sr(0)],$u.prototype,"pitchDecay",void 0);const Q_=new Set;function $f(s){Q_.add(s)}function J_(s,e){const t=`registerProcessor("${s}", ${e})`;Q_.add(t)}const fN=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;$f(fN);const pN=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;$f(pN);const mN=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;$f(mN);const gN="feedback-comb-filter",vN=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;J_(gN,vN);class Hu extends Fi{constructor(){const e=be(Hu.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(r=>{const o=parseInt(r,10);if(Ne(Ll(r)||Jr(o)&&isFinite(o),`url key is neither a note or midi pitch: ${r}`),Ll(r)){const a=new gn(this.context,r).toMidi();t[a]=e.urls[r]}else Jr(o)&&isFinite(o)&&(t[o]=e.urls[o])}),this._buffers=new zf({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Fi.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:He,onerror:He,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,r=1){return this.log("triggerAttack",e,t,r),Array.isArray(e)||(e=[e]),e.forEach(o=>{const a=Y_(new gn(this.context,o).toFrequency()),u=Math.round(a),c=a-u,h=this._findClosest(u),f=u-h,m=this._buffers.get(f),g=H_(h+c),y=new pa({url:m,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:g}).connect(this.output);y.start(t,0,m.duration/g,r),Nn(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(y),y.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const x=this._activeSources.get(u),w=x.indexOf(y);w!==-1&&x.splice(w,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(r=>{const o=new gn(this.context,r).toMidi();if(this._activeSources.has(o)&&this._activeSources.get(o).length){const a=this._activeSources.get(o);t=this.toSeconds(t),a.forEach(u=>{u.stop(t)}),this._activeSources.set(o,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,r,o=1){const a=this.toSeconds(r);return this.triggerAttack(e,a,o),Nn(t)?(Ne(Nn(e),"notes must be an array when duration is array"),e.forEach((u,c)=>{const h=t[Math.min(c,t.length-1)];this.triggerRelease(u,a+this.toSeconds(h))})):this.triggerRelease(e,a+this.toSeconds(t)),this}add(e,t,r){if(Ne(Ll(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Ll(e)){const o=new gn(this.context,e).toMidi();this._buffers.add(o,t,r)}else this._buffers.add(e,t,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}Vn([Sr(0)],Hu.prototype,"attack",void 0);Vn([Sr(0)],Hu.prototype,"release",void 0);class Yu extends Se{constructor(){const e=be(Yu.getDefaults(),arguments,["fade"]);super(e),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new hN({context:this.context}),this.a=new De({context:this.context,gain:0}),this.b=new De({context:this.context,gain:0}),this.output=new De({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new Ye({context:this.context,units:"normalRange",value:e.fade}),We(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",Mn(this._split,this.a.gain,0),Mn(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(Se.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Wv extends Se{constructor(e){super(e),this.name="Effect",this._dryWet=new Yu({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new De({context:this.context}),this.effectReturn=new De({context:this.context}),this.input=new De({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],We(this,"wet")}static getDefaults(){return Object.assign(Se.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Hf extends Se{constructor(){const e=be(Hf.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new je({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",We(this,"pan")}static getDefaults(){return Object.assign(Se.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const yN="bit-crusher",_N=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;J_(yN,_N);class Ku extends Se{constructor(){const e=be(Ku.getDefaults(),arguments,["channels"]);super(e),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(Se.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class ga extends Se{constructor(){const e=be(ga.getDefaults(),arguments,["channels"]);super(e),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(Se.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class qv extends Se{constructor(e){super(e),this.name="StereoEffect",this.input=new De({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new Yu({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new Ku({context:this.context,channels:2}),this._merge=new ga({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),We(this,["wet"])}connectEffectLeft(...e){this._split.connect(e[0],0,0),As(...e),Mn(e[e.length-1],this._merge,0,0)}connectEffectRight(...e){this._split.connect(e[0],1,0),As(...e),Mn(e[e.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(Se.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class qh extends qv{constructor(e){super(e),this.feedback=new Ye({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new De({context:this.context}),this._feedbackR=new De({context:this.context}),this._feedbackSplit=new Ku({context:this.context,channels:2}),this._feedbackMerge=new ga({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),We(this,["feedback"])}static getDefaults(){return Object.assign(qv.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Yf extends qh{constructor(){const e=be(Yf.getDefaults(),arguments,["frequency","delayTime","depth"]);super(e),this.name="Chorus",this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new Jo({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new Jo({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new ks({context:this.context}),this._delayNodeR=new ks({context:this.context}),this.frequency=this._lfoL.frequency,We(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=e.type,this.spread=e.spread}static getDefaults(){return Object.assign(qh.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(e){this._depth=e;const t=this._delayTime*e;this._lfoL.min=Math.max(this._delayTime-t,0),this._lfoL.max=this._delayTime+t,this._lfoR.min=Math.max(this._delayTime-t,0),this._lfoR.max=this._delayTime+t}get delayTime(){return this._delayTime*1e3}set delayTime(e){this._delayTime=e/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class $v extends qh{constructor(e){super(e),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),We(this,["feedback"])}}class Kf extends $v{constructor(){const e=be(Kf.getDefaults(),arguments,["delayTime","feedback"]);super(e),this.name="PingPongDelay",this._leftDelay=new ks({context:this.context,maxDelay:e.maxDelay}),this._rightDelay=new ks({context:this.context,maxDelay:e.maxDelay}),this._rightPreDelay=new ks({context:this.context,maxDelay:e.maxDelay}),this.delayTime=new Ye({context:this.context,units:"time",value:e.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),We(this,["delayTime"])}static getDefaults(){return Object.assign($v.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class Xf extends Wv{constructor(){const e=be(Xf.getDefaults(),arguments,["decay"]);super(e),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const t=this.toSeconds(e.decay);rn(t,.001),this._decay=t;const r=this.toSeconds(e.preDelay);rn(r,0),this._preDelay=r,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Wv.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),rn(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),rn(e,0),this._preDelay=e,this.generate()}generate(){return dt(this,void 0,void 0,function*(){const e=this.ready,t=new Ou(2,this._decay+this._preDelay,this.context.sampleRate),r=new vu({context:t}),o=new vu({context:t}),a=new ga({context:t});r.connect(a,0,0),o.connect(a,0,1);const u=new De({context:t}).toDestination();a.connect(u),r.start(0),o.start(0),u.gain.setValueAtTime(0,0),u.gain.setValueAtTime(1,this._preDelay),u.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const c=t.render();return this.ready=c.then(He),yield e,this._convolver.buffer=(yield c).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class pt extends Se{constructor(){const e=be(pt.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new De({context:this.context}),pt._allSolos.has(this.context)||pt._allSolos.set(this.context,new Set),pt._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(Se.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),pt._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){pt._soloed.has(this.context)||pt._soloed.set(this.context,new Set),pt._soloed.get(this.context).add(this)}_removeSolo(){pt._soloed.has(this.context)&&pt._soloed.get(this.context).delete(this)}_isSoloed(){return pt._soloed.has(this.context)&&pt._soloed.get(this.context).has(this)}_noSolos(){return!pt._soloed.has(this.context)||pt._soloed.has(this.context)&&pt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),pt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}pt._allSolos=new Map;pt._soloed=new Map;class Zf extends Se{constructor(){const e=be(Zf.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new Hf({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ki({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,We(this,["pan","volume"])}static getDefaults(){return Object.assign(Se.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class vi extends Se{constructor(){const e=be(vi.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new pt({solo:e.solo,context:this.context}),this._panVol=this.output=new Zf({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),We(this,["pan","volume"])}static getDefaults(){return Object.assign(Se.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return vi.buses.has(e)||vi.buses.set(e,new De({context:this.context})),vi.buses.get(e)}send(e,t=0){const r=this._getBus(e),o=new De({context:this.context,units:"decibels",gain:t});return this.connect(o),o.connect(r),o}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}vi.buses=new Map;function bs(){return sn().now()}sn().transport;sn().destination;sn().destination;sn().listener;sn().draw;sn();class wN extends Error{constructor(e){super(`ToneJS initialization error: ${e}`)}}const _s=class _s{static async initialize(){if(console.log("Initializing ToneJS"),!_s.initialized)try{await tN(),_s.initialized=!0,console.log("ToneJS has been initialized")}catch(e){throw new wN(`Failed to start ToneJS: ${e}`)}}static isInitialized(){return _s.initialized}static reset(){_s.initialized=!1}};j(_s,"initialized",!1);let ea=_s;const xN={maxPolyphony:32,voiceOptions:{}};class SN extends Se{constructor(t,r={}){super(r);j(this,"options");j(this,"voices",[]);j(this,"name","CustomPolySynth");j(this,"input");j(this,"output",new De);this.options={...xN,...r,voice:t,voiceOptions:r.voiceOptions||{},context:this.context}}getNextVoice(){if(this.voices.length<this.options.maxPolyphony){const r=new this.options.voice(this.options.voiceOptions);r.connect(this.output);const o={voice:r,lastUsed:bs()};return this.voices.push(o),r}let t=this.voices[0];for(let r=1;r<this.voices.length;r++)this.voices[r].lastUsed<t.lastUsed&&(t=this.voices[r]);return t.lastUsed=bs(),t.voice}triggerAttackRelease(t,r,o,a,u){const c=this.getNextVoice();return u!==void 0&&"timbre"in c&&(c.timbre=u),c.triggerAttackRelease(t,r,o,a),this}dispose(){return super.dispose(),this.output.dispose(),this.voices.forEach(t=>t.voice.dispose()),this.voices=[],this}}class Qf{constructor(e){j(this,"name","TimbralSynth");j(this,"_timbre",0);j(this,"_synthA");j(this,"_synthB");j(this,"_gainA");j(this,"_gainB");j(this,"_output");j(this,"_currentTypeA","sine");j(this,"_currentTypeB","triangle");const t=Object.assign(Qf.getDefaults(),e);this._synthA=new Bi({oscillator:{type:"sine"},envelope:t.envelope}),this._synthB=new Bi({oscillator:{type:"triangle"},envelope:t.envelope}),this._gainA=new De(1),this._gainB=new De(0),this._output=new De(.5),this._synthA.connect(this._gainA),this._synthB.connect(this._gainB),this._gainA.connect(this._output),this._gainB.connect(this._output),this.timbre=t.timbre||0}static getDefaults(){return{timbre:0,envelope:{attack:.005,decay:.1,sustain:.3,release:1}}}get output(){return this._output}connect(e){return this._output.connect(e),this}disconnect(){return this._output.disconnect(),this}toDestination(){return this._output.toDestination(),this}get timbre(){return this._timbre}set timbre(e){this._timbre=Math.max(0,Math.min(1,e)),this.updateOscillatorBlend()}updateOscillatorBlend(){const e=this._timbre;let t,r,o;e<=.5?(t="sine",r="triangle",o=e*2):(t="triangle",r="fatsawtooth",o=(e-.5)*2),this._currentTypeA!==t&&(this._synthA.oscillator.type=t,this._currentTypeA=t),this._currentTypeB!==r&&(this._synthB.oscillator.type=r,this._currentTypeB=r);const a=1-o,u=o,c=bs();this._gainA.gain.setValueAtTime(a,c),this._gainB.gain.setValueAtTime(u,c)}triggerAttack(e,t,r){return this._synthA.triggerAttack(e,t,r),this._synthB.triggerAttack(e,t,r),this}triggerRelease(e){return this._synthA.triggerRelease(e),this._synthB.triggerRelease(e),this}triggerAttackRelease(e,t,r,o){return this._synthA.triggerAttackRelease(e,t,r,o),this._synthB.triggerAttackRelease(e,t,r,o),this}set volume(e){this._output.gain.value=q_(e)}get volume(){return $_(this._output.gain.value)}dispose(){return this._synthA.dispose(),this._synthB.dispose(),this._gainA.dispose(),this._gainB.dispose(),this._output.dispose(),this}}class bN extends Se{constructor(t={}){super(t);j(this,"name","BassSynth");j(this,"oscillator");j(this,"envelope");j(this,"filter");j(this,"secondaryFilter");j(this,"filterEnvelope");j(this,"filterLFO");j(this,"output");j(this,"input");this.oscillator=new Qo({type:"fatsawtooth",frequency:440}),this.envelope=new qu({attack:2,decay:.2,sustain:.8,release:7}),this.filter=new _u({type:"lowpass",frequency:400,Q:1}),this.secondaryFilter=new _u({type:"lowpass",frequency:800,Q:2}),this.filterEnvelope=new qf({attack:10,decay:1.5,sustain:.3,release:7}),this.filterLFO=new Jo({frequency:"8n",type:"sine",amplitude:.3}),this.output=new De(.5),this.oscillator.chain(this.filter,this.secondaryFilter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),this.filterLFO.connect(this.filter.frequency),this.filterLFO.start()}setSecondaryFilterCutoff(t){const a=200+t*1800;this.secondaryFilter.frequency.setValueAtTime(a,bs())}triggerAttackRelease(t,r,o,a){const u=o!==void 0?Fl(o).toSeconds():bs(),c=Fl(r).toSeconds();this.oscillator.frequency.setValueAtTime(t,u),this.oscillator.state==="stopped"&&this.oscillator.start(u),this.envelope.triggerAttackRelease(c,u,a),this.filterEnvelope.triggerAttackRelease(c,u)}triggerAttack(t,r,o=1){const a=r!==void 0?Fl(r).toSeconds():bs();this.oscillator.frequency.setValueAtTime(t,a),this.oscillator.state==="stopped"&&this.oscillator.start(a),this.envelope.triggerAttack(a,o),this.filterEnvelope.triggerAttack(a)}triggerRelease(t){const r=t!==void 0?Fl(t).toSeconds():bs();this.envelope.triggerRelease(r),this.filterEnvelope.triggerRelease(r)}connect(t){return this.output.connect(t),this}toDestination(){return this.output.toDestination(),this}chain(...t){return this.output.chain(...t),this}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filter.dispose(),this.secondaryFilter.dispose(),this.filterEnvelope.dispose(),this.filterLFO.dispose(),this.output.dispose(),this}}const Yr=class Yr{constructor(){j(this,"lastPlayedNote",null);j(this,"synth",null);j(this,"bassSynth",null);j(this,"bassLoopIndex",0);j(this,"isMouseDown",!1);this.initializeSynth()}async onMouseDown(e,t,r){ea.isInitialized()||await ea.initialize(),this.isMouseDown=!0,this.playBassNote(),this.bassSynth&&this.bassSynth.setSecondaryFilterCutoff(e),await this.playNoteAtPosition(e,t,r)}async onMouseMove(e,t,r){this.isMouseDown&&(this.bassSynth&&this.bassSynth.setSecondaryFilterCutoff(e),await this.playNoteAtPosition(e,t,r))}async onMouseUp(){this.isMouseDown=!1,this.releaseBassNote(),this.reset()}reset(){this.lastPlayedNote=null}initializeSynth(){const e=new SN(Qf,{maxPolyphony:8,voiceOptions:{envelope:{attack:4,decay:0,sustain:1,release:1.2},timbre:0}});this.bassSynth=new bN;const t=new Xf({decay:2,wet:.9}),r=new Yf(4,10,1),o=new Kf("4t",.5).chain(new De(.3)),a=new De(10).toDestination();e.chain(r,t,a),e.chain(r,o,t,a);const u=new De(.1).toDestination();this.bassSynth.chain(u,r,t),this.synth=e}playBassNote(){if(!this.bassSynth)return;const e=Yr.BASS_LOOP[this.bassLoopIndex];this.bassSynth.triggerAttack(e),this.bassLoopIndex=(this.bassLoopIndex+1)%Yr.BASS_LOOP.length}releaseBassNote(){this.bassSynth&&this.bassSynth.triggerRelease()}async playNote(e){if(!this.synth){console.warn("Synth not initialized");return}this.synth.triggerAttackRelease(e.pitch,"32n",void 0,e.velocity,e.timbre)}async playNoteAtPosition(e,t,r){if(!r||e<0||e>1||t<0||t>1)return;const o=r.smokeDensity.getAtNormalized(e,t),a=Math.floor(t*(Yr.PENTATONIC_SCALE.length-1)),u=Yr.PENTATONIC_SCALE[a],c=Math.max(.5,Math.min(1,o*2)),f={pitch:u,velocity:c,timbre:e};this.areNotesEqual(this.lastPlayedNote,f)||(await this.playNote(f),this.lastPlayedNote=f)}areNotesEqual(e,t){return e?e.pitch===t.pitch&&e.velocity===t.velocity&&e.timbre===t.timbre:!1}};j(Yr,"PENTATONIC_SCALE",[261.63,293.66,329.63,392,440,523.25,587.33,659.25,783.99,880,1046.5,1174.66,1318.51,1567.98,1760]),j(Yr,"BASS_LOOP",[55,43.655,32.705,36.71]);let $h=Yr;const e0={samplingIntervalMs:100,textureSampleDownscale:4};class TN{constructor(e={}){j(this,"simulation",null);j(this,"canvas",null);j(this,"canvasBounds",null);j(this,"canvasBoundsUpdateTime",0);j(this,"audioInitialized",!1);j(this,"sampledTextureData",null);j(this,"samplingInterval",null);j(this,"isMouseDown",!1);j(this,"audioPreset",null);j(this,"config");j(this,"boundHandlers",{});this.config={...e0,...e}}async initialize(e,t,r){console.log("Initializing Audio Visualization Mediator"),this.canvas=e,this.simulation=t,this.audioPreset=r??new $h,this.setupAudioInitialization()}startSampling(){this.samplingInterval||!this.simulation||(this.sampleTextures(),this.samplingInterval=window.setInterval(()=>this.sampleTextures(),this.config.samplingIntervalMs))}stopSampling(){this.samplingInterval&&(clearInterval(this.samplingInterval),this.samplingInterval=null)}async onMouseDown(e,t){if(!this.audioPreset)return;this.isMouseDown=!0;const r=this.getCoordinates(e,t);r&&(this.startSampling(),await this.audioPreset.onMouseDown(r.normalizedX,r.normalizedY,this.sampledTextureData))}async onMouseMove(e,t){if(!this.audioInitialized||!this.audioPreset||!this.isMouseDown)return;const r=this.getCoordinates(e,t);r&&await this.audioPreset.onMouseMove(r.normalizedX,r.normalizedY,this.sampledTextureData)}async onMouseUp(e,t){if(!this.audioInitialized||!this.audioPreset)return;this.isMouseDown=!1;const r=this.getCoordinates(e,t);r&&await this.audioPreset.onMouseUp(r.normalizedX,r.normalizedY,this.sampledTextureData)}onMouseLeave(){var e;this.isMouseDown=!1,this.stopSampling(),(e=this.audioPreset)==null||e.reset()}reset(){var e;this.stopSampling(),this.isMouseDown=!1,(e=this.audioPreset)==null||e.reset(),this.sampledTextureData=null}destroy(){this.stopSampling(),this.removeAudioInitializationListeners(),this.simulation=null,this.canvas=null,this.audioPreset=null,this.sampledTextureData=null,this.audioInitialized=!1}isAudioInitialized(){return this.audioInitialized}setAudioPreset(e){var t;(t=this.audioPreset)==null||t.reset(),this.audioPreset=e}async sampleTextures(){if(this.simulation)try{this.sampledTextureData=await this.simulation.sampleTextures(this.config.textureSampleDownscale)}catch(e){console.warn("Failed to sample textures:",e)}}getCoordinates(e,t){var g;const r=this.getCachedCanvasBounds();if(!r)return null;const o=e-r.left,a=t-r.top,u=o/r.width,c=1-a/r.height;if(u<0||u>1||c<0||c>1)return null;const h=(g=this.simulation)==null?void 0:g.getGridSize(),f=u*((h==null?void 0:h.width)??1),m=c*((h==null?void 0:h.height)??1);return{normalizedX:u,normalizedY:c,gridX:f,gridY:m}}getCachedCanvasBounds(){const e=performance.now();return(!this.canvasBounds||e-this.canvasBoundsUpdateTime>100)&&this.canvas&&(this.canvasBounds=this.canvas.getBoundingClientRect(),this.canvasBoundsUpdateTime=e),this.canvasBounds}setupAudioInitialization(){if(!this.canvas)throw new AC("Canvas not initialized");const e=async()=>{if(!this.audioInitialized)try{await ea.initialize(),this.audioInitialized=!0,console.log("Audio engine initialized successfully"),this.removeAudioInitializationListeners()}catch(r){console.warn("Failed to initialize audio engine:",r)}};this.boundHandlers={click:e,mousedown:e,keydown:e};const t=this.canvas;t.addEventListener("click",this.boundHandlers.click,{once:!0}),t.addEventListener("mousedown",this.boundHandlers.mousedown,{once:!0}),t.addEventListener("keydown",this.boundHandlers.keydown,{once:!0}),document.addEventListener("keydown",this.boundHandlers.keydown,{once:!0})}removeAudioInitializationListeners(){if(!this.canvas)return;const e=this.canvas;e.removeEventListener("click",this.boundHandlers.click),e.removeEventListener("mousedown",this.boundHandlers.mousedown),e.removeEventListener("keydown",this.boundHandlers.keydown),document.removeEventListener("keydown",this.boundHandlers.keydown)}}function CN(s=e0){const e=k.useRef(null);k.useEffect(()=>(e.current=new TN(s),()=>{var m;(m=e.current)==null||m.destroy(),e.current=null}),[s]);const t=k.useCallback(async(m,g,y)=>{e.current&&await e.current.initialize(m,g,y)},[]),r=k.useCallback(async(m,g)=>{var y;await((y=e.current)==null?void 0:y.onMouseDown(m,g))},[]),o=k.useCallback(async(m,g)=>{var y;await((y=e.current)==null?void 0:y.onMouseMove(m,g))},[]),a=k.useCallback(async(m,g)=>{var y;await((y=e.current)==null?void 0:y.onMouseUp(m,g))},[]),u=k.useCallback(()=>{var m;(m=e.current)==null||m.onMouseLeave()},[]),c=k.useCallback(()=>{var m;(m=e.current)==null||m.reset()},[]),h=k.useCallback(()=>{var m;return((m=e.current)==null?void 0:m.isAudioInitialized())??!1},[]),f=k.useCallback(m=>{var g;(g=e.current)==null||g.setAudioPreset(m)},[]);return{initialize:t,handleMouseDown:r,handleMouseMove:o,handleMouseUp:a,handleMouseLeave:u,reset:c,isAudioInitialized:h,setAudioPreset:f}}function kN(s,e,t={}){const{serialize:r=JSON.stringify,deserialize:o=JSON.parse,storage:a="localStorage"}=t,u=a==="localStorage"?localStorage:sessionStorage,[c,h]=k.useState(()=>{try{const f=u.getItem(s);return f===null?e:o(f)}catch(f){return console.warn(`Failed to load persisted state for key "${s}":`,f),e}});return k.useEffect(()=>{try{u.setItem(s,r(c))}catch(f){console.warn(`Failed to persist state for key "${s}":`,f)}},[s,c,r,u]),[c,h]}function Yn(s,e,{checkForDefaultPrevented:t=!0}={}){return function(o){if(s==null||s(o),t===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function EN(s,e){const t=k.createContext(e),r=a=>{const{children:u,...c}=a,h=k.useMemo(()=>c,Object.values(c));return I.jsx(t.Provider,{value:h,children:u})};r.displayName=s+"Provider";function o(a){const u=k.useContext(t);if(u)return u;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${s}\``)}return[r,o]}function t0(s,e=[]){let t=[];function r(a,u){const c=k.createContext(u),h=t.length;t=[...t,u];const f=g=>{var T;const{scope:y,children:x,...w}=g,_=((T=y==null?void 0:y[s])==null?void 0:T[h])||c,b=k.useMemo(()=>w,Object.values(w));return I.jsx(_.Provider,{value:b,children:x})};f.displayName=a+"Provider";function m(g,y){var _;const x=((_=y==null?void 0:y[s])==null?void 0:_[h])||c,w=k.useContext(x);if(w)return w;if(u!==void 0)return u;throw new Error(`\`${g}\` must be used within \`${a}\``)}return[f,m]}const o=()=>{const a=t.map(u=>k.createContext(u));return function(c){const h=(c==null?void 0:c[s])||a;return k.useMemo(()=>({[`__scope${s}`]:{...c,[s]:h}}),[c,h])}};return o.scopeName=s,[r,PN(o,...e)]}function PN(...s){const e=s[0];if(s.length===1)return e;const t=()=>{const r=s.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const u=r.reduce((c,{useScope:h,scopeName:f})=>{const g=h(a)[`__scope${f}`];return{...c,...g}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:u}),[u])}};return t.scopeName=e.scopeName,t}var zi=globalThis!=null&&globalThis.document?k.useLayoutEffect:()=>{},AN=oy[" useId ".trim().toString()]||(()=>{}),NN=0;function dh(s){const[e,t]=k.useState(AN());return zi(()=>{t(r=>r??String(NN++))},[s]),s||(e?`radix-${e}`:"")}var RN=oy[" useInsertionEffect ".trim().toString()]||zi;function n0({prop:s,defaultProp:e,onChange:t=()=>{},caller:r}){const[o,a,u]=MN({defaultProp:e,onChange:t}),c=s!==void 0,h=c?s:o;{const m=k.useRef(s!==void 0);k.useEffect(()=>{const g=m.current;g!==c&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,r])}const f=k.useCallback(m=>{var g;if(c){const y=ON(m)?m(s):m;y!==s&&((g=u.current)==null||g.call(u,y))}else a(m)},[c,s,a,u]);return[h,f]}function MN({defaultProp:s,onChange:e}){const[t,r]=k.useState(s),o=k.useRef(t),a=k.useRef(e);return RN(()=>{a.current=e},[e]),k.useEffect(()=>{var u;o.current!==t&&((u=a.current)==null||u.call(a,t),o.current=t)},[t,o]),[t,r,a]}function ON(s){return typeof s=="function"}var IN=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_n=IN.reduce((s,e)=>{const t=sf(`Primitive.${e}`),r=k.forwardRef((o,a)=>{const{asChild:u,...c}=o,h=u?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),I.jsx(h,{...c,ref:a})});return r.displayName=`Primitive.${e}`,{...s,[e]:r}},{});function DN(s,e){s&&tf.flushSync(()=>s.dispatchEvent(e))}function ta(s){const e=k.useRef(s);return k.useEffect(()=>{e.current=s}),k.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function LN(s,e=globalThis==null?void 0:globalThis.document){const t=ta(s);k.useEffect(()=>{const r=o=>{o.key==="Escape"&&t(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var FN="DismissableLayer",Hh="dismissableLayer.update",VN="dismissableLayer.pointerDownOutside",BN="dismissableLayer.focusOutside",Hv,r0=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),s0=k.forwardRef((s,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:u,onDismiss:c,...h}=s,f=k.useContext(r0),[m,g]=k.useState(null),y=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=k.useState({}),w=yr(e,R=>g(R)),_=Array.from(f.layers),[b]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),T=_.indexOf(b),M=m?_.indexOf(m):-1,L=f.layersWithOutsidePointerEventsDisabled.size>0,V=M>=T,E=jN(R=>{const C=R.target,O=[...f.branches].some(U=>U.contains(C));!V||O||(o==null||o(R),u==null||u(R),R.defaultPrevented||c==null||c())},y),P=GN(R=>{const C=R.target;[...f.branches].some(U=>U.contains(C))||(a==null||a(R),u==null||u(R),R.defaultPrevented||c==null||c())},y);return LN(R=>{M===f.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&c&&(R.preventDefault(),c()))},y),k.useEffect(()=>{if(m)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(Hv=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),Yv(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=Hv)}},[m,y,t,f]),k.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),Yv())},[m,f]),k.useEffect(()=>{const R=()=>x({});return document.addEventListener(Hh,R),()=>document.removeEventListener(Hh,R)},[]),I.jsx(_n.div,{...h,ref:w,style:{pointerEvents:L?V?"auto":"none":void 0,...s.style},onFocusCapture:Yn(s.onFocusCapture,P.onFocusCapture),onBlurCapture:Yn(s.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Yn(s.onPointerDownCapture,E.onPointerDownCapture)})});s0.displayName=FN;var zN="DismissableLayerBranch",UN=k.forwardRef((s,e)=>{const t=k.useContext(r0),r=k.useRef(null),o=yr(e,r);return k.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),I.jsx(_n.div,{...s,ref:o})});UN.displayName=zN;function jN(s,e=globalThis==null?void 0:globalThis.document){const t=ta(s),r=k.useRef(!1),o=k.useRef(()=>{});return k.useEffect(()=>{const a=c=>{if(c.target&&!r.current){let h=function(){i0(VN,t,f,{discrete:!0})};const f={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=h,e.addEventListener("click",o.current,{once:!0})):h()}else e.removeEventListener("click",o.current);r.current=!1},u=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(u),e.removeEventListener("pointerdown",a),e.removeEventListener("click",o.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function GN(s,e=globalThis==null?void 0:globalThis.document){const t=ta(s),r=k.useRef(!1);return k.useEffect(()=>{const o=a=>{a.target&&!r.current&&i0(BN,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Yv(){const s=new CustomEvent(Hh);document.dispatchEvent(s)}function i0(s,e,t,{discrete:r}){const o=t.originalEvent.target,a=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:t});e&&o.addEventListener(s,e,{once:!0}),r?DN(o,a):o.dispatchEvent(a)}var hh="focusScope.autoFocusOnMount",fh="focusScope.autoFocusOnUnmount",Kv={bubbles:!1,cancelable:!0},WN="FocusScope",o0=k.forwardRef((s,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...u}=s,[c,h]=k.useState(null),f=ta(o),m=ta(a),g=k.useRef(null),y=yr(e,_=>h(_)),x=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(r){let _=function(L){if(x.paused||!c)return;const V=L.target;c.contains(V)?g.current=V:qr(g.current,{select:!0})},b=function(L){if(x.paused||!c)return;const V=L.relatedTarget;V!==null&&(c.contains(V)||qr(g.current,{select:!0}))},T=function(L){if(document.activeElement===document.body)for(const E of L)E.removedNodes.length>0&&qr(c)};document.addEventListener("focusin",_),document.addEventListener("focusout",b);const M=new MutationObserver(T);return c&&M.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",b),M.disconnect()}}},[r,c,x.paused]),k.useEffect(()=>{if(c){Zv.add(x);const _=document.activeElement;if(!c.contains(_)){const T=new CustomEvent(hh,Kv);c.addEventListener(hh,f),c.dispatchEvent(T),T.defaultPrevented||(qN(XN(a0(c)),{select:!0}),document.activeElement===_&&qr(c))}return()=>{c.removeEventListener(hh,f),setTimeout(()=>{const T=new CustomEvent(fh,Kv);c.addEventListener(fh,m),c.dispatchEvent(T),T.defaultPrevented||qr(_??document.body,{select:!0}),c.removeEventListener(fh,m),Zv.remove(x)},0)}}},[c,f,m,x]);const w=k.useCallback(_=>{if(!t&&!r||x.paused)return;const b=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,T=document.activeElement;if(b&&T){const M=_.currentTarget,[L,V]=$N(M);L&&V?!_.shiftKey&&T===V?(_.preventDefault(),t&&qr(L,{select:!0})):_.shiftKey&&T===L&&(_.preventDefault(),t&&qr(V,{select:!0})):T===M&&_.preventDefault()}},[t,r,x.paused]);return I.jsx(_n.div,{tabIndex:-1,...u,ref:y,onKeyDown:w})});o0.displayName=WN;function qN(s,{select:e=!1}={}){const t=document.activeElement;for(const r of s)if(qr(r,{select:e}),document.activeElement!==t)return}function $N(s){const e=a0(s),t=Xv(e,s),r=Xv(e.reverse(),s);return[t,r]}function a0(s){const e=[],t=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Xv(s,e){for(const t of s)if(!HN(t,{upTo:e}))return t}function HN(s,{upTo:e}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(e!==void 0&&s===e)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function YN(s){return s instanceof HTMLInputElement&&"select"in s}function qr(s,{select:e=!1}={}){if(s&&s.focus){const t=document.activeElement;s.focus({preventScroll:!0}),s!==t&&YN(s)&&e&&s.select()}}var Zv=KN();function KN(){let s=[];return{add(e){const t=s[0];e!==t&&(t==null||t.pause()),s=Qv(s,e),s.unshift(e)},remove(e){var t;s=Qv(s,e),(t=s[0])==null||t.resume()}}}function Qv(s,e){const t=[...s],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function XN(s){return s.filter(e=>e.tagName!=="A")}var ZN="Portal",l0=k.forwardRef((s,e)=>{var c;const{container:t,...r}=s,[o,a]=k.useState(!1);zi(()=>a(!0),[]);const u=t||o&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return u?US.createPortal(I.jsx(_n.div,{...r,ref:e}),u):null});l0.displayName=ZN;function QN(s,e){return k.useReducer((t,r)=>e[t][r]??t,s)}var va=s=>{const{present:e,children:t}=s,r=JN(e),o=typeof t=="function"?t({present:r.isPresent}):k.Children.only(t),a=yr(r.ref,eR(o));return typeof t=="function"||r.isPresent?k.cloneElement(o,{ref:a}):null};va.displayName="Presence";function JN(s){const[e,t]=k.useState(),r=k.useRef(null),o=k.useRef(s),a=k.useRef("none"),u=s?"mounted":"unmounted",[c,h]=QN(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const f=Bl(r.current);a.current=c==="mounted"?f:"none"},[c]),zi(()=>{const f=r.current,m=o.current;if(m!==s){const y=a.current,x=Bl(f);s?h("MOUNT"):x==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(m&&y!==x?"ANIMATION_OUT":"UNMOUNT"),o.current=s}},[s,h]),zi(()=>{if(e){let f;const m=e.ownerDocument.defaultView??window,g=x=>{const _=Bl(r.current).includes(x.animationName);if(x.target===e&&_&&(h("ANIMATION_END"),!o.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",f=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},y=x=>{x.target===e&&(a.current=Bl(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{m.clearTimeout(f),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:k.useCallback(f=>{r.current=f?getComputedStyle(f):null,t(f)},[])}}function Bl(s){return(s==null?void 0:s.animationName)||"none"}function eR(s){var r,o;let e=(r=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=(o=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:o.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var ph=0;function tR(){k.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??Jv()),document.body.insertAdjacentElement("beforeend",s[1]??Jv()),ph++,()=>{ph===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ph--}},[])}function Jv(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var Xl="right-scroll-bar-position",Zl="width-before-scroll-bar",nR="with-scroll-bars-hidden",rR="--removed-body-scroll-bar-size";function mh(s,e){return typeof s=="function"?s(e):s&&(s.current=e),s}function sR(s,e){var t=k.useState(function(){return{value:s,callback:e,facade:{get current(){return t.value},set current(r){var o=t.value;o!==r&&(t.value=r,t.callback(r,o))}}}})[0];return t.callback=e,t.facade}var iR=typeof window<"u"?k.useLayoutEffect:k.useEffect,ey=new WeakMap;function oR(s,e){var t=sR(null,function(r){return s.forEach(function(o){return mh(o,r)})});return iR(function(){var r=ey.get(t);if(r){var o=new Set(r),a=new Set(s),u=t.current;o.forEach(function(c){a.has(c)||mh(c,null)}),a.forEach(function(c){o.has(c)||mh(c,u)})}ey.set(t,s)},[s]),t}function aR(s){return s}function lR(s,e){e===void 0&&(e=aR);var t=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:s},useMedium:function(a){var u=e(a,r);return t.push(u),function(){t=t.filter(function(c){return c!==u})}},assignSyncMedium:function(a){for(r=!0;t.length;){var u=t;t=[],u.forEach(a)}t={push:function(c){return a(c)},filter:function(){return t}}},assignMedium:function(a){r=!0;var u=[];if(t.length){var c=t;t=[],c.forEach(a),u=t}var h=function(){var m=u;u=[],m.forEach(a)},f=function(){return Promise.resolve().then(h)};f(),t={push:function(m){u.push(m),f()},filter:function(m){return u=u.filter(m),t}}}};return o}function uR(s){s===void 0&&(s={});var e=lR(null);return e.options=$n({async:!0,ssr:!1},s),e}var u0=function(s){var e=s.sideCar,t=z_(s,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,$n({},t))};u0.isSideCarExport=!0;function cR(s,e){return s.useMedium(e),u0}var c0=uR(),gh=function(){},Xu=k.forwardRef(function(s,e){var t=k.useRef(null),r=k.useState({onScrollCapture:gh,onWheelCapture:gh,onTouchMoveCapture:gh}),o=r[0],a=r[1],u=s.forwardProps,c=s.children,h=s.className,f=s.removeScrollBar,m=s.enabled,g=s.shards,y=s.sideCar,x=s.noRelative,w=s.noIsolation,_=s.inert,b=s.allowPinchZoom,T=s.as,M=T===void 0?"div":T,L=s.gapMode,V=z_(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=y,P=oR([t,e]),R=$n($n({},V),o);return k.createElement(k.Fragment,null,m&&k.createElement(E,{sideCar:c0,removeScrollBar:f,shards:g,noRelative:x,noIsolation:w,inert:_,setCallbacks:a,allowPinchZoom:!!b,lockRef:t,gapMode:L}),u?k.cloneElement(k.Children.only(c),$n($n({},R),{ref:P})):k.createElement(M,$n({},R,{className:h,ref:P}),c))});Xu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Xu.classNames={fullWidth:Zl,zeroRight:Xl};var dR=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function hR(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var e=dR();return e&&s.setAttribute("nonce",e),s}function fR(s,e){s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}function pR(s){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(s)}var mR=function(){var s=0,e=null;return{add:function(t){s==0&&(e=hR())&&(fR(e,t),pR(e)),s++},remove:function(){s--,!s&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},gR=function(){var s=mR();return function(e,t){k.useEffect(function(){return s.add(e),function(){s.remove()}},[e&&t])}},d0=function(){var s=gR(),e=function(t){var r=t.styles,o=t.dynamic;return s(r,o),null};return e},vR={left:0,top:0,right:0,gap:0},vh=function(s){return parseInt(s||"",10)||0},yR=function(s){var e=window.getComputedStyle(document.body),t=e[s==="padding"?"paddingLeft":"marginLeft"],r=e[s==="padding"?"paddingTop":"marginTop"],o=e[s==="padding"?"paddingRight":"marginRight"];return[vh(t),vh(r),vh(o)]},_R=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return vR;var e=yR(s),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},wR=d0(),Ni="data-scroll-locked",xR=function(s,e,t,r){var o=s.left,a=s.top,u=s.right,c=s.gap;return t===void 0&&(t="margin"),`
  .`.concat(nR,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(Ni,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Xl,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Zl,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Xl," .").concat(Xl,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Zl," .").concat(Zl,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ni,`] {
    `).concat(rR,": ").concat(c,`px;
  }
`)},ty=function(){var s=parseInt(document.body.getAttribute(Ni)||"0",10);return isFinite(s)?s:0},SR=function(){k.useEffect(function(){return document.body.setAttribute(Ni,(ty()+1).toString()),function(){var s=ty()-1;s<=0?document.body.removeAttribute(Ni):document.body.setAttribute(Ni,s.toString())}},[])},bR=function(s){var e=s.noRelative,t=s.noImportant,r=s.gapMode,o=r===void 0?"margin":r;SR();var a=k.useMemo(function(){return _R(o)},[o]);return k.createElement(wR,{styles:xR(a,!e,o,t?"":"!important")})},Yh=!1;if(typeof window<"u")try{var zl=Object.defineProperty({},"passive",{get:function(){return Yh=!0,!0}});window.addEventListener("test",zl,zl),window.removeEventListener("test",zl,zl)}catch{Yh=!1}var ui=Yh?{passive:!1}:!1,TR=function(s){return s.tagName==="TEXTAREA"},h0=function(s,e){if(!(s instanceof Element))return!1;var t=window.getComputedStyle(s);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!TR(s)&&t[e]==="visible")},CR=function(s){return h0(s,"overflowY")},kR=function(s){return h0(s,"overflowX")},ny=function(s,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=f0(s,r);if(o){var a=p0(s,r),u=a[1],c=a[2];if(u>c)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},ER=function(s){var e=s.scrollTop,t=s.scrollHeight,r=s.clientHeight;return[e,t,r]},PR=function(s){var e=s.scrollLeft,t=s.scrollWidth,r=s.clientWidth;return[e,t,r]},f0=function(s,e){return s==="v"?CR(e):kR(e)},p0=function(s,e){return s==="v"?ER(e):PR(e)},AR=function(s,e){return s==="h"&&e==="rtl"?-1:1},NR=function(s,e,t,r,o){var a=AR(s,window.getComputedStyle(e).direction),u=a*r,c=t.target,h=e.contains(c),f=!1,m=u>0,g=0,y=0;do{var x=p0(s,c),w=x[0],_=x[1],b=x[2],T=_-b-a*w;(w||T)&&f0(s,c)&&(g+=T,y+=w),c=c.parentNode.host||c.parentNode}while(!h&&c!==document.body||h&&(e.contains(c)||e===c));return(m&&Math.abs(g)<1||!m&&Math.abs(y)<1)&&(f=!0),f},Ul=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},ry=function(s){return[s.deltaX,s.deltaY]},sy=function(s){return s&&"current"in s?s.current:s},RR=function(s,e){return s[0]===e[0]&&s[1]===e[1]},MR=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},OR=0,ci=[];function IR(s){var e=k.useRef([]),t=k.useRef([0,0]),r=k.useRef(),o=k.useState(OR++)[0],a=k.useState(d0)[0],u=k.useRef(s);k.useEffect(function(){u.current=s},[s]),k.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(o));var _=WA([s.lockRef.current],(s.shards||[]).map(sy),!0).filter(Boolean);return _.forEach(function(b){return b.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),_.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(o))})}}},[s.inert,s.lockRef.current,s.shards]);var c=k.useCallback(function(_,b){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!u.current.allowPinchZoom;var T=Ul(_),M=t.current,L="deltaX"in _?_.deltaX:M[0]-T[0],V="deltaY"in _?_.deltaY:M[1]-T[1],E,P=_.target,R=Math.abs(L)>Math.abs(V)?"h":"v";if("touches"in _&&R==="h"&&P.type==="range")return!1;var C=ny(R,P);if(!C)return!0;if(C?E=R:(E=R==="v"?"h":"v",C=ny(R,P)),!C)return!1;if(!r.current&&"changedTouches"in _&&(L||V)&&(r.current=E),!E)return!0;var O=r.current||E;return NR(O,b,_,O==="h"?L:V)},[]),h=k.useCallback(function(_){var b=_;if(!(!ci.length||ci[ci.length-1]!==a)){var T="deltaY"in b?ry(b):Ul(b),M=e.current.filter(function(E){return E.name===b.type&&(E.target===b.target||b.target===E.shadowParent)&&RR(E.delta,T)})[0];if(M&&M.should){b.cancelable&&b.preventDefault();return}if(!M){var L=(u.current.shards||[]).map(sy).filter(Boolean).filter(function(E){return E.contains(b.target)}),V=L.length>0?c(b,L[0]):!u.current.noIsolation;V&&b.cancelable&&b.preventDefault()}}},[]),f=k.useCallback(function(_,b,T,M){var L={name:_,delta:b,target:T,should:M,shadowParent:DR(T)};e.current.push(L),setTimeout(function(){e.current=e.current.filter(function(V){return V!==L})},1)},[]),m=k.useCallback(function(_){t.current=Ul(_),r.current=void 0},[]),g=k.useCallback(function(_){f(_.type,ry(_),_.target,c(_,s.lockRef.current))},[]),y=k.useCallback(function(_){f(_.type,Ul(_),_.target,c(_,s.lockRef.current))},[]);k.useEffect(function(){return ci.push(a),s.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:y}),document.addEventListener("wheel",h,ui),document.addEventListener("touchmove",h,ui),document.addEventListener("touchstart",m,ui),function(){ci=ci.filter(function(_){return _!==a}),document.removeEventListener("wheel",h,ui),document.removeEventListener("touchmove",h,ui),document.removeEventListener("touchstart",m,ui)}},[]);var x=s.removeScrollBar,w=s.inert;return k.createElement(k.Fragment,null,w?k.createElement(a,{styles:MR(o)}):null,x?k.createElement(bR,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function DR(s){for(var e=null;s!==null;)s instanceof ShadowRoot&&(e=s.host,s=s.host),s=s.parentNode;return e}const LR=cR(c0,IR);var m0=k.forwardRef(function(s,e){return k.createElement(Xu,$n({},s,{ref:e,sideCar:LR}))});m0.classNames=Xu.classNames;var FR=function(s){if(typeof document>"u")return null;var e=Array.isArray(s)?s[0]:s;return e.ownerDocument.body},di=new WeakMap,jl=new WeakMap,Gl={},yh=0,g0=function(s){return s&&(s.host||g0(s.parentNode))},VR=function(s,e){return e.map(function(t){if(s.contains(t))return t;var r=g0(t);return r&&s.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",s,". Doing nothing"),null)}).filter(function(t){return!!t})},BR=function(s,e,t,r){var o=VR(e,Array.isArray(s)?s:[s]);Gl[t]||(Gl[t]=new WeakMap);var a=Gl[t],u=[],c=new Set,h=new Set(o),f=function(g){!g||c.has(g)||(c.add(g),f(g.parentNode))};o.forEach(f);var m=function(g){!g||h.has(g)||Array.prototype.forEach.call(g.children,function(y){if(c.has(y))m(y);else try{var x=y.getAttribute(r),w=x!==null&&x!=="false",_=(di.get(y)||0)+1,b=(a.get(y)||0)+1;di.set(y,_),a.set(y,b),u.push(y),_===1&&w&&jl.set(y,!0),b===1&&y.setAttribute(t,"true"),w||y.setAttribute(r,"true")}catch(T){console.error("aria-hidden: cannot operate on ",y,T)}})};return m(e),c.clear(),yh++,function(){u.forEach(function(g){var y=di.get(g)-1,x=a.get(g)-1;di.set(g,y),a.set(g,x),y||(jl.has(g)||g.removeAttribute(r),jl.delete(g)),x||g.removeAttribute(t)}),yh--,yh||(di=new WeakMap,di=new WeakMap,jl=new WeakMap,Gl={})}},zR=function(s,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(s)?s:[s]),o=FR(s);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),BR(r,o,t,"aria-hidden")):function(){return null}},Zu="Dialog",[v0,HM]=t0(Zu),[UR,Bn]=v0(Zu),y0=s=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:o,onOpenChange:a,modal:u=!0}=s,c=k.useRef(null),h=k.useRef(null),[f,m]=n0({prop:r,defaultProp:o??!1,onChange:a,caller:Zu});return I.jsx(UR,{scope:e,triggerRef:c,contentRef:h,contentId:dh(),titleId:dh(),descriptionId:dh(),open:f,onOpenChange:m,onOpenToggle:k.useCallback(()=>m(g=>!g),[m]),modal:u,children:t})};y0.displayName=Zu;var _0="DialogTrigger",jR=k.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,o=Bn(_0,t),a=yr(e,o.triggerRef);return I.jsx(_n.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":tp(o.open),...r,ref:a,onClick:Yn(s.onClick,o.onOpenToggle)})});jR.displayName=_0;var Jf="DialogPortal",[GR,w0]=v0(Jf,{forceMount:void 0}),x0=s=>{const{__scopeDialog:e,forceMount:t,children:r,container:o}=s,a=Bn(Jf,e);return I.jsx(GR,{scope:e,forceMount:t,children:k.Children.map(r,u=>I.jsx(va,{present:t||a.open,children:I.jsx(l0,{asChild:!0,container:o,children:u})}))})};x0.displayName=Jf;var wu="DialogOverlay",S0=k.forwardRef((s,e)=>{const t=w0(wu,s.__scopeDialog),{forceMount:r=t.forceMount,...o}=s,a=Bn(wu,s.__scopeDialog);return a.modal?I.jsx(va,{present:r||a.open,children:I.jsx(qR,{...o,ref:e})}):null});S0.displayName=wu;var WR=sf("DialogOverlay.RemoveScroll"),qR=k.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,o=Bn(wu,t);return I.jsx(m0,{as:WR,allowPinchZoom:!0,shards:[o.contentRef],children:I.jsx(_n.div,{"data-state":tp(o.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Rs="DialogContent",b0=k.forwardRef((s,e)=>{const t=w0(Rs,s.__scopeDialog),{forceMount:r=t.forceMount,...o}=s,a=Bn(Rs,s.__scopeDialog);return I.jsx(va,{present:r||a.open,children:a.modal?I.jsx($R,{...o,ref:e}):I.jsx(HR,{...o,ref:e})})});b0.displayName=Rs;var $R=k.forwardRef((s,e)=>{const t=Bn(Rs,s.__scopeDialog),r=k.useRef(null),o=yr(e,t.contentRef,r);return k.useEffect(()=>{const a=r.current;if(a)return zR(a)},[]),I.jsx(T0,{...s,ref:o,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Yn(s.onCloseAutoFocus,a=>{var u;a.preventDefault(),(u=t.triggerRef.current)==null||u.focus()}),onPointerDownOutside:Yn(s.onPointerDownOutside,a=>{const u=a.detail.originalEvent,c=u.button===0&&u.ctrlKey===!0;(u.button===2||c)&&a.preventDefault()}),onFocusOutside:Yn(s.onFocusOutside,a=>a.preventDefault())})}),HR=k.forwardRef((s,e)=>{const t=Bn(Rs,s.__scopeDialog),r=k.useRef(!1),o=k.useRef(!1);return I.jsx(T0,{...s,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var u,c;(u=s.onCloseAutoFocus)==null||u.call(s,a),a.defaultPrevented||(r.current||(c=t.triggerRef.current)==null||c.focus(),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var h,f;(h=s.onInteractOutside)==null||h.call(s,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const u=a.target;((f=t.triggerRef.current)==null?void 0:f.contains(u))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),T0=k.forwardRef((s,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,...u}=s,c=Bn(Rs,t),h=k.useRef(null),f=yr(e,h);return tR(),I.jsxs(I.Fragment,{children:[I.jsx(o0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:I.jsx(s0,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":tp(c.open),...u,ref:f,onDismiss:()=>c.onOpenChange(!1)})}),I.jsxs(I.Fragment,{children:[I.jsx(YR,{titleId:c.titleId}),I.jsx(XR,{contentRef:h,descriptionId:c.descriptionId})]})]})}),ep="DialogTitle",C0=k.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,o=Bn(ep,t);return I.jsx(_n.h2,{id:o.titleId,...r,ref:e})});C0.displayName=ep;var k0="DialogDescription",E0=k.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,o=Bn(k0,t);return I.jsx(_n.p,{id:o.descriptionId,...r,ref:e})});E0.displayName=k0;var P0="DialogClose",A0=k.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,o=Bn(P0,t);return I.jsx(_n.button,{type:"button",...r,ref:e,onClick:Yn(s.onClick,()=>o.onOpenChange(!1))})});A0.displayName=P0;function tp(s){return s?"open":"closed"}var N0="DialogTitleWarning",[YM,R0]=EN(N0,{contentName:Rs,titleName:ep,docsSlug:"dialog"}),YR=({titleId:s})=>{const e=R0(N0),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return k.useEffect(()=>{s&&(document.getElementById(s)||console.error(t))},[t,s]),null},KR="DialogDescriptionWarning",XR=({contentRef:s,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${R0(KR).contentName}}.`;return k.useEffect(()=>{var a;const o=(a=s.current)==null?void 0:a.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(r))},[r,s,e]),null},ZR=y0,QR=x0,M0=S0,O0=b0,I0=C0,D0=E0,JR=A0;const eM=ZR,tM=QR,L0=k.forwardRef(({className:s,...e},t)=>I.jsx(M0,{ref:t,className:Mt("fixed inset-0 z-50 bg-black/50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...e}));L0.displayName=M0.displayName;const F0=k.forwardRef(({className:s,children:e,hideCloseButton:t=!1,...r},o)=>I.jsxs(tM,{children:[I.jsx(L0,{}),I.jsxs(O0,{ref:o,className:Mt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg",s),...r,children:[e,!t&&I.jsxs(JR,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[I.jsx(dT,{className:"h-4 w-4"}),I.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));F0.displayName=O0.displayName;const V0=({className:s,...e})=>I.jsx("div",{className:Mt("flex flex-col space-y-1.5 text-center sm:text-left",s),...e});V0.displayName="DialogHeader";const B0=({className:s,...e})=>I.jsx("div",{className:Mt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...e});B0.displayName="DialogFooter";const z0=k.forwardRef(({className:s,...e},t)=>I.jsx(I0,{ref:t,className:Mt("text-lg font-semibold leading-none tracking-tight",s),...e}));z0.displayName=I0.displayName;const Kh=k.forwardRef(({className:s,...e},t)=>I.jsx(D0,{ref:t,className:Mt("text-sm text-muted-foreground",s),...e}));Kh.displayName=D0.displayName;const Xh=[{name:"Purple",color:[.65,.35,.85]},{name:"Blue",color:[.3,.5,.9]},{name:"Green",color:[.3,.8,.4]},{name:"Red",color:[.9,.3,.3]},{name:"Orange",color:[.9,.6,.2]},{name:"Pink",color:[.9,.4,.7]},{name:"Cyan",color:[.2,.8,.8]},{name:"Yellow",color:[.9,.9,.3]}];function nM(s){const e=k.useRef({value:s,previous:s});return k.useMemo(()=>(e.current.value!==s&&(e.current.previous=e.current.value,e.current.value=s),e.current.previous),[s])}function rM(s){const[e,t]=k.useState(void 0);return zi(()=>{if(s){t({width:s.offsetWidth,height:s.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let u,c;if("borderBoxSize"in a){const h=a.borderBoxSize,f=Array.isArray(h)?h[0]:h;u=f.inlineSize,c=f.blockSize}else u=s.offsetWidth,c=s.offsetHeight;t({width:u,height:c})});return r.observe(s,{box:"border-box"}),()=>r.unobserve(s)}else t(void 0)},[s]),e}var Qu="Checkbox",[sM,KM]=t0(Qu),[iM,np]=sM(Qu);function oM(s){const{__scopeCheckbox:e,checked:t,children:r,defaultChecked:o,disabled:a,form:u,name:c,onCheckedChange:h,required:f,value:m="on",internal_do_not_use_render:g}=s,[y,x]=n0({prop:t,defaultProp:o??!1,onChange:h,caller:Qu}),[w,_]=k.useState(null),[b,T]=k.useState(null),M=k.useRef(!1),L=w?!!u||!!w.closest("form"):!0,V={checked:y,disabled:a,setChecked:x,control:w,setControl:_,name:c,form:u,value:m,hasConsumerStoppedPropagationRef:M,required:f,defaultChecked:Zr(o)?!1:o,isFormControl:L,bubbleInput:b,setBubbleInput:T};return I.jsx(iM,{scope:e,...V,children:aM(g)?g(V):r})}var U0="CheckboxTrigger",j0=k.forwardRef(({__scopeCheckbox:s,onKeyDown:e,onClick:t,...r},o)=>{const{control:a,value:u,disabled:c,checked:h,required:f,setControl:m,setChecked:g,hasConsumerStoppedPropagationRef:y,isFormControl:x,bubbleInput:w}=np(U0,s),_=yr(o,m),b=k.useRef(h);return k.useEffect(()=>{const T=a==null?void 0:a.form;if(T){const M=()=>g(b.current);return T.addEventListener("reset",M),()=>T.removeEventListener("reset",M)}},[a,g]),I.jsx(_n.button,{type:"button",role:"checkbox","aria-checked":Zr(h)?"mixed":h,"aria-required":f,"data-state":Y0(h),"data-disabled":c?"":void 0,disabled:c,value:u,...r,ref:_,onKeyDown:Yn(e,T=>{T.key==="Enter"&&T.preventDefault()}),onClick:Yn(t,T=>{g(M=>Zr(M)?!0:!M),w&&x&&(y.current=T.isPropagationStopped(),y.current||T.stopPropagation())})})});j0.displayName=U0;var G0=k.forwardRef((s,e)=>{const{__scopeCheckbox:t,name:r,checked:o,defaultChecked:a,required:u,disabled:c,value:h,onCheckedChange:f,form:m,...g}=s;return I.jsx(oM,{__scopeCheckbox:t,checked:o,defaultChecked:a,disabled:c,required:u,onCheckedChange:f,name:r,form:m,value:h,internal_do_not_use_render:({isFormControl:y})=>I.jsxs(I.Fragment,{children:[I.jsx(j0,{...g,ref:e,__scopeCheckbox:t}),y&&I.jsx(H0,{__scopeCheckbox:t})]})})});G0.displayName=Qu;var W0="CheckboxIndicator",q0=k.forwardRef((s,e)=>{const{__scopeCheckbox:t,forceMount:r,...o}=s,a=np(W0,t);return I.jsx(va,{present:r||Zr(a.checked)||a.checked===!0,children:I.jsx(_n.span,{"data-state":Y0(a.checked),"data-disabled":a.disabled?"":void 0,...o,ref:e,style:{pointerEvents:"none",...s.style}})})});q0.displayName=W0;var $0="CheckboxBubbleInput",H0=k.forwardRef(({__scopeCheckbox:s,...e},t)=>{const{control:r,hasConsumerStoppedPropagationRef:o,checked:a,defaultChecked:u,required:c,disabled:h,name:f,value:m,form:g,bubbleInput:y,setBubbleInput:x}=np($0,s),w=yr(t,x),_=nM(a),b=rM(r);k.useEffect(()=>{const M=y;if(!M)return;const L=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(L,"checked").set,P=!o.current;if(_!==a&&E){const R=new Event("click",{bubbles:P});M.indeterminate=Zr(a),E.call(M,Zr(a)?!1:a),M.dispatchEvent(R)}},[y,_,a,o]);const T=k.useRef(Zr(a)?!1:a);return I.jsx(_n.input,{type:"checkbox","aria-hidden":!0,defaultChecked:u??T.current,required:c,disabled:h,name:f,value:m,form:g,...e,tabIndex:-1,ref:w,style:{...e.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});H0.displayName=$0;function aM(s){return typeof s=="function"}function Zr(s){return s==="indeterminate"}function Y0(s){return Zr(s)?"indeterminate":s?"checked":"unchecked"}function lM({className:s,...e}){return I.jsx(G0,{"data-slot":"checkbox",className:Mt("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...e,children:I.jsx(q0,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:I.jsx(uT,{className:"size-3.5"})})})}function uM({selectedColorIndex:s,onColorSelect:e,isVisible:t,onVisibilityChange:r,autoHideDelay:o=3e3,lavaLampMode:a,onLavaLampModeChange:u}){const c=k.useRef(null),h=k.useCallback(()=>{r(!0),c.current&&window.clearTimeout(c.current),c.current=window.setTimeout(()=>{r(!1)},o)},[r,o]),f=k.useCallback(g=>{e(g),h()},[e,h]),m=k.useCallback(()=>{u(!a),h()},[a,u,h]);return k.useEffect(()=>()=>{c.current&&window.clearTimeout(c.current)},[]),k.useEffect(()=>{t&&c.current===null&&h()},[t,h]),I.jsx("div",{className:`fixed bottom-6 left-1/2 transform -translate-x-1/2 z-10 transition-all duration-500 ease-in-out ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:I.jsx("div",{className:"bg-black/80 backdrop-blur-md border border-neutral-700 rounded-2xl px-6 py-4 shadow-2xl",children:I.jsxs("div",{className:"space-y-4",children:[I.jsx("div",{className:"grid grid-cols-8 gap-3",children:Xh.map((g,y)=>I.jsx("button",{onClick:()=>f(y),className:`w-10 h-10 rounded-full border-2 transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-white/50 ${s===y?"border-white shadow-lg shadow-white/20":"border-neutral-600 hover:border-neutral-400"}`,style:{backgroundColor:`rgb(${g.color.map(x=>Math.floor(x*255)).join(", ")})`},title:g.name},g.name))}),I.jsx("div",{className:"flex items-center justify-center pt-2 border-t border-neutral-700",children:I.jsxs("label",{className:"flex items-center justify-center gap-2 cursor-pointer",children:[I.jsx(lM,{checked:a,onCheckedChange:m,className:"border-neutral-600 hover:cursor-pointer"}),I.jsx("span",{className:"text-sm font-medium transition-colors text-neutral-100 vertical-align-middle",style:{fontFamily:"Baskervville, serif"},children:"Lava Lamp"})]})})]})})})}function cM(){const s=k.useRef(null),e=k.useRef(null),t=k.useRef(null),[r,o]=k.useState(!1),[a,u]=k.useState(!0),[c,h]=k.useState(null),[f,m]=k.useState(!0),[g,y]=kN("fluxlab-color-index",0),[x,w]=k.useState(!1),[_,b]=k.useState(!1),T=k.useRef(new Set),[M,L]=k.useState(!0),[V,E]=k.useState(!0),P=k.useRef(null),[R,C]=k.useState({width:typeof window<"u"?window.innerWidth:800,height:typeof window<"u"?window.innerHeight:600}),O=k.useRef({js:0,fps:0,timestep:0,gpu:0,gpuSupported:!1}),[U,W]=k.useState(O.current),B=nC(),H=Mi.DENSITY,ee="smokeDensity",te=k.useRef(!1),X=k.useRef(null),J=k.useRef(0),z=k.useRef(new SC),Z=k.useRef(new rC("Mouse Move Events")),K=k.useRef({mouseMoveCallsPerSecond:0}),[A,$]=k.useState(K.current),le=k.useRef(null),ne=CN(),re=k.useRef(!1),ue=k.useCallback(we=>{y(we),e.current&&e.current.setSmokeColor(Xh[we].color)},[]),de=k.useCallback(we=>{b(we),we||Ol(T.current)},[]),Q=k.useCallback(we=>{!f&&bC(we)&&w(!0),V||E(!0),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{E(!1)},3e3)},[f,V]),pe=k.useCallback(async()=>{try{document.documentElement.requestFullscreen&&await document.documentElement.requestFullscreen()}catch(we){console.log("Fullscreen not supported or denied:",we)}},[]),Te=k.useCallback(async()=>{m(!1),await pe()},[pe]);k.useEffect(()=>{const we=()=>{C({width:window.innerWidth,height:window.innerHeight}),z.current.clearCache()};return window.addEventListener("resize",we),()=>window.removeEventListener("resize",we)},[]),k.useEffect(()=>{const we=()=>L(!0),se=()=>L(!1);return window.addEventListener("focus",we),window.addEventListener("blur",se),()=>{window.removeEventListener("focus",we),window.removeEventListener("blur",se)}},[]);const Ve=k.useCallback(()=>{if(!e.current||!s.current)return null;const we=s.current.getBoundingClientRect();return{simulation:e.current,audioVisualization:ne,canvasBounds:we,isLavaLampMode:_,intervalTracker:T.current,isWindowFocused:M}},[ne,_,M]),ze=k.useCallback(()=>{const we=Ve();we&&kC(we,ze)},[Ve]),It=k.useCallback(we=>{if(Z.current.recordCall(),!(!r||!e.current||we.length===0))for(const se of we){const he=z.current.clientToGrid(se.clientX,se.clientY);if(he)if(se.type==="mousedown")te.current=!0,e.current.addSmoke(he.x,he.y),X.current=he,J.current=se.timestamp,ne.handleMouseDown(se.clientX,se.clientY);else if(se.type==="mousemove"){if(Q(se.clientY),te.current&&(e.current.addSmoke(he.x,he.y),ne.handleMouseMove(se.clientX,se.clientY),X.current)){const Me=(se.timestamp-J.current)/1e3;if(Me>0){const Le=(he.x-X.current.x)/Me,Ce=(he.y-X.current.y)/Me,Re=.02,Pe=10;let Oe=Le*Re,bt=Ce*Re;const on=Math.sqrt(Oe*Oe+bt*bt);if(on>Pe){const tr=Pe/on;Oe*=tr,bt*=tr}e.current.addVelocity(he.x,he.y,Oe,bt)}X.current=he,J.current=se.timestamp}}else se.type==="mouseup"&&(te.current=!1,X.current=null,ne.handleMouseUp(se.clientX,se.clientY))}},[r,ne,Q]);return k.useEffect(()=>{r&&e.current&&s.current&&!re.current&&(ne.initialize(s.current,e.current),z.current.initialize(s.current,e.current),re.current=!0)},[r,ne]),k.useEffect(()=>{le.current=new sC(It);const we=s.current;if(!we)return;const se=Ce=>{var Re;(Re=le.current)==null||Re.addEvent({clientX:Ce.clientX,clientY:Ce.clientY,type:"mousedown",timestamp:performance.now()})},he=Ce=>{var Re;(Re=le.current)==null||Re.addEvent({clientX:Ce.clientX,clientY:Ce.clientY,type:"mousemove",timestamp:performance.now()})},Me=Ce=>{var Re;(Re=le.current)==null||Re.addEvent({clientX:Ce.clientX,clientY:Ce.clientY,type:"mouseup",timestamp:performance.now()})},Le=()=>{te.current=!1,X.current=null,ne.handleMouseLeave()};return we.addEventListener("mousedown",se),we.addEventListener("mousemove",he,{passive:!0}),we.addEventListener("mouseup",Me),we.addEventListener("mouseleave",Le),()=>{var Ce;(Ce=le.current)==null||Ce.destroy(),we&&(we.removeEventListener("mousedown",se),we.removeEventListener("mousemove",he),we.removeEventListener("mouseup",Me),we.removeEventListener("mouseleave",Le))}},[It,ne]),k.useEffect(()=>{const we=setInterval(()=>{e.current&&W(e.current.getPerformanceMetrics()),$({mouseMoveCallsPerSecond:Z.current.getCallsPerSecond()})},100);return()=>clearInterval(we)},[]),k.useEffect(()=>{_&&r&&(Ol(T.current),ze())},[_,r]),k.useEffect(()=>{_&&r&&M&&(Ol(T.current),ze())},[M]),k.useEffect(()=>()=>{console.log("Component cleanup - destroying simulation"),P.current&&clearTimeout(P.current),Ol(T.current),e.current&&(e.current.destroy(),e.current=null),o(!1)},[]),k.useEffect(()=>{(async()=>{if(!s.current||e.current)return;console.log("Initializing Smoke Simulation");const se={grid:{size:{width:512,height:Math.floor(512*(R.height/R.width))},scale:.9}},he=new PC(se);e.current=he;try{await he.initialize(s),e.current===he&&(he.setSmokeColor(Xh[g].color),o(!0),h(null))}catch(Me){console.error("Failed to initialize smoke simulation:",Me),e.current===he&&(he.destroy(),e.current=null,o(!1),h(Me instanceof Error?Me.message:"Unknown error"))}})()},[R,g]),k.useEffect(()=>{if(!a||!r||!e.current)return;const we=()=>{if(e.current&&a)try{e.current.step({shaderMode:H,texture:ee}),t.current=requestAnimationFrame(we)}catch(se){console.error("Failed to step simulation:",se),u(!1)}};return t.current=requestAnimationFrame(we),()=>{t.current!==null&&(cancelAnimationFrame(t.current),t.current=null)}},[a,r,H,ee]),k.useEffect(()=>{if(r&&!a&&e.current)try{e.current.step({renderOnly:!0,shaderMode:H,texture:ee})}catch(we){console.error("Failed to update visualization:",we)}},[H,ee,r,a]),I.jsxs(I.Fragment,{children:[I.jsx(eM,{open:f,onOpenChange:()=>{},children:I.jsxs(F0,{hideCloseButton:!0,className:"max-w-lg bg-black/95 backdrop-blur-md border-neutral-800 text-neutral-100 shadow-2xl",children:[I.jsxs(V0,{className:"text-center space-y-6",children:[I.jsxs(z0,{className:"text-center text-4xl font-normal tracking-wide text-neutral-100 flex items-center justify-center gap-3",style:{fontFamily:"Baskervville, serif"},children:[I.jsx("img",{src:"/flux-lab/Astroid_filled.svg",alt:"FluxLab Icon",className:"w-9 h-9 brightness-0 invert"}),"FluxLab"]}),I.jsxs("div",{className:"space-y-4",children:[I.jsx(Kh,{className:"text-neutral-400 text-base font-light tracking-wide text-center",style:{fontFamily:"Baskervville, serif"},children:"Music from movement."}),I.jsx("div",{className:"w-16 h-px bg-neutral-600 mx-auto"}),I.jsx(Kh,{className:"text-neutral-400 text-base font-light tracking-wide text-center",style:{fontFamily:"Baskervville, serif"},children:"Click and drag to synthesize. Seek the spectrum in the depths below."})]})]}),I.jsx(B0,{className:"mt-8",children:I.jsx(Hn,{onClick:Te,variant:"outline",className:"w-full bg-transparent border-neutral-600 text-neutral-100 hover:bg-neutral-900 hover:border-neutral-500 py-3 text-lg font-light tracking-wider transition-all duration-500 hover:text-neutral-200",style:{fontFamily:"Baskervville, serif",letterSpacing:"0.1em",transition:"all 0.5s ease"},onMouseEnter:we=>{we.currentTarget.style.letterSpacing="0.3em"},onMouseLeave:we=>{we.currentTarget.style.letterSpacing="0.1em"},children:"Enter"})})]})}),I.jsxs("div",{className:"w-screen h-screen overflow-hidden relative",children:[I.jsx(tC,{metrics:U,eventMetrics:A,isVisible:B}),I.jsx(uM,{selectedColorIndex:g,onColorSelect:ue,isVisible:x,onVisibilityChange:w,lavaLampMode:_,onLavaLampModeChange:de}),c&&I.jsxs("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-10 text-red-500 text-sm bg-red-50 p-3 rounded-lg border border-red-200",children:[I.jsx("strong",{children:"Error:"})," ",c]}),I.jsx("canvas",{width:R.width,height:R.height,ref:s,className:"block",style:{width:"100vw",height:"100vh",cursor:V?"crosshair":"none"}})]})]})}const Ju=ib({component:()=>I.jsx(xy,{})}),dM=nf({getParentRoute:()=>Ju,path:"/",component:()=>I.jsx(cM,{})}),hM=nf({getParentRoute:()=>Ju,path:"/tests",component:fT}),fM=nf({getParentRoute:()=>Ju,path:"/tests/$testId",component:ZT}),pM=Ju.addChildren([dM,hM,fM]),mM=ob({routeTree:pM,basepath:"/flux-lab"});function gM(){return I.jsx(ub,{router:mM})}tS.createRoot(document.getElementById("root")).render(I.jsx(k.StrictMode,{children:I.jsx(gM,{})}));
