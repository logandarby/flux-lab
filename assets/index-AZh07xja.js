var zx=Object.defineProperty;var Ux=(s,e,t)=>e in s?zx(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Y=(s,e,t)=>Ux(s,typeof e!="symbol"?e+"":e,t);function jx(s,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in s)){const l=Object.getOwnPropertyDescriptor(r,o);l&&Object.defineProperty(s,o,l.get?l:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function ey(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Bd={exports:{}},Do={},zd={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function Gx(){if(Bg)return Le;Bg=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function y(A){return A===null||typeof A!="object"?null:(A=g&&A[g]||A["@@iterator"],typeof A=="function"?A:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function b(A,$,le){this.props=A,this.context=$,this.refs=_,this.updater=le||x}b.prototype.isReactComponent={},b.prototype.setState=function(A,$){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,$,"setState")},b.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function T(){}T.prototype=b.prototype;function M(A,$,le){this.props=A,this.context=$,this.refs=_,this.updater=le||x}var L=M.prototype=new T;L.constructor=M,w(L,b.prototype),L.isPureReactComponent=!0;var V=Array.isArray,E=Object.prototype.hasOwnProperty,P={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function C(A,$,le){var ne,re={},ce=null,de=null;if($!=null)for(ne in $.ref!==void 0&&(de=$.ref),$.key!==void 0&&(ce=""+$.key),$)E.call($,ne)&&!R.hasOwnProperty(ne)&&(re[ne]=$[ne]);var Q=arguments.length-2;if(Q===1)re.children=le;else if(1<Q){for(var pe=Array(Q),be=0;be<Q;be++)pe[be]=arguments[be+2];re.children=pe}if(A&&A.defaultProps)for(ne in Q=A.defaultProps,Q)re[ne]===void 0&&(re[ne]=Q[ne]);return{$$typeof:s,type:A,key:ce,ref:de,props:re,_owner:P.current}}function O(A,$){return{$$typeof:s,type:A.type,key:$,ref:A.ref,props:A.props,_owner:A._owner}}function U(A){return typeof A=="object"&&A!==null&&A.$$typeof===s}function G(A){var $={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(le){return $[le]})}var B=/\/+/g;function q(A,$){return typeof A=="object"&&A!==null&&A.key!=null?G(""+A.key):$.toString(36)}function ee(A,$,le,ne,re){var ce=typeof A;(ce==="undefined"||ce==="boolean")&&(A=null);var de=!1;if(A===null)de=!0;else switch(ce){case"string":case"number":de=!0;break;case"object":switch(A.$$typeof){case s:case e:de=!0}}if(de)return de=A,re=re(de),A=ne===""?"."+q(de,0):ne,V(re)?(le="",A!=null&&(le=A.replace(B,"$&/")+"/"),ee(re,$,le,"",function(be){return be})):re!=null&&(U(re)&&(re=O(re,le+(!re.key||de&&de.key===re.key?"":(""+re.key).replace(B,"$&/")+"/")+A)),$.push(re)),1;if(de=0,ne=ne===""?".":ne+":",V(A))for(var Q=0;Q<A.length;Q++){ce=A[Q];var pe=ne+q(ce,Q);de+=ee(ce,$,le,pe,re)}else if(pe=y(A),typeof pe=="function")for(A=pe.call(A),Q=0;!(ce=A.next()).done;)ce=ce.value,pe=ne+q(ce,Q++),de+=ee(ce,$,le,pe,re);else if(ce==="object")throw $=String(A),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return de}function te(A,$,le){if(A==null)return A;var ne=[],re=0;return ee(A,ne,"","",function(ce){return $.call(le,ce,re++)}),ne}function K(A){if(A._status===-1){var $=A._result;$=$(),$.then(function(le){(A._status===0||A._status===-1)&&(A._status=1,A._result=le)},function(le){(A._status===0||A._status===-1)&&(A._status=2,A._result=le)}),A._status===-1&&(A._status=0,A._result=$)}if(A._status===1)return A._result.default;throw A._result}var J={current:null},z={transition:null},Z={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:z,ReactCurrentOwner:P};function X(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:te,forEach:function(A,$,le){te(A,function(){$.apply(this,arguments)},le)},count:function(A){var $=0;return te(A,function(){$++}),$},toArray:function(A){return te(A,function($){return $})||[]},only:function(A){if(!U(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Le.Component=b,Le.Fragment=t,Le.Profiler=o,Le.PureComponent=M,Le.StrictMode=r,Le.Suspense=h,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,Le.act=X,Le.cloneElement=function(A,$,le){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var ne=w({},A.props),re=A.key,ce=A.ref,de=A._owner;if($!=null){if($.ref!==void 0&&(ce=$.ref,de=P.current),$.key!==void 0&&(re=""+$.key),A.type&&A.type.defaultProps)var Q=A.type.defaultProps;for(pe in $)E.call($,pe)&&!R.hasOwnProperty(pe)&&(ne[pe]=$[pe]===void 0&&Q!==void 0?Q[pe]:$[pe])}var pe=arguments.length-2;if(pe===1)ne.children=le;else if(1<pe){Q=Array(pe);for(var be=0;be<pe;be++)Q[be]=arguments[be+2];ne.children=Q}return{$$typeof:s,type:A.type,key:re,ref:ce,props:ne,_owner:de}},Le.createContext=function(A){return A={$$typeof:c,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:l,_context:A},A.Consumer=A},Le.createElement=C,Le.createFactory=function(A){var $=C.bind(null,A);return $.type=A,$},Le.createRef=function(){return{current:null}},Le.forwardRef=function(A){return{$$typeof:u,render:A}},Le.isValidElement=U,Le.lazy=function(A){return{$$typeof:m,_payload:{_status:-1,_result:A},_init:K}},Le.memo=function(A,$){return{$$typeof:f,type:A,compare:$===void 0?null:$}},Le.startTransition=function(A){var $=z.transition;z.transition={};try{A()}finally{z.transition=$}},Le.unstable_act=X,Le.useCallback=function(A,$){return J.current.useCallback(A,$)},Le.useContext=function(A){return J.current.useContext(A)},Le.useDebugValue=function(){},Le.useDeferredValue=function(A){return J.current.useDeferredValue(A)},Le.useEffect=function(A,$){return J.current.useEffect(A,$)},Le.useId=function(){return J.current.useId()},Le.useImperativeHandle=function(A,$,le){return J.current.useImperativeHandle(A,$,le)},Le.useInsertionEffect=function(A,$){return J.current.useInsertionEffect(A,$)},Le.useLayoutEffect=function(A,$){return J.current.useLayoutEffect(A,$)},Le.useMemo=function(A,$){return J.current.useMemo(A,$)},Le.useReducer=function(A,$,le){return J.current.useReducer(A,$,le)},Le.useRef=function(A){return J.current.useRef(A)},Le.useState=function(A){return J.current.useState(A)},Le.useSyncExternalStore=function(A,$,le){return J.current.useSyncExternalStore(A,$,le)},Le.useTransition=function(){return J.current.useTransition()},Le.version="18.3.1",Le}var zg;function ea(){return zg||(zg=1,zd.exports=Gx()),zd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function Wx(){if(Ug)return Do;Ug=1;var s=ea(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,f){var m,g={},y=null,x=null;f!==void 0&&(y=""+f),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(x=h.ref);for(m in h)r.call(h,m)&&!l.hasOwnProperty(m)&&(g[m]=h[m]);if(u&&u.defaultProps)for(m in h=u.defaultProps,h)g[m]===void 0&&(g[m]=h[m]);return{$$typeof:e,type:u,key:y,ref:x,props:g,_owner:o.current}}return Do.Fragment=t,Do.jsx=c,Do.jsxs=c,Do}var jg;function $x(){return jg||(jg=1,Bd.exports=Wx()),Bd.exports}var I=$x(),k=ea();const ta=ey(k),ty=jx({__proto__:null,default:ta},[k]);var Tl={},Ud={exports:{}},qt={},jd={exports:{}},Gd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg;function qx(){return Gg||(Gg=1,function(s){function e(z,Z){var X=z.length;z.push(Z);e:for(;0<X;){var A=X-1>>>1,$=z[A];if(0<o($,Z))z[A]=Z,z[X]=$,X=A;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Z=z[0],X=z.pop();if(X!==Z){z[0]=X;e:for(var A=0,$=z.length,le=$>>>1;A<le;){var ne=2*(A+1)-1,re=z[ne],ce=ne+1,de=z[ce];if(0>o(re,X))ce<$&&0>o(de,re)?(z[A]=de,z[ce]=X,A=ce):(z[A]=re,z[ne]=X,A=ne);else if(ce<$&&0>o(de,X))z[A]=de,z[ce]=X,A=ce;else break e}}return Z}function o(z,Z){var X=z.sortIndex-Z.sortIndex;return X!==0?X:z.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();s.unstable_now=function(){return c.now()-u}}var h=[],f=[],m=1,g=null,y=3,x=!1,w=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(z){for(var Z=t(f);Z!==null;){if(Z.callback===null)r(f);else if(Z.startTime<=z)r(f),Z.sortIndex=Z.expirationTime,e(h,Z);else break;Z=t(f)}}function V(z){if(_=!1,L(z),!w)if(t(h)!==null)w=!0,K(E);else{var Z=t(f);Z!==null&&J(V,Z.startTime-z)}}function E(z,Z){w=!1,_&&(_=!1,T(C),C=-1),x=!0;var X=y;try{for(L(Z),g=t(h);g!==null&&(!(g.expirationTime>Z)||z&&!G());){var A=g.callback;if(typeof A=="function"){g.callback=null,y=g.priorityLevel;var $=A(g.expirationTime<=Z);Z=s.unstable_now(),typeof $=="function"?g.callback=$:g===t(h)&&r(h),L(Z)}else r(h);g=t(h)}if(g!==null)var le=!0;else{var ne=t(f);ne!==null&&J(V,ne.startTime-Z),le=!1}return le}finally{g=null,y=X,x=!1}}var P=!1,R=null,C=-1,O=5,U=-1;function G(){return!(s.unstable_now()-U<O)}function B(){if(R!==null){var z=s.unstable_now();U=z;var Z=!0;try{Z=R(!0,z)}finally{Z?q():(P=!1,R=null)}}else P=!1}var q;if(typeof M=="function")q=function(){M(B)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,te=ee.port2;ee.port1.onmessage=B,q=function(){te.postMessage(null)}}else q=function(){b(B,0)};function K(z){R=z,P||(P=!0,q())}function J(z,Z){C=b(function(){z(s.unstable_now())},Z)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(z){z.callback=null},s.unstable_continueExecution=function(){w||x||(w=!0,K(E))},s.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<z?Math.floor(1e3/z):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_getFirstCallbackNode=function(){return t(h)},s.unstable_next=function(z){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var X=y;y=Z;try{return z()}finally{y=X}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(z,Z){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=y;y=z;try{return Z()}finally{y=X}},s.unstable_scheduleCallback=function(z,Z,X){var A=s.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?A+X:A):X=A,z){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=X+$,z={id:m++,callback:Z,priorityLevel:z,startTime:X,expirationTime:$,sortIndex:-1},X>A?(z.sortIndex=X,e(f,z),t(h)===null&&z===t(f)&&(_?(T(C),C=-1):_=!0,J(V,X-A))):(z.sortIndex=$,e(h,z),w||x||(w=!0,K(E))),z},s.unstable_shouldYield=G,s.unstable_wrapCallback=function(z){var Z=y;return function(){var X=y;y=Z;try{return z.apply(this,arguments)}finally{y=X}}}}(Gd)),Gd}var Wg;function Hx(){return Wg||(Wg=1,jd.exports=qx()),jd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g;function Yx(){if($g)return qt;$g=1;var s=ea(),e=Hx();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function l(n,i){c(n,i),c(n+"Capture",i)}function c(n,i){for(o[n]=i,n=0;n<i.length;n++)r.add(i[n])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function y(n){return h.call(g,n)?!0:h.call(m,n)?!1:f.test(n)?g[n]=!0:(m[n]=!0,!1)}function x(n,i,a,d){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function w(n,i,a,d){if(i===null||typeof i>"u"||x(n,i,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function _(n,i,a,d,p,v,S){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=v,this.removeEmptyString=S}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){b[n]=new _(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];b[i]=new _(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){b[n]=new _(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){b[n]=new _(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){b[n]=new _(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){b[n]=new _(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){b[n]=new _(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){b[n]=new _(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){b[n]=new _(n,5,!1,n.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function M(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(T,M);b[i]=new _(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(T,M);b[i]=new _(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(T,M);b[i]=new _(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){b[n]=new _(n,1,!1,n.toLowerCase(),null,!1,!1)}),b.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){b[n]=new _(n,1,!1,n.toLowerCase(),null,!0,!0)});function L(n,i,a,d){var p=b.hasOwnProperty(i)?b[i]:null;(p!==null?p.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(w(i,a,p,d)&&(a=null),d||p===null?y(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):p.mustUseProperty?n[p.propertyName]=a===null?p.type===3?!1:"":a:(i=p.attributeName,d=p.attributeNamespace,a===null?n.removeAttribute(i):(p=p.type,a=p===3||p===4&&a===!0?"":""+a,d?n.setAttributeNS(d,i,a):n.setAttribute(i,a))))}var V=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),P=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),G=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),z=Symbol.iterator;function Z(n){return n===null||typeof n!="object"?null:(n=z&&n[z]||n["@@iterator"],typeof n=="function"?n:null)}var X=Object.assign,A;function $(n){if(A===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);A=i&&i[1]||""}return`
`+A+n}var le=!1;function ne(n,i){if(!n||le)return"";le=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(H){var d=H}Reflect.construct(n,[],i)}else{try{i.call()}catch(H){d=H}n.call(i.prototype)}else{try{throw Error()}catch(H){d=H}n()}}catch(H){if(H&&d&&typeof H.stack=="string"){for(var p=H.stack.split(`
`),v=d.stack.split(`
`),S=p.length-1,N=v.length-1;1<=S&&0<=N&&p[S]!==v[N];)N--;for(;1<=S&&0<=N;S--,N--)if(p[S]!==v[N]){if(S!==1||N!==1)do if(S--,N--,0>N||p[S]!==v[N]){var D=`
`+p[S].replace(" at new "," at ");return n.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",n.displayName)),D}while(1<=S&&0<=N);break}}}finally{le=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?$(n):""}function re(n){switch(n.tag){case 5:return $(n.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return n=ne(n.type,!1),n;case 11:return n=ne(n.type.render,!1),n;case 1:return n=ne(n.type,!0),n;default:return""}}function ce(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case P:return"Portal";case O:return"Profiler";case C:return"StrictMode";case q:return"Suspense";case ee:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case G:return(n.displayName||"Context")+".Consumer";case U:return(n._context.displayName||"Context")+".Provider";case B:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case te:return i=n.displayName||null,i!==null?i:ce(n.type)||"Memo";case K:i=n._payload,n=n._init;try{return ce(n(i))}catch{}}return null}function de(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(i);case 8:return i===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Q(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function pe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function be(n){var i=pe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),d=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var p=a.get,v=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return p.call(this)},set:function(S){d=""+S,v.call(this,S)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(S){d=""+S},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Fe(n){n._valueTracker||(n._valueTracker=be(n))}function Be(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),d="";return n&&(d=pe(n)?n.checked?"true":"false":n.value),n=d,n!==a?(i.setValue(n),!0):!1}function It(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function we(n,i){var a=i.checked;return X({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function se(n,i){var a=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;a=Q(i.value!=null?i.value:a),n._wrapperState={initialChecked:d,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function he(n,i){i=i.checked,i!=null&&L(n,"checked",i,!1)}function Me(n,i){he(n,i);var a=Q(i.value),d=i.type;if(a!=null)d==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Te(n,i.type,a):i.hasOwnProperty("defaultValue")&&Te(n,i.type,Q(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function De(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Te(n,i,a){(i!=="number"||It(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Re=Array.isArray;function Pe(n,i,a,d){if(n=n.options,i){i={};for(var p=0;p<a.length;p++)i["$"+a[p]]=!0;for(a=0;a<n.length;a++)p=i.hasOwnProperty("$"+n[a].value),n[a].selected!==p&&(n[a].selected=p),p&&d&&(n[a].defaultSelected=!0)}else{for(a=""+Q(a),i=null,p=0;p<n.length;p++){if(n[p].value===a){n[p].selected=!0,d&&(n[p].defaultSelected=!0);return}i!==null||n[p].disabled||(i=n[p])}i!==null&&(i.selected=!0)}}function Oe(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return X({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function bt(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(Re(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Q(a)}}function on(n,i){var a=Q(i.value),d=Q(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),d!=null&&(n.defaultValue=""+d)}function er(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Ls(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kc(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Ls(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ga,Jf=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,d,p){MSApp.execUnsafeLocalFunction(function(){return n(i,a,d,p)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(ga=ga||document.createElement("div"),ga.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=ga.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Ki(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},W0=["Webkit","ms","Moz","O"];Object.keys(Zi).forEach(function(n){W0.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Zi[i]=Zi[n]})});function ep(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Zi.hasOwnProperty(n)&&Zi[n]?(""+i).trim():i+"px"}function tp(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var d=a.indexOf("--")===0,p=ep(a,i[a],d);a==="float"&&(a="cssFloat"),d?n.setProperty(a,p):n[a]=p}}var $0=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zc(n,i){if(i){if($0[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Qc(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jc=null;function eu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var tu=null,Fs=null,Vs=null;function np(n){if(n=wo(n)){if(typeof tu!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Ba(i),tu(n.stateNode,n.type,i))}}function rp(n){Fs?Vs?Vs.push(n):Vs=[n]:Fs=n}function sp(){if(Fs){var n=Fs,i=Vs;if(Vs=Fs=null,np(n),i)for(n=0;n<i.length;n++)np(i[n])}}function ip(n,i){return n(i)}function op(){}var nu=!1;function ap(n,i,a){if(nu)return n(i,a);nu=!0;try{return ip(n,i,a)}finally{nu=!1,(Fs!==null||Vs!==null)&&(op(),sp())}}function Qi(n,i){var a=n.stateNode;if(a===null)return null;var d=Ba(a);if(d===null)return null;a=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var ru=!1;if(u)try{var Ji={};Object.defineProperty(Ji,"passive",{get:function(){ru=!0}}),window.addEventListener("test",Ji,Ji),window.removeEventListener("test",Ji,Ji)}catch{ru=!1}function q0(n,i,a,d,p,v,S,N,D){var H=Array.prototype.slice.call(arguments,3);try{i.apply(a,H)}catch(oe){this.onError(oe)}}var eo=!1,va=null,ya=!1,su=null,H0={onError:function(n){eo=!0,va=n}};function Y0(n,i,a,d,p,v,S,N,D){eo=!1,va=null,q0.apply(H0,arguments)}function X0(n,i,a,d,p,v,S,N,D){if(Y0.apply(this,arguments),eo){if(eo){var H=va;eo=!1,va=null}else throw Error(t(198));ya||(ya=!0,su=H)}}function rs(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function lp(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function cp(n){if(rs(n)!==n)throw Error(t(188))}function K0(n){var i=n.alternate;if(!i){if(i=rs(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,d=i;;){var p=a.return;if(p===null)break;var v=p.alternate;if(v===null){if(d=p.return,d!==null){a=d;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===a)return cp(p),n;if(v===d)return cp(p),i;v=v.sibling}throw Error(t(188))}if(a.return!==d.return)a=p,d=v;else{for(var S=!1,N=p.child;N;){if(N===a){S=!0,a=p,d=v;break}if(N===d){S=!0,d=p,a=v;break}N=N.sibling}if(!S){for(N=v.child;N;){if(N===a){S=!0,a=v,d=p;break}if(N===d){S=!0,d=v,a=p;break}N=N.sibling}if(!S)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function up(n){return n=K0(n),n!==null?dp(n):null}function dp(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=dp(n);if(i!==null)return i;n=n.sibling}return null}var hp=e.unstable_scheduleCallback,fp=e.unstable_cancelCallback,Z0=e.unstable_shouldYield,Q0=e.unstable_requestPaint,ct=e.unstable_now,J0=e.unstable_getCurrentPriorityLevel,iu=e.unstable_ImmediatePriority,pp=e.unstable_UserBlockingPriority,_a=e.unstable_NormalPriority,ew=e.unstable_LowPriority,mp=e.unstable_IdlePriority,wa=null,zn=null;function tw(n){if(zn&&typeof zn.onCommitFiberRoot=="function")try{zn.onCommitFiberRoot(wa,n,void 0,(n.current.flags&128)===128)}catch{}}var _n=Math.clz32?Math.clz32:sw,nw=Math.log,rw=Math.LN2;function sw(n){return n>>>=0,n===0?32:31-(nw(n)/rw|0)|0}var xa=64,Sa=4194304;function to(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ba(n,i){var a=n.pendingLanes;if(a===0)return 0;var d=0,p=n.suspendedLanes,v=n.pingedLanes,S=a&268435455;if(S!==0){var N=S&~p;N!==0?d=to(N):(v&=S,v!==0&&(d=to(v)))}else S=a&~p,S!==0?d=to(S):v!==0&&(d=to(v));if(d===0)return 0;if(i!==0&&i!==d&&(i&p)===0&&(p=d&-d,v=i&-i,p>=v||p===16&&(v&4194240)!==0))return i;if((d&4)!==0&&(d|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=d;0<i;)a=31-_n(i),p=1<<a,d|=n[a],i&=~p;return d}function iw(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ow(n,i){for(var a=n.suspendedLanes,d=n.pingedLanes,p=n.expirationTimes,v=n.pendingLanes;0<v;){var S=31-_n(v),N=1<<S,D=p[S];D===-1?((N&a)===0||(N&d)!==0)&&(p[S]=iw(N,i)):D<=i&&(n.expiredLanes|=N),v&=~N}}function ou(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function gp(){var n=xa;return xa<<=1,(xa&4194240)===0&&(xa=64),n}function au(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function no(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-_n(i),n[i]=a}function aw(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<a;){var p=31-_n(a),v=1<<p;i[p]=0,d[p]=-1,n[p]=-1,a&=~v}}function lu(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var d=31-_n(a),p=1<<d;p&i|n[d]&i&&(n[d]|=i),a&=~p}}var $e=0;function vp(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var yp,cu,_p,wp,xp,uu=!1,Ta=[],Sr=null,br=null,Tr=null,ro=new Map,so=new Map,Cr=[],lw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sp(n,i){switch(n){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":ro.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":so.delete(i.pointerId)}}function io(n,i,a,d,p,v){return n===null||n.nativeEvent!==v?(n={blockedOn:i,domEventName:a,eventSystemFlags:d,nativeEvent:v,targetContainers:[p]},i!==null&&(i=wo(i),i!==null&&cu(i)),n):(n.eventSystemFlags|=d,i=n.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),n)}function cw(n,i,a,d,p){switch(i){case"focusin":return Sr=io(Sr,n,i,a,d,p),!0;case"dragenter":return br=io(br,n,i,a,d,p),!0;case"mouseover":return Tr=io(Tr,n,i,a,d,p),!0;case"pointerover":var v=p.pointerId;return ro.set(v,io(ro.get(v)||null,n,i,a,d,p)),!0;case"gotpointercapture":return v=p.pointerId,so.set(v,io(so.get(v)||null,n,i,a,d,p)),!0}return!1}function bp(n){var i=ss(n.target);if(i!==null){var a=rs(i);if(a!==null){if(i=a.tag,i===13){if(i=lp(a),i!==null){n.blockedOn=i,xp(n.priority,function(){_p(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ca(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=hu(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var d=new a.constructor(a.type,a);Jc=d,a.target.dispatchEvent(d),Jc=null}else return i=wo(a),i!==null&&cu(i),n.blockedOn=a,!1;i.shift()}return!0}function Tp(n,i,a){Ca(n)&&a.delete(i)}function uw(){uu=!1,Sr!==null&&Ca(Sr)&&(Sr=null),br!==null&&Ca(br)&&(br=null),Tr!==null&&Ca(Tr)&&(Tr=null),ro.forEach(Tp),so.forEach(Tp)}function oo(n,i){n.blockedOn===i&&(n.blockedOn=null,uu||(uu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,uw)))}function ao(n){function i(p){return oo(p,n)}if(0<Ta.length){oo(Ta[0],n);for(var a=1;a<Ta.length;a++){var d=Ta[a];d.blockedOn===n&&(d.blockedOn=null)}}for(Sr!==null&&oo(Sr,n),br!==null&&oo(br,n),Tr!==null&&oo(Tr,n),ro.forEach(i),so.forEach(i),a=0;a<Cr.length;a++)d=Cr[a],d.blockedOn===n&&(d.blockedOn=null);for(;0<Cr.length&&(a=Cr[0],a.blockedOn===null);)bp(a),a.blockedOn===null&&Cr.shift()}var Bs=V.ReactCurrentBatchConfig,ka=!0;function dw(n,i,a,d){var p=$e,v=Bs.transition;Bs.transition=null;try{$e=1,du(n,i,a,d)}finally{$e=p,Bs.transition=v}}function hw(n,i,a,d){var p=$e,v=Bs.transition;Bs.transition=null;try{$e=4,du(n,i,a,d)}finally{$e=p,Bs.transition=v}}function du(n,i,a,d){if(ka){var p=hu(n,i,a,d);if(p===null)Au(n,i,d,Ea,a),Sp(n,d);else if(cw(p,n,i,a,d))d.stopPropagation();else if(Sp(n,d),i&4&&-1<lw.indexOf(n)){for(;p!==null;){var v=wo(p);if(v!==null&&yp(v),v=hu(n,i,a,d),v===null&&Au(n,i,d,Ea,a),v===p)break;p=v}p!==null&&d.stopPropagation()}else Au(n,i,d,null,a)}}var Ea=null;function hu(n,i,a,d){if(Ea=null,n=eu(d),n=ss(n),n!==null)if(i=rs(n),i===null)n=null;else if(a=i.tag,a===13){if(n=lp(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Ea=n,null}function Cp(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J0()){case iu:return 1;case pp:return 4;case _a:case ew:return 16;case mp:return 536870912;default:return 16}default:return 16}}var kr=null,fu=null,Pa=null;function kp(){if(Pa)return Pa;var n,i=fu,a=i.length,d,p="value"in kr?kr.value:kr.textContent,v=p.length;for(n=0;n<a&&i[n]===p[n];n++);var S=a-n;for(d=1;d<=S&&i[a-d]===p[v-d];d++);return Pa=p.slice(n,1<d?1-d:void 0)}function Aa(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Na(){return!0}function Ep(){return!1}function Kt(n){function i(a,d,p,v,S){this._reactName=a,this._targetInst=p,this.type=d,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var N in n)n.hasOwnProperty(N)&&(a=n[N],this[N]=a?a(v):v[N]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Na:Ep,this.isPropagationStopped=Ep,this}return X(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Na)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Na)},persist:function(){},isPersistent:Na}),i}var zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pu=Kt(zs),lo=X({},zs,{view:0,detail:0}),fw=Kt(lo),mu,gu,co,Ra=X({},lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==co&&(co&&n.type==="mousemove"?(mu=n.screenX-co.screenX,gu=n.screenY-co.screenY):gu=mu=0,co=n),mu)},movementY:function(n){return"movementY"in n?n.movementY:gu}}),Pp=Kt(Ra),pw=X({},Ra,{dataTransfer:0}),mw=Kt(pw),gw=X({},lo,{relatedTarget:0}),vu=Kt(gw),vw=X({},zs,{animationName:0,elapsedTime:0,pseudoElement:0}),yw=Kt(vw),_w=X({},zs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ww=Kt(_w),xw=X({},zs,{data:0}),Ap=Kt(xw),Sw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cw(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Tw[n])?!!i[n]:!1}function yu(){return Cw}var kw=X({},lo,{key:function(n){if(n.key){var i=Sw[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Aa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?bw[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yu,charCode:function(n){return n.type==="keypress"?Aa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Aa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ew=Kt(kw),Pw=X({},Ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Np=Kt(Pw),Aw=X({},lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yu}),Nw=Kt(Aw),Rw=X({},zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mw=Kt(Rw),Ow=X({},Ra,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Iw=Kt(Ow),Dw=[9,13,27,32],_u=u&&"CompositionEvent"in window,uo=null;u&&"documentMode"in document&&(uo=document.documentMode);var Lw=u&&"TextEvent"in window&&!uo,Rp=u&&(!_u||uo&&8<uo&&11>=uo),Mp=" ",Op=!1;function Ip(n,i){switch(n){case"keyup":return Dw.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Us=!1;function Fw(n,i){switch(n){case"compositionend":return Dp(i);case"keypress":return i.which!==32?null:(Op=!0,Mp);case"textInput":return n=i.data,n===Mp&&Op?null:n;default:return null}}function Vw(n,i){if(Us)return n==="compositionend"||!_u&&Ip(n,i)?(n=kp(),Pa=fu=kr=null,Us=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Rp&&i.locale!=="ko"?null:i.data;default:return null}}var Bw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Bw[n.type]:i==="textarea"}function Fp(n,i,a,d){rp(d),i=La(i,"onChange"),0<i.length&&(a=new pu("onChange","change",null,a,d),n.push({event:a,listeners:i}))}var ho=null,fo=null;function zw(n){tm(n,0)}function Ma(n){var i=qs(n);if(Be(i))return n}function Uw(n,i){if(n==="change")return i}var Vp=!1;if(u){var wu;if(u){var xu="oninput"in document;if(!xu){var Bp=document.createElement("div");Bp.setAttribute("oninput","return;"),xu=typeof Bp.oninput=="function"}wu=xu}else wu=!1;Vp=wu&&(!document.documentMode||9<document.documentMode)}function zp(){ho&&(ho.detachEvent("onpropertychange",Up),fo=ho=null)}function Up(n){if(n.propertyName==="value"&&Ma(fo)){var i=[];Fp(i,fo,n,eu(n)),ap(zw,i)}}function jw(n,i,a){n==="focusin"?(zp(),ho=i,fo=a,ho.attachEvent("onpropertychange",Up)):n==="focusout"&&zp()}function Gw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ma(fo)}function Ww(n,i){if(n==="click")return Ma(i)}function $w(n,i){if(n==="input"||n==="change")return Ma(i)}function qw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var wn=typeof Object.is=="function"?Object.is:qw;function po(n,i){if(wn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),d=Object.keys(i);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var p=a[d];if(!h.call(i,p)||!wn(n[p],i[p]))return!1}return!0}function jp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Gp(n,i){var a=jp(n);n=0;for(var d;a;){if(a.nodeType===3){if(d=n+a.textContent.length,n<=i&&d>=i)return{node:a,offset:i-n};n=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jp(a)}}function Wp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Wp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function $p(){for(var n=window,i=It();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=It(n.document)}return i}function Su(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Hw(n){var i=$p(),a=n.focusedElem,d=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Wp(a.ownerDocument.documentElement,a)){if(d!==null&&Su(a)){if(i=d.start,n=d.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var p=a.textContent.length,v=Math.min(d.start,p);d=d.end===void 0?v:Math.min(d.end,p),!n.extend&&v>d&&(p=d,d=v,v=p),p=Gp(a,v);var S=Gp(a,d);p&&S&&(n.rangeCount!==1||n.anchorNode!==p.node||n.anchorOffset!==p.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),n.removeAllRanges(),v>d?(n.addRange(i),n.extend(S.node,S.offset)):(i.setEnd(S.node,S.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Yw=u&&"documentMode"in document&&11>=document.documentMode,js=null,bu=null,mo=null,Tu=!1;function qp(n,i,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Tu||js==null||js!==It(d)||(d=js,"selectionStart"in d&&Su(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),mo&&po(mo,d)||(mo=d,d=La(bu,"onSelect"),0<d.length&&(i=new pu("onSelect","select",null,i,a),n.push({event:i,listeners:d}),i.target=js)))}function Oa(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Gs={animationend:Oa("Animation","AnimationEnd"),animationiteration:Oa("Animation","AnimationIteration"),animationstart:Oa("Animation","AnimationStart"),transitionend:Oa("Transition","TransitionEnd")},Cu={},Hp={};u&&(Hp=document.createElement("div").style,"AnimationEvent"in window||(delete Gs.animationend.animation,delete Gs.animationiteration.animation,delete Gs.animationstart.animation),"TransitionEvent"in window||delete Gs.transitionend.transition);function Ia(n){if(Cu[n])return Cu[n];if(!Gs[n])return n;var i=Gs[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Hp)return Cu[n]=i[a];return n}var Yp=Ia("animationend"),Xp=Ia("animationiteration"),Kp=Ia("animationstart"),Zp=Ia("transitionend"),Qp=new Map,Jp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(n,i){Qp.set(n,i),l(i,[n])}for(var ku=0;ku<Jp.length;ku++){var Eu=Jp[ku],Xw=Eu.toLowerCase(),Kw=Eu[0].toUpperCase()+Eu.slice(1);Er(Xw,"on"+Kw)}Er(Yp,"onAnimationEnd"),Er(Xp,"onAnimationIteration"),Er(Kp,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(Zp,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zw=new Set("cancel close invalid load scroll toggle".split(" ").concat(go));function em(n,i,a){var d=n.type||"unknown-event";n.currentTarget=a,X0(d,i,void 0,n),n.currentTarget=null}function tm(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var d=n[a],p=d.event;d=d.listeners;e:{var v=void 0;if(i)for(var S=d.length-1;0<=S;S--){var N=d[S],D=N.instance,H=N.currentTarget;if(N=N.listener,D!==v&&p.isPropagationStopped())break e;em(p,N,H),v=D}else for(S=0;S<d.length;S++){if(N=d[S],D=N.instance,H=N.currentTarget,N=N.listener,D!==v&&p.isPropagationStopped())break e;em(p,N,H),v=D}}}if(ya)throw n=su,ya=!1,su=null,n}function Qe(n,i){var a=i[Du];a===void 0&&(a=i[Du]=new Set);var d=n+"__bubble";a.has(d)||(nm(i,n,2,!1),a.add(d))}function Pu(n,i,a){var d=0;i&&(d|=4),nm(a,n,d,i)}var Da="_reactListening"+Math.random().toString(36).slice(2);function vo(n){if(!n[Da]){n[Da]=!0,r.forEach(function(a){a!=="selectionchange"&&(Zw.has(a)||Pu(a,!1,n),Pu(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Da]||(i[Da]=!0,Pu("selectionchange",!1,i))}}function nm(n,i,a,d){switch(Cp(i)){case 1:var p=dw;break;case 4:p=hw;break;default:p=du}a=p.bind(null,i,a,n),p=void 0,!ru||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),d?p!==void 0?n.addEventListener(i,a,{capture:!0,passive:p}):n.addEventListener(i,a,!0):p!==void 0?n.addEventListener(i,a,{passive:p}):n.addEventListener(i,a,!1)}function Au(n,i,a,d,p){var v=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var N=d.stateNode.containerInfo;if(N===p||N.nodeType===8&&N.parentNode===p)break;if(S===4)for(S=d.return;S!==null;){var D=S.tag;if((D===3||D===4)&&(D=S.stateNode.containerInfo,D===p||D.nodeType===8&&D.parentNode===p))return;S=S.return}for(;N!==null;){if(S=ss(N),S===null)return;if(D=S.tag,D===5||D===6){d=v=S;continue e}N=N.parentNode}}d=d.return}ap(function(){var H=v,oe=eu(a),ae=[];e:{var ie=Qp.get(n);if(ie!==void 0){var fe=pu,ge=n;switch(n){case"keypress":if(Aa(a)===0)break e;case"keydown":case"keyup":fe=Ew;break;case"focusin":ge="focus",fe=vu;break;case"focusout":ge="blur",fe=vu;break;case"beforeblur":case"afterblur":fe=vu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Pp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=mw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Nw;break;case Yp:case Xp:case Kp:fe=yw;break;case Zp:fe=Mw;break;case"scroll":fe=fw;break;case"wheel":fe=Iw;break;case"copy":case"cut":case"paste":fe=ww;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Np}var _e=(i&4)!==0,ut=!_e&&n==="scroll",j=_e?ie!==null?ie+"Capture":null:ie;_e=[];for(var F=H,W;F!==null;){W=F;var ue=W.stateNode;if(W.tag===5&&ue!==null&&(W=ue,j!==null&&(ue=Qi(F,j),ue!=null&&_e.push(yo(F,ue,W)))),ut)break;F=F.return}0<_e.length&&(ie=new fe(ie,ge,null,a,oe),ae.push({event:ie,listeners:_e}))}}if((i&7)===0){e:{if(ie=n==="mouseover"||n==="pointerover",fe=n==="mouseout"||n==="pointerout",ie&&a!==Jc&&(ge=a.relatedTarget||a.fromElement)&&(ss(ge)||ge[tr]))break e;if((fe||ie)&&(ie=oe.window===oe?oe:(ie=oe.ownerDocument)?ie.defaultView||ie.parentWindow:window,fe?(ge=a.relatedTarget||a.toElement,fe=H,ge=ge?ss(ge):null,ge!==null&&(ut=rs(ge),ge!==ut||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(fe=null,ge=H),fe!==ge)){if(_e=Pp,ue="onMouseLeave",j="onMouseEnter",F="mouse",(n==="pointerout"||n==="pointerover")&&(_e=Np,ue="onPointerLeave",j="onPointerEnter",F="pointer"),ut=fe==null?ie:qs(fe),W=ge==null?ie:qs(ge),ie=new _e(ue,F+"leave",fe,a,oe),ie.target=ut,ie.relatedTarget=W,ue=null,ss(oe)===H&&(_e=new _e(j,F+"enter",ge,a,oe),_e.target=W,_e.relatedTarget=ut,ue=_e),ut=ue,fe&&ge)t:{for(_e=fe,j=ge,F=0,W=_e;W;W=Ws(W))F++;for(W=0,ue=j;ue;ue=Ws(ue))W++;for(;0<F-W;)_e=Ws(_e),F--;for(;0<W-F;)j=Ws(j),W--;for(;F--;){if(_e===j||j!==null&&_e===j.alternate)break t;_e=Ws(_e),j=Ws(j)}_e=null}else _e=null;fe!==null&&rm(ae,ie,fe,_e,!1),ge!==null&&ut!==null&&rm(ae,ut,ge,_e,!0)}}e:{if(ie=H?qs(H):window,fe=ie.nodeName&&ie.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ie.type==="file")var xe=Uw;else if(Lp(ie))if(Vp)xe=$w;else{xe=Gw;var Ce=jw}else(fe=ie.nodeName)&&fe.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(xe=Ww);if(xe&&(xe=xe(n,H))){Fp(ae,xe,a,oe);break e}Ce&&Ce(n,ie,H),n==="focusout"&&(Ce=ie._wrapperState)&&Ce.controlled&&ie.type==="number"&&Te(ie,"number",ie.value)}switch(Ce=H?qs(H):window,n){case"focusin":(Lp(Ce)||Ce.contentEditable==="true")&&(js=Ce,bu=H,mo=null);break;case"focusout":mo=bu=js=null;break;case"mousedown":Tu=!0;break;case"contextmenu":case"mouseup":case"dragend":Tu=!1,qp(ae,a,oe);break;case"selectionchange":if(Yw)break;case"keydown":case"keyup":qp(ae,a,oe)}var ke;if(_u)e:{switch(n){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Us?Ip(n,a)&&(Ae="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(Rp&&a.locale!=="ko"&&(Us||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Us&&(ke=kp()):(kr=oe,fu="value"in kr?kr.value:kr.textContent,Us=!0)),Ce=La(H,Ae),0<Ce.length&&(Ae=new Ap(Ae,n,null,a,oe),ae.push({event:Ae,listeners:Ce}),ke?Ae.data=ke:(ke=Dp(a),ke!==null&&(Ae.data=ke)))),(ke=Lw?Fw(n,a):Vw(n,a))&&(H=La(H,"onBeforeInput"),0<H.length&&(oe=new Ap("onBeforeInput","beforeinput",null,a,oe),ae.push({event:oe,listeners:H}),oe.data=ke))}tm(ae,i)})}function yo(n,i,a){return{instance:n,listener:i,currentTarget:a}}function La(n,i){for(var a=i+"Capture",d=[];n!==null;){var p=n,v=p.stateNode;p.tag===5&&v!==null&&(p=v,v=Qi(n,a),v!=null&&d.unshift(yo(n,v,p)),v=Qi(n,i),v!=null&&d.push(yo(n,v,p))),n=n.return}return d}function Ws(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function rm(n,i,a,d,p){for(var v=i._reactName,S=[];a!==null&&a!==d;){var N=a,D=N.alternate,H=N.stateNode;if(D!==null&&D===d)break;N.tag===5&&H!==null&&(N=H,p?(D=Qi(a,v),D!=null&&S.unshift(yo(a,D,N))):p||(D=Qi(a,v),D!=null&&S.push(yo(a,D,N)))),a=a.return}S.length!==0&&n.push({event:i,listeners:S})}var Qw=/\r\n?/g,Jw=/\u0000|\uFFFD/g;function sm(n){return(typeof n=="string"?n:""+n).replace(Qw,`
`).replace(Jw,"")}function Fa(n,i,a){if(i=sm(i),sm(n)!==i&&a)throw Error(t(425))}function Va(){}var Nu=null,Ru=null;function Mu(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ou=typeof setTimeout=="function"?setTimeout:void 0,ex=typeof clearTimeout=="function"?clearTimeout:void 0,im=typeof Promise=="function"?Promise:void 0,tx=typeof queueMicrotask=="function"?queueMicrotask:typeof im<"u"?function(n){return im.resolve(null).then(n).catch(nx)}:Ou;function nx(n){setTimeout(function(){throw n})}function Iu(n,i){var a=i,d=0;do{var p=a.nextSibling;if(n.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(d===0){n.removeChild(p),ao(i);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=p}while(a);ao(i)}function Pr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function om(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var $s=Math.random().toString(36).slice(2),Un="__reactFiber$"+$s,_o="__reactProps$"+$s,tr="__reactContainer$"+$s,Du="__reactEvents$"+$s,rx="__reactListeners$"+$s,sx="__reactHandles$"+$s;function ss(n){var i=n[Un];if(i)return i;for(var a=n.parentNode;a;){if(i=a[tr]||a[Un]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=om(n);n!==null;){if(a=n[Un])return a;n=om(n)}return i}n=a,a=n.parentNode}return null}function wo(n){return n=n[Un]||n[tr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function qs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ba(n){return n[_o]||null}var Lu=[],Hs=-1;function Ar(n){return{current:n}}function Je(n){0>Hs||(n.current=Lu[Hs],Lu[Hs]=null,Hs--)}function Ke(n,i){Hs++,Lu[Hs]=n.current,n.current=i}var Nr={},Et=Ar(Nr),Ut=Ar(!1),is=Nr;function Ys(n,i){var a=n.type.contextTypes;if(!a)return Nr;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var p={},v;for(v in a)p[v]=i[v];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=p),p}function jt(n){return n=n.childContextTypes,n!=null}function za(){Je(Ut),Je(Et)}function am(n,i,a){if(Et.current!==Nr)throw Error(t(168));Ke(Et,i),Ke(Ut,a)}function lm(n,i,a){var d=n.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var p in d)if(!(p in i))throw Error(t(108,de(n)||"Unknown",p));return X({},a,d)}function Ua(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Nr,is=Et.current,Ke(Et,n),Ke(Ut,Ut.current),!0}function cm(n,i,a){var d=n.stateNode;if(!d)throw Error(t(169));a?(n=lm(n,i,is),d.__reactInternalMemoizedMergedChildContext=n,Je(Ut),Je(Et),Ke(Et,n)):Je(Ut),Ke(Ut,a)}var nr=null,ja=!1,Fu=!1;function um(n){nr===null?nr=[n]:nr.push(n)}function ix(n){ja=!0,um(n)}function Rr(){if(!Fu&&nr!==null){Fu=!0;var n=0,i=$e;try{var a=nr;for($e=1;n<a.length;n++){var d=a[n];do d=d(!0);while(d!==null)}nr=null,ja=!1}catch(p){throw nr!==null&&(nr=nr.slice(n+1)),hp(iu,Rr),p}finally{$e=i,Fu=!1}}return null}var Xs=[],Ks=0,Ga=null,Wa=0,an=[],ln=0,os=null,rr=1,sr="";function as(n,i){Xs[Ks++]=Wa,Xs[Ks++]=Ga,Ga=n,Wa=i}function dm(n,i,a){an[ln++]=rr,an[ln++]=sr,an[ln++]=os,os=n;var d=rr;n=sr;var p=32-_n(d)-1;d&=~(1<<p),a+=1;var v=32-_n(i)+p;if(30<v){var S=p-p%5;v=(d&(1<<S)-1).toString(32),d>>=S,p-=S,rr=1<<32-_n(i)+p|a<<p|d,sr=v+n}else rr=1<<v|a<<p|d,sr=n}function Vu(n){n.return!==null&&(as(n,1),dm(n,1,0))}function Bu(n){for(;n===Ga;)Ga=Xs[--Ks],Xs[Ks]=null,Wa=Xs[--Ks],Xs[Ks]=null;for(;n===os;)os=an[--ln],an[ln]=null,sr=an[--ln],an[ln]=null,rr=an[--ln],an[ln]=null}var Zt=null,Qt=null,nt=!1,xn=null;function hm(n,i){var a=hn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function fm(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Zt=n,Qt=Pr(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Zt=n,Qt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=os!==null?{id:rr,overflow:sr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=hn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,Zt=n,Qt=null,!0):!1;default:return!1}}function zu(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Uu(n){if(nt){var i=Qt;if(i){var a=i;if(!fm(n,i)){if(zu(n))throw Error(t(418));i=Pr(a.nextSibling);var d=Zt;i&&fm(n,i)?hm(d,a):(n.flags=n.flags&-4097|2,nt=!1,Zt=n)}}else{if(zu(n))throw Error(t(418));n.flags=n.flags&-4097|2,nt=!1,Zt=n}}}function pm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Zt=n}function $a(n){if(n!==Zt)return!1;if(!nt)return pm(n),nt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Mu(n.type,n.memoizedProps)),i&&(i=Qt)){if(zu(n))throw mm(),Error(t(418));for(;i;)hm(n,i),i=Pr(i.nextSibling)}if(pm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){Qt=Pr(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}Qt=null}}else Qt=Zt?Pr(n.stateNode.nextSibling):null;return!0}function mm(){for(var n=Qt;n;)n=Pr(n.nextSibling)}function Zs(){Qt=Zt=null,nt=!1}function ju(n){xn===null?xn=[n]:xn.push(n)}var ox=V.ReactCurrentBatchConfig;function xo(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,n));var p=d,v=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===v?i.ref:(i=function(S){var N=p.refs;S===null?delete N[v]:N[v]=S},i._stringRef=v,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function qa(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function gm(n){var i=n._init;return i(n._payload)}function vm(n){function i(j,F){if(n){var W=j.deletions;W===null?(j.deletions=[F],j.flags|=16):W.push(F)}}function a(j,F){if(!n)return null;for(;F!==null;)i(j,F),F=F.sibling;return null}function d(j,F){for(j=new Map;F!==null;)F.key!==null?j.set(F.key,F):j.set(F.index,F),F=F.sibling;return j}function p(j,F){return j=Br(j,F),j.index=0,j.sibling=null,j}function v(j,F,W){return j.index=W,n?(W=j.alternate,W!==null?(W=W.index,W<F?(j.flags|=2,F):W):(j.flags|=2,F)):(j.flags|=1048576,F)}function S(j){return n&&j.alternate===null&&(j.flags|=2),j}function N(j,F,W,ue){return F===null||F.tag!==6?(F=Od(W,j.mode,ue),F.return=j,F):(F=p(F,W),F.return=j,F)}function D(j,F,W,ue){var xe=W.type;return xe===R?oe(j,F,W.props.children,ue,W.key):F!==null&&(F.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===K&&gm(xe)===F.type)?(ue=p(F,W.props),ue.ref=xo(j,F,W),ue.return=j,ue):(ue=gl(W.type,W.key,W.props,null,j.mode,ue),ue.ref=xo(j,F,W),ue.return=j,ue)}function H(j,F,W,ue){return F===null||F.tag!==4||F.stateNode.containerInfo!==W.containerInfo||F.stateNode.implementation!==W.implementation?(F=Id(W,j.mode,ue),F.return=j,F):(F=p(F,W.children||[]),F.return=j,F)}function oe(j,F,W,ue,xe){return F===null||F.tag!==7?(F=ms(W,j.mode,ue,xe),F.return=j,F):(F=p(F,W),F.return=j,F)}function ae(j,F,W){if(typeof F=="string"&&F!==""||typeof F=="number")return F=Od(""+F,j.mode,W),F.return=j,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case E:return W=gl(F.type,F.key,F.props,null,j.mode,W),W.ref=xo(j,null,F),W.return=j,W;case P:return F=Id(F,j.mode,W),F.return=j,F;case K:var ue=F._init;return ae(j,ue(F._payload),W)}if(Re(F)||Z(F))return F=ms(F,j.mode,W,null),F.return=j,F;qa(j,F)}return null}function ie(j,F,W,ue){var xe=F!==null?F.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return xe!==null?null:N(j,F,""+W,ue);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case E:return W.key===xe?D(j,F,W,ue):null;case P:return W.key===xe?H(j,F,W,ue):null;case K:return xe=W._init,ie(j,F,xe(W._payload),ue)}if(Re(W)||Z(W))return xe!==null?null:oe(j,F,W,ue,null);qa(j,W)}return null}function fe(j,F,W,ue,xe){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return j=j.get(W)||null,N(F,j,""+ue,xe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case E:return j=j.get(ue.key===null?W:ue.key)||null,D(F,j,ue,xe);case P:return j=j.get(ue.key===null?W:ue.key)||null,H(F,j,ue,xe);case K:var Ce=ue._init;return fe(j,F,W,Ce(ue._payload),xe)}if(Re(ue)||Z(ue))return j=j.get(W)||null,oe(F,j,ue,xe,null);qa(F,ue)}return null}function ge(j,F,W,ue){for(var xe=null,Ce=null,ke=F,Ae=F=0,xt=null;ke!==null&&Ae<W.length;Ae++){ke.index>Ae?(xt=ke,ke=null):xt=ke.sibling;var Ue=ie(j,ke,W[Ae],ue);if(Ue===null){ke===null&&(ke=xt);break}n&&ke&&Ue.alternate===null&&i(j,ke),F=v(Ue,F,Ae),Ce===null?xe=Ue:Ce.sibling=Ue,Ce=Ue,ke=xt}if(Ae===W.length)return a(j,ke),nt&&as(j,Ae),xe;if(ke===null){for(;Ae<W.length;Ae++)ke=ae(j,W[Ae],ue),ke!==null&&(F=v(ke,F,Ae),Ce===null?xe=ke:Ce.sibling=ke,Ce=ke);return nt&&as(j,Ae),xe}for(ke=d(j,ke);Ae<W.length;Ae++)xt=fe(ke,j,Ae,W[Ae],ue),xt!==null&&(n&&xt.alternate!==null&&ke.delete(xt.key===null?Ae:xt.key),F=v(xt,F,Ae),Ce===null?xe=xt:Ce.sibling=xt,Ce=xt);return n&&ke.forEach(function(zr){return i(j,zr)}),nt&&as(j,Ae),xe}function _e(j,F,W,ue){var xe=Z(W);if(typeof xe!="function")throw Error(t(150));if(W=xe.call(W),W==null)throw Error(t(151));for(var Ce=xe=null,ke=F,Ae=F=0,xt=null,Ue=W.next();ke!==null&&!Ue.done;Ae++,Ue=W.next()){ke.index>Ae?(xt=ke,ke=null):xt=ke.sibling;var zr=ie(j,ke,Ue.value,ue);if(zr===null){ke===null&&(ke=xt);break}n&&ke&&zr.alternate===null&&i(j,ke),F=v(zr,F,Ae),Ce===null?xe=zr:Ce.sibling=zr,Ce=zr,ke=xt}if(Ue.done)return a(j,ke),nt&&as(j,Ae),xe;if(ke===null){for(;!Ue.done;Ae++,Ue=W.next())Ue=ae(j,Ue.value,ue),Ue!==null&&(F=v(Ue,F,Ae),Ce===null?xe=Ue:Ce.sibling=Ue,Ce=Ue);return nt&&as(j,Ae),xe}for(ke=d(j,ke);!Ue.done;Ae++,Ue=W.next())Ue=fe(ke,j,Ae,Ue.value,ue),Ue!==null&&(n&&Ue.alternate!==null&&ke.delete(Ue.key===null?Ae:Ue.key),F=v(Ue,F,Ae),Ce===null?xe=Ue:Ce.sibling=Ue,Ce=Ue);return n&&ke.forEach(function(Bx){return i(j,Bx)}),nt&&as(j,Ae),xe}function ut(j,F,W,ue){if(typeof W=="object"&&W!==null&&W.type===R&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case E:e:{for(var xe=W.key,Ce=F;Ce!==null;){if(Ce.key===xe){if(xe=W.type,xe===R){if(Ce.tag===7){a(j,Ce.sibling),F=p(Ce,W.props.children),F.return=j,j=F;break e}}else if(Ce.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===K&&gm(xe)===Ce.type){a(j,Ce.sibling),F=p(Ce,W.props),F.ref=xo(j,Ce,W),F.return=j,j=F;break e}a(j,Ce);break}else i(j,Ce);Ce=Ce.sibling}W.type===R?(F=ms(W.props.children,j.mode,ue,W.key),F.return=j,j=F):(ue=gl(W.type,W.key,W.props,null,j.mode,ue),ue.ref=xo(j,F,W),ue.return=j,j=ue)}return S(j);case P:e:{for(Ce=W.key;F!==null;){if(F.key===Ce)if(F.tag===4&&F.stateNode.containerInfo===W.containerInfo&&F.stateNode.implementation===W.implementation){a(j,F.sibling),F=p(F,W.children||[]),F.return=j,j=F;break e}else{a(j,F);break}else i(j,F);F=F.sibling}F=Id(W,j.mode,ue),F.return=j,j=F}return S(j);case K:return Ce=W._init,ut(j,F,Ce(W._payload),ue)}if(Re(W))return ge(j,F,W,ue);if(Z(W))return _e(j,F,W,ue);qa(j,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,F!==null&&F.tag===6?(a(j,F.sibling),F=p(F,W),F.return=j,j=F):(a(j,F),F=Od(W,j.mode,ue),F.return=j,j=F),S(j)):a(j,F)}return ut}var Qs=vm(!0),ym=vm(!1),Ha=Ar(null),Ya=null,Js=null,Gu=null;function Wu(){Gu=Js=Ya=null}function $u(n){var i=Ha.current;Je(Ha),n._currentValue=i}function qu(n,i,a){for(;n!==null;){var d=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),n===a)break;n=n.return}}function ei(n,i){Ya=n,Gu=Js=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Gt=!0),n.firstContext=null)}function cn(n){var i=n._currentValue;if(Gu!==n)if(n={context:n,memoizedValue:i,next:null},Js===null){if(Ya===null)throw Error(t(308));Js=n,Ya.dependencies={lanes:0,firstContext:n}}else Js=Js.next=n;return i}var ls=null;function Hu(n){ls===null?ls=[n]:ls.push(n)}function _m(n,i,a,d){var p=i.interleaved;return p===null?(a.next=a,Hu(i)):(a.next=p.next,p.next=a),i.interleaved=a,ir(n,d)}function ir(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Mr=!1;function Yu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function or(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Or(n,i,a){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(ze&2)!==0){var p=d.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),d.pending=i,ir(n,a)}return p=d.interleaved,p===null?(i.next=i,Hu(d)):(i.next=p.next,p.next=i),d.interleaved=i,ir(n,a)}function Xa(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var d=i.lanes;d&=n.pendingLanes,a|=d,i.lanes=a,lu(n,a)}}function xm(n,i){var a=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var p=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var S={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};v===null?p=v=S:v=v.next=S,a=a.next}while(a!==null);v===null?p=v=i:v=v.next=i}else p=v=i;a={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:d.shared,effects:d.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Ka(n,i,a,d){var p=n.updateQueue;Mr=!1;var v=p.firstBaseUpdate,S=p.lastBaseUpdate,N=p.shared.pending;if(N!==null){p.shared.pending=null;var D=N,H=D.next;D.next=null,S===null?v=H:S.next=H,S=D;var oe=n.alternate;oe!==null&&(oe=oe.updateQueue,N=oe.lastBaseUpdate,N!==S&&(N===null?oe.firstBaseUpdate=H:N.next=H,oe.lastBaseUpdate=D))}if(v!==null){var ae=p.baseState;S=0,oe=H=D=null,N=v;do{var ie=N.lane,fe=N.eventTime;if((d&ie)===ie){oe!==null&&(oe=oe.next={eventTime:fe,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var ge=n,_e=N;switch(ie=i,fe=a,_e.tag){case 1:if(ge=_e.payload,typeof ge=="function"){ae=ge.call(fe,ae,ie);break e}ae=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=_e.payload,ie=typeof ge=="function"?ge.call(fe,ae,ie):ge,ie==null)break e;ae=X({},ae,ie);break e;case 2:Mr=!0}}N.callback!==null&&N.lane!==0&&(n.flags|=64,ie=p.effects,ie===null?p.effects=[N]:ie.push(N))}else fe={eventTime:fe,lane:ie,tag:N.tag,payload:N.payload,callback:N.callback,next:null},oe===null?(H=oe=fe,D=ae):oe=oe.next=fe,S|=ie;if(N=N.next,N===null){if(N=p.shared.pending,N===null)break;ie=N,N=ie.next,ie.next=null,p.lastBaseUpdate=ie,p.shared.pending=null}}while(!0);if(oe===null&&(D=ae),p.baseState=D,p.firstBaseUpdate=H,p.lastBaseUpdate=oe,i=p.shared.interleaved,i!==null){p=i;do S|=p.lane,p=p.next;while(p!==i)}else v===null&&(p.shared.lanes=0);ds|=S,n.lanes=S,n.memoizedState=ae}}function Sm(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var d=n[i],p=d.callback;if(p!==null){if(d.callback=null,d=a,typeof p!="function")throw Error(t(191,p));p.call(d)}}}var So={},jn=Ar(So),bo=Ar(So),To=Ar(So);function cs(n){if(n===So)throw Error(t(174));return n}function Xu(n,i){switch(Ke(To,i),Ke(bo,n),Ke(jn,So),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Kc(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=Kc(i,n)}Je(jn),Ke(jn,i)}function ti(){Je(jn),Je(bo),Je(To)}function bm(n){cs(To.current);var i=cs(jn.current),a=Kc(i,n.type);i!==a&&(Ke(bo,n),Ke(jn,a))}function Ku(n){bo.current===n&&(Je(jn),Je(bo))}var st=Ar(0);function Za(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Zu=[];function Qu(){for(var n=0;n<Zu.length;n++)Zu[n]._workInProgressVersionPrimary=null;Zu.length=0}var Qa=V.ReactCurrentDispatcher,Ju=V.ReactCurrentBatchConfig,us=0,it=null,mt=null,_t=null,Ja=!1,Co=!1,ko=0,ax=0;function Pt(){throw Error(t(321))}function ed(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!wn(n[a],i[a]))return!1;return!0}function td(n,i,a,d,p,v){if(us=v,it=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Qa.current=n===null||n.memoizedState===null?dx:hx,n=a(d,p),Co){v=0;do{if(Co=!1,ko=0,25<=v)throw Error(t(301));v+=1,_t=mt=null,i.updateQueue=null,Qa.current=fx,n=a(d,p)}while(Co)}if(Qa.current=nl,i=mt!==null&&mt.next!==null,us=0,_t=mt=it=null,Ja=!1,i)throw Error(t(300));return n}function nd(){var n=ko!==0;return ko=0,n}function Gn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?it.memoizedState=_t=n:_t=_t.next=n,_t}function un(){if(mt===null){var n=it.alternate;n=n!==null?n.memoizedState:null}else n=mt.next;var i=_t===null?it.memoizedState:_t.next;if(i!==null)_t=i,mt=n;else{if(n===null)throw Error(t(310));mt=n,n={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},_t===null?it.memoizedState=_t=n:_t=_t.next=n}return _t}function Eo(n,i){return typeof i=="function"?i(n):i}function rd(n){var i=un(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=mt,p=d.baseQueue,v=a.pending;if(v!==null){if(p!==null){var S=p.next;p.next=v.next,v.next=S}d.baseQueue=p=v,a.pending=null}if(p!==null){v=p.next,d=d.baseState;var N=S=null,D=null,H=v;do{var oe=H.lane;if((us&oe)===oe)D!==null&&(D=D.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),d=H.hasEagerState?H.eagerState:n(d,H.action);else{var ae={lane:oe,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};D===null?(N=D=ae,S=d):D=D.next=ae,it.lanes|=oe,ds|=oe}H=H.next}while(H!==null&&H!==v);D===null?S=d:D.next=N,wn(d,i.memoizedState)||(Gt=!0),i.memoizedState=d,i.baseState=S,i.baseQueue=D,a.lastRenderedState=d}if(n=a.interleaved,n!==null){p=n;do v=p.lane,it.lanes|=v,ds|=v,p=p.next;while(p!==n)}else p===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function sd(n){var i=un(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=a.dispatch,p=a.pending,v=i.memoizedState;if(p!==null){a.pending=null;var S=p=p.next;do v=n(v,S.action),S=S.next;while(S!==p);wn(v,i.memoizedState)||(Gt=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),a.lastRenderedState=v}return[v,d]}function Tm(){}function Cm(n,i){var a=it,d=un(),p=i(),v=!wn(d.memoizedState,p);if(v&&(d.memoizedState=p,Gt=!0),d=d.queue,id(Pm.bind(null,a,d,n),[n]),d.getSnapshot!==i||v||_t!==null&&_t.memoizedState.tag&1){if(a.flags|=2048,Po(9,Em.bind(null,a,d,p,i),void 0,null),wt===null)throw Error(t(349));(us&30)!==0||km(a,i,p)}return p}function km(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Em(n,i,a,d){i.value=a,i.getSnapshot=d,Am(i)&&Nm(n)}function Pm(n,i,a){return a(function(){Am(i)&&Nm(n)})}function Am(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!wn(n,a)}catch{return!0}}function Nm(n){var i=ir(n,1);i!==null&&Cn(i,n,1,-1)}function Rm(n){var i=Gn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:n},i.queue=n,n=n.dispatch=ux.bind(null,it,n),[i.memoizedState,n]}function Po(n,i,a,d){return n={tag:n,create:i,destroy:a,deps:d,next:null},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(d=a.next,a.next=n,n.next=d,i.lastEffect=n)),n}function Mm(){return un().memoizedState}function el(n,i,a,d){var p=Gn();it.flags|=n,p.memoizedState=Po(1|i,a,void 0,d===void 0?null:d)}function tl(n,i,a,d){var p=un();d=d===void 0?null:d;var v=void 0;if(mt!==null){var S=mt.memoizedState;if(v=S.destroy,d!==null&&ed(d,S.deps)){p.memoizedState=Po(i,a,v,d);return}}it.flags|=n,p.memoizedState=Po(1|i,a,v,d)}function Om(n,i){return el(8390656,8,n,i)}function id(n,i){return tl(2048,8,n,i)}function Im(n,i){return tl(4,2,n,i)}function Dm(n,i){return tl(4,4,n,i)}function Lm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Fm(n,i,a){return a=a!=null?a.concat([n]):null,tl(4,4,Lm.bind(null,i,n),a)}function od(){}function Vm(n,i){var a=un();i=i===void 0?null:i;var d=a.memoizedState;return d!==null&&i!==null&&ed(i,d[1])?d[0]:(a.memoizedState=[n,i],n)}function Bm(n,i){var a=un();i=i===void 0?null:i;var d=a.memoizedState;return d!==null&&i!==null&&ed(i,d[1])?d[0]:(n=n(),a.memoizedState=[n,i],n)}function zm(n,i,a){return(us&21)===0?(n.baseState&&(n.baseState=!1,Gt=!0),n.memoizedState=a):(wn(a,i)||(a=gp(),it.lanes|=a,ds|=a,n.baseState=!0),i)}function lx(n,i){var a=$e;$e=a!==0&&4>a?a:4,n(!0);var d=Ju.transition;Ju.transition={};try{n(!1),i()}finally{$e=a,Ju.transition=d}}function Um(){return un().memoizedState}function cx(n,i,a){var d=Fr(n);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},jm(n))Gm(i,a);else if(a=_m(n,i,a,d),a!==null){var p=Lt();Cn(a,n,d,p),Wm(a,i,d)}}function ux(n,i,a){var d=Fr(n),p={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(jm(n))Gm(i,p);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var S=i.lastRenderedState,N=v(S,a);if(p.hasEagerState=!0,p.eagerState=N,wn(N,S)){var D=i.interleaved;D===null?(p.next=p,Hu(i)):(p.next=D.next,D.next=p),i.interleaved=p;return}}catch{}finally{}a=_m(n,i,p,d),a!==null&&(p=Lt(),Cn(a,n,d,p),Wm(a,i,d))}}function jm(n){var i=n.alternate;return n===it||i!==null&&i===it}function Gm(n,i){Co=Ja=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Wm(n,i,a){if((a&4194240)!==0){var d=i.lanes;d&=n.pendingLanes,a|=d,i.lanes=a,lu(n,a)}}var nl={readContext:cn,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},dx={readContext:cn,useCallback:function(n,i){return Gn().memoizedState=[n,i===void 0?null:i],n},useContext:cn,useEffect:Om,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,el(4194308,4,Lm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return el(4194308,4,n,i)},useInsertionEffect:function(n,i){return el(4,2,n,i)},useMemo:function(n,i){var a=Gn();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var d=Gn();return i=a!==void 0?a(i):i,d.memoizedState=d.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},d.queue=n,n=n.dispatch=cx.bind(null,it,n),[d.memoizedState,n]},useRef:function(n){var i=Gn();return n={current:n},i.memoizedState=n},useState:Rm,useDebugValue:od,useDeferredValue:function(n){return Gn().memoizedState=n},useTransition:function(){var n=Rm(!1),i=n[0];return n=lx.bind(null,n[1]),Gn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var d=it,p=Gn();if(nt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),wt===null)throw Error(t(349));(us&30)!==0||km(d,i,a)}p.memoizedState=a;var v={value:a,getSnapshot:i};return p.queue=v,Om(Pm.bind(null,d,v,n),[n]),d.flags|=2048,Po(9,Em.bind(null,d,v,a,i),void 0,null),a},useId:function(){var n=Gn(),i=wt.identifierPrefix;if(nt){var a=sr,d=rr;a=(d&~(1<<32-_n(d)-1)).toString(32)+a,i=":"+i+"R"+a,a=ko++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=ax++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},hx={readContext:cn,useCallback:Vm,useContext:cn,useEffect:id,useImperativeHandle:Fm,useInsertionEffect:Im,useLayoutEffect:Dm,useMemo:Bm,useReducer:rd,useRef:Mm,useState:function(){return rd(Eo)},useDebugValue:od,useDeferredValue:function(n){var i=un();return zm(i,mt.memoizedState,n)},useTransition:function(){var n=rd(Eo)[0],i=un().memoizedState;return[n,i]},useMutableSource:Tm,useSyncExternalStore:Cm,useId:Um,unstable_isNewReconciler:!1},fx={readContext:cn,useCallback:Vm,useContext:cn,useEffect:id,useImperativeHandle:Fm,useInsertionEffect:Im,useLayoutEffect:Dm,useMemo:Bm,useReducer:sd,useRef:Mm,useState:function(){return sd(Eo)},useDebugValue:od,useDeferredValue:function(n){var i=un();return mt===null?i.memoizedState=n:zm(i,mt.memoizedState,n)},useTransition:function(){var n=sd(Eo)[0],i=un().memoizedState;return[n,i]},useMutableSource:Tm,useSyncExternalStore:Cm,useId:Um,unstable_isNewReconciler:!1};function Sn(n,i){if(n&&n.defaultProps){i=X({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function ad(n,i,a,d){i=n.memoizedState,a=a(d,i),a=a==null?i:X({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var rl={isMounted:function(n){return(n=n._reactInternals)?rs(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var d=Lt(),p=Fr(n),v=or(d,p);v.payload=i,a!=null&&(v.callback=a),i=Or(n,v,p),i!==null&&(Cn(i,n,p,d),Xa(i,n,p))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var d=Lt(),p=Fr(n),v=or(d,p);v.tag=1,v.payload=i,a!=null&&(v.callback=a),i=Or(n,v,p),i!==null&&(Cn(i,n,p,d),Xa(i,n,p))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Lt(),d=Fr(n),p=or(a,d);p.tag=2,i!=null&&(p.callback=i),i=Or(n,p,d),i!==null&&(Cn(i,n,d,a),Xa(i,n,d))}};function $m(n,i,a,d,p,v,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,v,S):i.prototype&&i.prototype.isPureReactComponent?!po(a,d)||!po(p,v):!0}function qm(n,i,a){var d=!1,p=Nr,v=i.contextType;return typeof v=="object"&&v!==null?v=cn(v):(p=jt(i)?is:Et.current,d=i.contextTypes,v=(d=d!=null)?Ys(n,p):Nr),i=new i(a,v),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=rl,n.stateNode=i,i._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=p,n.__reactInternalMemoizedMaskedChildContext=v),i}function Hm(n,i,a,d){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,d),i.state!==n&&rl.enqueueReplaceState(i,i.state,null)}function ld(n,i,a,d){var p=n.stateNode;p.props=a,p.state=n.memoizedState,p.refs={},Yu(n);var v=i.contextType;typeof v=="object"&&v!==null?p.context=cn(v):(v=jt(i)?is:Et.current,p.context=Ys(n,v)),p.state=n.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(ad(n,i,v,a),p.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&rl.enqueueReplaceState(p,p.state,null),Ka(n,a,p,d),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308)}function ni(n,i){try{var a="",d=i;do a+=re(d),d=d.return;while(d);var p=a}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:n,source:i,stack:p,digest:null}}function cd(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function ud(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var px=typeof WeakMap=="function"?WeakMap:Map;function Ym(n,i,a){a=or(-1,a),a.tag=3,a.payload={element:null};var d=i.value;return a.callback=function(){ul||(ul=!0,Cd=d),ud(n,i)},a}function Xm(n,i,a){a=or(-1,a),a.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var p=i.value;a.payload=function(){return d(p)},a.callback=function(){ud(n,i)}}var v=n.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(a.callback=function(){ud(n,i),typeof d!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var S=i.stack;this.componentDidCatch(i.value,{componentStack:S!==null?S:""})}),a}function Km(n,i,a){var d=n.pingCache;if(d===null){d=n.pingCache=new px;var p=new Set;d.set(i,p)}else p=d.get(i),p===void 0&&(p=new Set,d.set(i,p));p.has(a)||(p.add(a),n=Px.bind(null,n,i,a),i.then(n,n))}function Zm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Qm(n,i,a,d,p){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=or(-1,1),i.tag=2,Or(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=p,n)}var mx=V.ReactCurrentOwner,Gt=!1;function Dt(n,i,a,d){i.child=n===null?ym(i,null,a,d):Qs(i,n.child,a,d)}function Jm(n,i,a,d,p){a=a.render;var v=i.ref;return ei(i,p),d=td(n,i,a,d,v,p),a=nd(),n!==null&&!Gt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~p,ar(n,i,p)):(nt&&a&&Vu(i),i.flags|=1,Dt(n,i,d,p),i.child)}function eg(n,i,a,d,p){if(n===null){var v=a.type;return typeof v=="function"&&!Md(v)&&v.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=v,tg(n,i,v,d,p)):(n=gl(a.type,null,d,i,i.mode,p),n.ref=i.ref,n.return=i,i.child=n)}if(v=n.child,(n.lanes&p)===0){var S=v.memoizedProps;if(a=a.compare,a=a!==null?a:po,a(S,d)&&n.ref===i.ref)return ar(n,i,p)}return i.flags|=1,n=Br(v,d),n.ref=i.ref,n.return=i,i.child=n}function tg(n,i,a,d,p){if(n!==null){var v=n.memoizedProps;if(po(v,d)&&n.ref===i.ref)if(Gt=!1,i.pendingProps=d=v,(n.lanes&p)!==0)(n.flags&131072)!==0&&(Gt=!0);else return i.lanes=n.lanes,ar(n,i,p)}return dd(n,i,a,d,p)}function ng(n,i,a){var d=i.pendingProps,p=d.children,v=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(si,Jt),Jt|=a;else{if((a&1073741824)===0)return n=v!==null?v.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ke(si,Jt),Jt|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=v!==null?v.baseLanes:a,Ke(si,Jt),Jt|=d}else v!==null?(d=v.baseLanes|a,i.memoizedState=null):d=a,Ke(si,Jt),Jt|=d;return Dt(n,i,p,a),i.child}function rg(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function dd(n,i,a,d,p){var v=jt(a)?is:Et.current;return v=Ys(i,v),ei(i,p),a=td(n,i,a,d,v,p),d=nd(),n!==null&&!Gt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~p,ar(n,i,p)):(nt&&d&&Vu(i),i.flags|=1,Dt(n,i,a,p),i.child)}function sg(n,i,a,d,p){if(jt(a)){var v=!0;Ua(i)}else v=!1;if(ei(i,p),i.stateNode===null)il(n,i),qm(i,a,d),ld(i,a,d,p),d=!0;else if(n===null){var S=i.stateNode,N=i.memoizedProps;S.props=N;var D=S.context,H=a.contextType;typeof H=="object"&&H!==null?H=cn(H):(H=jt(a)?is:Et.current,H=Ys(i,H));var oe=a.getDerivedStateFromProps,ae=typeof oe=="function"||typeof S.getSnapshotBeforeUpdate=="function";ae||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N!==d||D!==H)&&Hm(i,S,d,H),Mr=!1;var ie=i.memoizedState;S.state=ie,Ka(i,d,S,p),D=i.memoizedState,N!==d||ie!==D||Ut.current||Mr?(typeof oe=="function"&&(ad(i,a,oe,d),D=i.memoizedState),(N=Mr||$m(i,a,N,d,ie,D,H))?(ae||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(i.flags|=4194308)):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=D),S.props=d,S.state=D,S.context=H,d=N):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{S=i.stateNode,wm(n,i),N=i.memoizedProps,H=i.type===i.elementType?N:Sn(i.type,N),S.props=H,ae=i.pendingProps,ie=S.context,D=a.contextType,typeof D=="object"&&D!==null?D=cn(D):(D=jt(a)?is:Et.current,D=Ys(i,D));var fe=a.getDerivedStateFromProps;(oe=typeof fe=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N!==ae||ie!==D)&&Hm(i,S,d,D),Mr=!1,ie=i.memoizedState,S.state=ie,Ka(i,d,S,p);var ge=i.memoizedState;N!==ae||ie!==ge||Ut.current||Mr?(typeof fe=="function"&&(ad(i,a,fe,d),ge=i.memoizedState),(H=Mr||$m(i,a,H,d,ie,ge,D)||!1)?(oe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(d,ge,D),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(d,ge,D)),typeof S.componentDidUpdate=="function"&&(i.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof S.componentDidUpdate!="function"||N===n.memoizedProps&&ie===n.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&ie===n.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=ge),S.props=d,S.state=ge,S.context=D,d=H):(typeof S.componentDidUpdate!="function"||N===n.memoizedProps&&ie===n.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&ie===n.memoizedState||(i.flags|=1024),d=!1)}return hd(n,i,a,d,v,p)}function hd(n,i,a,d,p,v){rg(n,i);var S=(i.flags&128)!==0;if(!d&&!S)return p&&cm(i,a,!1),ar(n,i,v);d=i.stateNode,mx.current=i;var N=S&&typeof a.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,n!==null&&S?(i.child=Qs(i,n.child,null,v),i.child=Qs(i,null,N,v)):Dt(n,i,N,v),i.memoizedState=d.state,p&&cm(i,a,!0),i.child}function ig(n){var i=n.stateNode;i.pendingContext?am(n,i.pendingContext,i.pendingContext!==i.context):i.context&&am(n,i.context,!1),Xu(n,i.containerInfo)}function og(n,i,a,d,p){return Zs(),ju(p),i.flags|=256,Dt(n,i,a,d),i.child}var fd={dehydrated:null,treeContext:null,retryLane:0};function pd(n){return{baseLanes:n,cachePool:null,transitions:null}}function ag(n,i,a){var d=i.pendingProps,p=st.current,v=!1,S=(i.flags&128)!==0,N;if((N=S)||(N=n!==null&&n.memoizedState===null?!1:(p&2)!==0),N?(v=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(p|=1),Ke(st,p&1),n===null)return Uu(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(S=d.children,n=d.fallback,v?(d=i.mode,v=i.child,S={mode:"hidden",children:S},(d&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=vl(S,d,0,null),n=ms(n,d,a,null),v.return=i,n.return=i,v.sibling=n,i.child=v,i.child.memoizedState=pd(a),i.memoizedState=fd,n):md(i,S));if(p=n.memoizedState,p!==null&&(N=p.dehydrated,N!==null))return gx(n,i,S,d,N,p,a);if(v){v=d.fallback,S=i.mode,p=n.child,N=p.sibling;var D={mode:"hidden",children:d.children};return(S&1)===0&&i.child!==p?(d=i.child,d.childLanes=0,d.pendingProps=D,i.deletions=null):(d=Br(p,D),d.subtreeFlags=p.subtreeFlags&14680064),N!==null?v=Br(N,v):(v=ms(v,S,a,null),v.flags|=2),v.return=i,d.return=i,d.sibling=v,i.child=d,d=v,v=i.child,S=n.child.memoizedState,S=S===null?pd(a):{baseLanes:S.baseLanes|a,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=n.childLanes&~a,i.memoizedState=fd,d}return v=n.child,n=v.sibling,d=Br(v,{mode:"visible",children:d.children}),(i.mode&1)===0&&(d.lanes=a),d.return=i,d.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=d,i.memoizedState=null,d}function md(n,i){return i=vl({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function sl(n,i,a,d){return d!==null&&ju(d),Qs(i,n.child,null,a),n=md(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function gx(n,i,a,d,p,v,S){if(a)return i.flags&256?(i.flags&=-257,d=cd(Error(t(422))),sl(n,i,S,d)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(v=d.fallback,p=i.mode,d=vl({mode:"visible",children:d.children},p,0,null),v=ms(v,p,S,null),v.flags|=2,d.return=i,v.return=i,d.sibling=v,i.child=d,(i.mode&1)!==0&&Qs(i,n.child,null,S),i.child.memoizedState=pd(S),i.memoizedState=fd,v);if((i.mode&1)===0)return sl(n,i,S,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var N=d.dgst;return d=N,v=Error(t(419)),d=cd(v,d,void 0),sl(n,i,S,d)}if(N=(S&n.childLanes)!==0,Gt||N){if(d=wt,d!==null){switch(S&-S){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|S))!==0?0:p,p!==0&&p!==v.retryLane&&(v.retryLane=p,ir(n,p),Cn(d,n,p,-1))}return Rd(),d=cd(Error(t(421))),sl(n,i,S,d)}return p.data==="$?"?(i.flags|=128,i.child=n.child,i=Ax.bind(null,n),p._reactRetry=i,null):(n=v.treeContext,Qt=Pr(p.nextSibling),Zt=i,nt=!0,xn=null,n!==null&&(an[ln++]=rr,an[ln++]=sr,an[ln++]=os,rr=n.id,sr=n.overflow,os=i),i=md(i,d.children),i.flags|=4096,i)}function lg(n,i,a){n.lanes|=i;var d=n.alternate;d!==null&&(d.lanes|=i),qu(n.return,i,a)}function gd(n,i,a,d,p){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:p}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=a,v.tailMode=p)}function cg(n,i,a){var d=i.pendingProps,p=d.revealOrder,v=d.tail;if(Dt(n,i,d.children,a),d=st.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&lg(n,a,i);else if(n.tag===19)lg(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(Ke(st,d),(i.mode&1)===0)i.memoizedState=null;else switch(p){case"forwards":for(a=i.child,p=null;a!==null;)n=a.alternate,n!==null&&Za(n)===null&&(p=a),a=a.sibling;a=p,a===null?(p=i.child,i.child=null):(p=a.sibling,a.sibling=null),gd(i,!1,p,a,v);break;case"backwards":for(a=null,p=i.child,i.child=null;p!==null;){if(n=p.alternate,n!==null&&Za(n)===null){i.child=p;break}n=p.sibling,p.sibling=a,a=p,p=n}gd(i,!0,a,null,v);break;case"together":gd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function il(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function ar(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),ds|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=Br(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Br(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function vx(n,i,a){switch(i.tag){case 3:ig(i),Zs();break;case 5:bm(i);break;case 1:jt(i.type)&&Ua(i);break;case 4:Xu(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,p=i.memoizedProps.value;Ke(Ha,d._currentValue),d._currentValue=p;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(Ke(st,st.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?ag(n,i,a):(Ke(st,st.current&1),n=ar(n,i,a),n!==null?n.sibling:null);Ke(st,st.current&1);break;case 19:if(d=(a&i.childLanes)!==0,(n.flags&128)!==0){if(d)return cg(n,i,a);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ke(st,st.current),d)break;return null;case 22:case 23:return i.lanes=0,ng(n,i,a)}return ar(n,i,a)}var ug,vd,dg,hg;ug=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},vd=function(){},dg=function(n,i,a,d){var p=n.memoizedProps;if(p!==d){n=i.stateNode,cs(jn.current);var v=null;switch(a){case"input":p=we(n,p),d=we(n,d),v=[];break;case"select":p=X({},p,{value:void 0}),d=X({},d,{value:void 0}),v=[];break;case"textarea":p=Oe(n,p),d=Oe(n,d),v=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=Va)}Zc(a,d);var S;a=null;for(H in p)if(!d.hasOwnProperty(H)&&p.hasOwnProperty(H)&&p[H]!=null)if(H==="style"){var N=p[H];for(S in N)N.hasOwnProperty(S)&&(a||(a={}),a[S]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(o.hasOwnProperty(H)?v||(v=[]):(v=v||[]).push(H,null));for(H in d){var D=d[H];if(N=p!=null?p[H]:void 0,d.hasOwnProperty(H)&&D!==N&&(D!=null||N!=null))if(H==="style")if(N){for(S in N)!N.hasOwnProperty(S)||D&&D.hasOwnProperty(S)||(a||(a={}),a[S]="");for(S in D)D.hasOwnProperty(S)&&N[S]!==D[S]&&(a||(a={}),a[S]=D[S])}else a||(v||(v=[]),v.push(H,a)),a=D;else H==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,N=N?N.__html:void 0,D!=null&&N!==D&&(v=v||[]).push(H,D)):H==="children"?typeof D!="string"&&typeof D!="number"||(v=v||[]).push(H,""+D):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(o.hasOwnProperty(H)?(D!=null&&H==="onScroll"&&Qe("scroll",n),v||N===D||(v=[])):(v=v||[]).push(H,D))}a&&(v=v||[]).push("style",a);var H=v;(i.updateQueue=H)&&(i.flags|=4)}},hg=function(n,i,a,d){a!==d&&(i.flags|=4)};function Ao(n,i){if(!nt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function At(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,d=0;if(i)for(var p=n.child;p!==null;)a|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)a|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=d,n.childLanes=a,i}function yx(n,i,a){var d=i.pendingProps;switch(Bu(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(i),null;case 1:return jt(i.type)&&za(),At(i),null;case 3:return d=i.stateNode,ti(),Je(Ut),Je(Et),Qu(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&($a(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,xn!==null&&(Pd(xn),xn=null))),vd(n,i),At(i),null;case 5:Ku(i);var p=cs(To.current);if(a=i.type,n!==null&&i.stateNode!=null)dg(n,i,a,d,p),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(t(166));return At(i),null}if(n=cs(jn.current),$a(i)){d=i.stateNode,a=i.type;var v=i.memoizedProps;switch(d[Un]=i,d[_o]=v,n=(i.mode&1)!==0,a){case"dialog":Qe("cancel",d),Qe("close",d);break;case"iframe":case"object":case"embed":Qe("load",d);break;case"video":case"audio":for(p=0;p<go.length;p++)Qe(go[p],d);break;case"source":Qe("error",d);break;case"img":case"image":case"link":Qe("error",d),Qe("load",d);break;case"details":Qe("toggle",d);break;case"input":se(d,v),Qe("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!v.multiple},Qe("invalid",d);break;case"textarea":bt(d,v),Qe("invalid",d)}Zc(a,v),p=null;for(var S in v)if(v.hasOwnProperty(S)){var N=v[S];S==="children"?typeof N=="string"?d.textContent!==N&&(v.suppressHydrationWarning!==!0&&Fa(d.textContent,N,n),p=["children",N]):typeof N=="number"&&d.textContent!==""+N&&(v.suppressHydrationWarning!==!0&&Fa(d.textContent,N,n),p=["children",""+N]):o.hasOwnProperty(S)&&N!=null&&S==="onScroll"&&Qe("scroll",d)}switch(a){case"input":Fe(d),De(d,v,!0);break;case"textarea":Fe(d),er(d);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(d.onclick=Va)}d=p,i.updateQueue=d,d!==null&&(i.flags|=4)}else{S=p.nodeType===9?p:p.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ls(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=S.createElement(a,{is:d.is}):(n=S.createElement(a),a==="select"&&(S=n,d.multiple?S.multiple=!0:d.size&&(S.size=d.size))):n=S.createElementNS(n,a),n[Un]=i,n[_o]=d,ug(n,i,!1,!1),i.stateNode=n;e:{switch(S=Qc(a,d),a){case"dialog":Qe("cancel",n),Qe("close",n),p=d;break;case"iframe":case"object":case"embed":Qe("load",n),p=d;break;case"video":case"audio":for(p=0;p<go.length;p++)Qe(go[p],n);p=d;break;case"source":Qe("error",n),p=d;break;case"img":case"image":case"link":Qe("error",n),Qe("load",n),p=d;break;case"details":Qe("toggle",n),p=d;break;case"input":se(n,d),p=we(n,d),Qe("invalid",n);break;case"option":p=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},p=X({},d,{value:void 0}),Qe("invalid",n);break;case"textarea":bt(n,d),p=Oe(n,d),Qe("invalid",n);break;default:p=d}Zc(a,p),N=p;for(v in N)if(N.hasOwnProperty(v)){var D=N[v];v==="style"?tp(n,D):v==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Jf(n,D)):v==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&Ki(n,D):typeof D=="number"&&Ki(n,""+D):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?D!=null&&v==="onScroll"&&Qe("scroll",n):D!=null&&L(n,v,D,S))}switch(a){case"input":Fe(n),De(n,d,!1);break;case"textarea":Fe(n),er(n);break;case"option":d.value!=null&&n.setAttribute("value",""+Q(d.value));break;case"select":n.multiple=!!d.multiple,v=d.value,v!=null?Pe(n,!!d.multiple,v,!1):d.defaultValue!=null&&Pe(n,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(n.onclick=Va)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return At(i),null;case 6:if(n&&i.stateNode!=null)hg(n,i,n.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(t(166));if(a=cs(To.current),cs(jn.current),$a(i)){if(d=i.stateNode,a=i.memoizedProps,d[Un]=i,(v=d.nodeValue!==a)&&(n=Zt,n!==null))switch(n.tag){case 3:Fa(d.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Fa(d.nodeValue,a,(n.mode&1)!==0)}v&&(i.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[Un]=i,i.stateNode=d}return At(i),null;case 13:if(Je(st),d=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nt&&Qt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)mm(),Zs(),i.flags|=98560,v=!1;else if(v=$a(i),d!==null&&d.dehydrated!==null){if(n===null){if(!v)throw Error(t(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Un]=i}else Zs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;At(i),v=!1}else xn!==null&&(Pd(xn),xn=null),v=!0;if(!v)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(st.current&1)!==0?gt===0&&(gt=3):Rd())),i.updateQueue!==null&&(i.flags|=4),At(i),null);case 4:return ti(),vd(n,i),n===null&&vo(i.stateNode.containerInfo),At(i),null;case 10:return $u(i.type._context),At(i),null;case 17:return jt(i.type)&&za(),At(i),null;case 19:if(Je(st),v=i.memoizedState,v===null)return At(i),null;if(d=(i.flags&128)!==0,S=v.rendering,S===null)if(d)Ao(v,!1);else{if(gt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(S=Za(n),S!==null){for(i.flags|=128,Ao(v,!1),d=S.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=a,a=i.child;a!==null;)v=a,n=d,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=n,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,n=S.dependencies,v.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ke(st,st.current&1|2),i.child}n=n.sibling}v.tail!==null&&ct()>ii&&(i.flags|=128,d=!0,Ao(v,!1),i.lanes=4194304)}else{if(!d)if(n=Za(S),n!==null){if(i.flags|=128,d=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ao(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!nt)return At(i),null}else 2*ct()-v.renderingStartTime>ii&&a!==1073741824&&(i.flags|=128,d=!0,Ao(v,!1),i.lanes=4194304);v.isBackwards?(S.sibling=i.child,i.child=S):(a=v.last,a!==null?a.sibling=S:i.child=S,v.last=S)}return v.tail!==null?(i=v.tail,v.rendering=i,v.tail=i.sibling,v.renderingStartTime=ct(),i.sibling=null,a=st.current,Ke(st,d?a&1|2:a&1),i):(At(i),null);case 22:case 23:return Nd(),d=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(i.flags|=8192),d&&(i.mode&1)!==0?(Jt&1073741824)!==0&&(At(i),i.subtreeFlags&6&&(i.flags|=8192)):At(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function _x(n,i){switch(Bu(i),i.tag){case 1:return jt(i.type)&&za(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ti(),Je(Ut),Je(Et),Qu(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Ku(i),null;case 13:if(Je(st),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Zs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Je(st),null;case 4:return ti(),null;case 10:return $u(i.type._context),null;case 22:case 23:return Nd(),null;case 24:return null;default:return null}}var ol=!1,Nt=!1,wx=typeof WeakSet=="function"?WeakSet:Set,me=null;function ri(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){ot(n,i,d)}else a.current=null}function yd(n,i,a){try{a()}catch(d){ot(n,i,d)}}var fg=!1;function xx(n,i){if(Nu=ka,n=$p(),Su(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var p=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var S=0,N=-1,D=-1,H=0,oe=0,ae=n,ie=null;t:for(;;){for(var fe;ae!==a||p!==0&&ae.nodeType!==3||(N=S+p),ae!==v||d!==0&&ae.nodeType!==3||(D=S+d),ae.nodeType===3&&(S+=ae.nodeValue.length),(fe=ae.firstChild)!==null;)ie=ae,ae=fe;for(;;){if(ae===n)break t;if(ie===a&&++H===p&&(N=S),ie===v&&++oe===d&&(D=S),(fe=ae.nextSibling)!==null)break;ae=ie,ie=ae.parentNode}ae=fe}a=N===-1||D===-1?null:{start:N,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ru={focusedElem:n,selectionRange:a},ka=!1,me=i;me!==null;)if(i=me,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,me=n;else for(;me!==null;){i=me;try{var ge=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var _e=ge.memoizedProps,ut=ge.memoizedState,j=i.stateNode,F=j.getSnapshotBeforeUpdate(i.elementType===i.type?_e:Sn(i.type,_e),ut);j.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var W=i.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ue){ot(i,i.return,ue)}if(n=i.sibling,n!==null){n.return=i.return,me=n;break}me=i.return}return ge=fg,fg=!1,ge}function No(n,i,a){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&n)===n){var v=p.destroy;p.destroy=void 0,v!==void 0&&yd(i,a,v)}p=p.next}while(p!==d)}}function al(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var d=a.create;a.destroy=d()}a=a.next}while(a!==i)}}function _d(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function pg(n){var i=n.alternate;i!==null&&(n.alternate=null,pg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Un],delete i[_o],delete i[Du],delete i[rx],delete i[sx])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function mg(n){return n.tag===5||n.tag===3||n.tag===4}function gg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||mg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function wd(n,i,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Va));else if(d!==4&&(n=n.child,n!==null))for(wd(n,i,a),n=n.sibling;n!==null;)wd(n,i,a),n=n.sibling}function xd(n,i,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(xd(n,i,a),n=n.sibling;n!==null;)xd(n,i,a),n=n.sibling}var Tt=null,bn=!1;function Ir(n,i,a){for(a=a.child;a!==null;)vg(n,i,a),a=a.sibling}function vg(n,i,a){if(zn&&typeof zn.onCommitFiberUnmount=="function")try{zn.onCommitFiberUnmount(wa,a)}catch{}switch(a.tag){case 5:Nt||ri(a,i);case 6:var d=Tt,p=bn;Tt=null,Ir(n,i,a),Tt=d,bn=p,Tt!==null&&(bn?(n=Tt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Tt.removeChild(a.stateNode));break;case 18:Tt!==null&&(bn?(n=Tt,a=a.stateNode,n.nodeType===8?Iu(n.parentNode,a):n.nodeType===1&&Iu(n,a),ao(n)):Iu(Tt,a.stateNode));break;case 4:d=Tt,p=bn,Tt=a.stateNode.containerInfo,bn=!0,Ir(n,i,a),Tt=d,bn=p;break;case 0:case 11:case 14:case 15:if(!Nt&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var v=p,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&yd(a,i,S),p=p.next}while(p!==d)}Ir(n,i,a);break;case 1:if(!Nt&&(ri(a,i),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(N){ot(a,i,N)}Ir(n,i,a);break;case 21:Ir(n,i,a);break;case 22:a.mode&1?(Nt=(d=Nt)||a.memoizedState!==null,Ir(n,i,a),Nt=d):Ir(n,i,a);break;default:Ir(n,i,a)}}function yg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new wx),i.forEach(function(d){var p=Nx.bind(null,n,d);a.has(d)||(a.add(d),d.then(p,p))})}}function Tn(n,i){var a=i.deletions;if(a!==null)for(var d=0;d<a.length;d++){var p=a[d];try{var v=n,S=i,N=S;e:for(;N!==null;){switch(N.tag){case 5:Tt=N.stateNode,bn=!1;break e;case 3:Tt=N.stateNode.containerInfo,bn=!0;break e;case 4:Tt=N.stateNode.containerInfo,bn=!0;break e}N=N.return}if(Tt===null)throw Error(t(160));vg(v,S,p),Tt=null,bn=!1;var D=p.alternate;D!==null&&(D.return=null),p.return=null}catch(H){ot(p,i,H)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)_g(i,n),i=i.sibling}function _g(n,i){var a=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Tn(i,n),Wn(n),d&4){try{No(3,n,n.return),al(3,n)}catch(_e){ot(n,n.return,_e)}try{No(5,n,n.return)}catch(_e){ot(n,n.return,_e)}}break;case 1:Tn(i,n),Wn(n),d&512&&a!==null&&ri(a,a.return);break;case 5:if(Tn(i,n),Wn(n),d&512&&a!==null&&ri(a,a.return),n.flags&32){var p=n.stateNode;try{Ki(p,"")}catch(_e){ot(n,n.return,_e)}}if(d&4&&(p=n.stateNode,p!=null)){var v=n.memoizedProps,S=a!==null?a.memoizedProps:v,N=n.type,D=n.updateQueue;if(n.updateQueue=null,D!==null)try{N==="input"&&v.type==="radio"&&v.name!=null&&he(p,v),Qc(N,S);var H=Qc(N,v);for(S=0;S<D.length;S+=2){var oe=D[S],ae=D[S+1];oe==="style"?tp(p,ae):oe==="dangerouslySetInnerHTML"?Jf(p,ae):oe==="children"?Ki(p,ae):L(p,oe,ae,H)}switch(N){case"input":Me(p,v);break;case"textarea":on(p,v);break;case"select":var ie=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!v.multiple;var fe=v.value;fe!=null?Pe(p,!!v.multiple,fe,!1):ie!==!!v.multiple&&(v.defaultValue!=null?Pe(p,!!v.multiple,v.defaultValue,!0):Pe(p,!!v.multiple,v.multiple?[]:"",!1))}p[_o]=v}catch(_e){ot(n,n.return,_e)}}break;case 6:if(Tn(i,n),Wn(n),d&4){if(n.stateNode===null)throw Error(t(162));p=n.stateNode,v=n.memoizedProps;try{p.nodeValue=v}catch(_e){ot(n,n.return,_e)}}break;case 3:if(Tn(i,n),Wn(n),d&4&&a!==null&&a.memoizedState.isDehydrated)try{ao(i.containerInfo)}catch(_e){ot(n,n.return,_e)}break;case 4:Tn(i,n),Wn(n);break;case 13:Tn(i,n),Wn(n),p=n.child,p.flags&8192&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(Td=ct())),d&4&&yg(n);break;case 22:if(oe=a!==null&&a.memoizedState!==null,n.mode&1?(Nt=(H=Nt)||oe,Tn(i,n),Nt=H):Tn(i,n),Wn(n),d&8192){if(H=n.memoizedState!==null,(n.stateNode.isHidden=H)&&!oe&&(n.mode&1)!==0)for(me=n,oe=n.child;oe!==null;){for(ae=me=oe;me!==null;){switch(ie=me,fe=ie.child,ie.tag){case 0:case 11:case 14:case 15:No(4,ie,ie.return);break;case 1:ri(ie,ie.return);var ge=ie.stateNode;if(typeof ge.componentWillUnmount=="function"){d=ie,a=ie.return;try{i=d,ge.props=i.memoizedProps,ge.state=i.memoizedState,ge.componentWillUnmount()}catch(_e){ot(d,a,_e)}}break;case 5:ri(ie,ie.return);break;case 22:if(ie.memoizedState!==null){Sg(ae);continue}}fe!==null?(fe.return=ie,me=fe):Sg(ae)}oe=oe.sibling}e:for(oe=null,ae=n;;){if(ae.tag===5){if(oe===null){oe=ae;try{p=ae.stateNode,H?(v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(N=ae.stateNode,D=ae.memoizedProps.style,S=D!=null&&D.hasOwnProperty("display")?D.display:null,N.style.display=ep("display",S))}catch(_e){ot(n,n.return,_e)}}}else if(ae.tag===6){if(oe===null)try{ae.stateNode.nodeValue=H?"":ae.memoizedProps}catch(_e){ot(n,n.return,_e)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===n)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===n)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===n)break e;oe===ae&&(oe=null),ae=ae.return}oe===ae&&(oe=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:Tn(i,n),Wn(n),d&4&&yg(n);break;case 21:break;default:Tn(i,n),Wn(n)}}function Wn(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(mg(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(Ki(p,""),d.flags&=-33);var v=gg(n);xd(n,v,p);break;case 3:case 4:var S=d.stateNode.containerInfo,N=gg(n);wd(n,N,S);break;default:throw Error(t(161))}}catch(D){ot(n,n.return,D)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Sx(n,i,a){me=n,wg(n)}function wg(n,i,a){for(var d=(n.mode&1)!==0;me!==null;){var p=me,v=p.child;if(p.tag===22&&d){var S=p.memoizedState!==null||ol;if(!S){var N=p.alternate,D=N!==null&&N.memoizedState!==null||Nt;N=ol;var H=Nt;if(ol=S,(Nt=D)&&!H)for(me=p;me!==null;)S=me,D=S.child,S.tag===22&&S.memoizedState!==null?bg(p):D!==null?(D.return=S,me=D):bg(p);for(;v!==null;)me=v,wg(v),v=v.sibling;me=p,ol=N,Nt=H}xg(n)}else(p.subtreeFlags&8772)!==0&&v!==null?(v.return=p,me=v):xg(n)}}function xg(n){for(;me!==null;){var i=me;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Nt||al(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!Nt)if(a===null)d.componentDidMount();else{var p=i.elementType===i.type?a.memoizedProps:Sn(i.type,a.memoizedProps);d.componentDidUpdate(p,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var v=i.updateQueue;v!==null&&Sm(i,v,d);break;case 3:var S=i.updateQueue;if(S!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Sm(i,S,a)}break;case 5:var N=i.stateNode;if(a===null&&i.flags&4){a=N;var D=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var H=i.alternate;if(H!==null){var oe=H.memoizedState;if(oe!==null){var ae=oe.dehydrated;ae!==null&&ao(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Nt||i.flags&512&&_d(i)}catch(ie){ot(i,i.return,ie)}}if(i===n){me=null;break}if(a=i.sibling,a!==null){a.return=i.return,me=a;break}me=i.return}}function Sg(n){for(;me!==null;){var i=me;if(i===n){me=null;break}var a=i.sibling;if(a!==null){a.return=i.return,me=a;break}me=i.return}}function bg(n){for(;me!==null;){var i=me;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{al(4,i)}catch(D){ot(i,a,D)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var p=i.return;try{d.componentDidMount()}catch(D){ot(i,p,D)}}var v=i.return;try{_d(i)}catch(D){ot(i,v,D)}break;case 5:var S=i.return;try{_d(i)}catch(D){ot(i,S,D)}}}catch(D){ot(i,i.return,D)}if(i===n){me=null;break}var N=i.sibling;if(N!==null){N.return=i.return,me=N;break}me=i.return}}var bx=Math.ceil,ll=V.ReactCurrentDispatcher,Sd=V.ReactCurrentOwner,dn=V.ReactCurrentBatchConfig,ze=0,wt=null,ft=null,Ct=0,Jt=0,si=Ar(0),gt=0,Ro=null,ds=0,cl=0,bd=0,Mo=null,Wt=null,Td=0,ii=1/0,lr=null,ul=!1,Cd=null,Dr=null,dl=!1,Lr=null,hl=0,Oo=0,kd=null,fl=-1,pl=0;function Lt(){return(ze&6)!==0?ct():fl!==-1?fl:fl=ct()}function Fr(n){return(n.mode&1)===0?1:(ze&2)!==0&&Ct!==0?Ct&-Ct:ox.transition!==null?(pl===0&&(pl=gp()),pl):(n=$e,n!==0||(n=window.event,n=n===void 0?16:Cp(n.type)),n)}function Cn(n,i,a,d){if(50<Oo)throw Oo=0,kd=null,Error(t(185));no(n,a,d),((ze&2)===0||n!==wt)&&(n===wt&&((ze&2)===0&&(cl|=a),gt===4&&Vr(n,Ct)),$t(n,d),a===1&&ze===0&&(i.mode&1)===0&&(ii=ct()+500,ja&&Rr()))}function $t(n,i){var a=n.callbackNode;ow(n,i);var d=ba(n,n===wt?Ct:0);if(d===0)a!==null&&fp(a),n.callbackNode=null,n.callbackPriority=0;else if(i=d&-d,n.callbackPriority!==i){if(a!=null&&fp(a),i===1)n.tag===0?ix(Cg.bind(null,n)):um(Cg.bind(null,n)),tx(function(){(ze&6)===0&&Rr()}),a=null;else{switch(vp(d)){case 1:a=iu;break;case 4:a=pp;break;case 16:a=_a;break;case 536870912:a=mp;break;default:a=_a}a=Og(a,Tg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Tg(n,i){if(fl=-1,pl=0,(ze&6)!==0)throw Error(t(327));var a=n.callbackNode;if(oi()&&n.callbackNode!==a)return null;var d=ba(n,n===wt?Ct:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||i)i=ml(n,d);else{i=d;var p=ze;ze|=2;var v=Eg();(wt!==n||Ct!==i)&&(lr=null,ii=ct()+500,fs(n,i));do try{kx();break}catch(N){kg(n,N)}while(!0);Wu(),ll.current=v,ze=p,ft!==null?i=0:(wt=null,Ct=0,i=gt)}if(i!==0){if(i===2&&(p=ou(n),p!==0&&(d=p,i=Ed(n,p))),i===1)throw a=Ro,fs(n,0),Vr(n,d),$t(n,ct()),a;if(i===6)Vr(n,d);else{if(p=n.current.alternate,(d&30)===0&&!Tx(p)&&(i=ml(n,d),i===2&&(v=ou(n),v!==0&&(d=v,i=Ed(n,v))),i===1))throw a=Ro,fs(n,0),Vr(n,d),$t(n,ct()),a;switch(n.finishedWork=p,n.finishedLanes=d,i){case 0:case 1:throw Error(t(345));case 2:ps(n,Wt,lr);break;case 3:if(Vr(n,d),(d&130023424)===d&&(i=Td+500-ct(),10<i)){if(ba(n,0)!==0)break;if(p=n.suspendedLanes,(p&d)!==d){Lt(),n.pingedLanes|=n.suspendedLanes&p;break}n.timeoutHandle=Ou(ps.bind(null,n,Wt,lr),i);break}ps(n,Wt,lr);break;case 4:if(Vr(n,d),(d&4194240)===d)break;for(i=n.eventTimes,p=-1;0<d;){var S=31-_n(d);v=1<<S,S=i[S],S>p&&(p=S),d&=~v}if(d=p,d=ct()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*bx(d/1960))-d,10<d){n.timeoutHandle=Ou(ps.bind(null,n,Wt,lr),d);break}ps(n,Wt,lr);break;case 5:ps(n,Wt,lr);break;default:throw Error(t(329))}}}return $t(n,ct()),n.callbackNode===a?Tg.bind(null,n):null}function Ed(n,i){var a=Mo;return n.current.memoizedState.isDehydrated&&(fs(n,i).flags|=256),n=ml(n,i),n!==2&&(i=Wt,Wt=a,i!==null&&Pd(i)),n}function Pd(n){Wt===null?Wt=n:Wt.push.apply(Wt,n)}function Tx(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var p=a[d],v=p.getSnapshot;p=p.value;try{if(!wn(v(),p))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Vr(n,i){for(i&=~bd,i&=~cl,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-_n(i),d=1<<a;n[a]=-1,i&=~d}}function Cg(n){if((ze&6)!==0)throw Error(t(327));oi();var i=ba(n,0);if((i&1)===0)return $t(n,ct()),null;var a=ml(n,i);if(n.tag!==0&&a===2){var d=ou(n);d!==0&&(i=d,a=Ed(n,d))}if(a===1)throw a=Ro,fs(n,0),Vr(n,i),$t(n,ct()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,ps(n,Wt,lr),$t(n,ct()),null}function Ad(n,i){var a=ze;ze|=1;try{return n(i)}finally{ze=a,ze===0&&(ii=ct()+500,ja&&Rr())}}function hs(n){Lr!==null&&Lr.tag===0&&(ze&6)===0&&oi();var i=ze;ze|=1;var a=dn.transition,d=$e;try{if(dn.transition=null,$e=1,n)return n()}finally{$e=d,dn.transition=a,ze=i,(ze&6)===0&&Rr()}}function Nd(){Jt=si.current,Je(si)}function fs(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,ex(a)),ft!==null)for(a=ft.return;a!==null;){var d=a;switch(Bu(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&za();break;case 3:ti(),Je(Ut),Je(Et),Qu();break;case 5:Ku(d);break;case 4:ti();break;case 13:Je(st);break;case 19:Je(st);break;case 10:$u(d.type._context);break;case 22:case 23:Nd()}a=a.return}if(wt=n,ft=n=Br(n.current,null),Ct=Jt=i,gt=0,Ro=null,bd=cl=ds=0,Wt=Mo=null,ls!==null){for(i=0;i<ls.length;i++)if(a=ls[i],d=a.interleaved,d!==null){a.interleaved=null;var p=d.next,v=a.pending;if(v!==null){var S=v.next;v.next=p,d.next=S}a.pending=d}ls=null}return n}function kg(n,i){do{var a=ft;try{if(Wu(),Qa.current=nl,Ja){for(var d=it.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}Ja=!1}if(us=0,_t=mt=it=null,Co=!1,ko=0,Sd.current=null,a===null||a.return===null){gt=1,Ro=i,ft=null;break}e:{var v=n,S=a.return,N=a,D=i;if(i=Ct,N.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var H=D,oe=N,ae=oe.tag;if((oe.mode&1)===0&&(ae===0||ae===11||ae===15)){var ie=oe.alternate;ie?(oe.updateQueue=ie.updateQueue,oe.memoizedState=ie.memoizedState,oe.lanes=ie.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var fe=Zm(S);if(fe!==null){fe.flags&=-257,Qm(fe,S,N,v,i),fe.mode&1&&Km(v,H,i),i=fe,D=H;var ge=i.updateQueue;if(ge===null){var _e=new Set;_e.add(D),i.updateQueue=_e}else ge.add(D);break e}else{if((i&1)===0){Km(v,H,i),Rd();break e}D=Error(t(426))}}else if(nt&&N.mode&1){var ut=Zm(S);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),Qm(ut,S,N,v,i),ju(ni(D,N));break e}}v=D=ni(D,N),gt!==4&&(gt=2),Mo===null?Mo=[v]:Mo.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,i&=-i,v.lanes|=i;var j=Ym(v,D,i);xm(v,j);break e;case 1:N=D;var F=v.type,W=v.stateNode;if((v.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Dr===null||!Dr.has(W)))){v.flags|=65536,i&=-i,v.lanes|=i;var ue=Xm(v,N,i);xm(v,ue);break e}}v=v.return}while(v!==null)}Ag(a)}catch(xe){i=xe,ft===a&&a!==null&&(ft=a=a.return);continue}break}while(!0)}function Eg(){var n=ll.current;return ll.current=nl,n===null?nl:n}function Rd(){(gt===0||gt===3||gt===2)&&(gt=4),wt===null||(ds&268435455)===0&&(cl&268435455)===0||Vr(wt,Ct)}function ml(n,i){var a=ze;ze|=2;var d=Eg();(wt!==n||Ct!==i)&&(lr=null,fs(n,i));do try{Cx();break}catch(p){kg(n,p)}while(!0);if(Wu(),ze=a,ll.current=d,ft!==null)throw Error(t(261));return wt=null,Ct=0,gt}function Cx(){for(;ft!==null;)Pg(ft)}function kx(){for(;ft!==null&&!Z0();)Pg(ft)}function Pg(n){var i=Mg(n.alternate,n,Jt);n.memoizedProps=n.pendingProps,i===null?Ag(n):ft=i,Sd.current=null}function Ag(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=yx(a,i,Jt),a!==null){ft=a;return}}else{if(a=_x(a,i),a!==null){a.flags&=32767,ft=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{gt=6,ft=null;return}}if(i=i.sibling,i!==null){ft=i;return}ft=i=n}while(i!==null);gt===0&&(gt=5)}function ps(n,i,a){var d=$e,p=dn.transition;try{dn.transition=null,$e=1,Ex(n,i,a,d)}finally{dn.transition=p,$e=d}return null}function Ex(n,i,a,d){do oi();while(Lr!==null);if((ze&6)!==0)throw Error(t(327));a=n.finishedWork;var p=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var v=a.lanes|a.childLanes;if(aw(n,v),n===wt&&(ft=wt=null,Ct=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||dl||(dl=!0,Og(_a,function(){return oi(),null})),v=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||v){v=dn.transition,dn.transition=null;var S=$e;$e=1;var N=ze;ze|=4,Sd.current=null,xx(n,a),_g(a,n),Hw(Ru),ka=!!Nu,Ru=Nu=null,n.current=a,Sx(a),Q0(),ze=N,$e=S,dn.transition=v}else n.current=a;if(dl&&(dl=!1,Lr=n,hl=p),v=n.pendingLanes,v===0&&(Dr=null),tw(a.stateNode),$t(n,ct()),i!==null)for(d=n.onRecoverableError,a=0;a<i.length;a++)p=i[a],d(p.value,{componentStack:p.stack,digest:p.digest});if(ul)throw ul=!1,n=Cd,Cd=null,n;return(hl&1)!==0&&n.tag!==0&&oi(),v=n.pendingLanes,(v&1)!==0?n===kd?Oo++:(Oo=0,kd=n):Oo=0,Rr(),null}function oi(){if(Lr!==null){var n=vp(hl),i=dn.transition,a=$e;try{if(dn.transition=null,$e=16>n?16:n,Lr===null)var d=!1;else{if(n=Lr,Lr=null,hl=0,(ze&6)!==0)throw Error(t(331));var p=ze;for(ze|=4,me=n.current;me!==null;){var v=me,S=v.child;if((me.flags&16)!==0){var N=v.deletions;if(N!==null){for(var D=0;D<N.length;D++){var H=N[D];for(me=H;me!==null;){var oe=me;switch(oe.tag){case 0:case 11:case 15:No(8,oe,v)}var ae=oe.child;if(ae!==null)ae.return=oe,me=ae;else for(;me!==null;){oe=me;var ie=oe.sibling,fe=oe.return;if(pg(oe),oe===H){me=null;break}if(ie!==null){ie.return=fe,me=ie;break}me=fe}}}var ge=v.alternate;if(ge!==null){var _e=ge.child;if(_e!==null){ge.child=null;do{var ut=_e.sibling;_e.sibling=null,_e=ut}while(_e!==null)}}me=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,me=S;else e:for(;me!==null;){if(v=me,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:No(9,v,v.return)}var j=v.sibling;if(j!==null){j.return=v.return,me=j;break e}me=v.return}}var F=n.current;for(me=F;me!==null;){S=me;var W=S.child;if((S.subtreeFlags&2064)!==0&&W!==null)W.return=S,me=W;else e:for(S=F;me!==null;){if(N=me,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:al(9,N)}}catch(xe){ot(N,N.return,xe)}if(N===S){me=null;break e}var ue=N.sibling;if(ue!==null){ue.return=N.return,me=ue;break e}me=N.return}}if(ze=p,Rr(),zn&&typeof zn.onPostCommitFiberRoot=="function")try{zn.onPostCommitFiberRoot(wa,n)}catch{}d=!0}return d}finally{$e=a,dn.transition=i}}return!1}function Ng(n,i,a){i=ni(a,i),i=Ym(n,i,1),n=Or(n,i,1),i=Lt(),n!==null&&(no(n,1,i),$t(n,i))}function ot(n,i,a){if(n.tag===3)Ng(n,n,a);else for(;i!==null;){if(i.tag===3){Ng(i,n,a);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Dr===null||!Dr.has(d))){n=ni(a,n),n=Xm(i,n,1),i=Or(i,n,1),n=Lt(),i!==null&&(no(i,1,n),$t(i,n));break}}i=i.return}}function Px(n,i,a){var d=n.pingCache;d!==null&&d.delete(i),i=Lt(),n.pingedLanes|=n.suspendedLanes&a,wt===n&&(Ct&a)===a&&(gt===4||gt===3&&(Ct&130023424)===Ct&&500>ct()-Td?fs(n,0):bd|=a),$t(n,i)}function Rg(n,i){i===0&&((n.mode&1)===0?i=1:(i=Sa,Sa<<=1,(Sa&130023424)===0&&(Sa=4194304)));var a=Lt();n=ir(n,i),n!==null&&(no(n,i,a),$t(n,a))}function Ax(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Rg(n,a)}function Nx(n,i){var a=0;switch(n.tag){case 13:var d=n.stateNode,p=n.memoizedState;p!==null&&(a=p.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(i),Rg(n,a)}var Mg;Mg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Ut.current)Gt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Gt=!1,vx(n,i,a);Gt=(n.flags&131072)!==0}else Gt=!1,nt&&(i.flags&1048576)!==0&&dm(i,Wa,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;il(n,i),n=i.pendingProps;var p=Ys(i,Et.current);ei(i,a),p=td(null,i,d,n,p,a);var v=nd();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,jt(d)?(v=!0,Ua(i)):v=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Yu(i),p.updater=rl,i.stateNode=p,p._reactInternals=i,ld(i,d,n,a),i=hd(null,i,d,!0,v,a)):(i.tag=0,nt&&v&&Vu(i),Dt(null,i,p,a),i=i.child),i;case 16:d=i.elementType;e:{switch(il(n,i),n=i.pendingProps,p=d._init,d=p(d._payload),i.type=d,p=i.tag=Mx(d),n=Sn(d,n),p){case 0:i=dd(null,i,d,n,a);break e;case 1:i=sg(null,i,d,n,a);break e;case 11:i=Jm(null,i,d,n,a);break e;case 14:i=eg(null,i,d,Sn(d.type,n),a);break e}throw Error(t(306,d,""))}return i;case 0:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Sn(d,p),dd(n,i,d,p,a);case 1:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Sn(d,p),sg(n,i,d,p,a);case 3:e:{if(ig(i),n===null)throw Error(t(387));d=i.pendingProps,v=i.memoizedState,p=v.element,wm(n,i),Ka(i,d,null,a);var S=i.memoizedState;if(d=S.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){p=ni(Error(t(423)),i),i=og(n,i,d,a,p);break e}else if(d!==p){p=ni(Error(t(424)),i),i=og(n,i,d,a,p);break e}else for(Qt=Pr(i.stateNode.containerInfo.firstChild),Zt=i,nt=!0,xn=null,a=ym(i,null,d,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Zs(),d===p){i=ar(n,i,a);break e}Dt(n,i,d,a)}i=i.child}return i;case 5:return bm(i),n===null&&Uu(i),d=i.type,p=i.pendingProps,v=n!==null?n.memoizedProps:null,S=p.children,Mu(d,p)?S=null:v!==null&&Mu(d,v)&&(i.flags|=32),rg(n,i),Dt(n,i,S,a),i.child;case 6:return n===null&&Uu(i),null;case 13:return ag(n,i,a);case 4:return Xu(i,i.stateNode.containerInfo),d=i.pendingProps,n===null?i.child=Qs(i,null,d,a):Dt(n,i,d,a),i.child;case 11:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Sn(d,p),Jm(n,i,d,p,a);case 7:return Dt(n,i,i.pendingProps,a),i.child;case 8:return Dt(n,i,i.pendingProps.children,a),i.child;case 12:return Dt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(d=i.type._context,p=i.pendingProps,v=i.memoizedProps,S=p.value,Ke(Ha,d._currentValue),d._currentValue=S,v!==null)if(wn(v.value,S)){if(v.children===p.children&&!Ut.current){i=ar(n,i,a);break e}}else for(v=i.child,v!==null&&(v.return=i);v!==null;){var N=v.dependencies;if(N!==null){S=v.child;for(var D=N.firstContext;D!==null;){if(D.context===d){if(v.tag===1){D=or(-1,a&-a),D.tag=2;var H=v.updateQueue;if(H!==null){H=H.shared;var oe=H.pending;oe===null?D.next=D:(D.next=oe.next,oe.next=D),H.pending=D}}v.lanes|=a,D=v.alternate,D!==null&&(D.lanes|=a),qu(v.return,a,i),N.lanes|=a;break}D=D.next}}else if(v.tag===10)S=v.type===i.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=a,N=S.alternate,N!==null&&(N.lanes|=a),qu(S,a,i),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===i){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}Dt(n,i,p.children,a),i=i.child}return i;case 9:return p=i.type,d=i.pendingProps.children,ei(i,a),p=cn(p),d=d(p),i.flags|=1,Dt(n,i,d,a),i.child;case 14:return d=i.type,p=Sn(d,i.pendingProps),p=Sn(d.type,p),eg(n,i,d,p,a);case 15:return tg(n,i,i.type,i.pendingProps,a);case 17:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Sn(d,p),il(n,i),i.tag=1,jt(d)?(n=!0,Ua(i)):n=!1,ei(i,a),qm(i,d,p),ld(i,d,p,a),hd(null,i,d,!0,n,a);case 19:return cg(n,i,a);case 22:return ng(n,i,a)}throw Error(t(156,i.tag))};function Og(n,i){return hp(n,i)}function Rx(n,i,a,d){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(n,i,a,d){return new Rx(n,i,a,d)}function Md(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Mx(n){if(typeof n=="function")return Md(n)?1:0;if(n!=null){if(n=n.$$typeof,n===B)return 11;if(n===te)return 14}return 2}function Br(n,i){var a=n.alternate;return a===null?(a=hn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function gl(n,i,a,d,p,v){var S=2;if(d=n,typeof n=="function")Md(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case R:return ms(a.children,p,v,i);case C:S=8,p|=8;break;case O:return n=hn(12,a,i,p|2),n.elementType=O,n.lanes=v,n;case q:return n=hn(13,a,i,p),n.elementType=q,n.lanes=v,n;case ee:return n=hn(19,a,i,p),n.elementType=ee,n.lanes=v,n;case J:return vl(a,p,v,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case U:S=10;break e;case G:S=9;break e;case B:S=11;break e;case te:S=14;break e;case K:S=16,d=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=hn(S,a,i,p),i.elementType=n,i.type=d,i.lanes=v,i}function ms(n,i,a,d){return n=hn(7,n,d,i),n.lanes=a,n}function vl(n,i,a,d){return n=hn(22,n,d,i),n.elementType=J,n.lanes=a,n.stateNode={isHidden:!1},n}function Od(n,i,a){return n=hn(6,n,null,i),n.lanes=a,n}function Id(n,i,a){return i=hn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Ox(n,i,a,d,p){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=au(0),this.expirationTimes=au(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=au(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Dd(n,i,a,d,p,v,S,N,D){return n=new Ox(n,i,a,N,D),i===1?(i=1,v===!0&&(i|=8)):i=0,v=hn(3,null,null,i),n.current=v,v.stateNode=n,v.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yu(v),n}function Ix(n,i,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:d==null?null:""+d,children:n,containerInfo:i,implementation:a}}function Ig(n){if(!n)return Nr;n=n._reactInternals;e:{if(rs(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(jt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(jt(a))return lm(n,a,i)}return i}function Dg(n,i,a,d,p,v,S,N,D){return n=Dd(a,d,!0,n,p,v,S,N,D),n.context=Ig(null),a=n.current,d=Lt(),p=Fr(a),v=or(d,p),v.callback=i??null,Or(a,v,p),n.current.lanes=p,no(n,p,d),$t(n,d),n}function yl(n,i,a,d){var p=i.current,v=Lt(),S=Fr(p);return a=Ig(a),i.context===null?i.context=a:i.pendingContext=a,i=or(v,S),i.payload={element:n},d=d===void 0?null:d,d!==null&&(i.callback=d),n=Or(p,i,S),n!==null&&(Cn(n,p,S,v),Xa(n,p,S)),S}function _l(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Lg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Ld(n,i){Lg(n,i),(n=n.alternate)&&Lg(n,i)}function Dx(){return null}var Fg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Fd(n){this._internalRoot=n}wl.prototype.render=Fd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));yl(n,i,null,null)},wl.prototype.unmount=Fd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;hs(function(){yl(null,n,null,null)}),i[tr]=null}};function wl(n){this._internalRoot=n}wl.prototype.unstable_scheduleHydration=function(n){if(n){var i=wp();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Cr.length&&i!==0&&i<Cr[a].priority;a++);Cr.splice(a,0,n),a===0&&bp(n)}};function Vd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function xl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Vg(){}function Lx(n,i,a,d,p){if(p){if(typeof d=="function"){var v=d;d=function(){var H=_l(S);v.call(H)}}var S=Dg(i,d,n,0,null,!1,!1,"",Vg);return n._reactRootContainer=S,n[tr]=S.current,vo(n.nodeType===8?n.parentNode:n),hs(),S}for(;p=n.lastChild;)n.removeChild(p);if(typeof d=="function"){var N=d;d=function(){var H=_l(D);N.call(H)}}var D=Dd(n,0,!1,null,null,!1,!1,"",Vg);return n._reactRootContainer=D,n[tr]=D.current,vo(n.nodeType===8?n.parentNode:n),hs(function(){yl(i,D,a,d)}),D}function Sl(n,i,a,d,p){var v=a._reactRootContainer;if(v){var S=v;if(typeof p=="function"){var N=p;p=function(){var D=_l(S);N.call(D)}}yl(i,S,n,p)}else S=Lx(a,i,n,p,d);return _l(S)}yp=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=to(i.pendingLanes);a!==0&&(lu(i,a|1),$t(i,ct()),(ze&6)===0&&(ii=ct()+500,Rr()))}break;case 13:hs(function(){var d=ir(n,1);if(d!==null){var p=Lt();Cn(d,n,1,p)}}),Ld(n,1)}},cu=function(n){if(n.tag===13){var i=ir(n,134217728);if(i!==null){var a=Lt();Cn(i,n,134217728,a)}Ld(n,134217728)}},_p=function(n){if(n.tag===13){var i=Fr(n),a=ir(n,i);if(a!==null){var d=Lt();Cn(a,n,i,d)}Ld(n,i)}},wp=function(){return $e},xp=function(n,i){var a=$e;try{return $e=n,i()}finally{$e=a}},tu=function(n,i,a){switch(i){case"input":if(Me(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var d=a[i];if(d!==n&&d.form===n.form){var p=Ba(d);if(!p)throw Error(t(90));Be(d),Me(d,p)}}}break;case"textarea":on(n,a);break;case"select":i=a.value,i!=null&&Pe(n,!!a.multiple,i,!1)}},ip=Ad,op=hs;var Fx={usingClientEntryPoint:!1,Events:[wo,qs,Ba,rp,sp,Ad]},Io={findFiberByHostInstance:ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vx={bundleType:Io.bundleType,version:Io.version,rendererPackageName:Io.rendererPackageName,rendererConfig:Io.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=up(n),n===null?null:n.stateNode},findFiberByHostInstance:Io.findFiberByHostInstance||Dx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bl.isDisabled&&bl.supportsFiber)try{wa=bl.inject(Vx),zn=bl}catch{}}return qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fx,qt.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vd(i))throw Error(t(200));return Ix(n,i,null,a)},qt.createRoot=function(n,i){if(!Vd(n))throw Error(t(299));var a=!1,d="",p=Fg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=Dd(n,1,!1,null,null,a,!1,d,p),n[tr]=i.current,vo(n.nodeType===8?n.parentNode:n),new Fd(i)},qt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=up(i),n=n===null?null:n.stateNode,n},qt.flushSync=function(n){return hs(n)},qt.hydrate=function(n,i,a){if(!xl(i))throw Error(t(200));return Sl(null,n,i,!0,a)},qt.hydrateRoot=function(n,i,a){if(!Vd(n))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,p=!1,v="",S=Fg;if(a!=null&&(a.unstable_strictMode===!0&&(p=!0),a.identifierPrefix!==void 0&&(v=a.identifierPrefix),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),i=Dg(i,null,n,1,a??null,p,!1,v,S),n[tr]=i.current,vo(n),d)for(n=0;n<d.length;n++)a=d[n],p=a._getVersion,p=p(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,p]:i.mutableSourceEagerHydrationData.push(a,p);return new wl(i)},qt.render=function(n,i,a){if(!xl(i))throw Error(t(200));return Sl(null,n,i,!1,a)},qt.unmountComponentAtNode=function(n){if(!xl(n))throw Error(t(40));return n._reactRootContainer?(hs(function(){Sl(null,null,n,!1,function(){n._reactRootContainer=null,n[tr]=null})}),!0):!1},qt.unstable_batchedUpdates=Ad,qt.unstable_renderSubtreeIntoContainer=function(n,i,a,d){if(!xl(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Sl(n,i,a,!1,d)},qt.version="18.3.1-next-f1338f8080-20240426",qt}var qg;function ny(){if(qg)return Ud.exports;qg=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Ud.exports=Yx(),Ud.exports}var Hg;function Xx(){if(Hg)return Tl;Hg=1;var s=ny();return Tl.createRoot=s.createRoot,Tl.hydrateRoot=s.hydrateRoot,Tl}var Kx=Xx(),Zx="Invariant failed";function hr(s,e){if(!s)throw new Error(Zx)}const bi=new WeakMap,Ul=new WeakMap,Xl={current:[]};let Wd=!1,Bo=0;const Fo=new Set,Cl=new Map;function ry(s){const e=Array.from(s).sort((t,r)=>t instanceof Ti&&t.options.deps.includes(r)?1:r instanceof Ti&&r.options.deps.includes(t)?-1:0);for(const t of e){if(Xl.current.includes(t))continue;Xl.current.push(t),t.recompute();const r=Ul.get(t);if(r)for(const o of r){const l=bi.get(o);l&&ry(l)}}}function Qx(s){s.listeners.forEach(e=>e({prevVal:s.prevState,currentVal:s.state}))}function Jx(s){s.listeners.forEach(e=>e({prevVal:s.prevState,currentVal:s.state}))}function sy(s){if(Bo>0&&!Cl.has(s)&&Cl.set(s,s.prevState),Fo.add(s),!(Bo>0)&&!Wd)try{for(Wd=!0;Fo.size>0;){const e=Array.from(Fo);Fo.clear();for(const t of e){const r=Cl.get(t)??t.prevState;t.prevState=r,Qx(t)}for(const t of e){const r=bi.get(t);r&&(Xl.current.push(t),ry(r))}for(const t of e){const r=bi.get(t);if(r)for(const o of r)Jx(o)}}}finally{Wd=!1,Xl.current=[],Cl.clear()}}function ai(s){Bo++;try{s()}finally{if(Bo--,Bo===0){const e=Array.from(Fo)[0];e&&sy(e)}}}function eS(s){return typeof s=="function"}class mh{constructor(e,t){this.listeners=new Set,this.subscribe=r=>{var o,l;this.listeners.add(r);const c=(l=(o=this.options)==null?void 0:o.onSubscribe)==null?void 0:l.call(o,r,this);return()=>{this.listeners.delete(r),c==null||c()}},this.prevState=e,this.state=e,this.options=t}setState(e){var t,r,o;this.prevState=this.state,(t=this.options)!=null&&t.updateFn?this.state=this.options.updateFn(this.prevState)(e):eS(e)?this.state=e(this.prevState):this.state=e,(o=(r=this.options)==null?void 0:r.onUpdate)==null||o.call(r),sy(this)}}class Ti{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const t=[],r=[];for(const o of this.options.deps)t.push(o.prevState),r.push(o.state);return this.lastSeenDepValues=r,{prevDepVals:t,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var t,r;this.prevState=this.state;const{prevDepVals:o,currDepVals:l,prevVal:c}=this.getDepVals();this.state=this.options.fn({prevDepVals:o,currDepVals:l,prevVal:c}),(r=(t=this.options).onUpdate)==null||r.call(t)},this.checkIfRecalculationNeededDeeply=()=>{for(const l of this.options.deps)l instanceof Ti&&l.checkIfRecalculationNeededDeeply();let t=!1;const r=this.lastSeenDepValues,{currDepVals:o}=this.getDepVals();for(let l=0;l<o.length;l++)if(o[l]!==r[l]){t=!0;break}t&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const t of this._subscriptions)t()}),this.subscribe=t=>{var r,o;this.listeners.add(t);const l=(o=(r=this.options).onSubscribe)==null?void 0:o.call(r,t,this);return()=>{this.listeners.delete(t),l==null||l()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const t of e)if(t instanceof Ti)t.registerOnGraph(),this.registerOnGraph(t.options.deps);else if(t instanceof mh){let r=bi.get(t);r||(r=new Set,bi.set(t,r)),r.add(this);let o=Ul.get(this);o||(o=new Set,Ul.set(this,o)),o.add(t)}}unregisterFromGraph(e=this.options.deps){for(const t of e)if(t instanceof Ti)this.unregisterFromGraph(t.options.deps);else if(t instanceof mh){const r=bi.get(t);r&&r.delete(this);const o=Ul.get(this);o&&o.delete(t)}}}const Hr="__TSR_index",Yg="popstate",Xg="beforeunload";function iy(s){let e=s.getLocation();const t=new Set,r=c=>{e=s.getLocation(),t.forEach(u=>u({location:e,action:c}))},o=c=>{s.notifyOnIndexChange??!0?r(c):e=s.getLocation()},l=async({task:c,navigateOpts:u,...h})=>{var f,m;if((u==null?void 0:u.ignoreBlocker)??!1){c();return}const y=((f=s.getBlockers)==null?void 0:f.call(s))??[],x=h.type==="PUSH"||h.type==="REPLACE";if(typeof document<"u"&&y.length&&x)for(const w of y){const _=Ho(h.path,h.state);if(await w.blockerFn({currentLocation:e,nextLocation:_,action:h.type})){(m=s.onBlocked)==null||m.call(s);return}}c()};return{get location(){return e},get length(){return s.getLength()},subscribers:t,subscribe:c=>(t.add(c),()=>{t.delete(c)}),push:(c,u,h)=>{const f=e.state[Hr];u=gh(f+1,u),l({task:()=>{s.pushState(c,u),r({type:"PUSH"})},navigateOpts:h,type:"PUSH",path:c,state:u})},replace:(c,u,h)=>{const f=e.state[Hr];u=gh(f,u),l({task:()=>{s.replaceState(c,u),r({type:"REPLACE"})},navigateOpts:h,type:"REPLACE",path:c,state:u})},go:(c,u)=>{l({task:()=>{s.go(c),o({type:"GO",index:c})},navigateOpts:u,type:"GO"})},back:c=>{l({task:()=>{s.back((c==null?void 0:c.ignoreBlocker)??!1),o({type:"BACK"})},navigateOpts:c,type:"BACK"})},forward:c=>{l({task:()=>{s.forward((c==null?void 0:c.ignoreBlocker)??!1),o({type:"FORWARD"})},navigateOpts:c,type:"FORWARD"})},canGoBack:()=>e.state[Hr]!==0,createHref:c=>s.createHref(c),block:c=>{var u;if(!s.setBlockers)return()=>{};const h=((u=s.getBlockers)==null?void 0:u.call(s))??[];return s.setBlockers([...h,c]),()=>{var f,m;const g=((f=s.getBlockers)==null?void 0:f.call(s))??[];(m=s.setBlockers)==null||m.call(s,g.filter(y=>y!==c))}},flush:()=>{var c;return(c=s.flush)==null?void 0:c.call(s)},destroy:()=>{var c;return(c=s.destroy)==null?void 0:c.call(s)},notify:r}}function gh(s,e){return e||(e={}),{...e,key:Hh(),[Hr]:s}}function tS(s){var e;const t=typeof document<"u"?window:void 0,r=t.history.pushState,o=t.history.replaceState;let l=[];const c=()=>l,u=O=>l=O,h=O=>O,f=()=>Ho(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state);(e=t.history.state)!=null&&e.key||t.history.replaceState({[Hr]:0,key:Hh()},"");let m=f(),g,y=!1,x=!1,w=!1,_=!1;const b=()=>m;let T,M;const L=()=>{T&&(C._ignoreSubscribers=!0,(T.isPush?t.history.pushState:t.history.replaceState)(T.state,"",T.href),C._ignoreSubscribers=!1,T=void 0,M=void 0,g=void 0)},V=(O,U,G)=>{const B=h(U);M||(g=m),m=Ho(U,G),T={href:B,state:G,isPush:(T==null?void 0:T.isPush)||O==="push"},M||(M=Promise.resolve().then(()=>L()))},E=O=>{m=f(),C.notify({type:O})},P=async()=>{if(x){x=!1;return}const O=f(),U=O.state[Hr]-m.state[Hr],G=U===1,B=U===-1,q=!G&&!B||y;y=!1;const ee=q?"GO":B?"BACK":"FORWARD",te=q?{type:"GO",index:U}:{type:B?"BACK":"FORWARD"};if(w)w=!1;else{const K=c();if(typeof document<"u"&&K.length){for(const J of K)if(await J.blockerFn({currentLocation:m,nextLocation:O,action:ee})){x=!0,t.history.go(1),C.notify(te);return}}}m=f(),C.notify(te)},R=O=>{if(_){_=!1;return}let U=!1;const G=c();if(typeof document<"u"&&G.length)for(const B of G){const q=B.enableBeforeUnload??!0;if(q===!0){U=!0;break}if(typeof q=="function"&&q()===!0){U=!0;break}}if(U)return O.preventDefault(),O.returnValue=""},C=iy({getLocation:b,getLength:()=>t.history.length,pushState:(O,U)=>V("push",O,U),replaceState:(O,U)=>V("replace",O,U),back:O=>(O&&(w=!0),_=!0,t.history.back()),forward:O=>{O&&(w=!0),_=!0,t.history.forward()},go:O=>{y=!0,t.history.go(O)},createHref:O=>h(O),flush:L,destroy:()=>{t.history.pushState=r,t.history.replaceState=o,t.removeEventListener(Xg,R,{capture:!0}),t.removeEventListener(Yg,P)},onBlocked:()=>{g&&m!==g&&(m=g)},getBlockers:c,setBlockers:u,notifyOnIndexChange:!1});return t.addEventListener(Xg,R,{capture:!0}),t.addEventListener(Yg,P),t.history.pushState=function(...O){const U=r.apply(t.history,O);return C._ignoreSubscribers||E("PUSH"),U},t.history.replaceState=function(...O){const U=o.apply(t.history,O);return C._ignoreSubscribers||E("REPLACE"),U},C}function nS(s={initialEntries:["/"]}){const e=s.initialEntries;let t=s.initialIndex?Math.min(Math.max(s.initialIndex,0),e.length-1):e.length-1;const r=e.map((l,c)=>gh(c,void 0));return iy({getLocation:()=>Ho(e[t],r[t]),getLength:()=>e.length,pushState:(l,c)=>{t<e.length-1&&(e.splice(t+1),r.splice(t+1)),r.push(c),e.push(l),t=Math.max(e.length-1,0)},replaceState:(l,c)=>{r[t]=c,e[t]=l},back:()=>{t=Math.max(t-1,0)},forward:()=>{t=Math.min(t+1,e.length-1)},go:l=>{t=Math.min(Math.max(t+l,0),e.length-1)},createHref:l=>l})}function Ho(s,e){const t=s.indexOf("#"),r=s.indexOf("?");return{href:s,pathname:s.substring(0,t>0?r>0?Math.min(t,r):t:r>0?r:s.length),hash:t>-1?s.substring(t):"",search:r>-1?s.slice(r,t===-1?void 0:t):"",state:e||{[Hr]:0,key:Hh()}}}function Hh(){return(Math.random()+1).toString(36).substring(7)}function mi(s){return s[s.length-1]}function rS(s){return typeof s=="function"}function ws(s,e){return rS(s)?s(e):s}function vh(s,e){return e.reduce((t,r)=>(t[r]=s[r],t),{})}function fn(s,e){if(s===e)return s;const t=e,r=Qg(s)&&Qg(t);if(r||Kg(s)&&Kg(t)){const o=r?s:Object.keys(s).concat(Object.getOwnPropertySymbols(s)),l=o.length,c=r?t:Object.keys(t).concat(Object.getOwnPropertySymbols(t)),u=c.length,h=r?[]:{};let f=0;for(let m=0;m<u;m++){const g=r?m:c[m];(!r&&o.includes(g)||r)&&s[g]===void 0&&t[g]===void 0?(h[g]=void 0,f++):(h[g]=fn(s[g],t[g]),h[g]===s[g]&&s[g]!==void 0&&f++)}return l===u&&f===l?s:h}return t}function Kg(s){return yh(s)&&Object.getOwnPropertyNames(s).length===Object.keys(s).length}function yh(s){if(!Zg(s))return!1;const e=s.constructor;if(typeof e>"u")return!0;const t=e.prototype;return!(!Zg(t)||!t.hasOwnProperty("isPrototypeOf"))}function Zg(s){return Object.prototype.toString.call(s)==="[object Object]"}function Qg(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Jg(s,e){let t=Object.keys(s);return e&&(t=t.filter(r=>s[r]!==void 0)),t}function Ci(s,e,t){if(s===e)return!0;if(typeof s!=typeof e)return!1;if(yh(s)&&yh(e)){const r=(t==null?void 0:t.ignoreUndefined)??!0,o=Jg(s,r),l=Jg(e,r);return!(t!=null&&t.partial)&&o.length!==l.length?!1:l.every(c=>Ci(s[c],e[c],t))}return Array.isArray(s)&&Array.isArray(e)?s.length!==e.length?!1:!s.some((r,o)=>!Ci(r,e[o],t)):!1}function fi(s){let e,t;const r=new Promise((o,l)=>{e=o,t=l});return r.status="pending",r.resolve=o=>{r.status="resolved",r.value=o,e(o),s==null||s(o)},r.reject=o=>{r.status="rejected",t(o)},r}function sS(s){return/%[0-9A-Fa-f]{2}/.test(s)}function pr(s){return _c(s.filter(e=>e!==void 0).join("/"))}function _c(s){return s.replace(/\/{2,}/g,"/")}function Yh(s){return s==="/"?s:s.replace(/^\/{1,}/,"")}function xs(s){return s==="/"?s:s.replace(/\/{1,}$/,"")}function iS(s){return xs(Yh(s))}function Kl(s,e){return s!=null&&s.endsWith("/")&&s!=="/"&&s!==`${e}/`?s.slice(0,-1):s}function oS(s,e,t){return Kl(s,t)===Kl(e,t)}function aS({basepath:s,base:e,to:t,trailingSlash:r="never",caseSensitive:o}){var l,c;e=Zl(s,e,o),t=Zl(s,t,o);let u=Ri(e);const h=Ri(t);u.length>1&&((l=mi(u))==null?void 0:l.value)==="/"&&u.pop(),h.forEach((m,g)=>{m.value==="/"?g?g===h.length-1&&u.push(m):u=[m]:m.value===".."?u.pop():m.value==="."||u.push(m)}),u.length>1&&(((c=mi(u))==null?void 0:c.value)==="/"?r==="never"&&u.pop():r==="always"&&u.push({type:"pathname",value:"/"}));const f=pr([s,...u.map(m=>m.value)]);return _c(f)}function Ri(s){if(!s)return[];s=_c(s);const e=[];if(s.slice(0,1)==="/"&&(s=s.substring(1),e.push({type:"pathname",value:"/"})),!s)return e;const t=s.split("/").filter(Boolean);return e.push(...t.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:r.includes("%25")?r.split("%25").map(o=>decodeURI(o)).join("%25"):decodeURI(r)})),s.slice(-1)==="/"&&(s=s.substring(1),e.push({type:"pathname",value:"/"})),e}function kl({path:s,params:e,leaveWildcards:t,leaveParams:r,decodeCharMap:o}){const l=Ri(s);function c(m){const g=e[m],y=typeof g=="string";return["*","_splat"].includes(m)?y?encodeURI(g):g:y?lS(g,o):g}let u=!1;const h={},f=pr(l.map(m=>{if(m.type==="wildcard"){h._splat=e._splat;const g=c("_splat");return t?`${m.value}${g??""}`:g}if(m.type==="param"){const g=m.value.substring(1);if(!u&&!(g in e)&&(u=!0),h[g]=e[g],r){const y=c(m.value);return`${m.value}${y??""}`}return c(g)??"undefined"}return m.value}));return{usedParams:h,interpolatedPath:f,isMissingParams:u}}function lS(s,e){let t=encodeURIComponent(s);if(e)for(const[r,o]of e)t=t.replaceAll(r,o);return t}function El(s,e,t){const r=cS(s,e,t);if(!(t.to&&!r))return r??{}}function Zl(s,e,t=!1){const r=t?s:s.toLowerCase(),o=t?e:e.toLowerCase();switch(!0){case r==="/":return e;case o===r:return"";case e.length<s.length:return e;case o[r.length]!=="/":return e;case o.startsWith(r):return e.slice(s.length);default:return e}}function cS(s,e,t){if(s!=="/"&&!e.startsWith(s))return;e=Zl(s,e,t.caseSensitive);const r=Zl(s,`${t.to??"$"}`,t.caseSensitive),o=Ri(e),l=Ri(r);e.startsWith("/")||o.unshift({type:"pathname",value:"/"}),r.startsWith("/")||l.unshift({type:"pathname",value:"/"});const c={};return(()=>{for(let h=0;h<Math.max(o.length,l.length);h++){const f=o[h],m=l[h],g=h>=o.length-1,y=h>=l.length-1;if(m){if(m.type==="wildcard"){const x=decodeURI(pr(o.slice(h).map(w=>w.value)));return c["*"]=x,c._splat=x,!0}if(m.type==="pathname"){if(m.value==="/"&&!(f!=null&&f.value))return!0;if(f){if(t.caseSensitive){if(m.value!==f.value)return!1}else if(m.value.toLowerCase()!==f.value.toLowerCase())return!1}}if(!f)return!1;if(m.type==="param"){if(f.value==="/")return!1;f.value.charAt(0)!=="$"&&(c[m.value.substring(1)]=decodeURIComponent(f.value))}}if(!g&&y)return c["**"]=pr(o.slice(h+1).map(x=>x.value)),!!t.fuzzy&&(m==null?void 0:m.value)!=="/"}return!0})()?c:void 0}function pn(s){return!!(s!=null&&s.isNotFound)}function uS(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{return}}const Ql="tsr-scroll-restoration-v1_3",dS=(s,e)=>{let t;return(...r)=>{t||(t=setTimeout(()=>{s(...r),t=null},e))}};function hS(){const s=uS();if(!s)return;const e=s.getItem(Ql);let t=e?JSON.parse(e):{};return{state:t,set:r=>(t=ws(r,t)||t,s.setItem(Ql,JSON.stringify(t)))}}const $d=hS(),_h=s=>s.state.key||s.href;function fS(s){const e=[];let t;for(;t=s.parentNode;)e.unshift(`${s.tagName}:nth-child(${[].indexOf.call(t.children,s)+1})`),s=t;return`${e.join(" > ")}`.toLowerCase()}let Jl=!1;function oy(s,e,t,r,o){var l;let c;try{c=JSON.parse(sessionStorage.getItem(s)||"{}")}catch(f){console.error(f);return}const u=e||((l=window.history.state)==null?void 0:l.key),h=c[u];Jl=!0,(()=>{if(r&&h){for(const m in h){const g=h[m];if(m==="window")window.scrollTo({top:g.scrollY,left:g.scrollX,behavior:t});else if(m){const y=document.querySelector(m);y&&(y.scrollLeft=g.scrollX,y.scrollTop=g.scrollY)}}return}const f=window.location.hash.split("#")[1];if(f){const m=(window.history.state||{}).__hashScrollIntoViewOptions??!0;if(m){const g=document.getElementById(f);g&&g.scrollIntoView(m)}return}["window",...(o==null?void 0:o.filter(m=>m!=="window"))??[]].forEach(m=>{const g=m==="window"?window:document.querySelector(m);g&&g.scrollTo({top:0,left:0,behavior:t})})})(),Jl=!1}function pS(s,e){if($d===void 0||((s.options.scrollRestoration??!1)&&(s.isScrollRestoring=!0),typeof document>"u"||s.isScrollRestorationSetup))return;s.isScrollRestorationSetup=!0,Jl=!1;const r=s.options.getScrollRestorationKey||_h;window.history.scrollRestoration="manual";const o=l=>{if(Jl||!s.isScrollRestoring)return;let c="";if(l.target===document||l.target===window)c="window";else{const h=l.target.getAttribute("data-scroll-restoration-id");h?c=`[data-scroll-restoration-id="${h}"]`:c=fS(l.target)}const u=r(s.state.location);$d.set(h=>{const f=h[u]=h[u]||{},m=f[c]=f[c]||{};if(c==="window")m.scrollX=window.scrollX||0,m.scrollY=window.scrollY||0;else if(c){const g=document.querySelector(c);g&&(m.scrollX=g.scrollLeft||0,m.scrollY=g.scrollTop||0)}return h})};typeof document<"u"&&document.addEventListener("scroll",dS(o,100),!0),s.subscribe("onRendered",l=>{const c=r(l.toLocation);if(!s.resetNextScroll){s.resetNextScroll=!0;return}oy(Ql,c,s.options.scrollRestorationBehavior||void 0,s.isScrollRestoring||void 0,s.options.scrollToTopSelectors||void 0),s.isScrollRestoring&&$d.set(u=>(u[c]=u[c]||{},u))})}function mS(s){if(typeof document<"u"&&document.querySelector){const e=s.state.location.state.__hashScrollIntoViewOptions??!0;if(e&&s.state.location.hash!==""){const t=document.getElementById(s.state.location.hash);t&&t.scrollIntoView(e)}}}function gS(s,e){const t=Object.entries(s).flatMap(([o,l])=>Array.isArray(l)?l.map(c=>[o,String(c)]):[[o,String(l)]]);return""+new URLSearchParams(t).toString()}function qd(s){if(!s)return"";const e=sS(s)?decodeURIComponent(s):decodeURIComponent(encodeURIComponent(s));return e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e}function vS(s,e){const t=s;return[...new URLSearchParams(t).entries()].reduce((l,[c,u])=>{const h=l[c];return h==null?l[c]=qd(u):l[c]=Array.isArray(h)?[...h,qd(u)]:[h,qd(u)],l},{})}const yS=wS(JSON.parse),_S=xS(JSON.stringify,JSON.parse);function wS(s){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const t=vS(e);for(const r in t){const o=t[r];if(typeof o=="string")try{t[r]=s(o)}catch{}}return t}}function xS(s,e){function t(r){if(typeof r=="object"&&r!==null)try{return s(r)}catch{}else if(typeof r=="string"&&typeof e=="function")try{return e(r),s(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(l=>{const c=r[l];typeof c>"u"||c===void 0?delete r[l]:r[l]=t(c)});const o=gS(r).toString();return o?`?${o}`:""}}const kn="__root__";function vs(s){return!!(s!=null&&s.isRedirect)}function Hd(s){return!!(s!=null&&s.isRedirect)&&s.href}function Ts(s){const e=s.resolvedLocation,t=s.location,r=(e==null?void 0:e.pathname)!==t.pathname,o=(e==null?void 0:e.href)!==t.href,l=(e==null?void 0:e.hash)!==t.hash;return{fromLocation:e,toLocation:t,pathChanged:r,hrefChanged:o,hashChanged:l}}class SS{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=t=>t(),this.update=t=>{var r;t.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const o=this.options;this.options={...this.options,...t},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(l=>[encodeURIComponent(l),l])):void 0,(!this.basepath||t.basepath&&t.basepath!==o.basepath)&&(t.basepath===void 0||t.basepath===""||t.basepath==="/"?this.basepath="/":this.basepath=`/${iS(t.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?nS({initialEntries:[this.basepath||"/"]}):tS()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new mh(TS(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(l=>!["redirected"].includes(l.status))}}}),pS(this)),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const t=this.options.notFoundRoute;t&&(t.init({originalIndex:99999999999,defaultSsr:this.options.defaultSsr}),this.routesById[t.id]=t);const r=c=>{c.forEach((u,h)=>{u.init({originalIndex:h,defaultSsr:this.options.defaultSsr});const f=this.routesById[u.id];if(hr(!f,`Duplicate routes found with id: ${String(u.id)}`),this.routesById[u.id]=u,!u.isRoot&&u.path){const g=xs(u.fullPath);(!this.routesByPath[g]||u.fullPath.endsWith("/"))&&(this.routesByPath[g]=u)}const m=u.children;m!=null&&m.length&&r(m)})};r([this.routeTree]);const o=[];Object.values(this.routesById).forEach((c,u)=>{var h;if(c.isRoot||!c.path)return;const f=Yh(c.fullPath),m=Ri(f);for(;m.length>1&&((h=m[0])==null?void 0:h.value)==="/";)m.shift();const g=m.map(y=>y.value==="/"?.75:y.type==="param"?.5:y.type==="wildcard"?.25:1);o.push({child:c,trimmed:f,parsed:m,index:u,scores:g})}),this.flatRoutes=o.sort((c,u)=>{const h=Math.min(c.scores.length,u.scores.length);for(let f=0;f<h;f++)if(c.scores[f]!==u.scores[f])return u.scores[f]-c.scores[f];if(c.scores.length!==u.scores.length)return u.scores.length-c.scores.length;for(let f=0;f<h;f++)if(c.parsed[f].value!==u.parsed[f].value)return c.parsed[f].value>u.parsed[f].value?1:-1;return c.index-u.index}).map((c,u)=>(c.child.rank=u,c.child))},this.subscribe=(t,r)=>{const o={eventType:t,fn:r};return this.subscribers.add(o),()=>{this.subscribers.delete(o)}},this.emit=t=>{this.subscribers.forEach(r=>{r.eventType===t.type&&r.fn(t)})},this.parseLocation=(t,r)=>{const o=({pathname:h,search:f,hash:m,state:g})=>{const y=this.options.parseSearch(f),x=this.options.stringifySearch(y);return{pathname:h,searchStr:x,search:fn(t==null?void 0:t.search,y),hash:m.split("#").reverse()[0]??"",href:`${h}${x}${m}`,state:fn(t==null?void 0:t.state,g)}},l=o(r??this.history.location),{__tempLocation:c,__tempKey:u}=l.state;if(c&&(!u||u===this.tempLocationKey)){const h=o(c);return h.state.key=l.state.key,delete h.state.__tempLocation,{...h,maskedLocation:l}}return l},this.resolvePathWithBase=(t,r)=>aS({basepath:this.basepath,base:t,to:_c(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.matchRoutes=(t,r,o)=>typeof t=="string"?this.matchRoutesInternal({pathname:t,search:r},o):this.matchRoutesInternal(t,r),this.getMatchedRoutes=(t,r)=>{let o={};const l=xs(t.pathname),c=m=>El(this.basepath,l,{to:m.fullPath,caseSensitive:m.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let u=(r==null?void 0:r.to)!==void 0?this.routesByPath[r.to]:void 0;u?o=c(u):u=this.flatRoutes.find(m=>{const g=c(m);return g?(o=g,!0):!1});let h=u||this.routesById[kn];const f=[h];for(;h.parentRoute;)h=h.parentRoute,f.unshift(h);return{matchedRoutes:f,routeParams:o,foundRoute:u}},this.cancelMatch=t=>{const r=this.getMatch(t);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var t;(t=this.state.pendingMatches)==null||t.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=t=>{const r=(l={},c)=>{var u,h,f,m,g,y,x;const w=l._fromLocation?this.matchRoutes(l._fromLocation,{_buildLocation:!0}):this.state.matches,_=l.from!=null?w.find(B=>El(this.basepath,xs(B.pathname),{to:l.from,caseSensitive:!1,fuzzy:!1})):void 0,b=(_==null?void 0:_.pathname)||this.latestLocation.pathname;hr(l.from==null||_!=null,"Could not find match for from: "+l.from);const T=(u=this.state.pendingMatches)!=null&&u.length?(h=mi(this.state.pendingMatches))==null?void 0:h.search:((f=mi(w))==null?void 0:f.search)||this.latestLocation.search,M=c==null?void 0:c.matchedRoutes.filter(B=>w.find(q=>q.routeId===B.id));let L;if(l.to){const B=(_==null?void 0:_.fullPath)||((m=mi(w))==null?void 0:m.fullPath)||this.latestLocation.pathname;L=this.resolvePathWithBase(B,`${l.to}`)}else{const B=this.routesById[(g=M==null?void 0:M.find(q=>{const ee=kl({path:q.fullPath,params:(c==null?void 0:c.routeParams)??{},decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;return pr([this.basepath,ee])===b}))==null?void 0:g.id];L=this.resolvePathWithBase(b,(B==null?void 0:B.to)??b)}const V={...(y=mi(w))==null?void 0:y.params};let E=(l.params??!0)===!0?V:{...V,...ws(l.params,V)};Object.keys(E).length>0&&(c==null||c.matchedRoutes.map(B=>{var q;return((q=B.options.params)==null?void 0:q.stringify)??B.options.stringifyParams}).filter(Boolean).forEach(B=>{E={...E,...B(E)}})),L=kl({path:L,params:E??{},leaveWildcards:!1,leaveParams:t.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;let P=T;if(t._includeValidateSearch&&((x=this.options.search)!=null&&x.strict)){let B={};c==null||c.matchedRoutes.forEach(q=>{try{q.options.validateSearch&&(B={...B,...Yd(q.options.validateSearch,{...B,...P})??{}})}catch{}}),P=B}P=(B=>{const q=(c==null?void 0:c.matchedRoutes.reduce((K,J)=>{var z;const Z=[];if("search"in J.options)(z=J.options.search)!=null&&z.middlewares&&Z.push(...J.options.search.middlewares);else if(J.options.preSearchFilters||J.options.postSearchFilters){const X=({search:A,next:$})=>{let le=A;"preSearchFilters"in J.options&&J.options.preSearchFilters&&(le=J.options.preSearchFilters.reduce((re,ce)=>ce(re),A));const ne=$(le);return"postSearchFilters"in J.options&&J.options.postSearchFilters?J.options.postSearchFilters.reduce((re,ce)=>ce(re),ne):ne};Z.push(X)}if(t._includeValidateSearch&&J.options.validateSearch){const X=({search:A,next:$})=>{const le=$(A);try{return{...le,...Yd(J.options.validateSearch,le)??{}}}catch{return le}};Z.push(X)}return K.concat(Z)},[]))??[],ee=({search:K})=>l.search?l.search===!0?K:ws(l.search,K):{};q.push(ee);const te=(K,J)=>{if(K>=q.length)return J;const z=q[K];return z({search:J,next:X=>te(K+1,X)})};return te(0,B)})(P),P=fn(T,P);const C=this.options.stringifySearch(P),O=l.hash===!0?this.latestLocation.hash:l.hash?ws(l.hash,this.latestLocation.hash):void 0,U=O?`#${O}`:"";let G=l.state===!0?this.latestLocation.state:l.state?ws(l.state,this.latestLocation.state):{};return G=fn(this.latestLocation.state,G),{pathname:L,search:P,searchStr:C,state:G,hash:O??"",href:`${L}${C}${U}`,unmaskOnReload:l.unmaskOnReload}},o=(l={},c)=>{var u;const h=r(l);let f=c?r(c):void 0;if(!f){let y={};const x=(u=this.options.routeMasks)==null?void 0:u.find(w=>{const _=El(this.basepath,h.pathname,{to:w.from,caseSensitive:!1,fuzzy:!1});return _?(y=_,!0):!1});if(x){const{from:w,..._}=x;c={...vh(t,["from"]),..._,params:y},f=r(c)}}const m=this.getMatchedRoutes(h,l),g=r(l,m);if(f){const y=this.getMatchedRoutes(f,c),x=r(c,y);g.maskedLocation=x}return g};return t.mask?o(t,{...vh(t,["from"]),...t.mask}):o(t)},this.commitLocation=({viewTransition:t,ignoreBlocker:r,...o})=>{const l=()=>{const h=["key","__TSR_index","__hashScrollIntoViewOptions"];h.forEach(m=>{o.state[m]=this.latestLocation.state[m]});const f=Ci(o.state,this.latestLocation.state);return h.forEach(m=>{delete o.state[m]}),f},c=this.latestLocation.href===o.href,u=this.commitLocationPromise;if(this.commitLocationPromise=fi(()=>{u==null||u.resolve()}),c&&l())this.load();else{let{maskedLocation:h,hashScrollIntoView:f,...m}=o;h&&(m={...h,state:{...h.state,__tempKey:void 0,__tempLocation:{...m,search:m.searchStr,state:{...m.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(m.unmaskOnReload??this.options.unmaskOnReload??!1)&&(m.state.__tempKey=this.tempLocationKey)),m.state.__hashScrollIntoViewOptions=f??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=t,this.history[o.replace?"replace":"push"](m.href,m.state,{ignoreBlocker:r})}return this.resetNextScroll=o.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:t,resetScroll:r,hashScrollIntoView:o,viewTransition:l,ignoreBlocker:c,href:u,...h}={})=>{if(u){const m=this.history.location.state.__TSR_index,g=Ho(u,{__TSR_index:t?m:m+1});h.to=g.pathname,h.search=this.options.parseSearch(g.search),h.hash=g.hash.slice(1)}const f=this.buildLocation({...h,_includeValidateSearch:!0});return this.commitLocation({...f,viewTransition:l,replace:t,resetScroll:r,hashScrollIntoView:o,ignoreBlocker:c})},this.navigate=({to:t,reloadDocument:r,href:o,...l})=>{if(r){if(!o){const c=this.buildLocation({to:t,...l});o=this.history.createHref(c.href)}l.replace?window.location.replace(o):window.location.href=o;return}return this.buildAndCommitLocation({...l,href:o,to:t})},this.load=async t=>{this.latestLocation=this.parseLocation(this.latestLocation);let r,o,l;for(l=new Promise(c=>{this.startTransition(async()=>{var u;try{const h=this.latestLocation,f=this.state.resolvedLocation;this.cancelMatches();let m;ai(()=>{m=this.matchRoutes(h),this.__store.setState(g=>({...g,status:"pending",isLoading:!0,location:h,pendingMatches:m,cachedMatches:g.cachedMatches.filter(y=>!m.find(x=>x.id===y.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",...Ts({resolvedLocation:f,location:h})}),this.emit({type:"onBeforeLoad",...Ts({resolvedLocation:f,location:h})}),await this.loadMatches({sync:t==null?void 0:t.sync,matches:m,location:h,onReady:async()=>{this.startViewTransition(async()=>{let g,y,x;ai(()=>{this.__store.setState(w=>{const _=w.matches,b=w.pendingMatches||w.matches;return g=_.filter(T=>!b.find(M=>M.id===T.id)),y=b.filter(T=>!_.find(M=>M.id===T.id)),x=_.filter(T=>b.find(M=>M.id===T.id)),{...w,isLoading:!1,loadedAt:Date.now(),matches:b,pendingMatches:void 0,cachedMatches:[...w.cachedMatches,...g.filter(T=>T.status!=="error")]}}),this.clearExpiredCache()}),[[g,"onLeave"],[y,"onEnter"],[x,"onStay"]].forEach(([w,_])=>{w.forEach(b=>{var T,M;(M=(T=this.looseRoutesById[b.routeId].options)[_])==null||M.call(T,b)})})})}})}catch(h){Hd(h)?(r=h,this.isServer||this.navigate({...r,replace:!0,ignoreBlocker:!0})):pn(h)&&(o=h),this.__store.setState(f=>({...f,statusCode:r?r.statusCode:o?404:f.matches.some(m=>m.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===l&&((u=this.commitLocationPromise)==null||u.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),c()})}),this.latestLoadPromise=l,await l;this.latestLoadPromise&&l!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(c=>({...c,statusCode:404}))},this.startViewTransition=t=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let o;if(typeof r=="object"&&this.isViewTransitionTypesSupported){const l=this.latestLocation,c=this.state.resolvedLocation,u=typeof r.types=="function"?r.types(Ts({resolvedLocation:c,location:l})):r.types;o={update:t,types:u}}else o=t;document.startViewTransition(o)}else t()},this.updateMatch=(t,r)=>{var o;let l;const c=(o=this.state.pendingMatches)==null?void 0:o.find(m=>m.id===t),u=this.state.matches.find(m=>m.id===t),h=this.state.cachedMatches.find(m=>m.id===t),f=c?"pendingMatches":u?"matches":h?"cachedMatches":"";return f&&this.__store.setState(m=>{var g;return{...m,[f]:(g=m[f])==null?void 0:g.map(y=>y.id===t?l=r(y):y)}}),l},this.getMatch=t=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===t),this.loadMatches=async({location:t,matches:r,preload:o,onReady:l,updateMatch:c=this.updateMatch,sync:u})=>{let h,f=!1;const m=async()=>{f||(f=!0,await(l==null?void 0:l()))},g=x=>!!(o&&!this.state.matches.find(w=>w.id===x)),y=(x,w)=>{var _,b,T,M;if(Hd(w)&&!w.reloadDocument)throw w;if(vs(w)||pn(w)){if(c(x.id,L=>({...L,status:vs(w)?"redirected":pn(w)?"notFound":"error",isFetching:!1,error:w,beforeLoadPromise:void 0,loaderPromise:void 0})),w.routeId||(w.routeId=x.routeId),(_=x.beforeLoadPromise)==null||_.resolve(),(b=x.loaderPromise)==null||b.resolve(),(T=x.loadPromise)==null||T.resolve(),vs(w))throw f=!0,w=this.resolveRedirect({...w,_fromLocation:t}),w;if(pn(w))throw this._handleNotFound(r,w,{updateMatch:c}),(M=this.serverSsr)==null||M.onMatchSettled({router:this,match:this.getMatch(x.id)}),w}};try{await new Promise((x,w)=>{(async()=>{var _,b,T,M;try{const L=(P,R,C)=>{var O,U;const{id:G,routeId:B}=r[P],q=this.looseRoutesById[B];if(R instanceof Promise)throw R;R.routerCode=C,h=h??P,y(this.getMatch(G),R);try{(U=(O=q.options).onError)==null||U.call(O,R)}catch(ee){R=ee,y(this.getMatch(G),R)}c(G,ee=>{var te,K;return(te=ee.beforeLoadPromise)==null||te.resolve(),(K=ee.loadPromise)==null||K.resolve(),{...ee,error:R,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[P,{id:R,routeId:C}]of r.entries()){const O=this.getMatch(R),U=(_=r[P-1])==null?void 0:_.id,G=this.looseRoutesById[C],B=G.options.pendingMs??this.options.defaultPendingMs,q=!!(l&&!this.isServer&&!g(R)&&(G.options.loader||G.options.beforeLoad||ev(G))&&typeof B=="number"&&B!==1/0&&(G.options.pendingComponent??((b=this.options)==null?void 0:b.defaultPendingComponent)));let ee=!0;if((O.beforeLoadPromise||O.loaderPromise)&&(q&&setTimeout(()=>{try{m()}catch{}},B),await O.beforeLoadPromise,ee=this.getMatch(R).status!=="success"),ee){try{c(R,de=>{const Q=de.loadPromise;return{...de,loadPromise:fi(()=>{Q==null||Q.resolve()}),beforeLoadPromise:fi()}});const te=new AbortController;let K;q&&(K=setTimeout(()=>{try{m()}catch{}},B));const{paramsError:J,searchError:z}=this.getMatch(R);J&&L(P,J,"PARSE_PARAMS"),z&&L(P,z,"VALIDATE_SEARCH");const Z=()=>U?this.getMatch(U).context:this.options.context??{};c(R,de=>({...de,isFetching:"beforeLoad",fetchCount:de.fetchCount+1,abortController:te,pendingTimeout:K,context:{...Z(),...de.__routeContext}}));const{search:X,params:A,context:$,cause:le}=this.getMatch(R),ne=g(R),re={search:X,abortController:te,params:A,preload:ne,context:$,location:t,navigate:de=>this.navigate({...de,_fromLocation:t}),buildLocation:this.buildLocation,cause:ne?"preload":le,matches:r},ce=await((M=(T=G.options).beforeLoad)==null?void 0:M.call(T,re))??{};(vs(ce)||pn(ce))&&L(P,ce,"BEFORE_LOAD"),c(R,de=>({...de,__beforeLoadContext:ce,context:{...Z(),...de.__routeContext,...ce},abortController:te}))}catch(te){L(P,te,"BEFORE_LOAD")}c(R,te=>{var K;return(K=te.beforeLoadPromise)==null||K.resolve(),{...te,beforeLoadPromise:void 0,isFetching:!1}})}}const V=r.slice(0,h),E=[];V.forEach(({id:P,routeId:R},C)=>{E.push((async()=>{const{loaderPromise:O}=this.getMatch(P);let U=!1,G=!1;if(O){await O;const B=this.getMatch(P);B.error&&y(B,B.error)}else{const B=E[C-1],q=this.looseRoutesById[R],ee=()=>{const{params:ne,loaderDeps:re,abortController:ce,context:de,cause:Q}=this.getMatch(P),pe=g(P);return{params:ne,deps:re,preload:!!pe,parentMatchPromise:B,abortController:ce,context:de,location:t,navigate:be=>this.navigate({...be,_fromLocation:t}),cause:pe?"preload":Q,route:q}},te=Date.now()-this.getMatch(P).updatedAt,K=g(P),J=K?q.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:q.options.staleTime??this.options.defaultStaleTime??0,z=q.options.shouldReload,Z=typeof z=="function"?z(ee()):z;c(P,ne=>({...ne,loaderPromise:fi(),preload:!!K&&!this.state.matches.find(re=>re.id===P)}));const X=()=>{var ne,re,ce,de,Q,pe;const be=this.getMatch(P);if(!be)return;const Fe={matches:r,match:be,params:be.params,loaderData:be.loaderData},Be=(re=(ne=q.options).head)==null?void 0:re.call(ne,Fe),It=Be==null?void 0:Be.meta,we=Be==null?void 0:Be.links,se=Be==null?void 0:Be.scripts,he=(de=(ce=q.options).scripts)==null?void 0:de.call(ce,Fe),Me=(pe=(Q=q.options).headers)==null?void 0:pe.call(Q,Fe);c(P,De=>({...De,meta:It,links:we,headScripts:se,headers:Me,scripts:he}))},A=async()=>{var ne,re,ce,de,Q;try{const pe=async()=>{const be=this.getMatch(P);be.minPendingPromise&&await be.minPendingPromise};try{this.loadRouteChunk(q),c(P,Fe=>({...Fe,isFetching:"loader"}));const be=await((re=(ne=q.options).loader)==null?void 0:re.call(ne,ee()));y(this.getMatch(P),be),await q._lazyPromise,await pe(),await q._componentsPromise,ai(()=>{c(P,Fe=>({...Fe,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:be})),X()})}catch(be){let Fe=be;await pe(),y(this.getMatch(P),be);try{(de=(ce=q.options).onError)==null||de.call(ce,be)}catch(Be){Fe=Be,y(this.getMatch(P),Be)}ai(()=>{c(P,Be=>({...Be,error:Fe,status:"error",isFetching:!1})),X()})}(Q=this.serverSsr)==null||Q.onMatchSettled({router:this,match:this.getMatch(P)})}catch(pe){ai(()=>{c(P,be=>({...be,loaderPromise:void 0})),X()}),y(this.getMatch(P),pe)}},{status:$,invalid:le}=this.getMatch(P);U=$==="success"&&(le||(Z??te>J)),K&&q.options.preload===!1||(U&&!u?(G=!0,(async()=>{try{await A();const{loaderPromise:ne,loadPromise:re}=this.getMatch(P);ne==null||ne.resolve(),re==null||re.resolve(),c(P,ce=>({...ce,loaderPromise:void 0}))}catch(ne){Hd(ne)&&await this.navigate(ne)}})()):$!=="success"||U&&u?await A():X())}if(!G){const{loaderPromise:B,loadPromise:q}=this.getMatch(P);B==null||B.resolve(),q==null||q.resolve()}return c(P,B=>({...B,isFetching:G?B.isFetching:!1,loaderPromise:G?B.loaderPromise:void 0,invalid:!1})),this.getMatch(P)})())}),await Promise.all(E),x()}catch(L){w(L)}})()}),await m()}catch(x){if(vs(x)||pn(x))throw pn(x)&&!o&&await m(),x}return r},this.invalidate=t=>{const r=o=>{var l;return((l=t==null?void 0:t.filter)==null?void 0:l.call(t,o))??!0?{...o,invalid:!0,...o.status==="error"?{status:"pending",error:void 0}:{}}:o};return this.__store.setState(o=>{var l;return{...o,matches:o.matches.map(r),cachedMatches:o.cachedMatches.map(r),pendingMatches:(l=o.pendingMatches)==null?void 0:l.map(r)}}),this.load({sync:t==null?void 0:t.sync})},this.resolveRedirect=t=>{const r=t;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=t=>{const r=t==null?void 0:t.filter;r!==void 0?this.__store.setState(o=>({...o,cachedMatches:o.cachedMatches.filter(l=>!r(l))})):this.__store.setState(o=>({...o,cachedMatches:[]}))},this.clearExpiredCache=()=>{const t=r=>{const o=this.looseRoutesById[r.routeId];if(!o.options.loader)return!0;const l=(r.preload?o.options.preloadGcTime??this.options.defaultPreloadGcTime:o.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<l)};this.clearCache({filter:t})},this.loadRouteChunk=t=>(t._lazyPromise===void 0&&(t.lazyFn?t._lazyPromise=t.lazyFn().then(r=>{const{id:o,...l}=r.options;Object.assign(t.options,l)}):t._lazyPromise=Promise.resolve()),t._componentsPromise===void 0&&(t._componentsPromise=t._lazyPromise.then(()=>Promise.all(ay.map(async r=>{const o=t.options[r];o!=null&&o.preload&&await o.preload()})))),t._componentsPromise),this.preloadRoute=async t=>{const r=this.buildLocation(t);let o=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:t});const l=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(u=>u.id)),c=new Set([...l,...this.state.cachedMatches.map(u=>u.id)]);ai(()=>{o.forEach(u=>{c.has(u.id)||this.__store.setState(h=>({...h,cachedMatches:[...h.cachedMatches,u]}))})});try{return o=await this.loadMatches({matches:o,location:r,preload:!0,updateMatch:(u,h)=>{l.has(u)?o=o.map(f=>f.id===u?h(f):f):this.updateMatch(u,h)}}),o}catch(u){if(vs(u))return u.reloadDocument?void 0:await this.preloadRoute({...u,_fromLocation:r});pn(u)||console.error(u);return}},this.matchRoute=(t,r)=>{const o={...t,to:t.to?this.resolvePathWithBase(t.from||"",t.to):void 0,params:t.params||{},leaveParams:!0},l=this.buildLocation(o);if(r!=null&&r.pending&&this.state.status!=="pending")return!1;const u=((r==null?void 0:r.pending)===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,h=El(this.basepath,u.pathname,{...r,to:l.pathname});return!h||t.params&&!Ci(h,t.params,{partial:!0})?!1:h&&((r==null?void 0:r.includeSearch)??!0)?Ci(u.search,l.search,{partial:!0})?h:!1:h},this._handleNotFound=(t,r,{updateMatch:o=this.updateMatch}={})=>{var l;const c=this.routesById[r.routeId??""]??this.routeTree,u={};for(const f of t)u[f.routeId]=f;!c.options.notFoundComponent&&((l=this.options)!=null&&l.defaultNotFoundComponent)&&(c.options.notFoundComponent=this.options.defaultNotFoundComponent),hr(c.options.notFoundComponent);const h=u[c.id];hr(h,"Could not find match for route: "+c.id),o(h.id,f=>({...f,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&c.parentRoute&&(r.routeId=c.parentRoute.id,this._handleNotFound(t,r,{updateMatch:o}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(t=>t.status==="notFound"||t.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??_S,parseSearch:e.parseSearch??yS}),typeof document<"u"&&(window.__TSR_ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(e,t){const{foundRoute:r,matchedRoutes:o,routeParams:l}=this.getMatchedRoutes(e,t==null?void 0:t.dest);let c=!1;(r?r.path!=="/"&&l["**"]:xs(e.pathname))&&(this.options.notFoundRoute?o.push(this.options.notFoundRoute):c=!0);const u=(()=>{if(c){if(this.options.notFoundMode!=="root")for(let g=o.length-1;g>=0;g--){const y=o[g];if(y.children)return y.id}return kn}})(),h=o.map(g=>{var y;let x;const w=((y=g.options.params)==null?void 0:y.parse)??g.options.parseParams;if(w)try{const _=w(l);Object.assign(l,_)}catch(_){if(x=new bS(_.message,{cause:_}),t!=null&&t.throwOnError)throw x;return x}}),f=[],m=g=>(g==null?void 0:g.id)?g.context??this.options.context??{}:this.options.context??{};return o.forEach((g,y)=>{var x,w;const _=f[y-1],[b,T,M]=(()=>{const q=(_==null?void 0:_.search)??e.search,ee=(_==null?void 0:_._strictSearch)??{};try{const te=Yd(g.options.validateSearch,{...q})??{};return[{...q,...te},{...ee,...te},void 0]}catch(te){let K=te;if(te instanceof ec||(K=new ec(te.message,{cause:te})),t!=null&&t.throwOnError)throw K;return[q,{},K]}})(),L=((w=(x=g.options).loaderDeps)==null?void 0:w.call(x,{search:b}))??"",V=L?JSON.stringify(L):"",{usedParams:E,interpolatedPath:P}=kl({path:g.fullPath,params:l,decodeCharMap:this.pathParamsDecodeCharMap}),R=kl({path:g.id,params:l,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath+V,C=this.getMatch(R),O=this.state.matches.find(q=>q.routeId===g.id),U=O?"stay":"enter";let G;if(C)G={...C,cause:U,params:O?fn(O.params,l):l,_strictParams:E,search:fn(O?O.search:C.search,b),_strictSearch:T};else{const q=g.options.loader||g.options.beforeLoad||g.lazyFn||ev(g)?"pending":"success";G={id:R,index:y,routeId:g.id,params:O?fn(O.params,l):l,_strictParams:E,pathname:pr([this.basepath,P]),updatedAt:Date.now(),search:O?fn(O.search,b):b,_strictSearch:T,searchError:void 0,status:q,isFetching:!1,error:void 0,paramsError:h[y],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:U,loaderDeps:O?fn(O.loaderDeps,L):L,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:g.options.staticData||{},loadPromise:fi(),fullPath:g.fullPath}}t!=null&&t.preload||(G.globalNotFound=u===g.id),G.searchError=M;const B=m(_);G.context={...B,...G.__routeContext,...G.__beforeLoadContext},f.push(G)}),f.forEach((g,y)=>{var x,w;const _=this.looseRoutesById[g.routeId];if(!this.getMatch(g.id)&&(t==null?void 0:t._buildLocation)!==!0){const T=f[y-1],M=m(T),L={deps:g.loaderDeps,params:g.params,context:M,location:e,navigate:V=>this.navigate({...V,_fromLocation:e}),buildLocation:this.buildLocation,cause:g.cause,abortController:g.abortController,preload:!!g.preload,matches:f};g.__routeContext=((w=(x=_.options).context)==null?void 0:w.call(x,L))??{},g.context={...M,...g.__routeContext,...g.__beforeLoadContext}}}),f}}class ec extends Error{}class bS extends Error{}function TS(s){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:s,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Yd(s,e){if(s==null)return{};if("~standard"in s){const t=s["~standard"].validate(e);if(t instanceof Promise)throw new ec("Async validation not supported");if(t.issues)throw new ec(JSON.stringify(t.issues,void 0,2),{cause:t});return t.value}return"parse"in s?s.parse(e):typeof s=="function"?s(e):{}}const ay=["component","errorComponent","pendingComponent","notFoundComponent"];function ev(s){var e;for(const t of ay)if((e=s.options[t])!=null&&e.preload)return!0;return!1}const CS="Error preloading route! ☝️";class ly{constructor(e){if(this.init=t=>{var r,o;this.originalIndex=t.originalIndex;const l=this.options,c=!(l!=null&&l.path)&&!(l!=null&&l.id);if(this.parentRoute=(o=(r=this.options).getParentRoute)==null?void 0:o.call(r),c)this._path=kn;else if(!this.parentRoute)throw new Error("Child Route instances must pass a 'getParentRoute: () => ParentRoute' option that returns a Route instance.");let u=c?kn:l==null?void 0:l.path;u&&u!=="/"&&(u=Yh(u));const h=(l==null?void 0:l.id)||u;let f=c?kn:pr([this.parentRoute.id===kn?"":this.parentRoute.id,h]);u===kn&&(u="/"),f!==kn&&(f=pr(["/",f]));const m=f===kn?"/":pr([this.parentRoute.fullPath,u]);this._path=u,this._id=f,this._fullPath=m,this._to=m,this._ssr=(l==null?void 0:l.ssr)??t.defaultSsr??!0},this.clone=t=>{this._path=t._path,this._id=t._id,this._fullPath=t._fullPath,this._to=t._to,this._ssr=t._ssr,this.options.getParentRoute=t.options.getParentRoute,this.children=t.children},this.addChildren=t=>this._addFileChildren(t),this._addFileChildren=t=>(Array.isArray(t)&&(this.children=t),typeof t=="object"&&t!==null&&(this.children=Object.values(t)),this),this._addFileTypes=()=>this,this.updateLoader=t=>(Object.assign(this.options,t),this),this.update=t=>(Object.assign(this.options,t),this),this.lazy=t=>(this.lazyFn=t,this),this.options=e||{},this.isRoot=!(e!=null&&e.getParentRoute),e!=null&&e.id&&(e!=null&&e.path))throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}}class kS extends ly{constructor(e){super(e)}}function Xh(s){const e=s.errorComponent??wc;return I.jsx(ES,{getResetKey:s.getResetKey,onCatch:s.onCatch,children:({error:t,reset:r})=>t?k.createElement(e,{error:t,reset:r}):s.children})}class ES extends k.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,t){t.error&&t.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,t){this.props.onCatch&&this.props.onCatch(e,t)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function wc({error:s}){const[e,t]=k.useState(!1);return I.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[I.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[I.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),I.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>t(r=>!r),children:e?"Hide Error":"Show Error"})]}),I.jsx("div",{style:{height:".25rem"}}),e?I.jsx("div",{children:I.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:s.message?I.jsx("code",{children:s.message}):null})}):null]})}var Xd={exports:{}},Kd={},Zd={exports:{}},Qd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv;function PS(){if(tv)return Qd;tv=1;var s=ea();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var t=typeof Object.is=="function"?Object.is:e,r=s.useState,o=s.useEffect,l=s.useLayoutEffect,c=s.useDebugValue;function u(g,y){var x=y(),w=r({inst:{value:x,getSnapshot:y}}),_=w[0].inst,b=w[1];return l(function(){_.value=x,_.getSnapshot=y,h(_)&&b({inst:_})},[g,x,y]),o(function(){return h(_)&&b({inst:_}),g(function(){h(_)&&b({inst:_})})},[g]),c(x),x}function h(g){var y=g.getSnapshot;g=g.value;try{var x=y();return!t(g,x)}catch{return!0}}function f(g,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Qd.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:m,Qd}var nv;function AS(){return nv||(nv=1,Zd.exports=PS()),Zd.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv;function NS(){if(rv)return Kd;rv=1;var s=ea(),e=AS();function t(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var r=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,l=s.useRef,c=s.useEffect,u=s.useMemo,h=s.useDebugValue;return Kd.useSyncExternalStoreWithSelector=function(f,m,g,y,x){var w=l(null);if(w.current===null){var _={hasValue:!1,value:null};w.current=_}else _=w.current;w=u(function(){function T(P){if(!M){if(M=!0,L=P,P=y(P),x!==void 0&&_.hasValue){var R=_.value;if(x(R,P))return V=R}return V=P}if(R=V,r(L,P))return R;var C=y(P);return x!==void 0&&x(R,C)?(L=P,R):(L=P,V=C)}var M=!1,L,V,E=g===void 0?null:g;return[function(){return T(m())},E===null?void 0:function(){return T(E())}]},[m,g,y,x]);var b=o(f,w[0],w[1]);return c(function(){_.hasValue=!0,_.value=b},[b]),h(b),b},Kd}var sv;function RS(){return sv||(sv=1,Xd.exports=NS()),Xd.exports}var MS=RS();function OS(s,e=t=>t){return MS.useSyncExternalStoreWithSelector(s.subscribe,()=>s.state,()=>s.state,e,IS)}function IS(s,e){if(Object.is(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;if(s instanceof Map&&e instanceof Map){if(s.size!==e.size)return!1;for(const[r,o]of s)if(!e.has(r)||!Object.is(o,e.get(r)))return!1;return!0}if(s instanceof Set&&e instanceof Set){if(s.size!==e.size)return!1;for(const r of s)if(!e.has(r))return!1;return!0}const t=Object.keys(s);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(s[t[r]],e[t[r]]))return!1;return!0}const Jd=k.createContext(null);function cy(){return typeof document>"u"?Jd:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Jd,Jd)}function On(s){const e=k.useContext(cy());return s==null||s.warn,e}function Rt(s){const e=On({warn:(s==null?void 0:s.router)===void 0}),t=(s==null?void 0:s.router)||e,r=k.useRef(void 0);return OS(t.__store,o=>{if(s!=null&&s.select){if(s.structuralSharing??t.options.defaultStructuralSharing){const l=fn(r.current,s.select(o));return r.current=l,l}return s.select(o)}return o})}const xc=k.createContext(void 0),DS=k.createContext(void 0);function Kr(s){const e=k.useContext(s.from?DS:xc);return Rt({select:r=>{const o=r.matches.find(l=>s.from?s.from===l.routeId:l.id===e);if(hr(!((s.shouldThrow??!0)&&!o),`Could not find ${s.from?`an active match from "${s.from}"`:"a nearest match!"}`),o!==void 0)return s.select?s.select(o):o},structuralSharing:s.structuralSharing})}function uy(s){return Kr({from:s.from,strict:s.strict,structuralSharing:s.structuralSharing,select:e=>s.select?s.select(e.loaderData):e.loaderData})}function dy(s){const{select:e,...t}=s;return Kr({...t,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function Kh(s){return Kr({from:s.from,strict:s.strict,shouldThrow:s.shouldThrow,structuralSharing:s.structuralSharing,select:e=>s.select?s.select(e.params):e.params})}function hy(s){return Kr({from:s.from,strict:s.strict,shouldThrow:s.shouldThrow,structuralSharing:s.structuralSharing,select:e=>s.select?s.select(e.search):e.search})}function fy(s){const{navigate:e}=On();return k.useCallback(t=>e({from:s==null?void 0:s.from,...t}),[s==null?void 0:s.from,e])}var Zh=ny();const LS=ey(Zh),Vo=typeof window<"u"?k.useLayoutEffect:k.useEffect;function eh(s){const e=k.useRef({value:s,prev:null}),t=e.current.value;return s!==t&&(e.current={value:s,prev:t}),e.current.prev}function FS(s,e,t={},r={}){const o=k.useRef(typeof IntersectionObserver=="function"),l=k.useRef(null);return k.useEffect(()=>{if(!(!s.current||!o.current||r.disabled))return l.current=new IntersectionObserver(([c])=>{e(c)},t),l.current.observe(s.current),()=>{var c;(c=l.current)==null||c.disconnect()}},[e,t,r.disabled,s]),l.current}function VS(s){const e=k.useRef(null);return k.useImperativeHandle(s,()=>e.current,[]),e}function BS(){const s=On(),e=k.useRef({router:s,mounted:!1}),t=Rt({select:({isLoading:g})=>g}),[r,o]=k.useState(!1),l=Rt({select:g=>g.matches.some(y=>y.status==="pending"),structuralSharing:!0}),c=eh(t),u=t||r||l,h=eh(u),f=t||l,m=eh(f);return s.isServer||(s.startTransition=g=>{o(!0),k.startTransition(()=>{g(),o(!1)})}),k.useEffect(()=>{const g=s.history.subscribe(s.load),y=s.buildLocation({to:s.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return xs(s.latestLocation.href)!==xs(y.href)&&s.commitLocation({...y,replace:!0}),()=>{g()}},[s,s.history]),Vo(()=>{if(typeof window<"u"&&s.clientSsr||e.current.router===s&&e.current.mounted)return;e.current={router:s,mounted:!0},(async()=>{try{await s.load()}catch(y){console.error(y)}})()},[s]),Vo(()=>{c&&!t&&s.emit({type:"onLoad",...Ts(s.state)})},[c,s,t]),Vo(()=>{m&&!f&&s.emit({type:"onBeforeRouteMount",...Ts(s.state)})},[f,m,s]),Vo(()=>{h&&!u&&(s.emit({type:"onResolved",...Ts(s.state)}),s.__store.setState(g=>({...g,status:"idle",resolvedLocation:g.location})),mS(s))},[u,h,s]),null}function zS(s){const e=Rt({select:t=>`not-found-${t.location.pathname}-${t.status}`});return I.jsx(Xh,{getResetKey:()=>e,onCatch:(t,r)=>{var o;if(pn(t))(o=s.onCatch)==null||o.call(s,t,r);else throw t},errorComponent:({error:t})=>{var r;if(pn(t))return(r=s.fallback)==null?void 0:r.call(s,t);throw t},children:s.children})}function US(){return I.jsx("p",{children:"Not Found"})}function jl(s){return I.jsx(I.Fragment,{children:s.children})}function py(s,e,t){return e.options.notFoundComponent?I.jsx(e.options.notFoundComponent,{data:t}):s.options.defaultNotFoundComponent?I.jsx(s.options.defaultNotFoundComponent,{data:t}):I.jsx(US,{})}var th,iv;function jS(){if(iv)return th;iv=1;const s={},e=s.hasOwnProperty,t=(C,O)=>{for(const U in C)e.call(C,U)&&O(U,C[U])},r=(C,O)=>(O&&t(O,(U,G)=>{C[U]=G}),C),o=(C,O)=>{const U=C.length;let G=-1;for(;++G<U;)O(C[G])},l=C=>"\\u"+("0000"+C).slice(-4),c=(C,O)=>{let U=C.toString(16);return O?U:U.toUpperCase()},u=s.toString,h=Array.isArray,f=C=>typeof Buffer=="function"&&Buffer.isBuffer(C),m=C=>u.call(C)=="[object Object]",g=C=>typeof C=="string"||u.call(C)=="[object String]",y=C=>typeof C=="number"||u.call(C)=="[object Number]",x=C=>typeof C=="bigint",w=C=>typeof C=="function",_=C=>u.call(C)=="[object Map]",b=C=>u.call(C)=="[object Set]",T={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},M=/[\\\b\f\n\r\t]/,L=/[0-9]/,V=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,E=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,P=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,R=(C,O)=>{const U=()=>{J=K,++O.indentLevel,K=O.indent.repeat(O.indentLevel)},G={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},B=O&&O.json;B&&(G.quotes="double",G.wrap=!0),O=r(G,O),O.quotes!="single"&&O.quotes!="double"&&O.quotes!="backtick"&&(O.quotes="single");const q=O.quotes=="double"?'"':O.quotes=="backtick"?"`":"'",ee=O.compact,te=O.lowercaseHex;let K=O.indent.repeat(O.indentLevel),J="";const z=O.__inline1__,Z=O.__inline2__,X=ee?"":`
`;let A,$=!0;const le=O.numbers=="binary",ne=O.numbers=="octal",re=O.numbers=="decimal",ce=O.numbers=="hexadecimal";if(B&&C&&w(C.toJSON)&&(C=C.toJSON()),!g(C)){if(_(C))return C.size==0?"new Map()":(ee||(O.__inline1__=!0,O.__inline2__=!1),"new Map("+R(Array.from(C),O)+")");if(b(C))return C.size==0?"new Set()":"new Set("+R(Array.from(C),O)+")";if(f(C))return C.length==0?"Buffer.from([])":"Buffer.from("+R(Array.from(C),O)+")";if(h(C))return A=[],O.wrap=!0,z&&(O.__inline1__=!1,O.__inline2__=!0),Z||U(),o(C,Q=>{$=!1,Z&&(O.__inline2__=!1),A.push((ee||Z?"":K)+R(Q,O))}),$?"[]":Z?"["+A.join(", ")+"]":"["+X+A.join(","+X)+X+(ee?"":J)+"]";if(y(C)||x(C)){if(B)return JSON.stringify(Number(C));let Q;if(re)Q=String(C);else if(ce){let pe=C.toString(16);te||(pe=pe.toUpperCase()),Q="0x"+pe}else le?Q="0b"+C.toString(2):ne&&(Q="0o"+C.toString(8));return x(C)?Q+"n":Q}else return x(C)?B?JSON.stringify(Number(C)):C+"n":m(C)?(A=[],O.wrap=!0,U(),t(C,(Q,pe)=>{$=!1,A.push((ee?"":K)+R(Q,O)+":"+(ee?"":" ")+R(pe,O))}),$?"{}":"{"+X+A.join(","+X)+X+(ee?"":J)+"}"):B?JSON.stringify(C)||"null":String(C)}const de=O.escapeEverything?E:P;return A=C.replace(de,(Q,pe,be,Fe,Be,It)=>{if(pe){if(O.minimal)return pe;const se=pe.charCodeAt(0),he=pe.charCodeAt(1);if(O.es6){const Me=(se-55296)*1024+he-56320+65536;return"\\u{"+c(Me,te)+"}"}return l(c(se,te))+l(c(he,te))}if(be)return l(c(be.charCodeAt(0),te));if(Q=="\0"&&!B&&!L.test(It.charAt(Be+1)))return"\\0";if(Fe)return Fe==q||O.escapeEverything?"\\"+Fe:Fe;if(M.test(Q))return T[Q];if(O.minimal&&!V.test(Q))return Q;const we=c(Q.charCodeAt(0),te);return B||we.length>2?l(we):"\\x"+("00"+we).slice(-2)}),q=="`"&&(A=A.replace(/\$\{/g,"\\${")),O.isScriptContext&&(A=A.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,B?"\\u003C!--":"\\x3C!--")),O.wrap&&(A=q+A+q),A};return R.version="3.0.2",th=R,th}jS();function GS({children:s,log:e}){return typeof document<"u"?null:I.jsx("script",{className:"tsr-once",dangerouslySetInnerHTML:{__html:[s,"",'if (typeof __TSR_SSR__ !== "undefined") __TSR_SSR__.cleanScripts()'].filter(Boolean).join(`
`)}})}function WS(){const s=On(),t=(s.options.getScrollRestorationKey||_h)(s.latestLocation),r=t!==_h(s.latestLocation)?t:null;return!s.isScrollRestoring||!s.isServer?null:I.jsx(GS,{children:`(${oy.toString()})(${JSON.stringify(Ql)},${JSON.stringify(r)}, undefined, true)`,log:!1})}const my=k.memo(function({matchId:e}){var t,r;const o=On(),l=Rt({select:T=>{var M;return(M=T.matches.find(L=>L.id===e))==null?void 0:M.routeId}});hr(l);const c=o.routesById[l],u=c.options.pendingComponent??o.options.defaultPendingComponent,h=u?I.jsx(u,{}):null,f=c.options.errorComponent??o.options.defaultErrorComponent,m=c.options.onCatch??o.options.defaultOnCatch,g=c.isRoot?c.options.notFoundComponent??((t=o.options.notFoundRoute)==null?void 0:t.options.component):c.options.notFoundComponent,y=(!c.isRoot||c.options.wrapInSuspense)&&(c.options.wrapInSuspense??u??((r=c.options.errorComponent)==null?void 0:r.preload))?k.Suspense:jl,x=f?Xh:jl,w=g?zS:jl,_=Rt({select:T=>T.loadedAt}),b=Rt({select:T=>{var M;const L=T.matches.findIndex(V=>V.id===e);return(M=T.matches[L-1])==null?void 0:M.routeId}});return I.jsxs(I.Fragment,{children:[I.jsx(xc.Provider,{value:e,children:I.jsx(y,{fallback:h,children:I.jsx(x,{getResetKey:()=>_,errorComponent:f||wc,onCatch:(T,M)=>{if(pn(T))throw T;m==null||m(T,M)},children:I.jsx(w,{fallback:T=>{if(!g||T.routeId&&T.routeId!==l||!T.routeId&&!c.isRoot)throw T;return k.createElement(g,T)},children:I.jsx(qS,{matchId:e})})})})}),b===kn&&o.options.scrollRestoration?I.jsxs(I.Fragment,{children:[I.jsx($S,{}),I.jsx(WS,{})]}):null]})});function $S(){const s=On(),e=k.useRef(void 0);return I.jsx("script",{suppressHydrationWarning:!0,ref:t=>{t&&(e.current===void 0||e.current.href!==s.latestLocation.href)&&(s.emit({type:"onRendered",...Ts(s.state)}),e.current=s.latestLocation)}},s.latestLocation.state.key)}const qS=k.memo(function({matchId:e}){var t,r,o;const l=On(),{match:c,key:u,routeId:h}=Rt({select:y=>{const x=y.matches.findIndex(L=>L.id===e),w=y.matches[x],_=w.routeId,b=l.routesById[_].options.remountDeps??l.options.defaultRemountDeps,T=b==null?void 0:b({routeId:_,loaderDeps:w.loaderDeps,params:w._strictParams,search:w._strictSearch});return{key:T?JSON.stringify(T):void 0,routeId:_,match:vh(w,["id","status","error"])}},structuralSharing:!0}),f=l.routesById[h],m=k.useMemo(()=>{const y=f.options.component??l.options.defaultComponent;return y?I.jsx(y,{},u):I.jsx(gy,{})},[u,f.options.component,l.options.defaultComponent]),g=(f.options.errorComponent??l.options.defaultErrorComponent)||wc;if(c.status==="notFound")return hr(pn(c.error)),py(l,f,c.error);if(c.status==="redirected")throw hr(vs(c.error)),(t=l.getMatch(c.id))==null?void 0:t.loadPromise;if(c.status==="error"){if(l.isServer)return I.jsx(g,{error:c.error,reset:void 0,info:{componentStack:""}});throw c.error}if(c.status==="pending"){const y=f.options.pendingMinMs??l.options.defaultPendingMinMs;if(y&&!((r=l.getMatch(c.id))!=null&&r.minPendingPromise)&&!l.isServer){const x=fi();Promise.resolve().then(()=>{l.updateMatch(c.id,w=>({...w,minPendingPromise:x}))}),setTimeout(()=>{x.resolve(),l.updateMatch(c.id,w=>({...w,minPendingPromise:void 0}))},y)}throw(o=l.getMatch(c.id))==null?void 0:o.loadPromise}return m}),gy=k.memo(function(){const e=On(),t=k.useContext(xc),r=Rt({select:f=>{var m;return(m=f.matches.find(g=>g.id===t))==null?void 0:m.routeId}}),o=e.routesById[r],l=Rt({select:f=>{const g=f.matches.find(y=>y.id===t);return hr(g),g.globalNotFound}}),c=Rt({select:f=>{var m;const g=f.matches,y=g.findIndex(x=>x.id===t);return(m=g[y+1])==null?void 0:m.id}});if(l)return py(e,o,void 0);if(!c)return null;const u=I.jsx(my,{matchId:c}),h=e.options.defaultPendingComponent?I.jsx(e.options.defaultPendingComponent,{}):null;return t===kn?I.jsx(k.Suspense,{fallback:h,children:u}):u});function HS(){const s=On(),e=s.options.defaultPendingComponent?I.jsx(s.options.defaultPendingComponent,{}):null,t=s.isServer||typeof document<"u"&&s.clientSsr?jl:k.Suspense,r=I.jsxs(t,{fallback:e,children:[I.jsx(BS,{}),I.jsx(YS,{})]});return s.options.InnerWrap?I.jsx(s.options.InnerWrap,{children:r}):r}function YS(){const s=Rt({select:t=>{var r;return(r=t.matches[0])==null?void 0:r.id}}),e=Rt({select:t=>t.loadedAt});return I.jsx(xc.Provider,{value:s,children:I.jsx(Xh,{getResetKey:()=>e,errorComponent:wc,onCatch:t=>{t.message||t.toString()},children:s?I.jsx(my,{matchId:s}):null})})}function XS(s){return Rt({select:e=>{const t=e.matches;return s!=null&&s.select?s.select(t):t},structuralSharing:s==null?void 0:s.structuralSharing})}function KS(s,e){const t=On(),[r,o]=k.useState(!1),l=k.useRef(!1),c=VS(e),{activeProps:u=()=>({className:"active"}),inactiveProps:h=()=>({}),activeOptions:f,to:m,preload:g,preloadDelay:y,hashScrollIntoView:x,replace:w,startTransition:_,resetScroll:b,viewTransition:T,children:M,target:L,disabled:V,style:E,className:P,onClick:R,onFocus:C,onMouseEnter:O,onMouseLeave:U,onTouchStart:G,ignoreBlocker:B,...q}=s,{params:ee,search:te,hash:K,state:J,mask:z,reloadDocument:Z,...X}=q,A=k.useMemo(()=>{try{return new URL(`${m}`),"external"}catch{}return"internal"},[m]),$=Rt({select:Pe=>Pe.location.search,structuralSharing:!0}),le=XS({select:Pe=>{var Oe;return s.from??((Oe=Pe[Pe.length-1])==null?void 0:Oe.fullPath)}}),ne=k.useMemo(()=>({...s,from:le}),[s,le]),re=k.useMemo(()=>t.buildLocation(ne),[t,ne,$]),ce=k.useMemo(()=>ne.reloadDocument?!1:g??t.options.defaultPreload,[t.options.defaultPreload,g,ne.reloadDocument]),de=y??t.options.defaultPreloadDelay??0,Q=Rt({select:Pe=>{if(f!=null&&f.exact){if(!oS(Pe.location.pathname,re.pathname,t.basepath))return!1}else{const Oe=Kl(Pe.location.pathname,t.basepath).split("/");if(!Kl(re.pathname,t.basepath).split("/").every((er,Ls)=>er===Oe[Ls]))return!1}return((f==null?void 0:f.includeSearch)??!0)&&!Ci(Pe.location.search,re.search,{partial:!(f!=null&&f.exact),ignoreUndefined:!(f!=null&&f.explicitUndefined)})?!1:f!=null&&f.includeHash?Pe.location.hash===re.hash:!0}}),pe=k.useCallback(()=>{t.preloadRoute(ne).catch(Pe=>{console.warn(Pe),console.warn(CS)})},[ne,t]),be=k.useCallback(Pe=>{Pe!=null&&Pe.isIntersecting&&pe()},[pe]);if(FS(c,be,{rootMargin:"100px"},{disabled:!!V||ce!=="viewport"}),Vo(()=>{l.current||!V&&ce==="render"&&(pe(),l.current=!0)},[V,pe,ce]),A==="external")return{...X,ref:c,type:A,href:m,...M&&{children:M},...L&&{target:L},...V&&{disabled:V},...E&&{style:E},...P&&{className:P},...R&&{onClick:R},...C&&{onFocus:C},...O&&{onMouseEnter:O},...U&&{onMouseLeave:U},...G&&{onTouchStart:G}};const Fe=Pe=>{if(!V&&!ZS(Pe)&&!Pe.defaultPrevented&&(!L||L==="_self")&&Pe.button===0){Pe.preventDefault(),Zh.flushSync(()=>{o(!0)});const Oe=t.subscribe("onResolved",()=>{Oe(),o(!1)});return t.navigate({...ne,replace:w,resetScroll:b,hashScrollIntoView:x,startTransition:_,viewTransition:T,ignoreBlocker:B})}},Be=Pe=>{V||ce&&pe()},It=Be,we=Pe=>{if(V)return;const Oe=Pe.target||{};if(ce){if(Oe.preloadTimeout)return;Oe.preloadTimeout=setTimeout(()=>{Oe.preloadTimeout=null,pe()},de)}},se=Pe=>{if(V)return;const Oe=Pe.target||{};Oe.preloadTimeout&&(clearTimeout(Oe.preloadTimeout),Oe.preloadTimeout=null)},he=Pe=>Oe=>{var bt;(bt=Oe.persist)==null||bt.call(Oe),Pe.filter(Boolean).forEach(on=>{Oe.defaultPrevented||on(Oe)})},Me=Q?ws(u,{})??{}:{},De=Q?{}:ws(h,{}),Te=[P,Me.className,De.className].filter(Boolean).join(" "),Re={...E,...Me.style,...De.style};return{...X,...Me,...De,href:V?void 0:re.maskedLocation?t.history.createHref(re.maskedLocation.href):t.history.createHref(re.href),ref:c,onClick:he([R,Fe]),onFocus:he([C,Be]),onMouseEnter:he([O,we]),onMouseLeave:he([U,se]),onTouchStart:he([G,It]),disabled:!!V,target:L,...Object.keys(Re).length&&{style:Re},...Te&&{className:Te},...V&&{role:"link","aria-disabled":!0},...Q&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}const Yo=k.forwardRef((s,e)=>{const{_asChild:t,...r}=s,{type:o,ref:l,...c}=KS(r,e),u=typeof r.children=="function"?r.children({isActive:c["data-status"]==="active"}):r.children;return typeof t>"u"&&delete c.disabled,k.createElement(t||"a",{...c,ref:l},u)});function ZS(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}class QS extends ly{constructor(e){super(e),this.useMatch=t=>Kr({select:t==null?void 0:t.select,from:this.id,structuralSharing:t==null?void 0:t.structuralSharing}),this.useRouteContext=t=>Kr({...t,from:this.id,select:r=>t!=null&&t.select?t.select(r.context):r.context}),this.useSearch=t=>hy({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useParams=t=>Kh({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useLoaderDeps=t=>dy({...t,from:this.id}),this.useLoaderData=t=>uy({...t,from:this.id}),this.useNavigate=()=>fy({from:this.fullPath}),this.Link=ta.forwardRef((t,r)=>I.jsx(Yo,{ref:r,from:this.fullPath,...t})),this.$$typeof=Symbol.for("react.memo")}}function Qh(s){return new QS(s)}class JS extends kS{constructor(e){super(e),this.useMatch=t=>Kr({select:t==null?void 0:t.select,from:this.id,structuralSharing:t==null?void 0:t.structuralSharing}),this.useRouteContext=t=>Kr({...t,from:this.id,select:r=>t!=null&&t.select?t.select(r.context):r.context}),this.useSearch=t=>hy({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useParams=t=>Kh({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useLoaderDeps=t=>dy({...t,from:this.id}),this.useLoaderData=t=>uy({...t,from:this.id}),this.useNavigate=()=>fy({from:this.fullPath}),this.Link=ta.forwardRef((t,r)=>I.jsx(Yo,{ref:r,from:this.fullPath,...t})),this.$$typeof=Symbol.for("react.memo")}}function eb(s){return new JS(s)}const tb=s=>new nb(s);class nb extends SS{constructor(e){super(e)}}function rb({router:s,children:e,...t}){s.update({...s.options,...t,context:{...s.options.context,...t.context}});const r=cy(),o=I.jsx(r.Provider,{value:s,children:e});return s.options.Wrap?I.jsx(s.options.Wrap,{children:o}):o}function sb({router:s,...e}){return I.jsx(rb,{router:s,...e,children:I.jsx(HS,{})})}function vy(s){var e,t,r="";if(typeof s=="string"||typeof s=="number")r+=s;else if(typeof s=="object")if(Array.isArray(s)){var o=s.length;for(e=0;e<o;e++)s[e]&&(t=vy(s[e]))&&(r&&(r+=" "),r+=t)}else for(t in s)s[t]&&(r&&(r+=" "),r+=t);return r}function yy(){for(var s,e,t=0,r="",o=arguments.length;t<o;t++)(s=arguments[t])&&(e=vy(s))&&(r&&(r+=" "),r+=e);return r}const Jh="-",ib=s=>{const e=ab(s),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=s;return{getClassGroupId:c=>{const u=c.split(Jh);return u[0]===""&&u.length!==1&&u.shift(),_y(u,e)||ob(c)},getConflictingClassGroupIds:(c,u)=>{const h=t[c]||[];return u&&r[c]?[...h,...r[c]]:h}}},_y=(s,e)=>{var c;if(s.length===0)return e.classGroupId;const t=s[0],r=e.nextPart.get(t),o=r?_y(s.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const l=s.join(Jh);return(c=e.validators.find(({validator:u})=>u(l)))==null?void 0:c.classGroupId},ov=/^\[(.+)\]$/,ob=s=>{if(ov.test(s)){const e=ov.exec(s)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},ab=s=>{const{theme:e,classGroups:t}=s,r={nextPart:new Map,validators:[]};for(const o in t)wh(t[o],r,o,e);return r},wh=(s,e,t,r)=>{s.forEach(o=>{if(typeof o=="string"){const l=o===""?e:av(e,o);l.classGroupId=t;return}if(typeof o=="function"){if(lb(o)){wh(o(r),e,t,r);return}e.validators.push({validator:o,classGroupId:t});return}Object.entries(o).forEach(([l,c])=>{wh(c,av(e,l),t,r)})})},av=(s,e)=>{let t=s;return e.split(Jh).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},lb=s=>s.isThemeGetter,cb=s=>{if(s<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const o=(l,c)=>{t.set(l,c),e++,e>s&&(e=0,r=t,t=new Map)};return{get(l){let c=t.get(l);if(c!==void 0)return c;if((c=r.get(l))!==void 0)return o(l,c),c},set(l,c){t.has(l)?t.set(l,c):o(l,c)}}},xh="!",Sh=":",ub=Sh.length,db=s=>{const{prefix:e,experimentalParseClassName:t}=s;let r=o=>{const l=[];let c=0,u=0,h=0,f;for(let w=0;w<o.length;w++){let _=o[w];if(c===0&&u===0){if(_===Sh){l.push(o.slice(h,w)),h=w+ub;continue}if(_==="/"){f=w;continue}}_==="["?c++:_==="]"?c--:_==="("?u++:_===")"&&u--}const m=l.length===0?o:o.substring(h),g=hb(m),y=g!==m,x=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:x}};if(e){const o=e+Sh,l=r;r=c=>c.startsWith(o)?l(c.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const o=r;r=l=>t({className:l,parseClassName:o})}return r},hb=s=>s.endsWith(xh)?s.substring(0,s.length-1):s.startsWith(xh)?s.substring(1):s,fb=s=>{const e=Object.fromEntries(s.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let l=[];return r.forEach(c=>{c[0]==="["||e[c]?(o.push(...l.sort(),c),l=[]):l.push(c)}),o.push(...l.sort()),o}},pb=s=>({cache:cb(s.cacheSize),parseClassName:db(s),sortModifiers:fb(s),...ib(s)}),mb=/\s+/,gb=(s,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:l}=e,c=[],u=s.trim().split(mb);let h="";for(let f=u.length-1;f>=0;f-=1){const m=u[f],{isExternal:g,modifiers:y,hasImportantModifier:x,baseClassName:w,maybePostfixModifierPosition:_}=t(m);if(g){h=m+(h.length>0?" "+h:h);continue}let b=!!_,T=r(b?w.substring(0,_):w);if(!T){if(!b){h=m+(h.length>0?" "+h:h);continue}if(T=r(w),!T){h=m+(h.length>0?" "+h:h);continue}b=!1}const M=l(y).join(":"),L=x?M+xh:M,V=L+T;if(c.includes(V))continue;c.push(V);const E=o(T,b);for(let P=0;P<E.length;++P){const R=E[P];c.push(L+R)}h=m+(h.length>0?" "+h:h)}return h};function vb(){let s=0,e,t,r="";for(;s<arguments.length;)(e=arguments[s++])&&(t=wy(e))&&(r&&(r+=" "),r+=t);return r}const wy=s=>{if(typeof s=="string")return s;let e,t="";for(let r=0;r<s.length;r++)s[r]&&(e=wy(s[r]))&&(t&&(t+=" "),t+=e);return t};function yb(s,...e){let t,r,o,l=c;function c(h){const f=e.reduce((m,g)=>g(m),s());return t=pb(f),r=t.cache.get,o=t.cache.set,l=u,u(h)}function u(h){const f=r(h);if(f)return f;const m=gb(h,t);return o(h,m),m}return function(){return l(vb.apply(null,arguments))}}const vt=s=>{const e=t=>t[s]||[];return e.isThemeGetter=!0,e},xy=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Sy=/^\((?:(\w[\w-]*):)?(.+)\)$/i,_b=/^\d+\/\d+$/,wb=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xb=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Sb=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,bb=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Tb=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,li=s=>_b.test(s),Ie=s=>!!s&&!Number.isNaN(Number(s)),Ur=s=>!!s&&Number.isInteger(Number(s)),nh=s=>s.endsWith("%")&&Ie(s.slice(0,-1)),cr=s=>wb.test(s),Cb=()=>!0,kb=s=>xb.test(s)&&!Sb.test(s),by=()=>!1,Eb=s=>bb.test(s),Pb=s=>Tb.test(s),Ab=s=>!ve(s)&&!ye(s),Nb=s=>zi(s,ky,by),ve=s=>xy.test(s),gs=s=>zi(s,Ey,kb),rh=s=>zi(s,Db,Ie),lv=s=>zi(s,Ty,by),Rb=s=>zi(s,Cy,Pb),Pl=s=>zi(s,Py,Eb),ye=s=>Sy.test(s),Lo=s=>Ui(s,Ey),Mb=s=>Ui(s,Lb),cv=s=>Ui(s,Ty),Ob=s=>Ui(s,ky),Ib=s=>Ui(s,Cy),Al=s=>Ui(s,Py,!0),zi=(s,e,t)=>{const r=xy.exec(s);return r?r[1]?e(r[1]):t(r[2]):!1},Ui=(s,e,t=!1)=>{const r=Sy.exec(s);return r?r[1]?e(r[1]):t:!1},Ty=s=>s==="position"||s==="percentage",Cy=s=>s==="image"||s==="url",ky=s=>s==="length"||s==="size"||s==="bg-size",Ey=s=>s==="length",Db=s=>s==="number",Lb=s=>s==="family-name",Py=s=>s==="shadow",Fb=()=>{const s=vt("color"),e=vt("font"),t=vt("text"),r=vt("font-weight"),o=vt("tracking"),l=vt("leading"),c=vt("breakpoint"),u=vt("container"),h=vt("spacing"),f=vt("radius"),m=vt("shadow"),g=vt("inset-shadow"),y=vt("text-shadow"),x=vt("drop-shadow"),w=vt("blur"),_=vt("perspective"),b=vt("aspect"),T=vt("ease"),M=vt("animate"),L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...V(),ye,ve],P=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],C=()=>[ye,ve,h],O=()=>[li,"full","auto",...C()],U=()=>[Ur,"none","subgrid",ye,ve],G=()=>["auto",{span:["full",Ur,ye,ve]},Ur,ye,ve],B=()=>[Ur,"auto",ye,ve],q=()=>["auto","min","max","fr",ye,ve],ee=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],te=()=>["start","end","center","stretch","center-safe","end-safe"],K=()=>["auto",...C()],J=()=>[li,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],z=()=>[s,ye,ve],Z=()=>[...V(),cv,lv,{position:[ye,ve]}],X=()=>["no-repeat",{repeat:["","x","y","space","round"]}],A=()=>["auto","cover","contain",Ob,Nb,{size:[ye,ve]}],$=()=>[nh,Lo,gs],le=()=>["","none","full",f,ye,ve],ne=()=>["",Ie,Lo,gs],re=()=>["solid","dashed","dotted","double"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],de=()=>[Ie,nh,cv,lv],Q=()=>["","none",w,ye,ve],pe=()=>["none",Ie,ye,ve],be=()=>["none",Ie,ye,ve],Fe=()=>[Ie,ye,ve],Be=()=>[li,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[cr],breakpoint:[cr],color:[Cb],container:[cr],"drop-shadow":[cr],ease:["in","out","in-out"],font:[Ab],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[cr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[cr],shadow:[cr],spacing:["px",Ie],text:[cr],"text-shadow":[cr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",li,ve,ye,b]}],container:["container"],columns:[{columns:[Ie,ve,ye,u]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[Ur,"auto",ye,ve]}],basis:[{basis:[li,"full","auto",u,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ie,li,"auto","initial","none",ve]}],grow:[{grow:["",Ie,ye,ve]}],shrink:[{shrink:["",Ie,ye,ve]}],order:[{order:[Ur,"first","last","none",ye,ve]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:G()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:G()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":q()}],"auto-rows":[{"auto-rows":q()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...ee(),"normal"]}],"justify-items":[{"justify-items":[...te(),"normal"]}],"justify-self":[{"justify-self":["auto",...te()]}],"align-content":[{content:["normal",...ee()]}],"align-items":[{items:[...te(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...te(),{baseline:["","last"]}]}],"place-content":[{"place-content":ee()}],"place-items":[{"place-items":[...te(),"baseline"]}],"place-self":[{"place-self":["auto",...te()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:K()}],mx:[{mx:K()}],my:[{my:K()}],ms:[{ms:K()}],me:[{me:K()}],mt:[{mt:K()}],mr:[{mr:K()}],mb:[{mb:K()}],ml:[{ml:K()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:J()}],w:[{w:[u,"screen",...J()]}],"min-w":[{"min-w":[u,"screen","none",...J()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[c]},...J()]}],h:[{h:["screen","lh",...J()]}],"min-h":[{"min-h":["screen","lh","none",...J()]}],"max-h":[{"max-h":["screen","lh",...J()]}],"font-size":[{text:["base",t,Lo,gs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ye,rh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",nh,ve]}],"font-family":[{font:[Mb,ve,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,ye,ve]}],"line-clamp":[{"line-clamp":[Ie,"none",ye,rh]}],leading:[{leading:[l,...C()]}],"list-image":[{"list-image":["none",ye,ve]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ye,ve]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ie,"from-font","auto",ye,gs]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[Ie,"auto",ye,ve]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye,ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye,ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Z()}],"bg-repeat":[{bg:X()}],"bg-size":[{bg:A()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ur,ye,ve],radial:["",ye,ve],conic:[Ur,ye,ve]},Ib,Rb]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:$()}],"gradient-via-pos":[{via:$()}],"gradient-to-pos":[{to:$()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:le()}],"rounded-s":[{"rounded-s":le()}],"rounded-e":[{"rounded-e":le()}],"rounded-t":[{"rounded-t":le()}],"rounded-r":[{"rounded-r":le()}],"rounded-b":[{"rounded-b":le()}],"rounded-l":[{"rounded-l":le()}],"rounded-ss":[{"rounded-ss":le()}],"rounded-se":[{"rounded-se":le()}],"rounded-ee":[{"rounded-ee":le()}],"rounded-es":[{"rounded-es":le()}],"rounded-tl":[{"rounded-tl":le()}],"rounded-tr":[{"rounded-tr":le()}],"rounded-br":[{"rounded-br":le()}],"rounded-bl":[{"rounded-bl":le()}],"border-w":[{border:ne()}],"border-w-x":[{"border-x":ne()}],"border-w-y":[{"border-y":ne()}],"border-w-s":[{"border-s":ne()}],"border-w-e":[{"border-e":ne()}],"border-w-t":[{"border-t":ne()}],"border-w-r":[{"border-r":ne()}],"border-w-b":[{"border-b":ne()}],"border-w-l":[{"border-l":ne()}],"divide-x":[{"divide-x":ne()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ne()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...re(),"hidden","none"]}],"divide-style":[{divide:[...re(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...re(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ie,ye,ve]}],"outline-w":[{outline:["",Ie,Lo,gs]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",m,Al,Pl]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",g,Al,Pl]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[Ie,gs]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":ne()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",y,Al,Pl]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[Ie,ye,ve]}],"mix-blend":[{"mix-blend":[...ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ie]}],"mask-image-linear-from-pos":[{"mask-linear-from":de()}],"mask-image-linear-to-pos":[{"mask-linear-to":de()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":de()}],"mask-image-t-to-pos":[{"mask-t-to":de()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":de()}],"mask-image-r-to-pos":[{"mask-r-to":de()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":de()}],"mask-image-b-to-pos":[{"mask-b-to":de()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":de()}],"mask-image-l-to-pos":[{"mask-l-to":de()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":de()}],"mask-image-x-to-pos":[{"mask-x-to":de()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":de()}],"mask-image-y-to-pos":[{"mask-y-to":de()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[ye,ve]}],"mask-image-radial-from-pos":[{"mask-radial-from":de()}],"mask-image-radial-to-pos":[{"mask-radial-to":de()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":V()}],"mask-image-conic-pos":[{"mask-conic":[Ie]}],"mask-image-conic-from-pos":[{"mask-conic-from":de()}],"mask-image-conic-to-pos":[{"mask-conic-to":de()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Z()}],"mask-repeat":[{mask:X()}],"mask-size":[{mask:A()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ye,ve]}],filter:[{filter:["","none",ye,ve]}],blur:[{blur:Q()}],brightness:[{brightness:[Ie,ye,ve]}],contrast:[{contrast:[Ie,ye,ve]}],"drop-shadow":[{"drop-shadow":["","none",x,Al,Pl]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",Ie,ye,ve]}],"hue-rotate":[{"hue-rotate":[Ie,ye,ve]}],invert:[{invert:["",Ie,ye,ve]}],saturate:[{saturate:[Ie,ye,ve]}],sepia:[{sepia:["",Ie,ye,ve]}],"backdrop-filter":[{"backdrop-filter":["","none",ye,ve]}],"backdrop-blur":[{"backdrop-blur":Q()}],"backdrop-brightness":[{"backdrop-brightness":[Ie,ye,ve]}],"backdrop-contrast":[{"backdrop-contrast":[Ie,ye,ve]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ie,ye,ve]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ie,ye,ve]}],"backdrop-invert":[{"backdrop-invert":["",Ie,ye,ve]}],"backdrop-opacity":[{"backdrop-opacity":[Ie,ye,ve]}],"backdrop-saturate":[{"backdrop-saturate":[Ie,ye,ve]}],"backdrop-sepia":[{"backdrop-sepia":["",Ie,ye,ve]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ye,ve]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ie,"initial",ye,ve]}],ease:[{ease:["linear","initial",T,ye,ve]}],delay:[{delay:[Ie,ye,ve]}],animate:[{animate:["none",M,ye,ve]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[_,ye,ve]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:pe()}],"rotate-x":[{"rotate-x":pe()}],"rotate-y":[{"rotate-y":pe()}],"rotate-z":[{"rotate-z":pe()}],scale:[{scale:be()}],"scale-x":[{"scale-x":be()}],"scale-y":[{"scale-y":be()}],"scale-z":[{"scale-z":be()}],"scale-3d":["scale-3d"],skew:[{skew:Fe()}],"skew-x":[{"skew-x":Fe()}],"skew-y":[{"skew-y":Fe()}],transform:[{transform:[ye,ve,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Be()}],"translate-x":[{"translate-x":Be()}],"translate-y":[{"translate-y":Be()}],"translate-z":[{"translate-z":Be()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye,ve]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye,ve]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[Ie,Lo,gs,rh]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Vb=yb(Fb);function Mt(...s){return Vb(yy(s))}function Ay({className:s,...e}){return I.jsx("div",{"data-slot":"card",className:Mt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...e})}function Bb({className:s,...e}){return I.jsx("div",{"data-slot":"card-header",className:Mt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...e})}function zb({className:s,...e}){return I.jsx("div",{"data-slot":"card-title",className:Mt("leading-none font-semibold",s),...e})}function Ub({className:s,...e}){return I.jsx("div",{"data-slot":"card-description",className:Mt("text-muted-foreground text-sm",s),...e})}function jb({className:s,...e}){return I.jsx("div",{"data-slot":"card-action",className:Mt("col-start-2 row-span-2 row-start-1 self-start justify-self-end",s),...e})}function Ny({className:s,...e}){return I.jsx("div",{"data-slot":"card-content",className:Mt("px-6",s),...e})}function uv(s,e){if(typeof s=="function")return s(e);s!=null&&(s.current=e)}function Ry(...s){return e=>{let t=!1;const r=s.map(o=>{const l=uv(o,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let o=0;o<r.length;o++){const l=r[o];typeof l=="function"?l():uv(s[o],null)}}}}function vr(...s){return k.useCallback(Ry(...s),s)}function ef(s){const e=Wb(s),t=k.forwardRef((r,o)=>{const{children:l,...c}=r,u=k.Children.toArray(l),h=u.find(qb);if(h){const f=h.props.children,m=u.map(g=>g===h?k.Children.count(f)>1?k.Children.only(null):k.isValidElement(f)?f.props.children:null:g);return I.jsx(e,{...c,ref:o,children:k.isValidElement(f)?k.cloneElement(f,void 0,m):null})}return I.jsx(e,{...c,ref:o,children:l})});return t.displayName=`${s}.Slot`,t}var Gb=ef("Slot");function Wb(s){const e=k.forwardRef((t,r)=>{const{children:o,...l}=t;if(k.isValidElement(o)){const c=Yb(o),u=Hb(l,o.props);return o.type!==k.Fragment&&(u.ref=r?Ry(r,c):c),k.cloneElement(o,u)}return k.Children.count(o)>1?k.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var $b=Symbol("radix.slottable");function qb(s){return k.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===$b}function Hb(s,e){const t={...e};for(const r in e){const o=s[r],l=e[r];/^on[A-Z]/.test(r)?o&&l?t[r]=(...u)=>{const h=l(...u);return o(...u),h}:o&&(t[r]=o):r==="style"?t[r]={...o,...l}:r==="className"&&(t[r]=[o,l].filter(Boolean).join(" "))}return{...s,...t}}function Yb(s){var r,o;let e=(r=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=(o=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:o.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}const dv=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,hv=yy,Xb=(s,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return hv(s,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:o,defaultVariants:l}=e,c=Object.keys(o).map(f=>{const m=t==null?void 0:t[f],g=l==null?void 0:l[f];if(m===null)return null;const y=dv(m)||dv(g);return o[f][y]}),u=t&&Object.entries(t).reduce((f,m)=>{let[g,y]=m;return y===void 0||(f[g]=y),f},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,m)=>{let{class:g,className:y,...x}=m;return Object.entries(x).every(w=>{let[_,b]=w;return Array.isArray(b)?b.includes({...l,...u}[_]):{...l,...u}[_]===b})?[...f,g,y]:f},[]);return hv(s,c,h,t==null?void 0:t.class,t==null?void 0:t.className)},Kb=Xb("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Hn({className:s,variant:e,size:t,asChild:r=!1,...o}){const l=r?Gb:"button";return I.jsx(l,{"data-slot":"button",className:Mt(Kb({variant:e,size:t,className:s})),...o})}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Qb=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),fv=s=>{const e=Qb(s);return e.charAt(0).toUpperCase()+e.slice(1)},My=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),Jb=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=k.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:l,iconNode:c,...u},h)=>k.createElement("svg",{ref:h,...eT,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:My("lucide",o),...!l&&!Jb(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,m])=>k.createElement(f,m)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=(s,e)=>{const t=k.forwardRef(({className:r,...o},l)=>k.createElement(tT,{ref:l,iconNode:e,className:My(`lucide-${Zb(fv(s))}`,`lucide-${s}`,r),...o}));return t.displayName=fv(s),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],bh=tf("arrow-left",nT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],sT=tf("check",rT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],oT=tf("x",iT),aT=[{id:"advection",title:"Advection Test",description:"Tests fluid velocity advection with manual bilinear interpolation and rg32float textures.",status:"stable"},{id:"diffusion",title:"Diffusion Test",description:"Tests fluid property diffusion using compute shaders with texture ping-ponging.",status:"stable"}];function lT(){const s=On(),e=o=>{switch(o){case"stable":return"bg-green-100 text-green-800 border-green-200";case"experimental":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"planned":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},t=o=>{s.navigate({to:"/tests/$testId",params:{testId:o}})},r=()=>I.jsx("div",{className:"border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60",children:I.jsx("div",{className:"container mx-auto px-4 py-4",children:I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx(Hn,{variant:"ghost",size:"sm",asChild:!0,children:I.jsxs(Yo,{to:"/",className:"flex items-center gap-2",children:[I.jsx(bh,{className:"h-4 w-4"}),"Back to Home"]})}),I.jsx("div",{className:"h-6 w-px bg-border"}),I.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Fluid Simulation Tests"})]})})});return I.jsxs("div",{className:"min-h-screen bg-gray-50",children:[I.jsx(r,{}),I.jsx("div",{className:"container mx-auto py-8",children:I.jsx("div",{className:"max-w-4xl mx-auto px-6",children:I.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:aT.map(o=>I.jsxs(Ay,{children:[I.jsxs(Bb,{children:[I.jsx(zb,{children:o.title}),I.jsx(jb,{children:I.jsx("span",{className:Mt("px-3 py-1 rounded-full text-xs font-medium border",e(o.status)),children:o.status})})]}),I.jsxs(Ny,{children:[I.jsx(Ub,{className:"mb-6",children:o.description}),o.status==="stable"?I.jsx(Hn,{onClick:()=>t(o.id),className:"w-full",children:"Launch Test"}):I.jsx(Hn,{disabled:!0,variant:"secondary",className:"w-full",children:o.status==="experimental"?"In Progress":"Planned"})]})]},o.id))})})})]})}const cT=ta.memo(function({isInitialized:e,isPlaying:t,setIsPlaying:r,onStep:o,onRestart:l,title:c,customControls:u}){const h=()=>e?t?{text:"Playing",type:"playing"}:{text:"Ready",type:"ready"}:{text:"Initializing...",type:"loading"},f=T=>{switch(T){case"playing":return"bg-green-100 text-green-800 border-green-200";case"ready":return"bg-blue-100 text-blue-800 border-blue-200";case"loading":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=k.useCallback(()=>{if(e&&o)try{o()}catch(T){console.error(`Failed to step ${c}:`,T)}},[e,o,c]),g=k.useCallback(()=>{e&&o&&r(!0)},[e,o,r]),y=k.useCallback(()=>{r(!1)},[r]),x=k.useCallback(()=>{t?y():g()},[t,g,y]),w=k.useCallback(async()=>{if(!(!e||!l))try{await l()}catch(T){console.error(`Failed to restart ${c}:`,T)}},[e,l,c]);k.useEffect(()=>{const T=M=>{if(!(M.target instanceof HTMLInputElement||M.target instanceof HTMLTextAreaElement||M.target instanceof HTMLSelectElement))switch(M.code){case"Space":M.preventDefault(),e&&o&&x();break;case"KeyR":!M.ctrlKey&&!M.metaKey&&!M.altKey&&!M.shiftKey&&(M.preventDefault(),e&&l&&w());break;case"KeyS":M.preventDefault(),e&&o&&!t&&m();break}};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[e,t,o,l,x,w,m]);const _=o||l,b=h();return I.jsxs("div",{className:"flex flex-col items-center gap-4 md:min-w-[200px]",children:[u&&I.jsxs("div",{className:"w-full flex flex-col items-center gap-2",children:[I.jsx("h3",{className:"text-sm font-semibold text-gray-700 text-center mb-1",children:"Settings"}),u]}),_&&I.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[I.jsx("h3",{className:"text-sm font-semibold text-gray-700 text-center mb-1",children:"Controls"}),o&&I.jsxs(I.Fragment,{children:[I.jsx(Hn,{onClick:g,disabled:!e||t,variant:"default",size:"lg",title:"Play simulation (Spacebar)",className:"w-full",children:"Play"}),I.jsx(Hn,{onClick:y,disabled:!e||!t,variant:"default",size:"lg",title:"Pause simulation (Spacebar)",className:"w-full",children:"Pause"}),I.jsx(Hn,{onClick:m,disabled:!e||t,variant:"default",size:"lg",title:"Step simulation once (S key)",className:"w-full",children:"Step"})]}),l&&I.jsx(Hn,{onClick:w,disabled:!e,variant:"destructive",size:"lg",title:"Restart simulation (R key)",className:"w-full",children:"Restart"})]}),I.jsxs("div",{className:"flex flex-row items-center gap-2",children:[I.jsx("h3",{className:"text-sm font-semibold text-gray-700 inline-block",children:"Status"}),I.jsx("span",{className:Mt("px-3 py-1 rounded-full text-xs font-medium border",f(b.type)),children:b.text})]})]})}),pv=512;function Oy({title:s,onInitialize:e,onStep:t,onRestart:r,canvasHeight:o=pv,canvasWidth:l=pv,customControls:c}){const u=k.useRef(null),h=k.useRef(null),[f,m]=k.useState(!1),[g,y]=k.useState(!1),[x,w]=k.useState(null);k.useEffect(()=>{(async()=>{if(!(!u.current||f)){console.log(`Initializing ${s}`);try{e&&await e(u),m(!0),w(null)}catch(M){console.error(`Failed to initialize ${s}:`,M),m(!1),w(M instanceof Error?M.message:"Unknown error")}}})()},[s,e,f]),k.useEffect(()=>{if(!g||!f||!t)return;const T=()=>{if(g&&f&&t)try{t(),h.current=requestAnimationFrame(T)}catch(M){console.error(`Failed to step ${s}:`,M),y(!1)}};return h.current=requestAnimationFrame(T),()=>{h.current!==null&&(cancelAnimationFrame(h.current),h.current=null)}},[g,f,t,s]);const _=k.useCallback(()=>{if(f&&t)try{t()}catch(T){console.error(`Failed to step ${s}:`,T)}},[f,t,s]),b=k.useCallback(async()=>{if(!(!f||!r))try{await r(u)}catch(T){console.error(`Failed to restart ${s}:`,T)}},[f,r,s]);return I.jsx("div",{className:"p-5",children:I.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col items-center gap-6",children:[x&&I.jsxs("div",{className:"text-red-500 text-sm max-w-md text-center bg-red-50 p-3 rounded-lg border border-red-200",children:[I.jsx("strong",{children:"Error:"})," ",x]}),I.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6 w-full justify-center",children:[I.jsx("div",{className:"flex-shrink-0",children:I.jsx("canvas",{width:l,height:o,ref:u,className:"border border-gray-300 rounded-lg shadow-lg"})}),I.jsx(cT,{isInitialized:f,isPlaying:g,setIsPlaying:y,onStep:_,onRestart:b,title:s,customControls:c&&c(u)})]})]})})}class nf{constructor(e){Y(this,"textures",new Map);this.device=e}createTexture(e,t){if(this.textures.has(e))throw new Error(`Texture ${e} already exists inside TextureManager!`);this.textures.set(e,{front:this.device.createTexture(t)})}createPingPongTexture(e,t){if(this.textures.has(e))throw new Error(`Texture "${e}" already exists inside TextureManager!`);const r=this.device.createTexture(t),o=this.device.createTexture(t);this.textures.set(e,{front:r,back:o})}swap(e){const t=this.textures.get(e);if(!t)throw new Error(`Texture '${e}' not found`);if(!("back"in t))throw new Error(`Cannot swap static single texture ${e}`);const{front:r,back:o}=t;this.textures.set(e,{front:o,back:r})}getCurrentTexture(e){const t=this.textures.get(e);if(!t)throw new Error(`Texture "${e}" does not exist`);return t.front}getBackTexture(e){const t=this.textures.get(e);if(!t)throw new Error(`Texture ${e} does not exist`);if(!("back"in t))throw new Error(`Texture ${e} is not a ping-pong texture-- it has no back buffer, only a front`);return t.back}destroy(){for(const[e,t]of this.textures.entries())t.front.destroy(),"back"in t&&t.back.destroy();this.textures.clear()}}class uT{constructor(e,t){Y(this,"querySet",null);Y(this,"resolveBuffer",null);Y(this,"resultBuffer",null);Y(this,"canTimestamp");Y(this,"lastGpuTime",0);this.canTimestamp=t,t&&(this.querySet=e.createQuerySet({type:"timestamp",count:2}),this.resolveBuffer=e.createBuffer({size:this.querySet.count*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.resultBuffer=e.createBuffer({size:this.resolveBuffer.size,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}))}getTimestampWrites(){if(!(!this.canTimestamp||!this.querySet))return{querySet:this.querySet,beginningOfPassWriteIndex:0,endOfPassWriteIndex:1}}resolveTimestamps(e){!this.canTimestamp||!this.querySet||!this.resolveBuffer||!this.resultBuffer||(e.resolveQuerySet(this.querySet,0,this.querySet.count,this.resolveBuffer,0),this.resultBuffer.mapState==="unmapped"&&e.copyBufferToBuffer(this.resolveBuffer,0,this.resultBuffer,0,this.resultBuffer.size))}async readResults(){if(!(!this.canTimestamp||!this.resultBuffer)&&this.resultBuffer.mapState==="unmapped")try{await this.resultBuffer.mapAsync(GPUMapMode.READ);const e=new BigInt64Array(this.resultBuffer.getMappedRange());this.lastGpuTime=Number(e[1]-e[0])/1e3,this.resultBuffer.unmap()}catch(e){console.warn("Failed to read GPU timing results:",e)}}getLastGpuTime(){return this.lastGpuTime}isSupported(){return this.canTimestamp}destroy(){var e,t,r;(e=this.querySet)==null||e.destroy(),(t=this.resolveBuffer)==null||t.destroy(),(r=this.resultBuffer)==null||r.destroy(),this.querySet=null,this.resolveBuffer=null,this.resultBuffer=null}}var fr=(s=>(s[s.WEBGPU_NOT_SUPPORTED=0]="WEBGPU_NOT_SUPPORTED",s[s.NO_ADAPTER=1]="NO_ADAPTER",s[s.NO_DEVICE=2]="NO_DEVICE",s[s.NO_CONTEXT=3]="NO_CONTEXT",s[s.NO_CANVAS=4]="NO_CANVAS",s[s.NO_RESOURCES=5]="NO_RESOURCES",s))(fr||{});class nn extends Error{constructor(e,t){super(e),this.code=t,this.name="WebGPUError"}}async function rf(s){if(!navigator.gpu)throw new nn("WebGPU is not supported on this browser. Please use Google Chrome or Microsoft Edge to run this application",0);const e=await navigator.gpu.requestAdapter();if(!e)throw new nn("No GPU Adapter found",1);const t=e.features.has("timestamp-query");if(!t)throw new nn("Timestamp query is not supported on this GPU");const r=await e.requestDevice({requiredFeatures:[...t?["timestamp-query"]:[]]});if(!r)throw new nn("No GPU Device Found",2);const o=s.getContext("webgpu");if(!o)throw new nn("Could not get Canvas Context",3);const l=navigator.gpu.getPreferredCanvasFormat();return o.configure({device:r,format:l}),{device:r,context:o,canvasFormat:l,canTimestamp:t}}const dT={enableAdvection:!0,enableDiffusion:!0,enableDivergence:!0,enablePressureProjection:!0,enablePressureBoundaryConditions:!0,enableGradientSubtraction:!0,enableVelocityBoundaryConditions:!0,enableDissipation:!0},hT={enableAdvection:!0,enableBoundaryConditions:!0,enableDiffusion:!0,enableDissipation:!0,enableAdvectParticles:!0};class sf{constructor(e,t){Y(this,"pipeline");Y(this,"bindGroupLayout");Y(this,"initialized",!1);this.config=e,this.device=t,this.initializePipeline()}initializePipeline(){const{pipeline:e,bindGroupLayout:t}=this.setupPipeline();this.pipeline=e,this.bindGroupLayout=t,this.initialized=!0}setupPipeline(){const e=this.createBindGroupLayout();return{pipeline:this.device.createComputePipeline({label:`${this.config.name} Pipeline`,layout:this.device.createPipelineLayout({bindGroupLayouts:[e]}),compute:{module:this.config.shader,entryPoint:this.config.entryPoint}}),bindGroupLayout:e}}validateArgs(e,t){for(const r of t)if(!e[r])throw new Error(`${r} is required for ${this.config.name}`)}execute(e,t,r){if(!this.initialized)throw new Error(`Compute Pass "${this.config.name} is not intialized yet"`);const o=this.createBindGroup(t);e.setPipeline(this.pipeline),e.setBindGroup(0,o),e.dispatchWorkgroups(r,r)}}class fT{constructor(e){Y(this,"view");Y(this,"offset",0);this.view=new DataView(e)}alignTo(e){this.offset=Math.ceil(this.offset/e)*e}writeFloat32(e){this.alignTo(4),this.view.setFloat32(this.offset,e,!0),this.offset+=4}writeInt32(e){this.alignTo(4),this.view.setInt32(this.offset,e,!0),this.offset+=4}writeUint32(e){this.alignTo(4),this.view.setUint32(this.offset,e,!0),this.offset+=4}writeVec2f(e,t){this.alignTo(8),this.writeFloat32(e),this.writeFloat32(t)}writeVec3f(e,t,r){this.alignTo(16),this.writeFloat32(e),this.writeFloat32(t),this.writeFloat32(r),this.offset+=4}writeVec4f(e,t,r,o){this.alignTo(16),this.writeFloat32(e),this.writeFloat32(t),this.writeFloat32(r),this.writeFloat32(o)}writeMat4x4f(e){if(this.alignTo(16),e.length!==16)throw new Error("Matrix must have 16 elements");for(let t=0;t<16;t++)this.writeFloat32(e[t])}writeFloat32Array(e){for(const t of e)this.writeFloat32(t)}writeInt32Array(e){for(const t of e)this.writeInt32(t)}writeUint32Array(e){for(const t of e)this.writeUint32(t)}getCurrentOffset(){return this.offset}skip(e){this.offset+=e}padTo(e){this.alignTo(e)}}class pT{constructor(e,t,r=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST){Y(this,"buffer",null);Y(this,"lastDataHash",null);this.device=e,this.label=t,this.usage=r}updateBuffer(e){var r;const t=this.getDataHash(e);return this.buffer&&this.buffer.size>=e.byteLength&&this.lastDataHash===t?this.buffer:((!this.buffer||this.buffer.size<e.byteLength)&&((r=this.buffer)==null||r.destroy(),this.buffer=this.device.createBuffer({label:`${this.label} Uniform Buffer`,size:Math.max(e.byteLength,256),usage:this.usage})),this.writeDataToBuffer(e),this.lastDataHash=t,this.buffer)}destroy(){var e;(e=this.buffer)==null||e.destroy(),this.buffer=null,this.lastDataHash=null}writeDataToBuffer(e){if(!this.buffer)throw new Error("Buffer not initialized");if("writeToBuffer"in e)e.writeToBuffer(this.device,this.buffer,0);else if("toFloat32Array"in e){const t=e.toFloat32Array();this.device.queue.writeBuffer(this.buffer,0,t)}else throw new Error(`UniformData must implement either writeToBuffer() or toFloat32Array(). Got: ${Object.getOwnPropertyNames(e)}`)}getDataHash(e){const t=e.getHashData();if(typeof t=="string")return t;const r=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);let o=0;for(let l=0;l<r.length;l++)o=(o<<5)-o+r[l]&4294967295;return o.toString()}}const _i=class _i{constructor(e,t){Y(this,"byteLength",2*4);this.timestep=e,this.advectionFactor=t}toFloat32Array(){return _i.reusableArray[0]=this.timestep,_i.reusableArray[1]=this.advectionFactor,_i.reusableArray}getHashData(){return this.toFloat32Array()}};Y(_i,"reusableArray",new Float32Array(2));let tc=_i;const wi=class wi{constructor(e,t){Y(this,"byteLength",2*4);this.timestep=e,this.diffusionFactor=t}toFloat32Array(){const e=1/this.diffusionFactor/this.timestep,t=1/(4+e);return wi.reusableArray[0]=e,wi.reusableArray[1]=t,wi.reusableArray}getHashData(){return this.toFloat32Array()}};Y(wi,"reusableArray",new Float32Array(2));let nc=wi;const jo=class jo{constructor(e){Y(this,"byteLength",1*4);this.gridScale=e}toFloat32Array(){const e=.5/this.gridScale;return jo.reusableArray[0]=e,jo.reusableArray}getHashData(){return this.toFloat32Array()}};Y(jo,"reusableArray",new Float32Array(1));let Th=jo;const xi=class xi{constructor(e){Y(this,"byteLength",2*4);this.gridScale=e}toFloat32Array(){const e=1/this.gridScale,t=-(e*e),r=.25;return xi.reusableArray[0]=t,xi.reusableArray[1]=r,xi.reusableArray}getHashData(){return this.toFloat32Array()}};Y(xi,"reusableArray",new Float32Array(2));let Ch=xi;const Go=class Go{constructor(e){Y(this,"byteLength",1*4);this.gridScale=e}toFloat32Array(){const e=.5/this.gridScale;return Go.reusableArray[0]=e,Go.reusableArray}getHashData(){return this.toFloat32Array()}};Y(Go,"reusableArray",new Float32Array(1));let kh=Go;const Si=class Si{constructor(e,t=1){Y(this,"byteLength",2*4);this.boundaryType=e,this.scale=t}toFloat32Array(){return Si.reusableArray[0]=this.boundaryType,Si.reusableArray[1]=this.scale,Si.reusableArray}getHashData(){return this.toFloat32Array()}};Y(Si,"reusableArray",new Float32Array(2));let zo=Si;const qr=class qr{constructor(e,t,r,o){Y(this,"byteLength",4*4);this.positionX=e,this.positionY=t,this.radius=r,this.intensity=o}toFloat32Array(){return qr.reusableArray[0]=this.positionX,qr.reusableArray[1]=this.positionY,qr.reusableArray[2]=this.radius,qr.reusableArray[3]=this.intensity,qr.reusableArray}getHashData(){return this.toFloat32Array()}};Y(qr,"reusableArray",new Float32Array(4));let Eh=qr;const $n=class $n{constructor(e,t,r,o,l,c){Y(this,"byteLength",6*4);this.positionX=e,this.positionY=t,this.velocityX=r,this.velocityY=o,this.radius=l,this.intensity=c}toFloat32Array(){return $n.reusableArray[0]=this.positionX,$n.reusableArray[1]=this.positionY,$n.reusableArray[2]=this.velocityX,$n.reusableArray[3]=this.velocityY,$n.reusableArray[4]=this.radius,$n.reusableArray[5]=this.intensity,$n.reusableArray}getHashData(){return this.toFloat32Array()}};Y($n,"reusableArray",new Float32Array(6));let Ph=$n;const Wo=class Wo{constructor(e){Y(this,"byteLength",1*4);this.dissipationFactor=e}toFloat32Array(){return Wo.reusableArray[0]=this.dissipationFactor,Wo.reusableArray}getHashData(){return this.toFloat32Array()}};Y(Wo,"reusableArray",new Float32Array(1));let rc=Wo;const $o=class $o{constructor(e){Y(this,"byteLength",1*4);this.timestep=e}toFloat32Array(){return $o.reusableArray[0]=this.timestep,$o.reusableArray}getHashData(){return this.toFloat32Array()}};Y($o,"reusableArray",new Float32Array(1));let Ah=$o;var Mi=(s=>(s[s.VELOCITY=0]="VELOCITY",s[s.PRESSURE=1]="PRESSURE",s[s.DENSITY=2]="DENSITY",s[s.PARTICLES=3]="PARTICLES",s))(Mi||{});class of{constructor(e,t){Y(this,"pipeline");Y(this,"bindGroupLayout");Y(this,"uniformBuffer");this.config=e,this.device=t,this.bindGroupLayout=this.createBindGroupLayout(),this.pipeline=this.device.createRenderPipeline({label:`${this.config.name} Pipeline`,layout:this.device.createPipelineLayout({label:`${this.config.name} Pipeline Layout`,bindGroupLayouts:[this.bindGroupLayout]}),vertex:this.config.vertex,fragment:this.config.fragment}),this.uniformBuffer=this.device.createBuffer({label:`${this.config.name} Uniform Buffer`,size:12*4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST})}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Texture Rendering Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"unfilterable-float",viewDimension:"2d",multisampled:!1}},{binding:1,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"non-filtering"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}}]})}createBindGroup({textureManager:e,sampler:t,texture:r}){return this.device.createBindGroup({label:"Smoke Texture Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.getCurrentTexture(r).createView()},{binding:1,resource:t},{binding:2,resource:{buffer:this.uniformBuffer}}]})}writeToUniformBuffer({noise:e,shaderMode:t,smokeColor:r}){const o=new ArrayBuffer(48),l=new fT(o);l.writeUint32(t),l.writeFloat32(e.stddev),l.writeFloat32(e.mean),l.writeVec3f(e.offsets[0],e.offsets[1],e.offsets[2]),l.writeVec3f(r[0],r[1],r[2]),this.device.queue.writeBuffer(this.uniformBuffer,0,o)}execute(e,t,r){const o=this.createBindGroup(r);e.setPipeline(this.pipeline),e.setBindGroup(0,o),e.draw(t.vertexCount,t.instanceCount)}destroy(){this.uniformBuffer.destroy()}}class In extends Error{constructor(t,r){super(t);Y(this,"baseMessage");this.context=r,this.baseMessage=t;let o=t;if(r&&Object.keys(r).length>0){o+=`

Context:`;for(const[c,u]of Object.entries(r))o+=`
  ${c}: ${String(u)}`}const l=this.getSuggestion();l&&(o+=`

Suggestion: ${l}`),this.message=o,this.name=this.constructor.name}}class mv extends In{constructor(t,r){super(`Shader "${t}" not found in registry`,{requestedShader:t,availableShaders:r.length>0?r.join(", "):"none",registrySize:r.length});Y(this,"code","SHADER_NOT_FOUND");Y(this,"category","REGISTRY")}getSuggestion(){const{requestedShader:t,availableShaders:r}=this.context;if(typeof r=="string"&&r!=="none"){const l=r.split(", ").find(c=>c.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(c.toLowerCase()));if(l)return`Did you mean "${l}"? Register the shader first: shaderRegistry.register("${t}", shaderContent)`}return`Register the shader first: shaderRegistry.register("${t}", shaderContent)`}}class mT extends In{constructor(t){super("Circular import detected",{importChain:t.join(" → "),circularFile:t[t.length-1],chainLength:t.length});Y(this,"code","CIRCULAR_IMPORT");Y(this,"category","IMPORT")}getSuggestion(){return`Review your @include statements to remove the circular dependency. The file "${this.context.circularFile}" is being imported in a cycle.`}}class gT extends In{constructor(t,r){super(`Maximum import depth of ${t} exceeded`,{maxDepth:t,currentDepth:r.length,importStack:r.join(" → "),deepestFile:r[r.length-1]});Y(this,"code","MAX_IMPORT_DEPTH");Y(this,"category","IMPORT")}getSuggestion(){return"Reduce nesting depth of @include statements or check for circular imports. This might indicate an infinite recursion in your includes."}}class vT extends In{constructor(t,r){super("Invalid @include directive syntax",{invalidDirective:t,lineContext:r||"unknown",expectedFormat:'@include "filename.wgsl"'});Y(this,"code","INVALID_INCLUDE_SYNTAX");Y(this,"category","SYNTAX")}getSuggestion(){return'Use the correct syntax: @include "filename.wgsl". Make sure the filename is enclosed in double quotes.'}}class yT extends In{constructor(t,r,o){super(`Variable '${t}' not found in template`,{missingVariable:t,availableVariables:r.length>0?r.join(", "):"none",variableCount:r.length,templateContext:o||"unknown"});Y(this,"code","VARIABLE_NOT_FOUND");Y(this,"category","VARIABLE")}getSuggestion(){const{missingVariable:t,availableVariables:r}=this.context;if(typeof r=="string"&&r!=="none"){const l=r.split(", ").find(c=>c.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(c.toLowerCase()));if(l)return`Did you mean "${l}"? Add the variable to your options: { variables: { "${t}": value } }`}return`Add the variable to your options: { variables: { "${t}": value } }`}}class sh extends In{constructor(t,r){super(t,r);Y(this,"code","REGISTRY_ERROR");Y(this,"category","REGISTRY")}getSuggestion(){return"Check your shader registration and ensure all required shaders are properly registered."}}class _T extends In{constructor(t,r){super(t,r);Y(this,"code","VARIABLE_ERROR");Y(this,"category","VARIABLE")}getSuggestion(){return"Check your variable definitions and ensure all required variables are provided with correct types."}}class wT extends In{constructor(t,r){super("Invalid @define directive syntax",{invalidDirective:t,lineContext:r||"unknown",expectedFormat:"@define IDENTIFIER value"});Y(this,"code","INVALID_DEFINE_SYNTAX");Y(this,"category","SYNTAX")}getSuggestion(){return"Use the correct syntax: @define IDENTIFIER value. Example: @define PI 3.14159"}}class xT extends In{constructor(t,r,o,l){super(`Identifier '${t}' is already defined`,{identifier:t,previousValue:r,newValue:o,lineContext:l||"unknown"});Y(this,"code","DUPLICATE_DEFINE");Y(this,"category","SYNTAX")}getSuggestion(){const{identifier:t,previousValue:r}=this.context;return`'${t}' was previously defined as '${r}'. Use a different identifier name or remove the duplicate definition.`}}class ST extends In{constructor(t,r){super(`Invalid @define identifier '${t}'`,{identifier:t,lineContext:r||"unknown",validPattern:"Must start with letter or underscore, followed by letters, digits, or underscores"});Y(this,"code","INVALID_DEFINE_IDENTIFIER");Y(this,"category","SYNTAX")}getSuggestion(){const{identifier:t}=this.context;return`'${t}' is not a valid identifier. Use only letters, digits, and underscores, starting with a letter or underscore.`}}const jr={maximumImportDepth:10,importRegex:/@include\s*"([^"]+)"/g,importMatchRegex:/@include\s*"([^"]+)"/,variableRegex:/\$\{(\w+)\}/g,identifierRegex:/^[A-Za-z_][A-Za-z0-9_]*$/,defineMatchRegex:/@define\s+([A-Za-z_][A-Za-z0-9_]*)\s+(.+)$/,defineKeyword:"@define"},ys=class ys{constructor(){Y(this,"registry",new Map)}static getInstance(){return ys.instance||(ys.instance=new ys),ys.instance}register(e,t){if(!e.trim())throw new sh("Shader name cannot be empty",{name:e});if(!t.trim())throw new sh("Shader content cannot be empty",{name:e,contentLength:t.length});return this.registry.set(e,t),this}registerMultiple(e){const t=[];if(Object.entries(e).forEach(([r,o])=>{try{this.register(r,o)}catch(l){l instanceof In?t.push(`${r}: ${l.message}`):t.push(`${r}: ${l instanceof Error?l.message:String(l)}`)}}),t.length>0)throw new sh(`Failed to register ${t.length} shader(s)`,{failedShaders:t,successfulCount:Object.keys(e).length-t.length,totalCount:Object.keys(e).length});return this}get(e){return this.registry.get(e)}getAvailable(){return Array.from(this.registry.keys())}process(e,t){const r=this.get(e);if(!r)throw new mv(e,this.getAvailable());return this.processContent(r,t,0,[])}processContent(e,t,r=0,o=[]){if(r>jr.maximumImportDepth)throw new gT(jr.maximumImportDepth,o);const{processedShader:l,defines:c}=this.processDefines(e);return e=l,e=this.includeImports(e,t,r,o),e=this.applyDefines(e,c),t!=null&&t.variables&&(e=this.injectShaderVariables(e,t.variables)),e}processDefines(e){const t=new Map,r=e.split(`
`),o=[];for(let l=0;l<r.length;l++){const c=r[l],u=c.match(jr.defineMatchRegex);if(u){const[h,f,m]=u,g=`line ${l+1}: "${c.trim()}"`;if(!jr.identifierRegex.test(f))throw new ST(f,g);if(t.has(f))throw new xT(f,t.get(f),m.trim(),g);t.set(f,m.trim()),o.push("")}else if(c.includes(jr.defineKeyword)){const h=`line ${l+1}: "${c.trim()}"`;throw new wT(c.trim(),h)}else o.push(c)}return{processedShader:o.join(`
`),defines:t}}applyDefines(e,t){if(t.size===0)return e;const r=Array.from(t.entries()).sort((o,l)=>l[0].length-o[0].length);for(const[o,l]of r){const c=new RegExp(`\\b${o}\\b`,"g");e=e.replace(c,l)}return e}includeImports(e,t,r=0,o=[]){const l=e.match(jr.importRegex);return l&&l.forEach(c=>{const u=c.match(jr.importMatchRegex);if(!u)throw new vT(c,this.getLineContext(e,c));const h=u[1];if(o.includes(h))throw new mT([...o,h]);const f=this.get(h);if(!f)throw new mv(h,this.getAvailable());const m=this.processContent(f,t,r+1,[...o,h]);e=e.replace(c,m)}),e}getLineContext(e,t){const r=e.split(`
`),o=r.findIndex(u=>u.includes(t));if(o===-1)return"unknown line";const l=o+1,c=r[o].trim();return`line ${l}: "${c}"`}injectShaderVariables(e,t){const r=Object.keys(t);return e.replace(jr.variableRegex,(o,l)=>{if(l in t){const c=t[l];if(typeof c!="string"&&typeof c!="number")throw new _T(`Invalid variable type for '${l}'`,{variableName:l,actualType:typeof c,expectedTypes:"string | number",value:String(c)});return String(c)}throw new yT(l,r,this.getLineContext(e,o))})}};Y(ys,"instance");let Nh=ys;const Iy=Nh.getInstance();function ji(s,e){return Iy.process(s,e)}const bT=`// Advect the velocities in the texture

@include "bilinearInterpolate.wgsl"

struct AdvectionInput {
    timestep: f32,   // delta time
    rdx: f32,        // 1 / the grid scale
};

@group(0) @binding(0) var velocity: texture_2d<f32>;
@group(0) @binding(1) var advection_in: texture_2d<f32>;
@group(0) @binding(2) var advection_out: texture_storage_2d<\${OUT_FORMAT}, write>;
@group(0) @binding(3) var<uniform> input: AdvectionInput;


@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) texture_coord: vec3<u32>,
) {
    let coord = vec2<i32>(texture_coord.xy);
    let texture_size = vec2<i32>(textureDimensions(velocity));
    let current_velocity = textureLoad(velocity, coord, 0).xy;
    let prev_coord = vec2f(coord) - input.timestep * input.rdx * current_velocity;

    // Clamp to valid texture bounds
    let clamped_prev_coord = clamp(prev_coord, vec2f(0.0), vec2f(f32(texture_size.x) - 1.0, f32(texture_size.y) - 1.0));
    
    // Use manual bilinear interpolation instead of sampler
    let advected_quantity = bilinear_interpolate(advection_in, clamped_prev_coord);
    
    textureStore(advection_out, coord, vec4<f32>(advected_quantity.x, advected_quantity.y, 0.0, 0.0));
}`,TT=`// Jacobi iteration solver for Poisson equation Ax = b (A = Laplacian)
// Diffusion: x=velocity, b=velocity
// Pressure: x=pressure, b=velocity divergence

struct JacobiInput {
    alpha: f32,
    rBeta: f32,
};

@group(0) @binding(0) var x_in: texture_2d<f32>;
@group(0) @binding(1) var b_in: texture_2d<f32>;
@group(0) @binding(2) var texture_out: texture_storage_2d<\${FORMAT}, write>;
@group(0) @binding(3) var<uniform> input: JacobiInput;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) u_coords: vec3<u32>
) {
    let coords = u_coords.xy;
    let texture_size = textureDimensions(x_in);
    let i_coords = vec2i(coords);
    
    // Imposes Neumann boundaries (reflecting)
    
    let left_x = max(i_coords.x - 1, 1 - i_coords.x);
    let xl = textureLoad(x_in, vec2u(u32(left_x), coords.y), 0);
    
    let right_x = min(i_coords.x + 1, 2 * i32(texture_size.x) - 3 - i_coords.x);
    let xr = textureLoad(x_in, vec2u(u32(right_x), coords.y), 0);
    
    let top_y = max(i_coords.y - 1, 1 - i_coords.y);
    let xt = textureLoad(x_in, vec2u(coords.x, u32(top_y)), 0);
    
    let bottom_y = min(i_coords.y + 1, 2 * i32(texture_size.y) - 3 - i_coords.y);
    let xb = textureLoad(x_in, vec2u(coords.x, u32(bottom_y)), 0);

    let bc = textureLoad(b_in, coords, 0);

    let result = (xl + xr + xt + xb + input.alpha * bc) * input.rBeta;
    textureStore(texture_out, coords, result);
}`,CT=`// Calculate divergence of velocity field

struct DivergenceInput {
    half_rdx: f32, // Half the grid scale
}

@group(0) @binding(0) var velocity_in: texture_2d<f32>;
@group(0) @binding(1) var divergence_out: texture_storage_2d<r32float, write>;
@group(0) @binding(2) var<uniform> input: DivergenceInput;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) global_id: vec3<u32>,
) {
    let coord = vec2<i32>(global_id.xy);
    let texture_size = vec2<i32>(textureDimensions(velocity_in));

    // Edge case: Simply write 0
    if (coord.x == 0 || coord.x == texture_size.x - 1 || coord.y == 0 || coord.y == texture_size.y - 1) {
        textureStore(divergence_out, coord, vec4f(0.0));
        return;
    }

    let center = textureLoad(velocity_in, coord, 0);
    let left = textureLoad(velocity_in, coord + vec2<i32>(-1, 0), 0);
    let right = textureLoad(velocity_in, coord + vec2<i32>(1, 0), 0);
    let down = textureLoad(velocity_in, coord + vec2<i32>(0, 1), 0);
    let up = textureLoad(velocity_in, coord + vec2<i32>(0, -1), 0);

    let divergence = (right.x - left.x + down.y - up.y) * input.half_rdx;
    textureStore(divergence_out, coord, vec4f(divergence, 0.0, 0.0, 0.0));
}`,kT=`// Calculates the gradient of the pressure, and subtracts it from the velocity field

struct GradientSubtractionInput {
    half_rdx: f32, // Half the grid scale
};

@group(0) @binding(0) var pressure_in: texture_2d<f32>;
@group(0) @binding(1) var velocity_in: texture_2d<f32>;
@group(0) @binding(2) var subtraction_out: texture_storage_2d<rg32float, write>;
@group(0) @binding(3) var<uniform> input: GradientSubtractionInput;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) u_coords: vec3<u32>
) {
    let coord = vec2<i32>(u_coords.xy);
    let texture_size = vec2<i32>(textureDimensions(pressure_in));

    // Edge case, just write 0
    if (coord.x == 0 || coord.x == texture_size.x - 1 || coord.y == 0 || coord.y == texture_size.y - 1) {
        textureStore(subtraction_out, coord, vec4<f32>(0.0, 0.0, 0.0, 0.0));
        return;
    }

    let left    = textureLoad(pressure_in, coord - vec2<i32>(1, 0), 0);
    let right   = textureLoad(pressure_in, coord + vec2<i32>(1, 0), 0);
    let up      = textureLoad(pressure_in, coord - vec2<i32>(0, 1), 0);
    let down    = textureLoad(pressure_in, coord + vec2<i32>(0, 1), 0);

    let pressure_gradient = vec2<f32>(right.x - left.x, down.x - up.x) * input.half_rdx;
    let velocity = textureLoad(velocity_in, coord, 0);
    let result = velocity.xy - pressure_gradient;
    textureStore(subtraction_out, coord, vec4<f32>(result.x, result.y, 0.0, 0.0));
}`,ET=`// Boundary conditions shader
// Enforces different boundary conditions on vector and scalar fields

struct BoundaryInput {
    boundary_type: u32, // BoundaryType: NO_SLIP_VELOCITY = 0, FREE_SLIP_VELOCITY = 1, SCALAR_NEUMANN = 2
    scale: f32,         // For scaling boundary values
};

@group(0) @binding(0) var field_in: texture_2d<f32>;
@group(0) @binding(1) var field_out: texture_storage_2d<\${FORMAT}, write>;
@group(0) @binding(2) var<uniform> input: BoundaryInput;

fn enforce_no_slip_velocity(coord: vec2<i32>, texture_size: vec2<i32>) -> vec4<f32> {
    // No-slip: velocity = 0 at boundaries
    // For velocity field (2 components)
    
    // Corners: zero velocity
    if ((coord.x == 0 || coord.x == texture_size.x - 1) && 
        (coord.y == 0 || coord.y == texture_size.y - 1)) {
        return vec4<f32>(0.0, 0.0, 0.0, 0.0);
    }
    
    // Left and right boundaries
    if (coord.x == 0) {
        let interior = textureLoad(field_in, vec2<i32>(1, coord.y), 0);
        return vec4<f32>(-interior.x, 0.0, 0.0, 0.0); // Reflect x-component, zero y-component
    }
    if (coord.x == texture_size.x - 1) {
        let interior = textureLoad(field_in, vec2<i32>(texture_size.x - 2, coord.y), 0);
        return vec4<f32>(-interior.x, 0.0, 0.0, 0.0); // Reflect x-component, zero y-component
    }
    
    // Top and bottom boundaries
    if (coord.y == 0) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, 1), 0);
        return vec4<f32>(0.0, -interior.y, 0.0, 0.0); // Zero x-component, reflect y-component
    }
    if (coord.y == texture_size.y - 1) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, texture_size.y - 2), 0);
        return vec4<f32>(0.0, -interior.y, 0.0, 0.0); // Zero x-component, reflect y-component
    }
    
    // Interior points: copy unchanged
    return textureLoad(field_in, coord, 0);
}

fn enforce_free_slip_velocity(coord: vec2<i32>, texture_size: vec2<i32>) -> vec4<f32> {
    // Free-slip: normal component = 0, tangential component unchanged
    
    // Corners: zero velocity
    if ((coord.x == 0 || coord.x == texture_size.x - 1) && 
        (coord.y == 0 || coord.y == texture_size.y - 1)) {
        return vec4<f32>(0.0, 0.0, 0.0, 0.0);
    }
    
    // Left and right boundaries (normal is x-direction)
    if (coord.x == 0) {
        let interior = textureLoad(field_in, vec2<i32>(1, coord.y), 0);
        return vec4<f32>(0.0, interior.y, 0.0, 0.0); // Zero normal (x), preserve tangential (y)
    }
    if (coord.x == texture_size.x - 1) {
        let interior = textureLoad(field_in, vec2<i32>(texture_size.x - 2, coord.y), 0);
        return vec4<f32>(0.0, interior.y, 0.0, 0.0); // Zero normal (x), preserve tangential (y)
    }
    
    // Top and bottom boundaries (normal is y-direction)
    if (coord.y == 0) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, 1), 0);
        return vec4<f32>(interior.x, 0.0, 0.0, 0.0); // Preserve tangential (x), zero normal (y)
    }
    if (coord.y == texture_size.y - 1) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, texture_size.y - 2), 0);
        return vec4<f32>(interior.x, 0.0, 0.0, 0.0); // Preserve tangential (x), zero normal (y)
    }
    
    // Interior points: copy unchanged
    return textureLoad(field_in, coord, 0);
}

fn enforce_scalar_boundary(coord: vec2<i32>, texture_size: vec2<i32>) -> vec4<f32> {
    // Neumann boundary conditions for scalar fields (pressure, density, etc.)
    // Zero-gradient: boundary value = adjacent interior value
    
    // Corners: copy from diagonal interior
    if (coord.x == 0 && coord.y == 0) {
        let interior = textureLoad(field_in, vec2<i32>(1, 1), 0);
        return interior;
    }
    if (coord.x == texture_size.x - 1 && coord.y == 0) {
        let interior = textureLoad(field_in, vec2<i32>(texture_size.x - 2, 1), 0);
        return interior;
    }
    if (coord.x == 0 && coord.y == texture_size.y - 1) {
        let interior = textureLoad(field_in, vec2<i32>(1, texture_size.y - 2), 0);
        return interior;
    }
    if (coord.x == texture_size.x - 1 && coord.y == texture_size.y - 1) {
        let interior = textureLoad(field_in, vec2<i32>(texture_size.x - 2, texture_size.y - 2), 0);
        return interior;
    }
    
    // Edge boundaries: copy from adjacent interior
    if (coord.x == 0) {
        let interior = textureLoad(field_in, vec2<i32>(1, coord.y), 0);
        return interior;
    }
    if (coord.x == texture_size.x - 1) {
        let interior = textureLoad(field_in, vec2<i32>(texture_size.x - 2, coord.y), 0);
        return interior;
    }
    if (coord.y == 0) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, 1), 0);
        return interior;
    }
    if (coord.y == texture_size.y - 1) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, texture_size.y - 2), 0);
        return interior;
    }
    
    // Interior points: copy unchanged
    return textureLoad(field_in, coord, 0);
}

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) global_id: vec3<u32>,
) {
    let coord = vec2<i32>(global_id.xy);
    let texture_size = vec2<i32>(textureDimensions(field_in));
    
    // Check if we're at a boundary
    let is_boundary = coord.x == 0 || coord.x == texture_size.x - 1 || 
                     coord.y == 0 || coord.y == texture_size.y - 1;
    
    var result: vec4<f32>;
    
    if (!is_boundary) {
        // Interior points: copy unchanged
        result = textureLoad(field_in, coord, 0);
    } else {
        // Apply boundary conditions based on type
        switch (input.boundary_type) {
            case 0u: { // No-slip velocity
                result = enforce_no_slip_velocity(coord, texture_size);
            }
            case 1u: { // Free-slip velocity
                result = enforce_free_slip_velocity(coord, texture_size);
            }
            case 2u: { // Scalar (Neumann)
                result = enforce_scalar_boundary(coord, texture_size);
            }
            default: {
                result = textureLoad(field_in, coord, 0);
            }
        }
    }
    
    textureStore(field_out, coord, result);
} `,PT=`// Add smoke density at a specific position

struct AddSmokeInput {
    position_x: f32,
    position_y: f32,
    radius: f32,
    intensity: f32,
};

@group(0) @binding(0) var smoke_in: texture_2d<f32>;
@group(0) @binding(1) var smoke_out: texture_storage_2d<r32float, write>;
@group(0) @binding(2) var<uniform> input: AddSmokeInput;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) texture_coord: vec3<u32>,
) {
    let coord = vec2<i32>(texture_coord.xy);
    let texture_size = vec2<i32>(textureDimensions(smoke_in));
    
    if (coord.x >= texture_size.x || coord.y >= texture_size.y) {
        return;
    }
    
    // Get current smoke density
    let current_smoke = textureLoad(smoke_in, coord, 0).r;
    
    // Calculate distance from click position
    let pixel_pos = vec2<f32>(f32(coord.x), f32(coord.y));
    let click_pos = vec2<f32>(input.position_x, input.position_y);
    let distance = length(pixel_pos - click_pos);
    
    // Add smoke with smooth falloff
    var added_smoke = 0.0;
    if (distance <= input.radius) {
        let falloff = 1.0 - (distance / input.radius);
        let smooth_falloff = falloff * falloff * (3.0 - 2.0 * falloff); // Smoothstep
        added_smoke = input.intensity * smooth_falloff;
    }
    
    let new_smoke = min(current_smoke + added_smoke, 1.0); // Clamp to [0,1]
    textureStore(smoke_out, coord, vec4<f32>(new_smoke, 0.0, 0.0, 0.0));
} `,AT=`// Add velocity at a specific position based on mouse movement

struct AddVelocityInput {
    position_x: f32,
    position_y: f32,
    velocity_x: f32,
    velocity_y: f32,
    radius: f32,
    intensity: f32,
};

@group(0) @binding(0) var velocity_in: texture_2d<f32>;
@group(0) @binding(1) var velocity_out: texture_storage_2d<rg32float, write>;
@group(0) @binding(2) var<uniform> input: AddVelocityInput;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) texture_coord: vec3<u32>,
) {
    let coord = vec2<i32>(texture_coord.xy);
    let texture_size = vec2<i32>(textureDimensions(velocity_in));
    
    if (coord.x >= texture_size.x || coord.y >= texture_size.y) {
        return;
    }
    
    // Get current velocity
    let current_velocity = textureLoad(velocity_in, coord, 0).xy;
    
    // Calculate distance from mouse position
    let pixel_pos = vec2<f32>(f32(coord.x), f32(coord.y));
    let mouse_pos = vec2<f32>(input.position_x, input.position_y);
    let distance = length(pixel_pos - mouse_pos);
    
    // Add velocity with smooth falloff
    var added_velocity = vec2<f32>(0.0, 0.0);
    if (distance <= input.radius) {
        let falloff = 1.0 - (distance / input.radius);
        let smooth_falloff = falloff * falloff * (3.0 - 2.0 * falloff); // Smoothstep
        let velocity_delta = vec2<f32>(input.velocity_x, input.velocity_y);
        added_velocity = velocity_delta * input.intensity * smooth_falloff;
    }
    
    let new_velocity = current_velocity + added_velocity;
    textureStore(velocity_out, coord, vec4<f32>(new_velocity.x, new_velocity.y, 0.0, 0.0));
} `,NT=`struct DissipationUniforms {
  dissipation_factor: f32,
}

@group(0) @binding(0) var input_texture: texture_2d<f32>;
@group(0) @binding(1) var output_texture: texture_storage_2d<\${FORMAT}, write>;
@group(0) @binding(2) var<uniform> uniforms: DissipationUniforms;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(@builtin(global_invocation_id) global_id: vec3<u32>) {
  let coord = vec2<i32>(global_id.xy);
  let dimensions = textureDimensions(input_texture);
  
  // Check bounds
  if (coord.x >= i32(dimensions.x) || coord.y >= i32(dimensions.y)) {
    return;
  }
  
  let current_value = textureLoad(input_texture, coord, 0);
  let dissipated_value = current_value * uniforms.dissipation_factor;
  
  textureStore(output_texture, coord, vec4<f32>(dissipated_value));
} `,RT=`// Manual bilinear interpolation function
fn bilinear_interpolate(texture: texture_2d<f32>, coord: vec2<f32>) -> vec2<f32> {
    let texture_size = vec2<f32>(textureDimensions(texture));
    
    // Get the four surrounding pixel coordinates
    let coord_floor = floor(coord);
    let coord_fract = coord - coord_floor;
    
    let coord_i = vec2<i32>(coord_floor);
    let coord_i_plus1 = coord_i + vec2<i32>(1, 1);
    
    // Clamp coordinates to texture bounds
    let max_coord = vec2<i32>(texture_size) - vec2<i32>(1, 1);
    let tl = clamp(coord_i, vec2<i32>(0, 0), max_coord);
    let tr = clamp(vec2<i32>(coord_i.x + 1, coord_i.y), vec2<i32>(0, 0), max_coord);
    let bl = clamp(vec2<i32>(coord_i.x, coord_i.y + 1), vec2<i32>(0, 0), max_coord);
    let br = clamp(coord_i_plus1, vec2<i32>(0, 0), max_coord);
    
    // Sample the four surrounding texels
    let val_tl = textureLoad(texture, tl, 0).xy;
    let val_tr = textureLoad(texture, tr, 0).xy;
    let val_bl = textureLoad(texture, bl, 0).xy;
    let val_br = textureLoad(texture, br, 0).xy;
    
    // Perform bilinear interpolation
    let top = mix(val_tl, val_tr, coord_fract.x);
    let bottom = mix(val_bl, val_br, coord_fract.x);
    let result = mix(top, bottom, coord_fract.y);
    
    return result;
}`,MT=`// --- VERTEX --- //

struct VertexOutput {
    @builtin(position) position: vec4f,
    @location(0) texCoord: vec2f,
}

@vertex
fn vertex_main(
    @builtin(vertex_index) vertexIndex: u32,
) -> VertexOutput {
    let squareVertices: array<vec2f, 6> = array<vec2f, 6>(
        vec2f(-1.0, -1.0),
        vec2f(1.0, -1.0),
        vec2f(-1.0, 1.0),
        vec2f(-1.0, 1.0),
        vec2f(1.0, -1.0),
        vec2f(1.0, 1.0),
    );
    var output: VertexOutput;
    let xy = squareVertices[vertexIndex];
    output.position = vec4f(xy, 0.0, 1.0);
    // Normalize to 0-1, and flip y
    let normalized = xy * 0.5 + 0.5;
    output.texCoord = vec2f(normalized.x, 1.0 - normalized.y);
    return output;
}

// --- FRAGMENT --- //

@define PI 3.141592653589793238462
@define VELOCITY_MODE 0
@define PRESSURE_MODE 1
@define DENSITY_MODE 2
@define PARTICLES_MODE 3

struct FragmentInput {
    shaderMode: u32,
    // mean and std of gaussian noise sampling
    stddev: f32,
    mean: f32,
    // 3 pseudo random sampled values from the GPU
    offsets: vec3f,
    // RGB color for smoke shading
    smokeColor: vec3f,
}

@group(0) @binding(0) var texture: texture_2d<f32>;
@group(0) @binding(1) var textureSampler: sampler;
@group(0) @binding(2) var<uniform> uniformInput: FragmentInput;

// All components are in the range [0…1], including hue.
fn hsv2rgb(c: vec3f) -> vec3f
{
    let K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
    let p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
    return c.z * mix(K.xxx, clamp(p - K.xxx, vec3f(0.0), vec3f(1.0)), c.y);
}

fn shadeVelocity(value: vec2f, input: VertexOutput) -> vec4f {
    let DAMP = 30.0;
    let angle = acos((value.y * value.y) / (dot(value.xy, value.xy)));
    let magnitude = sqrt(dot(value.xy, value.xy)) / DAMP;
    let color = hsv2rgb(vec3f(angle / 8 + PI / 2, 1, 1));
    return vec4f(color * magnitude, 0);
}

fn shadePressure(value: f32, input: VertexOutput) -> vec4f {
    // Pressure
    let DAMP = 30.0;
    if (value < 0) {
        return vec4f(-value, 0, 0, 1) / DAMP;
    } else {
        return vec4f(0, 0, value, 1) / DAMP;
    }
}

fn shadeDensity(value: f32, input: VertexOutput) -> vec4f {
    let density = clamp(value, 0.0, 1.0);
    
    // Get base color from uniform
    let baseColor = uniformInput.smokeColor;
    
    // Add complementary tinting to shadows for more visual interest
    let shadowTint = vec3f(0.1, 0.05, 0.2); // Cool blue tint for shadows
    let highlightBoost = vec3f(1.3, 1.2, 1.4); // Warm boost for highlights
    
    // Enhanced gradient stops with better contrast and vibrancy
    let color1 = (baseColor * 0.05) + shadowTint;
    let color2 = (baseColor * 0.2) + shadowTint * 0.5;
    let color3 = baseColor * 0.4;
    let color4 = baseColor * 0.7;
    let color5 = baseColor * 1.0 + vec3f(0.1, 0.1, 0.1);
    let color6 = baseColor * highlightBoost;
    let color7 = mix(baseColor * 1.5, vec3f(1.0, 1.0, 1.0), 0.3);
    let color8 = vec3f(1.2, 1.2, 1.2);
    
    var finalColor: vec3f;
    
    // multi-stop gradient
    if (density < 0.15) {
        let t = density / 0.15;
        finalColor = mix(color1, color2, smoothstep(0.0, 1.0, t));
    } else if (density < 0.3) {
        let t = (density - 0.15) / 0.15;
        finalColor = mix(color2, color3, smoothstep(0.0, 1.0, t));
    } else if (density < 0.45) {
        let t = (density - 0.3) / 0.15;
        finalColor = mix(color3, color4, smoothstep(0.0, 1.0, t));
    } else if (density < 0.6) {
        let t = (density - 0.45) / 0.15;
        finalColor = mix(color4, color5, smoothstep(0.0, 1.0, t));
    } else if (density < 0.75) {
        let t = (density - 0.6) / 0.15;
        finalColor = mix(color5, color6, smoothstep(0.0, 1.0, t));
    } else if (density < 0.9) {
        let t = (density - 0.75) / 0.15;
        finalColor = mix(color6, color7, smoothstep(0.0, 1.0, t));
    } else {
        let t = (density - 0.9) / 0.1;
        finalColor = mix(color7, color8, smoothstep(0.0, 1.0, t));
    }
    
    // Add subtle saturation boost for mid-tones
    let luminance = dot(finalColor, vec3f(0.299, 0.587, 0.114));
    let saturationBoost = 1.0 + (1.0 - abs(luminance - 0.5) * 2.0) * 0.2;
    finalColor = mix(vec3f(luminance), finalColor, saturationBoost);
    
    let alpha = density * density * (3.0 - 2.0 * density); // Smoothstep for better falloff
    
    return vec4f(finalColor, alpha);
}

fn rand(co: vec2f) -> f32 {
    let r = fract(sin(dot(co.xy, vec2f(12.9898,78.233))) * 43758.5453);
    if (r == 0.0) {
        return 0.000000000001;
    }
    else {
        return r;
    }
}

fn gaussrand(co: vec2f) -> vec4f {
    let offsets = uniformInput.offsets;
    let U = rand(co + vec2(offsets.x, offsets.x));
    let V = rand(co + vec2(offsets.y, offsets.y));
    let R = rand(co + vec2(offsets.z, offsets.z));
    var Z = sqrt(-2.0 * log(U)) * sin(2.0 * PI * V);
    Z = Z * uniformInput.stddev + uniformInput.mean;
    return vec4f(Z, Z, Z, 0.0);
}

fn addNoise(color: vec4f, texCoord: vec2f) -> vec4f {
    let magnitude = sqrt(dot(color.xy, color.xy));
    let noise = gaussrand(texCoord) ;
    let baseNoise = gaussrand(texCoord) * 0.2;
    return color + noise * magnitude + baseNoise;
}

@fragment
fn fragment_main(input: VertexOutput) -> @location(0)vec4f {
    let value = textureSample(texture, textureSampler, input.texCoord);

    var output: vec4f;

    switch uniformInput.shaderMode {
        case VELOCITY_MODE: {
            output = shadeVelocity(value.xy, input);
        }
        case PRESSURE_MODE: {
            output = shadePressure(value.x, input);
        }
        case DENSITY_MODE: {
            output = shadeDensity(value.x, input);
        }
        default: {
            output = vec4(1, 1, 1, 1);
        }
    }

    return addNoise(output, input.texCoord);
}`,OT=`@include "bilinearInterpolate.wgsl"

struct AdvectParticlesUniforms {
    timestep: f32,
}

@group(0) @binding(0) var velocity: texture_2d<f32>;
@group(0) @binding(1) var particle_position: texture_2d<f32>;
@group(0) @binding(2) var particle_position_out: texture_storage_2d<rg32float, write>;
@group(0) @binding(3) var<uniform> uniforms: AdvectParticlesUniforms;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(@builtin(global_invocation_id) global_id: vec3<u32>) {
   let grid_size = vec2f(textureDimensions(velocity));
   let current_position = textureLoad(particle_position, global_id.xy, 0).xy;
   let velocity_at_position = bilinear_interpolate(velocity, current_position);
   let new_position = current_position + velocity_at_position * uniforms.timestep;
   textureStore(particle_position_out, global_id.xy, vec4f(new_position, 0.0, 0.0));
}`,We={ADVECTION:"advectionShader.wgsl",JACOBI_ITERATION:"jacobiIteration.wgsl",DIVERGENCE:"divergenceShader.wgsl",GRADIENT_SUBTRACTION:"gradientSubtractionShader.wgsl",BOUNDARY_CONDITIONS:"boundaryConditionsShader.wgsl",ADD_SMOKE:"addSmokeShader.wgsl",ADD_VELOCITY:"addVelocityShader.wgsl",DISSIPATION:"dissipationShader.wgsl",BILINEAR_INTERPOLATE:"bilinearInterpolate.wgsl",TEXTURE:"textureShader.wgsl",ADVECT_PARTICLES:"advectParticlesShader.wgsl"};Iy.registerMultiple({[We.ADVECTION]:bT,[We.JACOBI_ITERATION]:TT,[We.DIVERGENCE]:CT,[We.GRADIENT_SUBTRACTION]:kT,[We.BOUNDARY_CONDITIONS]:ET,[We.ADD_SMOKE]:PT,[We.ADD_VELOCITY]:AT,[We.DISSIPATION]:NT,[We.BILINEAR_INTERPOLATE]:RT,[We.TEXTURE]:MT,[We.ADVECT_PARTICLES]:OT});function Yt(s,e){return ji(s,e)}const ki=16,Dy=8,IT=Math.ceil(ki/Dy),DT=.5;var Ly=(s=>(s.NORTH="N",s.NORTHEAST="NE",s.EAST="E",s.SOUTHEAST="SE",s.SOUTH="S",s.SOUTHWEST="SW",s.WEST="W",s.NORTHWEST="NW",s))(Ly||{});const Fy={N:[0,-1],NE:[1,-1],E:[1,0],SE:[1,1],S:[0,1],SW:[-1,1],W:[-1,0],NW:[-1,-1]};function LT(s,e,t="E"){const r=[0,0],o=Fy[t],l=[o[0],o[1]],c=new Float32Array([r,r,r,r,r,r,l,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,l,l,l,r,r,r,r,r,r,r,r,l,r,r,r,r,r,l,l,l,r,r,r,r,r,r,r,r,r,r,r,r,r,r,l,l,l,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r].flat());e.queue.writeTexture({texture:s},c,{bytesPerRow:ki*2*4},{width:ki,height:ki})}class FT extends sf{constructor(e){super({name:"Advection Pass",entryPoint:"compute_main",shader:e.createShaderModule({label:"Advection Shader",code:ji(We.ADVECTION,{variables:{WORKGROUP_SIZE:Dy,OUT_FORMAT:"rg32float"}})})},e)}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Advection Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){if(!e.textureManager)throw new Error("No texture manager supplied");if(!e.uniformBuffer)throw new Error("No uniform buffer supplied");return this.device.createBindGroup({label:"Advection Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:2,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class VT{constructor(){Y(this,"resources",null);Y(this,"sampler",null);Y(this,"textureManager",null);Y(this,"advectionPass",null);Y(this,"renderingPass",null)}async initialize(e,t="E"){if(!e.current)throw new nn("Could not initialize WebGPU: Canvas not found",fr.NO_CANVAS);this.resources=await rf(e.current),this.textureManager=new nf(this.resources.device),this.textureManager.createPingPongTexture("velocity",{label:"Velocity Texture",size:[ki,ki],format:"rg32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST}),this.sampler=this.resources.device.createSampler({label:"Texture Sampler"}),LT(this.textureManager.getCurrentTexture("velocity"),this.resources.device,t),this.advectionPass=new FT(this.resources.device);const r=this.resources.device.createShaderModule({label:"Texture Shader",code:ji(We.TEXTURE)});this.renderingPass=new of({name:"Advection Test Rendering",vertex:{module:r,entryPoint:"vertex_main"},fragment:{module:r,entryPoint:"fragment_main",targets:[{format:this.resources.canvasFormat}]}},this.resources.device),this.step({renderOnly:!0})}step({renderOnly:e}={renderOnly:!1}){if(!this.resources||!this.textureManager||!this.advectionPass||!this.renderingPass)throw new nn("Could not step advection test: Resources not initialized. Run initialize() first.",fr.NO_RESOURCES);const t=this.resources.device.createCommandEncoder();if(!e){const o=new Float32Array([.03333333333333333,DT]),l=this.resources.device.createBuffer({label:"Advection UBO",size:o.byteLength,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});this.resources.device.queue.writeBuffer(l,0,o);const c=t.beginComputePass({label:"Advection Test Compute Pass"});this.advectionPass.execute(c,{uniformBuffer:l,textureManager:this.textureManager},IT),c.end(),this.textureManager.swap("velocity")}const r=t.beginRenderPass({label:"Advection Test Render Pass",colorAttachments:[{view:this.resources.context.getCurrentTexture().createView(),loadOp:"clear",storeOp:"store",clearValue:{r:0,g:0,b:0,a:0}}]});this.renderingPass.writeToUniformBuffer({shaderMode:Mi.VELOCITY,noise:{mean:0,stddev:.05,offsets:[Math.random(),Math.random(),Math.random()]},smokeColor:[0,1,0]}),this.renderingPass.execute(r,{vertexCount:6},{sampler:this.sampler,textureManager:this.textureManager,texture:"velocity"}),r.end(),this.resources.device.queue.submit([t.finish()])}}function BT(){const s=k.useRef(null),[e,t]=k.useState("E"),r=async h=>{!h.current||s.current||(s.current=new VT,await s.current.initialize(h,e))},o=()=>{s.current&&s.current.step()},l=async h=>{s.current&&h.current&&await s.current.initialize(h,e)},c=async(h,f)=>{t(h),s.current&&f.current&&await s.current.initialize(f,h)},u=({canvasRef:h})=>I.jsxs("div",{className:"flex flex-col items-center gap-2 mb-4",children:[I.jsx("label",{htmlFor:"direction-select",className:"text-sm font-medium text-gray-700",children:"Advection Direction:"}),I.jsx("select",{id:"direction-select",value:e,onChange:f=>c(f.target.value,h),className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Object.values(Ly).map(f=>I.jsxs("option",{value:f,children:[f," (",Fy[f].join(", "),")"]},f))})]});return I.jsx(Oy,{title:"Advection Test",onInitialize:r,onStep:o,onRestart:l,customControls:h=>I.jsx(u,{canvasRef:h})})}const Ei=16,Vy=8,zT=Math.ceil(Ei/Vy),UT=20;function jT(s,e){const t=[0,0],r=[1,1],o=new Float32Array([t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t].flat());e.queue.writeTexture({texture:s},o,{bytesPerRow:Ei*2*4},{width:Ei,height:Ei})}let GT=class extends sf{constructor(e){super({entryPoint:"compute_main",name:"Diffusion",shader:e.createShaderModule({code:ji(We.JACOBI_ITERATION,{variables:{WORKGROUP_SIZE:Vy,FORMAT:"rg32float"}}),label:"Diffusion Shader"})},e)}createBindGroupLayout(){return this.device.createBindGroupLayout({label:`${this.config.name} Bind Group Layout`,entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{viewDimension:"2d",sampleType:"unfilterable-float"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{viewDimension:"2d",sampleType:"unfilterable-float"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",viewDimension:"2d",access:"write-only"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup({textureManager:e,uniformBuffer:t}){if(!e)throw new Error("Supply texture manager to diffusion pass");if(!t)throw new Error("Supply uniform buffer to diffusion pass");return this.device.createBindGroup({label:"Diffusion Bind Layout",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.getCurrentTexture("velocity").createView()},{binding:1,resource:e.getCurrentTexture("velocity").createView()},{binding:2,resource:e.getBackTexture("velocity").createView()},{binding:3,resource:{label:"",buffer:t}}]})}async execute(e,t,r){var o;for(let l=0;l<UT;l++){const c=this.createBindGroup(t);e.setPipeline(this.pipeline),e.setBindGroup(0,c),e.dispatchWorkgroups(r,r),(o=t.textureManager)==null||o.swap("velocity")}}};class WT{constructor(){Y(this,"resources",null);Y(this,"textureManager",null);Y(this,"sampler",null);Y(this,"diffusionPass",null);Y(this,"renderingPass",null)}async initialize(e){if(!e.current)throw new nn("Could not initialize WebGPU: Canvas not found",fr.NO_CANVAS);this.resources=await rf(e.current),this.textureManager=new nf(this.resources.device),this.sampler=this.resources.device.createSampler({label:"Diffusion Rendering Sampler "}),this.textureManager.createPingPongTexture("velocity",{label:"Velocity Texture",size:[Ei,Ei],format:"rg32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST}),jT(this.textureManager.getCurrentTexture("velocity"),this.resources.device),this.diffusionPass=new GT(this.resources.device);const t=this.resources.device.createShaderModule({label:"Texture Shader",code:ji(We.TEXTURE)});this.renderingPass=new of({name:"Diffusion Test Rendering",vertex:{module:t,entryPoint:"vertex_main"},fragment:{module:t,entryPoint:"fragment_main",targets:[{format:this.resources.canvasFormat}]}},this.resources.device),this.step({renderOnly:!0})}step({renderOnly:e}={renderOnly:!1}){if(!this.resources||!this.textureManager||!this.diffusionPass||!this.renderingPass)throw new nn("Could not step diffusion test: Resources not initialized. Run initialize() first.",fr.NO_RESOURCES);const t=this.resources.device.createCommandEncoder();if(!e){const c=1/.01/.03333333333333333,u=new Float32Array([c,1/(4+c)]),h=this.resources.device.createBuffer({label:"Diffusion UBO",size:u.byteLength,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM});this.resources.device.queue.writeBuffer(h,0,u);const f=t.beginComputePass({label:"Diffusion Test Compute Pass"});this.diffusionPass.execute(f,{uniformBuffer:h,textureManager:this.textureManager},zT),f.end(),this.textureManager.swap("velocity")}const r=t.beginRenderPass({label:"Diffusion Test Render Pass",colorAttachments:[{view:this.resources.context.getCurrentTexture().createView(),loadOp:"clear",storeOp:"store",clearValue:{r:0,g:0,b:0,a:0}}]});this.renderingPass.writeToUniformBuffer({shaderMode:Mi.VELOCITY,noise:{mean:0,stddev:.05,offsets:[Math.random(),Math.random(),Math.random()]},smokeColor:[0,1,0]}),this.renderingPass.execute(r,{vertexCount:6},{sampler:this.sampler,textureManager:this.textureManager,texture:"velocity"}),r.end(),this.resources.device.queue.submit([t.finish()])}}function $T(){const s=k.useRef(null),e=async o=>{!o.current||s.current||(s.current=new WT,await s.current.initialize(o))},t=()=>{s.current&&s.current.step()},r=async o=>{s.current&&o.current&&await s.current.initialize(o)};return I.jsx(Oy,{title:"Diffusion Test",onInitialize:e,onStep:t,onRestart:r})}function qT(){const{testId:s}=Kh({from:"/tests/$testId"}),e=()=>I.jsx("div",{className:"border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60",children:I.jsx("div",{className:"container mx-auto px-4 py-4",children:I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx(Hn,{variant:"ghost",size:"sm",asChild:!0,children:I.jsxs(Yo,{to:"/tests",className:"flex items-center gap-2",children:[I.jsx(bh,{className:"h-4 w-4"}),"Back to Tests"]})}),I.jsx("div",{className:"h-6 w-px bg-border"}),I.jsxs("h1",{className:"text-lg font-semibold text-gray-900 capitalize",children:[s," Test"]})]})})}),t=()=>{switch(s){case"advection":return I.jsx(BT,{});case"diffusion":return I.jsx($T,{});default:return I.jsxs("div",{className:"p-8 text-center",children:[I.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Test Not Found"}),I.jsxs("p",{className:"text-gray-600 mb-6",children:['The test "',s,'" could not be found.']}),I.jsx(Hn,{variant:"outline",asChild:!0,children:I.jsxs(Yo,{to:"/tests",children:[I.jsx(bh,{className:"h-4 w-4 mr-2"}),"Back to Tests"]})})]})}};return I.jsxs("div",{className:"min-h-screen bg-gray-50",children:[I.jsx(e,{}),I.jsx("div",{className:"container mx-auto",children:t()})]})}class Nl{constructor(e=60){Y(this,"samples",[]);Y(this,"maxSamples");this.maxSamples=e}addSample(e){e<0||(this.samples.push(e),this.samples.length>this.maxSamples&&this.samples.shift())}get(){return this.samples.length===0?0:this.samples.reduce((t,r)=>t+r,0)/this.samples.length}clear(){this.samples=[]}}class HT{constructor(e=!1){Y(this,"jsAverage",new Nl);Y(this,"fpsAverage",new Nl);Y(this,"timestepAverage",new Nl);Y(this,"gpuAverage",new Nl);Y(this,"timers",new Map);Y(this,"lastFrameTime",performance.now());Y(this,"gpuSupported",!1);this.gpuSupported=e}setGpuSupported(e){this.gpuSupported=e}startTimer(e){this.timers.set(e,performance.now())}endTimer(e){const t=this.timers.get(e);if(!t)return 0;const r=performance.now()-t;return this.timers.delete(e),r}recordJS(e){this.jsAverage.addSample(e)}recordGPU(e){this.gpuAverage.addSample(e)}recordTimestep(e){this.timestepAverage.addSample(e*1e3)}recordFrame(){const e=performance.now(),t=(e-this.lastFrameTime)/1e3;t>0&&this.fpsAverage.addSample(1/t),this.lastFrameTime=e}getMetrics(){return{js:this.jsAverage.get(),fps:this.fpsAverage.get(),timestep:this.timestepAverage.get(),gpu:this.gpuAverage.get(),gpuSupported:this.gpuSupported}}clear(){this.jsAverage.clear(),this.fpsAverage.clear(),this.timestepAverage.clear(),this.gpuAverage.clear(),this.timers.clear()}}const YT=[{key:"fps",label:"fps:",format:s=>`${s.toFixed(0)}`,className:s=>{const e=s;return e>=55?"text-green-400":e>=30?"text-yellow-400":"text-red-400"}},{key:"js",label:"js:",format:s=>`${s.toFixed(1)}ms`},{key:"gpu",label:"gpu:",format:(s,e)=>e.gpuSupported?`${s.toFixed(1)}µs`:"N/A",condition:s=>s.gpuSupported||!0},{key:"timestep",label:"dt:",format:s=>`${s.toFixed(1)}ms`}],XT=[{key:"mouseMoveCallsPerSecond",label:"mouse:",format:s=>`${s.toFixed(1)}/s`,className:s=>s>100?"text-red-400":s>60?"text-yellow-400":"text-green-400"},{key:"mouseDownCallsPerSecond",label:"click:",format:s=>`${s.toFixed(1)}/s`}],KT=ta.memo(({metrics:s,eventMetrics:e,isVisible:t})=>{if(!t)return null;const r=e&&Object.values(e).some(o=>o>0);return I.jsx(Ay,{className:"fixed top-4 left-4 z-50 w-32 bg-black/80 text-white border-gray-600",children:I.jsxs(Ny,{className:"p-3 space-y-1",children:[YT.map(o=>{if(o.condition&&!o.condition(s))return null;const l=s[o.key],c=o.format(l,s),u=typeof o.className=="function"?o.className(l,s):o.className;return I.jsxs("div",{className:"flex justify-between text-xs font-mono",children:[I.jsx("span",{children:o.label}),I.jsx("span",{className:u,children:c})]},o.key)}),r&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"border-t border-gray-600 my-2"}),I.jsx("div",{className:"text-xs font-mono text-gray-300 mb-1",children:"events"}),XT.map(o=>{if(!e||e[o.key]===void 0)return null;const l=e[o.key],c=o.format(l),u=typeof o.className=="function"?o.className(l):o.className;return I.jsxs("div",{className:"flex justify-between text-xs font-mono",children:[I.jsx("span",{children:o.label}),I.jsx("span",{className:u,children:c})]},o.key)})]})]})})}),ZT=()=>{const[s,e]=k.useState(!1);return k.useEffect(()=>{const t=r=>{r.key.toLowerCase()==="p"&&e(o=>!o)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),s};class QT{constructor(e,t=1e3){Y(this,"callTimes",[]);Y(this,"lastCleanupTime",performance.now());Y(this,"maxAge");Y(this,"name");this.name=e,this.maxAge=t}recordCall(){const e=performance.now();this.callTimes.push(e),e-this.lastCleanupTime>this.maxAge&&(this.cleanup(e),this.lastCleanupTime=e)}getCallsPerSecond(){const e=performance.now();if(this.cleanup(e),this.callTimes.length===0)return 0;const t=e-this.maxAge;return this.callTimes.filter(o=>o>t).length*(1e3/this.maxAge)}getStats(){return{name:this.name,callsPerSecond:this.getCallsPerSecond(),totalCalls:this.callTimes.length}}reset(){this.callTimes=[],this.lastCleanupTime=performance.now()}cleanup(e){const t=e-this.maxAge;this.callTimes=this.callTimes.filter(r=>r>t)}}class JT{constructor(e,t){Y(this,"pendingEvents",[]);Y(this,"rafId",null);Y(this,"isProcessing",!1);Y(this,"callback");Y(this,"onEventBatch");this.callback=e,this.onEventBatch=t}addEvent(e){this.pendingEvents.push(e),this.rafId===null&&!this.isProcessing&&(this.rafId=requestAnimationFrame(()=>{this.processBatch()}))}destroy(){this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.pendingEvents=[]}processBatch(){if(this.pendingEvents.length===0)return;this.isProcessing=!0;const e=[...this.pendingEvents];this.pendingEvents=[],this.rafId=null,this.onEventBatch&&this.onEventBatch(e.length);try{this.callback(e)}finally{this.isProcessing=!1}}}var Gl=(s=>(s[s.NO_SLIP_VELOCITY=0]="NO_SLIP_VELOCITY",s[s.FREE_SLIP_VELOCITY=1]="FREE_SLIP_VELOCITY",s[s.SCALAR_NEUMANN=2]="SCALAR_NEUMANN",s))(Gl||{});const eC={read_read_write_uniform:{label:"Read-Read-Write-Uniform Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]},read_write_uniform:{label:"Read-Write-Uniform Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"r32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]},pressure:{label:"Pressure Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"r32float",access:"write-only",viewDimension:"2d"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]},gradient:{label:"Gradient Subtraction Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]},boundary:{label:"Boundary Conditions Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}};class yr{static getBindGroupLayout(e,t){let r=this.layoutMap.get(e);if(r||(r=new Map,this.layoutMap.set(e,r)),r.has(t))return r.get(t);const o=eC[t];if(!o)throw new Error(`Unknown layout type: ${t}`);const l=e.createBindGroupLayout(o);return r.set(t,l),l}static destroyDevice(e){const t=this.layoutMap.get(e);t&&(t.clear(),this.layoutMap.delete(e))}static destroyAll(){for(const[e,t]of this.layoutMap.entries())t.clear();this.layoutMap.clear()}}Y(yr,"layoutMap",new Map);class Dn extends sf{constructor(t,r,o){super(t,r);Y(this,"uniformManager");this.uniformManager=new pT(r,o)}executeWithUniforms(t,r,o,l){const c=this.uniformManager.updateBuffer(r),u=this.createBindGroup({textureManager:o,uniformBuffer:c});t.setPipeline(this.pipeline),t.setBindGroup(0,u),t.dispatchWorkgroups(l,l)}destroy(){this.uniformManager.destroy()}}class af extends Dn{constructor(){super(...arguments);Y(this,"cachedBindGroupSwaps",null)}getCachedBindGroups(t,r){if(this.cachedBindGroupSwaps)return this.cachedBindGroupSwaps;const o=this.uniformManager.updateBuffer(t),l=this.createBindGroup({textureManager:r,uniformBuffer:o});r.swap(this.getSwapTextureId());const c=this.createBindGroup({textureManager:r,uniformBuffer:o});return r.swap(this.getSwapTextureId()),this.cachedBindGroupSwaps=[l,c],this.cachedBindGroupSwaps}executeIterations(t,r,o,l,c){const u=this.getCachedBindGroups(r,o);t.setPipeline(this.pipeline);for(let h=0;h<c;h++)t.setBindGroup(0,u[h%2]),t.dispatchWorkgroups(l,l)}}class tC extends Dn{constructor(e,t){super({name:"Smoke Density Advection",entryPoint:"compute_main",shader:e.createShaderModule({label:"Advection Shader",code:Yt(We.ADVECTION,{variables:{WORKGROUP_SIZE:t,OUT_FORMAT:"r32float"}})})},e,"Smoke Advection Uniforms")}createBindGroupLayout(){return yr.getBindGroupLayout(this.device,"pressure")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Advection Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("smokeDensity").createView()},{binding:2,resource:e.textureManager.getBackTexture("smokeDensity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class nC extends af{constructor(e,t){super({name:"Diffusion",entryPoint:"compute_main",shader:e.createShaderModule({label:"Diffusion Shader",code:Yt(We.JACOBI_ITERATION,{variables:{WORKGROUP_SIZE:t,FORMAT:"r32float"}})})},e,"Smoke Diffusion Uniforms")}getSwapTextureId(){return"smokeDensity"}createBindGroupLayout(){return yr.getBindGroupLayout(this.device,"pressure")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Diffusion Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("smokeDensity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("smokeDensity").createView()},{binding:2,resource:e.textureManager.getBackTexture("smokeDensity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class rC extends Dn{constructor(e,t){super({name:"Advection",entryPoint:"compute_main",shader:e.createShaderModule({label:"Advection Shader",code:Yt(We.ADVECTION,{variables:{WORKGROUP_SIZE:t,OUT_FORMAT:"rg32float"}})})},e,"Velocity Advection Uniforms")}createBindGroupLayout(){return yr.getBindGroupLayout(this.device,"read_read_write_uniform")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Advection Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:2,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class sC extends af{constructor(e,t){super({name:"Diffusion",entryPoint:"compute_main",shader:e.createShaderModule({label:"Diffusion Shader",code:Yt(We.JACOBI_ITERATION,{variables:{WORKGROUP_SIZE:t,FORMAT:"rg32float"}})})},e,"Velocity Diffusion Uniforms")}getSwapTextureId(){return"velocity"}createBindGroupLayout(){return yr.getBindGroupLayout(this.device,"read_read_write_uniform")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Diffusion Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:2,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class iC extends Dn{constructor(e,t){super({name:"Divergence",entryPoint:"compute_main",shader:e.createShaderModule({label:"Divergence Shader",code:Yt(We.DIVERGENCE,{variables:{WORKGROUP_SIZE:t}})})},e,"Divergence Uniforms")}createBindGroupLayout(){return yr.getBindGroupLayout(this.device,"read_write_uniform")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Divergence Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("divergence").createView()},{binding:2,resource:{buffer:e.uniformBuffer}}]})}}class oC extends af{constructor(e,t){super({name:"Pressure",entryPoint:"compute_main",shader:e.createShaderModule({label:"Pressure Shader",code:Yt(We.JACOBI_ITERATION,{variables:{WORKGROUP_SIZE:t,FORMAT:"r32float"}})})},e,"Pressure Uniforms")}getSwapTextureId(){return"pressure"}createBindGroupLayout(){return yr.getBindGroupLayout(this.device,"pressure")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Pressure Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("pressure").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("divergence").createView()},{binding:2,resource:e.textureManager.getBackTexture("pressure").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class aC extends Dn{constructor(e,t){super({name:"Gradient Subtraction",entryPoint:"compute_main",shader:e.createShaderModule({label:"Gradient Subtraction Shader",code:Yt(We.GRADIENT_SUBTRACTION,{variables:{WORKGROUP_SIZE:t}})})},e,"Gradient Subtraction Uniforms")}createBindGroupLayout(){return yr.getBindGroupLayout(this.device,"gradient")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Gradient Subtraction Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("pressure").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:2,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class lC extends Dn{constructor(t,r){const o=Yt(We.BOUNDARY_CONDITIONS,{variables:{WORKGROUP_SIZE:r,FORMAT:"rg32float"}}),l=Yt(We.BOUNDARY_CONDITIONS,{variables:{WORKGROUP_SIZE:r,FORMAT:"r32float"}}),c=t.createShaderModule({label:"Boundary Conditions Velocity Shader",code:o}),u=t.createShaderModule({label:"Boundary Conditions Scalar Shader",code:l});super({name:"Boundary Conditions",entryPoint:"compute_main",shader:c},t,"Boundary Conditions Uniforms");Y(this,"velocityShader");Y(this,"scalarShader");Y(this,"velocityPipeline",null);Y(this,"scalarPipeline",null);this.velocityShader=c,this.scalarShader=u}getVelocityBindGroupLayout(){return this.device.createBindGroupLayout({label:"Boundary Velocity Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}getScalarBindGroupLayout(){return this.device.createBindGroupLayout({label:"Boundary Scalar Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"r32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}getVelocityPipeline(){return this.velocityPipeline||(this.velocityPipeline=this.device.createComputePipeline({label:"Boundary Conditions Velocity Pipeline",layout:this.device.createPipelineLayout({bindGroupLayouts:[this.getVelocityBindGroupLayout()]}),compute:{module:this.velocityShader,entryPoint:"compute_main"}})),this.velocityPipeline}getScalarPipeline(){return this.scalarPipeline||(this.scalarPipeline=this.device.createComputePipeline({label:"Boundary Conditions Scalar Pipeline",layout:this.device.createPipelineLayout({bindGroupLayouts:[this.getScalarBindGroupLayout()]}),compute:{module:this.scalarShader,entryPoint:"compute_main"}})),this.scalarPipeline}createBindGroupLayout(){return this.getVelocityBindGroupLayout()}createBindGroup(t){throw new Error("Use executeForTexture method instead")}executeForTexture(t,r,o,l,c){const u=r==="velocity",h=u?this.getVelocityPipeline():this.getScalarPipeline(),f=this.uniformManager.updateBuffer(o),m=this.device.createBindGroup({label:`Boundary ${r} Bind Group`,layout:u?this.getVelocityBindGroupLayout():this.getScalarBindGroupLayout(),entries:[{binding:0,resource:l.getCurrentTexture(r).createView()},{binding:1,resource:l.getBackTexture(r).createView()},{binding:2,resource:{buffer:f}}]});t.setPipeline(h),t.setBindGroup(0,m),t.dispatchWorkgroups(c,c)}destroy(){this.velocityPipeline=null,this.scalarPipeline=null,super.destroy()}}class cC extends Dn{constructor(e,t){super({name:"Add Smoke",entryPoint:"compute_main",shader:e.createShaderModule({label:"Add Smoke Shader",code:Yt(We.ADD_SMOKE,{variables:{WORKGROUP_SIZE:t}})})},e,"Add Smoke Uniforms")}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Add Smoke Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"r32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Add Smoke Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("smokeDensity").createView()},{binding:1,resource:e.textureManager.getBackTexture("smokeDensity").createView()},{binding:2,resource:{buffer:e.uniformBuffer}}]})}}class uC extends Dn{constructor(e,t){super({name:"Add Velocity",entryPoint:"compute_main",shader:e.createShaderModule({label:"Add Velocity Shader",code:Yt(We.ADD_VELOCITY,{variables:{WORKGROUP_SIZE:t}})})},e,"Add Velocity Uniforms")}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Add Velocity Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Add Velocity Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:2,resource:{buffer:e.uniformBuffer}}]})}}class dC extends Dn{constructor(e,t){super({name:"Smoke Dissipation",entryPoint:"compute_main",shader:e.createShaderModule({label:"Smoke Dissipation Shader",code:Yt(We.DISSIPATION,{variables:{WORKGROUP_SIZE:t,FORMAT:"r32float",CHANNELS:1}})})},e,"Smoke Dissipation Uniforms")}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Smoke Dissipation Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"r32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Smoke Dissipation Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("smokeDensity").createView()},{binding:1,resource:e.textureManager.getBackTexture("smokeDensity").createView()},{binding:2,resource:{buffer:e.uniformBuffer}}]})}}class hC extends Dn{constructor(e,t){super({name:"Advect Particles",entryPoint:"compute_main",shader:e.createShaderModule({label:"Advect Particles Shader",code:Yt(We.ADVECT_PARTICLES,{variables:{WORKGROUP_SIZE:t}})})},e,"Advect Particles Uniforms")}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Advect Particles Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Advect Particles Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("smokeParticlePosition").createView()},{binding:2,resource:e.textureManager.getBackTexture("smokeParticlePosition").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class fC extends Dn{constructor(e,t){super({name:"Velocity Dissipation",entryPoint:"compute_main",shader:e.createShaderModule({label:"Velocity Dissipation Shader",code:Yt(We.DISSIPATION,{variables:{WORKGROUP_SIZE:t,FORMAT:"rg32float",CHANNELS:2}})})},e,"Velocity Dissipation Uniforms")}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Velocity Dissipation Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Velocity Dissipation Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:2,resource:{buffer:e.uniformBuffer}}]})}}const En=4,Sc={grid:{size:{width:2**9,height:2**8},scale:1},compute:{workgroupSize:16,get workgroupCount(){return Math.ceil(Sc.grid.size.width/this.workgroupSize)}},physics:{maxTimestep:1/30,diffusionFactor:10,velocityAdvection:10,smokeAdvection:20,smokeDiffusion:1.1,smokeDissipationFactor:.995,velocityDissipationFactor:.995},interaction:{radius:20,smokeIntensity:.18,velocityIntensity:2},iterations:{diffusion:25,pressure:80},particles:{smokeDimensions:{width:2**7,height:2**7}},noise:{stddev:.08,mean:0},lavaLamp:{spawnAreaHeightPercent:.1,velocityRange:{horizontal:{min:-2,max:2},vertical:{min:1,max:8}},pillDuration:{min:500,max:3e3},pillInterval:50,spawnInterval:{min:1e3,max:3e3},velocityScale:40,subPills:{count:{min:4,max:8},spawnDelay:{min:50,max:100},velocityVariation:1.1,positionVariation:30}}};class Pi{constructor(e,t,r){Y(this,"data");Y(this,"width");Y(this,"height");this.width=e,this.height=t,this.data=new Array(e*t),r!==void 0&&this.data.fill(r)}static fromArray(e,t,r,o=!1){if(e.length!==t*r)throw new Error(`Data length ${e.length} does not match dimensions ${t}x${r}`);const l=new Pi(t,r);if(o){const c=new Array(e.length);for(let u=0;u<r;u++){const h=r-1-u;for(let f=0;f<t;f++){const m=h*t+f,g=u*t+f;c[g]=e[m]}}l.data=c}else l.data=[...e];return l}get(e,t){if(e<0||e>=this.width||t<0||t>=this.height)throw new Error(`Coordinates (${e}, ${t}) out of bounds for ${this.width}x${this.height} array`);return this.data[t*this.width+e]}set(e,t,r){if(e<0||e>=this.width||t<0||t>=this.height)throw new Error(`Coordinates (${e}, ${t}) out of bounds for ${this.width}x${this.height} array`);this.data[t*this.width+e]=r}getIndex(e){if(e<0||e>=this.data.length)throw new Error(`Index ${e} out of bounds for array of length ${this.data.length}`);return this.data[e]}setIndex(e,t){if(e<0||e>=this.data.length)throw new Error(`Index ${e} out of bounds for array of length ${this.data.length}`);this.data[e]=t}get length(){return this.data.length}forEach(e){for(let t=0;t<this.height;t++)for(let r=0;r<this.width;r++){const o=t*this.width+r;e(this.data[o],r,t,o)}}map(e){const t=new Pi(this.width,this.height);return this.forEach((r,o,l,c)=>{t.setIndex(c,e(r,o,l,c))}),t}fill(e){this.data.fill(e)}clone(){return Pi.fromArray(this.data,this.width,this.height)}getAtNormalized(e,t){if(e<0||e>1||t<0||t>1)throw new Error(`Normalized coordinates (${e}, ${t}) must be in range [0, 1]`);const r=Math.floor(e*this.width),o=Math.floor(t*this.height),l=Math.min(r,this.width-1),c=Math.min(o,this.height-1);return this.get(l,c)}}function gv(s,e,t,r=1,o=!1){const l=Math.floor(e/r),c=Math.floor(t/r);if(s.length!==l*c)throw new Error(`Data length ${s.length} does not match expected downsampled dimensions ${l}x${c}`);return Pi.fromArray(Array.from(s),l,c,o)}function pC(s,e,t,r=1,o=!1){const l=Math.floor(e/r),c=Math.floor(t/r);if(s.length!==l*c)throw new Error(`Data length ${s.length} does not match expected downsampled dimensions ${l}x${c}`);return Pi.fromArray(s,l,c,o)}class mC{constructor(e=100){Y(this,"bounds",null);Y(this,"updateTime",0);Y(this,"cacheTimeout");this.cacheTimeout=e}getBounds(e){const t=performance.now();return(!this.bounds||!e||t-this.updateTime>this.cacheTimeout)&&e&&(this.bounds=e.getBoundingClientRect(),this.updateTime=t),this.bounds}clear(){this.bounds=null}}function gC(s,e,t,r){const o=s-t.left,l=e-t.top,c=o/t.width*r.width,u=l/t.height*r.height;return{x:c,y:u}}function Wl(s,e,t,r){const o=s/r.width*t.width,l=e/r.height*t.height,c=o+t.left,u=l+t.top;return{clientX:c,clientY:u}}class vC{constructor(e=100){Y(this,"boundsCache");Y(this,"canvas",null);Y(this,"simulation",null);this.boundsCache=new mC(e)}initialize(e,t){this.canvas=e,this.simulation=t}clearCache(){this.boundsCache.clear()}clientToGrid(e,t){if(!this.canvas||!this.simulation)return null;const r=this.boundsCache.getBounds(this.canvas),o=this.simulation.getGridSize();return!r||!o?null:gC(e,t,r,o)}gridToClient(e,t){if(!this.canvas||!this.simulation)return null;const r=this.boundsCache.getBounds(this.canvas),o=this.simulation.getGridSize();return!r||!o?null:Wl(e,t,r,o)}}function yC(s,e=150){return window.innerHeight-s<=e}function _C(s,e){const{baseX:t,baseY:r,baseVelocityX:o,baseVelocityY:l,baseDuration:c,lavaLampConfig:u,gridSize:h}=s,{simulation:f,canvasBounds:m,isLavaLampMode:g,intervalTracker:y,isWindowFocused:x}=e,w=t+(Math.random()-.5)*2*u.subPills.positionVariation,_=r+(Math.random()-.5)*2*u.subPills.positionVariation,b=u.subPills.velocityVariation,T=o+(Math.random()-.5)*2*Math.abs(o)*b,M=l+(Math.random()-.5)*2*Math.abs(l)*b,L=c+(Math.random()-.5)*c*.4,V=u.pillInterval;let E=0,P=!1;const R=setInterval(()=>{if(!f||!g||!x){if(P){const U=w+T*E/1e3*u.velocityScale,G=_+M*E/1e3*u.velocityScale;Wl(U,G,m,h)}clearInterval(R),y.delete(R);return}const C=w+T*E/1e3*u.velocityScale,O=_+M*E/1e3*u.velocityScale;if(C>=0&&C<h.width&&O>=0&&O<h.height&&(f.addSmoke(C,O),f.addVelocity(C,O,T,M),Wl(C,O,m,h)&&(P||(P=!0))),E+=V,E>=L){if(P){const U=w+T*E/1e3*u.velocityScale,G=_+M*E/1e3*u.velocityScale;Wl(U,G,m,h)}clearInterval(R),y.delete(R)}},V);y.add(R)}function wC(s){const{simulation:e,intervalTracker:t}=s;if(!e)return;const r=e.getGridSize();if(!r)return;const o=Sc.lavaLamp,l=["top","bottom","left","right"],c=l[Math.floor(Math.random()*l.length)];let u,h,f,m;switch(c){case"top":u=Math.random()*r.width,h=Math.random()*(r.height*o.spawnAreaHeightPercent),f=Math.random()*(o.velocityRange.horizontal.max-o.velocityRange.horizontal.min)+o.velocityRange.horizontal.min,m=Math.random()*(o.velocityRange.vertical.max-o.velocityRange.vertical.min)+o.velocityRange.vertical.min;break;case"bottom":u=Math.random()*r.width,h=r.height-Math.random()*(r.height*o.spawnAreaHeightPercent),f=Math.random()*(o.velocityRange.horizontal.max-o.velocityRange.horizontal.min)+o.velocityRange.horizontal.min,m=-(Math.random()*(o.velocityRange.vertical.max-o.velocityRange.vertical.min)+o.velocityRange.vertical.min);break;case"left":u=Math.random()*(r.width*o.spawnAreaHeightPercent),h=Math.random()*r.height,f=Math.random()*(o.velocityRange.vertical.max-o.velocityRange.vertical.min)+o.velocityRange.vertical.min,m=Math.random()*(o.velocityRange.horizontal.max-o.velocityRange.horizontal.min)+o.velocityRange.horizontal.min;break;case"right":u=r.width-Math.random()*(r.width*o.spawnAreaHeightPercent),h=Math.random()*r.height,f=-(Math.random()*(o.velocityRange.vertical.max-o.velocityRange.vertical.min)+o.velocityRange.vertical.min),m=Math.random()*(o.velocityRange.horizontal.max-o.velocityRange.horizontal.min)+o.velocityRange.horizontal.min;break}const g=Math.random()*(o.pillDuration.max-o.pillDuration.min)+o.pillDuration.min,y=Math.floor(Math.random()*(o.subPills.count.max-o.subPills.count.min+1))+o.subPills.count.min;for(let x=0;x<y;x++){const w=Math.random()*(o.subPills.spawnDelay.max-o.subPills.spawnDelay.min)+o.subPills.spawnDelay.min,_=setTimeout(()=>{_C({baseX:u,baseY:h,baseVelocityX:f,baseVelocityY:m,baseDuration:g,lavaLampConfig:o,gridSize:r},s),t.delete(_)},x*w);t.add(_)}}function xC(s,e){const{isLavaLampMode:t,intervalTracker:r,isWindowFocused:o}=s;if(!t||!o)return;const l=Sc.lavaLamp,c=Math.random()*(l.spawnInterval.max-l.spawnInterval.min)+l.spawnInterval.min,u=setTimeout(()=>{s.isWindowFocused&&s.isLavaLampMode?(wC(s),r.delete(u),e()):r.delete(u)},c);r.add(u)}function Rl(s){s.forEach(e=>{clearTimeout(e)}),s.clear()}function SC(s,e){const t={...s.grid,...e.grid},r={...s.compute,...e.compute},o={...r,workgroupCount:Math.ceil(t.size.width/r.workgroupSize)};return{grid:t,compute:o,physics:{...s.physics,...e.physics},interaction:{...s.interaction,...e.interaction},iterations:{...s.iterations,...e.iterations},particles:{...s.particles,...e.particles},noise:{...s.noise,...e.noise},lavaLamp:{...s.lavaLamp,...e.lavaLamp}}}class bC{constructor(e){Y(this,"resources",null);Y(this,"textureManager",null);Y(this,"performanceTracker",new HT);Y(this,"gpuTimer",null);Y(this,"advectionPass",null);Y(this,"smokeAdvectionPass",null);Y(this,"smokeDiffusionPass",null);Y(this,"smokeDissipationPass",null);Y(this,"velocityDissipationPass",null);Y(this,"diffusionPass",null);Y(this,"divergencePass",null);Y(this,"pressurePass",null);Y(this,"gradientSubtractionPass",null);Y(this,"boundaryConditionsPass",null);Y(this,"addSmokePass",null);Y(this,"addVelocityPass",null);Y(this,"renderingPass",null);Y(this,"advectParticlesPass",null);Y(this,"isInitialized",!1);Y(this,"lastFrameTime",performance.now());Y(this,"config");Y(this,"smokeColor",[.65,.35,.85]);this.config=SC(Sc,e||{})}setSmokeColor(e){this.smokeColor=e}async initialize(e){if(this.isInitialized){console.warn("Simulation is already initialized");return}if(!e.current)throw new nn("Could not initialize WebGPU: Canvas not found",fr.NO_CANVAS);this.resources=await rf(e.current),this.gpuTimer=new uT(this.resources.device,this.resources.canTimestamp),this.performanceTracker.setGpuSupported(this.resources.canTimestamp),this.textureManager=new nf(this.resources.device),this.textureManager.createPingPongTexture("velocity",{label:"Velocity Texture",size:this.config.grid.size,format:"rg32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC}),this.textureManager.createTexture("divergence",{label:"Divergence texture",size:this.config.grid.size,format:"r32float",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST}),this.textureManager.createPingPongTexture("pressure",{label:"Pressure Texture",size:this.config.grid.size,format:"r32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC}),this.textureManager.createPingPongTexture("smokeParticlePosition",{label:"Smoke Position Texture",size:this.config.particles.smokeDimensions,format:"rg32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST}),this.textureManager.createPingPongTexture("smokeDensity",{label:"Smoke Density Texture",size:this.config.grid.size,format:"r32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC}),vv(this.textureManager,this.resources.device,this.config),this.advectionPass=new rC(this.resources.device,this.config.compute.workgroupSize),this.smokeAdvectionPass=new tC(this.resources.device,this.config.compute.workgroupSize),this.smokeDiffusionPass=new nC(this.resources.device,this.config.compute.workgroupSize),this.smokeDissipationPass=new dC(this.resources.device,this.config.compute.workgroupSize),this.velocityDissipationPass=new fC(this.resources.device,this.config.compute.workgroupSize),this.diffusionPass=new sC(this.resources.device,this.config.compute.workgroupSize),this.divergencePass=new iC(this.resources.device,this.config.compute.workgroupSize),this.pressurePass=new oC(this.resources.device,this.config.compute.workgroupSize),this.gradientSubtractionPass=new aC(this.resources.device,this.config.compute.workgroupSize),this.boundaryConditionsPass=new lC(this.resources.device,this.config.compute.workgroupSize),this.advectParticlesPass=new hC(this.resources.device,this.config.compute.workgroupSize),this.addSmokePass=new cC(this.resources.device,this.config.compute.workgroupSize),this.addVelocityPass=new uC(this.resources.device,this.config.compute.workgroupSize);const t=this.resources.device.createShaderModule({label:"Texture Shader",code:ji(We.TEXTURE)});this.renderingPass=new of({name:"Texture Rendering",vertex:{module:t,entryPoint:"vertex_main"},fragment:{module:t,entryPoint:"fragment_main",targets:[{format:this.resources.canvasFormat}]}},this.resources.device),this.isInitialized=!0,this.step({renderOnly:!0})}step(e={}){var _;const t=performance.now();this.performanceTracker.recordFrame();const r=performance.now(),o=Math.min((r-this.lastFrameTime)/1e3,this.config.physics.maxTimestep);this.lastFrameTime=r,this.performanceTracker.recordTimestep(o);const{renderOnly:l=!1,shaderMode:c=Mi.DENSITY,texture:u="smokeDensity",velocity:h={},smoke:f={}}=e,m={...dT,...h},g={...hT,...f};if(!this.resources||!this.textureManager||!this.advectionPass||!this.diffusionPass||!this.divergencePass||!this.pressurePass||!this.gradientSubtractionPass||!this.smokeAdvectionPass||!this.smokeDiffusionPass||!this.smokeDissipationPass||!this.velocityDissipationPass||!this.boundaryConditionsPass||!this.addSmokePass||!this.addVelocityPass||!this.renderingPass||!this.advectParticlesPass||!this.isInitialized)throw new nn("Could not step simulation: Resources not initialized. Run initialize() first.",fr.NO_RESOURCES);const y=this.resources.device.createCommandEncoder();l||this.executeComputePasses(y,m,g,o),this.resources.context.configure({device:this.resources.device,format:this.resources.canvasFormat});const x=y.beginRenderPass({label:"Texture Render Pass",colorAttachments:[{view:this.resources.context.getCurrentTexture().createView(),loadOp:"clear",storeOp:"store",clearValue:{r:0,g:0,b:0,a:0}}],...((_=this.gpuTimer)==null?void 0:_.getTimestampWrites())&&{timestampWrites:this.gpuTimer.getTimestampWrites()}});this.renderingPass.writeToUniformBuffer({shaderMode:c,noise:{mean:this.config.noise.mean,stddev:this.config.noise.stddev,offsets:[Math.random(),Math.random(),Math.random()]},smokeColor:this.smokeColor}),this.renderingPass.execute(x,{vertexCount:6},{textureManager:this.textureManager,sampler:this.resources.device.createSampler({label:"Render Sampler"}),texture:u}),x.end(),this.gpuTimer&&this.gpuTimer.resolveTimestamps(y),this.resources.device.queue.submit([y.finish()]),this.gpuTimer&&this.gpuTimer.readResults().then(()=>{this.performanceTracker.recordGPU(this.gpuTimer.getLastGpuTime())});const w=performance.now()-t;this.performanceTracker.recordJS(w)}executeComputePasses(e,t,r,o){const l=e.beginComputePass({label:"Compute Pass"});if(t.enableAdvection){const c=new tc(o,this.config.physics.velocityAdvection);this.advectionPass.executeWithUniforms(l,c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("velocity")}if(t.enableDiffusion){const c=new nc(o,this.config.physics.diffusionFactor);this.diffusionPass.executeIterations(l,c,this.textureManager,this.config.compute.workgroupCount,this.config.iterations.diffusion)}if(t.enableDivergence){const c=new Th(this.config.grid.scale);this.divergencePass.executeWithUniforms(l,c,this.textureManager,this.config.compute.workgroupCount)}if(t.enablePressureProjection){const c=new Ch(this.config.grid.scale);this.pressurePass.executeIterations(l,c,this.textureManager,this.config.compute.workgroupCount,this.config.iterations.pressure)}if(t.enablePressureBoundaryConditions){const c=new zo(Gl.SCALAR_NEUMANN);this.boundaryConditionsPass.executeForTexture(l,"pressure",c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("pressure")}if(t.enableGradientSubtraction){const c=new kh(this.config.grid.scale);this.gradientSubtractionPass.executeWithUniforms(l,c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("velocity")}if(t.enableVelocityBoundaryConditions){const c=new zo(Gl.NO_SLIP_VELOCITY);this.boundaryConditionsPass.executeForTexture(l,"velocity",c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("velocity")}if(t.enableDissipation){const c=new rc(this.config.physics.velocityDissipationFactor);this.velocityDissipationPass.executeWithUniforms(l,c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("velocity")}if(r.enableAdvection){const c=new tc(o,this.config.physics.smokeAdvection);this.smokeAdvectionPass.executeWithUniforms(l,c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("smokeDensity")}if(r.enableBoundaryConditions){const c=new zo(Gl.SCALAR_NEUMANN);this.boundaryConditionsPass.executeForTexture(l,"smokeDensity",c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("smokeDensity")}if(r.enableDiffusion){const c=new nc(o,this.config.physics.smokeDiffusion);this.smokeDiffusionPass.executeIterations(l,c,this.textureManager,this.config.compute.workgroupCount,this.config.iterations.diffusion),this.textureManager.swap("smokeDensity")}if(r.enableDissipation){const c=new rc(this.config.physics.smokeDissipationFactor);this.smokeDissipationPass.executeWithUniforms(l,c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("smokeDensity")}if(r.enableAdvectParticles){const c=new Ah(o);this.advectParticlesPass.executeWithUniforms(l,c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("smokeParticlePosition")}l.end()}getPerformanceMetrics(){return this.performanceTracker.getMetrics()}getGridSize(){return this.config.grid.size}async sampleTextures(e=1){if(!this.resources||!this.textureManager||!this.isInitialized)throw new nn("Could not sample textures: Resources not initialized",fr.NO_RESOURCES);const t=this.config.grid.size,r=Math.floor(t.width/e),o=Math.floor(t.height/e),l=r*o,c=this.resources.device.createBuffer({label:"Smoke Density Staging Buffer",size:l*En,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),u=this.resources.device.createBuffer({label:"Velocity Staging Buffer",size:l*En*2,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),h=this.resources.device.createBuffer({label:"Pressure Staging Buffer",size:l*En,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),f=this.resources.device.createCommandEncoder({label:"Texture Sampling Command Encoder"});f.copyTextureToBuffer({texture:this.textureManager.getCurrentTexture("smokeDensity")},{buffer:c,bytesPerRow:r*En},{width:r,height:o}),f.copyTextureToBuffer({texture:this.textureManager.getCurrentTexture("velocity")},{buffer:u,bytesPerRow:r*En*2},{width:r,height:o}),f.copyTextureToBuffer({texture:this.textureManager.getCurrentTexture("pressure")},{buffer:h,bytesPerRow:r*En},{width:r,height:o}),this.resources.device.queue.submit([f.finish()]),await this.resources.device.queue.onSubmittedWorkDone(),await Promise.all([c.mapAsync(GPUMapMode.READ),u.mapAsync(GPUMapMode.READ),h.mapAsync(GPUMapMode.READ)]);const m=new Float32Array(c.getMappedRange()),g=new Float32Array(u.getMappedRange()),y=new Float32Array(h.getMappedRange()),x=[];for(let _=0;_<g.length;_+=2)x.push([g[_],g[_+1]]);const w={smokeDensity:gv(new Float32Array(m),t.width,t.height,e,!0),velocity:pC(x,t.width,t.height,e,!0),pressure:gv(new Float32Array(y),t.width,t.height,e,!0)};return c.unmap(),u.unmap(),h.unmap(),c.destroy(),u.destroy(),h.destroy(),w}reset(e=Mi.DENSITY,t="smokeDensity"){if(!this.resources||!this.textureManager||!this.isInitialized)throw new nn("Could not reset simulation: Resources not initialized",fr.NO_RESOURCES);this.lastFrameTime=performance.now(),vv(this.textureManager,this.resources.device,this.config),this.step({renderOnly:!0,shaderMode:e,texture:t})}addSmoke(e,t){if(!this.resources||!this.textureManager||!this.addSmokePass||!this.isInitialized)return;const r=this.resources.device.createCommandEncoder(),o=new Eh(e,t,this.config.interaction.radius,this.config.interaction.smokeIntensity),l=r.beginComputePass({label:"Add Smoke Compute Pass"});this.addSmokePass.executeWithUniforms(l,o,this.textureManager,this.config.compute.workgroupCount),l.end(),this.textureManager.swap("smokeDensity"),this.resources.device.queue.submit([r.finish()])}addVelocity(e,t,r,o){if(!this.resources||!this.textureManager||!this.addVelocityPass||!this.isInitialized)return;const l=this.resources.device.createCommandEncoder(),c=new Ph(e,t,r,o,this.config.interaction.radius,this.config.interaction.velocityIntensity),u=l.beginComputePass({label:"Add Velocity Compute Pass"});this.addVelocityPass.executeWithUniforms(u,c,this.textureManager,this.config.compute.workgroupCount),u.end(),this.textureManager.swap("velocity"),this.resources.device.queue.submit([l.finish()])}destroy(){var e,t,r,o,l,c,u,h,f,m,g,y,x,w,_,b;this.isInitialized&&((e=this.textureManager)==null||e.destroy(),(t=this.renderingPass)==null||t.destroy(),(r=this.gpuTimer)==null||r.destroy(),(o=this.advectionPass)==null||o.destroy(),(l=this.smokeAdvectionPass)==null||l.destroy(),(c=this.smokeDiffusionPass)==null||c.destroy(),(u=this.smokeDissipationPass)==null||u.destroy(),(h=this.velocityDissipationPass)==null||h.destroy(),(f=this.diffusionPass)==null||f.destroy(),(m=this.divergencePass)==null||m.destroy(),(g=this.pressurePass)==null||g.destroy(),(y=this.gradientSubtractionPass)==null||y.destroy(),(x=this.boundaryConditionsPass)==null||x.destroy(),(w=this.addSmokePass)==null||w.destroy(),(_=this.addVelocityPass)==null||_.destroy(),(b=this.resources)!=null&&b.device&&yr.destroyDevice(this.resources.device),this.resources=null,this.textureManager=null,this.renderingPass=null,console.log("SmokeSimulation destroyed"),this.isInitialized=!1)}}function vv(s,e,t){const r=t.grid.size,o=t.particles.smokeDimensions,l=r.width*r.height,c=o.width*o.height,u=new Float32Array(l*2),h=new Float32Array(l),f=new Float32Array(l),m=new Float32Array(c*2);for(let b=0;b<o.height;b++)for(let T=0;T<o.width;T++){const M=(T+b*o.width)*2;m[M]=T/o.width*r.width,m[M+1]=b/o.height*r.height}const g=s.getCurrentTexture("velocity");e.queue.writeTexture({texture:g},u,{bytesPerRow:r.width*2*En},r);const y=s.getCurrentTexture("smokeDensity");e.queue.writeTexture({texture:y},h,{bytesPerRow:r.width*En},r);const x=s.getCurrentTexture("smokeParticlePosition");e.queue.writeTexture({texture:x},m,{bytesPerRow:o.width*En*2},o);const w=s.getCurrentTexture("pressure"),_=s.getBackTexture("pressure");e.queue.writeTexture({texture:w},f,{bytesPerRow:r.width*En},r),e.queue.writeTexture({texture:_},f,{bytesPerRow:r.width*En},r)}class TC extends Error{constructor(e){super(`AudioVisualizationMediator: ${e}`)}}const By="15.1.22",yv=(s,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:s}),_v=(s,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:s}),Rh=(s,e)=>({startTime:e,type:"setValue",value:s}),zy=(s,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:s}),Uy=(s,e,{startTime:t,target:r,timeConstant:o})=>r+(e-r)*Math.exp((t-s)/o),gi=s=>s.type==="exponentialRampToValue",sc=s=>s.type==="linearRampToValue",$r=s=>gi(s)||sc(s),lf=s=>s.type==="setValue",dr=s=>s.type==="setValueCurve",ic=(s,e,t,r)=>{const o=s[e];return o===void 0?r:$r(o)||lf(o)?o.value:dr(o)?o.values[o.values.length-1]:Uy(t,ic(s,e-1,o.startTime,r),o)},wv=(s,e,t,r,o)=>t===void 0?[r.insertTime,o]:$r(t)?[t.endTime,t.value]:lf(t)?[t.startTime,t.value]:dr(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,ic(s,e-1,t.startTime,o)],Mh=s=>s.type==="cancelAndHold",Oh=s=>s.type==="cancelScheduledValues",Gr=s=>Mh(s)||Oh(s)?s.cancelTime:gi(s)||sc(s)?s.endTime:s.startTime,xv=(s,e,t,{endTime:r,value:o})=>t===o?o:0<t&&0<o||t<0&&o<0?t*(o/t)**((s-e)/(r-e)):0,Sv=(s,e,t,{endTime:r,value:o})=>t+(s-e)/(r-e)*(o-t),CC=(s,e)=>{const t=Math.floor(e),r=Math.ceil(e);return t===r?s[t]:(1-(e-t))*s[t]+(1-(r-e))*s[r]},kC=(s,{duration:e,startTime:t,values:r})=>{const o=(s-t)/e*(r.length-1);return CC(r,o)},Ml=s=>s.type==="setTarget";class EC{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=Gr(e);if(Mh(e)||Oh(e)){const r=this._automationEvents.findIndex(l=>Oh(e)&&dr(l)?l.startTime+l.duration>=t:Gr(l)>=t),o=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),Mh(e)){const l=this._automationEvents[this._automationEvents.length-1];if(o!==void 0&&$r(o)){if(l!==void 0&&Ml(l))throw new Error("The internal list is malformed.");const c=l===void 0?o.insertTime:dr(l)?l.startTime+l.duration:Gr(l),u=l===void 0?this._defaultValue:dr(l)?l.values[l.values.length-1]:l.value,h=gi(o)?xv(t,c,u,o):Sv(t,c,u,o),f=gi(o)?yv(h,t,this._currenTime):_v(h,t,this._currenTime);this._automationEvents.push(f)}if(l!==void 0&&Ml(l)&&this._automationEvents.push(Rh(this.getValue(t),t)),l!==void 0&&dr(l)&&l.startTime+l.duration>t){const c=t-l.startTime,u=(l.values.length-1)/l.duration,h=Math.max(2,1+Math.ceil(c*u)),f=c/(h-1)*u,m=l.values.slice(0,h);if(f<1)for(let g=1;g<h;g+=1){const y=f*g%1;m[g]=l.values[g-1]*(1-y)+l.values[g]*y}this._automationEvents[this._automationEvents.length-1]=zy(m,l.startTime,c)}}}else{const r=this._automationEvents.findIndex(c=>Gr(c)>t),o=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(o!==void 0&&dr(o)&&Gr(o)+o.duration>t)return!1;const l=gi(e)?yv(e.value,e.endTime,this._currenTime):sc(e)?_v(e.value,t,this._currenTime):e;if(r===-1)this._automationEvents.push(l);else{if(dr(e)&&t+e.duration>Gr(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,l)}}return!0}flush(e){const t=this._automationEvents.findIndex(r=>Gr(r)>e);if(t>1){const r=this._automationEvents.slice(t-1),o=r[0];Ml(o)&&r.unshift(Rh(ic(this._automationEvents,t-2,o.startTime,this._defaultValue),o.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(c=>Gr(c)>e),r=this._automationEvents[t],o=(t===-1?this._automationEvents.length:t)-1,l=this._automationEvents[o];if(l!==void 0&&Ml(l)&&(r===void 0||!$r(r)||r.insertTime>e))return Uy(e,ic(this._automationEvents,o-1,l.startTime,this._defaultValue),l);if(l!==void 0&&lf(l)&&(r===void 0||!$r(r)))return l.value;if(l!==void 0&&dr(l)&&(r===void 0||!$r(r)||l.startTime+l.duration>e))return e<l.startTime+l.duration?kC(e,l):l.values[l.values.length-1];if(l!==void 0&&$r(l)&&(r===void 0||!$r(r)))return l.value;if(r!==void 0&&gi(r)){const[c,u]=wv(this._automationEvents,o,l,r,this._defaultValue);return xv(e,c,u,r)}if(r!==void 0&&sc(r)){const[c,u]=wv(this._automationEvents,o,l,r,this._defaultValue);return Sv(e,c,u,r)}return this._defaultValue}}const PC=s=>({cancelTime:s,type:"cancelAndHold"}),AC=s=>({cancelTime:s,type:"cancelScheduledValues"}),NC=(s,e)=>({endTime:e,type:"exponentialRampToValue",value:s}),RC=(s,e)=>({endTime:e,type:"linearRampToValue",value:s}),MC=(s,e,t)=>({startTime:e,target:s,timeConstant:t,type:"setTarget"}),OC=()=>new DOMException("","AbortError"),IC=s=>(e,t,[r,o,l],c)=>{s(e[o],[t,r,l],u=>u[0]===t&&u[1]===r,c)},DC=s=>(e,t,r)=>{const o=[];for(let l=0;l<r.numberOfInputs;l+=1)o.push(new Set);s.set(e,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},LC=s=>(e,t)=>{s.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},Oi=new WeakSet,jy=new WeakMap,cf=new WeakMap,Gy=new WeakMap,uf=new WeakMap,bc=new WeakMap,Wy=new WeakMap,Ih=new WeakMap,Dh=new WeakMap,Lh=new WeakMap,$y={construct(){return $y}},FC=s=>{try{const e=new Proxy(s,$y);new e}catch{return!1}return!0},bv=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Tv=(s,e)=>{const t=[];let r=s.replace(/^[\s]+/,""),o=r.match(bv);for(;o!==null;){const l=o[1].slice(1,-1),c=o[0].replace(/([\s]+)?;?$/,"").replace(l,new URL(l,e).toString());t.push(c),r=r.slice(o[0].length).replace(/^[\s]+/,""),o=r.match(bv)}return[t.join(";"),r]},Cv=s=>{if(s!==void 0&&!Array.isArray(s))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},kv=s=>{if(!FC(s))throw new TypeError("The given value for processorCtor should be a constructor.");if(s.prototype===null||typeof s.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},VC=(s,e,t,r,o,l,c,u,h,f,m,g,y)=>{let x=0;return(w,_,b={credentials:"omit"})=>{const T=m.get(w);if(T!==void 0&&T.has(_))return Promise.resolve();const M=f.get(w);if(M!==void 0){const E=M.get(_);if(E!==void 0)return E}const L=l(w),V=L.audioWorklet===void 0?o(_).then(([E,P])=>{const[R,C]=Tv(E,P),O=`${R};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${C}
})})(window,'_AWGS')`;return t(O)}).then(()=>{const E=y._AWGS.pop();if(E===void 0)throw new SyntaxError;r(L.currentTime,L.sampleRate,()=>E(class{},void 0,(P,R)=>{if(P.trim()==="")throw e();const C=Dh.get(L);if(C!==void 0){if(C.has(P))throw e();kv(R),Cv(R.parameterDescriptors),C.set(P,R)}else kv(R),Cv(R.parameterDescriptors),Dh.set(L,new Map([[P,R]]))},L.sampleRate,void 0,void 0))}):Promise.all([o(_),Promise.resolve(s(g,g))]).then(([[E,P],R])=>{const C=x+1;x=C;const[O,U]=Tv(E,P),ee=`${O};((AudioWorkletProcessor,registerProcessor)=>{${U}
})(${R?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${R?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${R?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${C}',class extends AudioWorkletProcessor{process(){return !1}})`,te=new Blob([ee],{type:"application/javascript; charset=utf-8"}),K=URL.createObjectURL(te);return L.audioWorklet.addModule(K,b).then(()=>{if(u(L))return L;const J=c(L);return J.audioWorklet.addModule(K,b).then(()=>J)}).then(J=>{if(h===null)throw new SyntaxError;try{new h(J,`__sac${C}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(K))});return M===void 0?f.set(w,new Map([[_,V]])):M.set(_,V),V.then(()=>{const E=m.get(w);E===void 0?m.set(w,new Set([_])):E.add(_)}).finally(()=>{const E=f.get(w);E!==void 0&&E.delete(_)}),V}},Rn=(s,e)=>{const t=s.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},Tc=(s,e)=>{const t=Array.from(s).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[r]=t;return s.delete(r),r},qy=(s,e,t,r)=>{const o=Rn(s,e),l=Tc(o,c=>c[0]===t&&c[1]===r);return o.size===0&&s.delete(e),l},na=s=>Rn(Wy,s),Ii=s=>{if(Oi.has(s))throw new Error("The AudioNode is already stored.");Oi.add(s),na(s).forEach(e=>e(!0))},Hy=s=>"port"in s,ra=s=>{if(!Oi.has(s))throw new Error("The AudioNode is not stored.");Oi.delete(s),na(s).forEach(e=>e(!1))},Fh=(s,e)=>{!Hy(s)&&e.every(t=>t.size===0)&&ra(s)},BC=(s,e,t,r,o,l,c,u,h,f,m,g,y)=>{const x=new WeakMap;return(w,_,b,T,M)=>{const{activeInputs:L,passiveInputs:V}=l(_),{outputs:E}=l(w),P=u(w),R=C=>{const O=h(_),U=h(w);if(C){const G=qy(V,w,b,T);s(L,w,G,!1),!M&&!g(w)&&t(U,O,b,T),y(_)&&Ii(_)}else{const G=r(L,w,b,T);e(V,T,G,!1),!M&&!g(w)&&o(U,O,b,T);const B=c(_);if(B===0)m(_)&&Fh(_,L);else{const q=x.get(_);q!==void 0&&clearTimeout(q),x.set(_,setTimeout(()=>{m(_)&&Fh(_,L)},B*1e3))}}};return f(E,[_,b,T],C=>C[0]===_&&C[1]===b&&C[2]===T,!0)?(P.add(R),m(w)?s(L,w,[b,T,R],!0):e(V,T,[w,b,R],!0),!0):!1}},zC=s=>(e,t,[r,o,l],c)=>{const u=e.get(r);u===void 0?e.set(r,new Set([[o,t,l]])):s(u,[o,t,l],h=>h[0]===o&&h[1]===t,c)},UC=s=>(e,t)=>{const r=s(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(r).connect(e.destination);const o=()=>{t.removeEventListener("ended",o),t.disconnect(r),r.disconnect()};t.addEventListener("ended",o)},jC=s=>(e,t)=>{s(e).add(t)},GC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},WC=(s,e,t,r,o,l)=>class extends s{constructor(u,h){const f=o(u),m={...GC,...h},g=r(f,m),y=l(f)?e():null;super(u,!1,g,y),this._nativeAnalyserNode=g}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(u){this._nativeAnalyserNode.fftSize=u}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(u){const h=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=u,!(u>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=h,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(u){const h=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=u,!(this._nativeAnalyserNode.maxDecibels>u))throw this._nativeAnalyserNode.minDecibels=h,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(u){this._nativeAnalyserNode.smoothingTimeConstant=u}getByteFrequencyData(u){this._nativeAnalyserNode.getByteFrequencyData(u)}getByteTimeDomainData(u){this._nativeAnalyserNode.getByteTimeDomainData(u)}getFloatFrequencyData(u){this._nativeAnalyserNode.getFloatFrequencyData(u)}getFloatTimeDomainData(u){this._nativeAnalyserNode.getFloatTimeDomainData(u)}},Ot=(s,e)=>s.context===e,$C=(s,e,t)=>()=>{const r=new WeakMap,o=async(l,c)=>{let u=e(l);if(!Ot(u,c)){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,fftSize:u.fftSize,maxDecibels:u.maxDecibels,minDecibels:u.minDecibels,smoothingTimeConstant:u.smoothingTimeConstant};u=s(c,f)}return r.set(c,u),await t(l,c,u),u};return{render(l,c){const u=r.get(c);return u!==void 0?Promise.resolve(u):o(l,c)}}},oc=s=>{try{s.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Zn=()=>new DOMException("","IndexSizeError"),df=s=>{s.getChannelData=(e=>t=>{try{return e.call(s,t)}catch(r){throw r.code===12?Zn():r}})(s.getChannelData)},qC={numberOfChannels:1},HC=(s,e,t,r,o,l,c,u)=>{let h=null;return class Yy{constructor(m){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:g,numberOfChannels:y,sampleRate:x}={...qC,...m};h===null&&(h=new o(1,1,44100));const w=r!==null&&e(l,l)?new r({length:g,numberOfChannels:y,sampleRate:x}):h.createBuffer(y,g,x);if(w.numberOfChannels===0)throw t();return typeof w.copyFromChannel!="function"?(c(w),df(w)):e(oc,()=>oc(w))||u(w),s.add(w),w}static[Symbol.hasInstance](m){return m!==null&&typeof m=="object"&&Object.getPrototypeOf(m)===Yy.prototype||s.has(m)}}},en=-34028234663852886e22,Ft=34028234663852886e22,mr=s=>Oi.has(s),YC={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},XC=(s,e,t,r,o,l,c,u)=>class extends s{constructor(f,m){const g=l(f),y={...YC,...m},x=o(g,y),w=c(g),_=w?e():null;super(f,!1,x,_),this._audioBufferSourceNodeRenderer=_,this._isBufferNullified=!1,this._isBufferSet=y.buffer!==null,this._nativeAudioBufferSourceNode=x,this._onended=null,this._playbackRate=t(this,w,x.playbackRate,Ft,en)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(f){if(this._nativeAudioBufferSourceNode.buffer=f,f!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(f){this._nativeAudioBufferSourceNode.loop=f}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(f){this._nativeAudioBufferSourceNode.loopEnd=f}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(f){this._nativeAudioBufferSourceNode.loopStart=f}get onended(){return this._onended}set onended(f){const m=typeof f=="function"?u(this,f):null;this._nativeAudioBufferSourceNode.onended=m;const g=this._nativeAudioBufferSourceNode.onended;this._onended=g!==null&&g===m?f:g}get playbackRate(){return this._playbackRate}start(f=0,m=0,g){if(this._nativeAudioBufferSourceNode.start(f,m,g),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=g===void 0?[f,m]:[f,m,g]),this.context.state!=="closed"){Ii(this);const y=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",y),mr(this)&&ra(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",y)}}stop(f=0){this._nativeAudioBufferSourceNode.stop(f),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=f)}},KC=(s,e,t,r,o)=>()=>{const l=new WeakMap;let c=null,u=null;const h=async(f,m)=>{let g=t(f);const y=Ot(g,m);if(!y){const x={buffer:g.buffer,channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,loop:g.loop,loopEnd:g.loopEnd,loopStart:g.loopStart,playbackRate:g.playbackRate.value};g=e(m,x),c!==null&&g.start(...c),u!==null&&g.stop(u)}return l.set(m,g),y?await s(m,f.playbackRate,g.playbackRate):await r(m,f.playbackRate,g.playbackRate),await o(f,m,g),g};return{set start(f){c=f},set stop(f){u=f},render(f,m){const g=l.get(m);return g!==void 0?Promise.resolve(g):h(f,m)}}},ZC=s=>"playbackRate"in s,QC=s=>"frequency"in s&&"gain"in s,JC=s=>"offset"in s,e1=s=>!("frequency"in s)&&"gain"in s,t1=s=>"detune"in s&&"frequency"in s&&!("gain"in s),n1=s=>"pan"in s,Vt=s=>Rn(jy,s),sa=s=>Rn(Gy,s),Vh=(s,e)=>{const{activeInputs:t}=Vt(s);t.forEach(o=>o.forEach(([l])=>{e.includes(s)||Vh(l,[...e,s])}));const r=ZC(s)?[s.playbackRate]:Hy(s)?Array.from(s.parameters.values()):QC(s)?[s.Q,s.detune,s.frequency,s.gain]:JC(s)?[s.offset]:e1(s)?[s.gain]:t1(s)?[s.detune,s.frequency]:n1(s)?[s.pan]:[];for(const o of r){const l=sa(o);l!==void 0&&l.activeInputs.forEach(([c])=>Vh(c,e))}mr(s)&&ra(s)},Xy=s=>{Vh(s.destination,[])},r1=s=>s===void 0||typeof s=="number"||typeof s=="string"&&(s==="balanced"||s==="interactive"||s==="playback"),s1=(s,e,t,r,o,l,c,u,h)=>class extends s{constructor(m={}){if(h===null)throw new Error("Missing the native AudioContext constructor.");let g;try{g=new h(m)}catch(w){throw w.code===12&&w.message==="sampleRate is not in range"?t():w}if(g===null)throw r();if(!r1(m.latencyHint))throw new TypeError(`The provided value '${m.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(m.sampleRate!==void 0&&g.sampleRate!==m.sampleRate)throw t();super(g,2);const{latencyHint:y}=m,{sampleRate:x}=g;if(this._baseLatency=typeof g.baseLatency=="number"?g.baseLatency:y==="balanced"?512/x:y==="interactive"||y===void 0?256/x:y==="playback"?1024/x:Math.max(2,Math.min(128,Math.round(y*x/128)))*128/x,this._nativeAudioContext=g,h.name==="webkitAudioContext"?(this._nativeGainNode=g.createGain(),this._nativeOscillatorNode=g.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(g.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,g.state==="running"){this._state="suspended";const w=()=>{this._state==="suspended"&&(this._state=null),g.removeEventListener("statechange",w)};g.addEventListener("statechange",w)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Xy(this)}))}createMediaElementSource(m){return new o(this,{mediaElement:m})}createMediaStreamDestination(){return new l(this)}createMediaStreamSource(m){return new c(this,{mediaStream:m})}createMediaStreamTrackSource(m){return new u(this,{mediaStreamTrack:m})}resume(){return this._state==="suspended"?new Promise((m,g)=>{const y=()=>{this._nativeAudioContext.removeEventListener("statechange",y),this._nativeAudioContext.state==="running"?m():this.resume().then(m,g)};this._nativeAudioContext.addEventListener("statechange",y)}):this._nativeAudioContext.resume().catch(m=>{throw m===void 0||m.code===15?e():m})}suspend(){return this._nativeAudioContext.suspend().catch(m=>{throw m===void 0?e():m})}},i1=(s,e,t,r,o,l,c,u)=>class extends s{constructor(f,m){const g=l(f),y=c(g),x=o(g,m,y),w=y?e(u):null;super(f,!1,x,w),this._isNodeOfNativeOfflineAudioContext=y,this._nativeAudioDestinationNode=x}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(f){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(f>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=f}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(f){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=f}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},o1=s=>{const e=new WeakMap,t=async(r,o)=>{const l=o.destination;return e.set(o,l),await s(r,o,l),l};return{render(r,o){const l=e.get(o);return l!==void 0?Promise.resolve(l):t(r,o)}}},a1=(s,e,t,r,o,l,c,u)=>(h,f)=>{const m=f.listener,g=()=>{const E=new Float32Array(1),P=e(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),R=c(f);let C=!1,O=[0,0,-1,0,1,0],U=[0,0,0];const G=()=>{if(C)return;C=!0;const te=r(f,256,9,0);te.onaudioprocess=({inputBuffer:K})=>{const J=[l(K,E,0),l(K,E,1),l(K,E,2),l(K,E,3),l(K,E,4),l(K,E,5)];J.some((Z,X)=>Z!==O[X])&&(m.setOrientation(...J),O=J);const z=[l(K,E,6),l(K,E,7),l(K,E,8)];z.some((Z,X)=>Z!==U[X])&&(m.setPosition(...z),U=z)},P.connect(te)},B=te=>K=>{K!==O[te]&&(O[te]=K,m.setOrientation(...O))},q=te=>K=>{K!==U[te]&&(U[te]=K,m.setPosition(...U))},ee=(te,K,J)=>{const z=t(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:K});z.connect(P,0,te),z.start(),Object.defineProperty(z.offset,"defaultValue",{get(){return K}});const Z=s({context:h},R,z.offset,Ft,en);return u(Z,"value",X=>()=>X.call(Z),X=>A=>{try{X.call(Z,A)}catch($){if($.code!==9)throw $}G(),R&&J(A)}),Z.cancelAndHoldAtTime=(X=>R?()=>{throw o()}:(...A)=>{const $=X.apply(Z,A);return G(),$})(Z.cancelAndHoldAtTime),Z.cancelScheduledValues=(X=>R?()=>{throw o()}:(...A)=>{const $=X.apply(Z,A);return G(),$})(Z.cancelScheduledValues),Z.exponentialRampToValueAtTime=(X=>R?()=>{throw o()}:(...A)=>{const $=X.apply(Z,A);return G(),$})(Z.exponentialRampToValueAtTime),Z.linearRampToValueAtTime=(X=>R?()=>{throw o()}:(...A)=>{const $=X.apply(Z,A);return G(),$})(Z.linearRampToValueAtTime),Z.setTargetAtTime=(X=>R?()=>{throw o()}:(...A)=>{const $=X.apply(Z,A);return G(),$})(Z.setTargetAtTime),Z.setValueAtTime=(X=>R?()=>{throw o()}:(...A)=>{const $=X.apply(Z,A);return G(),$})(Z.setValueAtTime),Z.setValueCurveAtTime=(X=>R?()=>{throw o()}:(...A)=>{const $=X.apply(Z,A);return G(),$})(Z.setValueCurveAtTime),Z};return{forwardX:ee(0,0,B(0)),forwardY:ee(1,0,B(1)),forwardZ:ee(2,-1,B(2)),positionX:ee(6,0,q(0)),positionY:ee(7,0,q(1)),positionZ:ee(8,0,q(2)),upX:ee(3,0,B(3)),upY:ee(4,1,B(4)),upZ:ee(5,0,B(5))}},{forwardX:y,forwardY:x,forwardZ:w,positionX:_,positionY:b,positionZ:T,upX:M,upY:L,upZ:V}=m.forwardX===void 0?g():m;return{get forwardX(){return y},get forwardY(){return x},get forwardZ(){return w},get positionX(){return _},get positionY(){return b},get positionZ(){return T},get upX(){return M},get upY(){return L},get upZ(){return V}}},ac=s=>"context"in s,ia=s=>ac(s[0]),Os=(s,e,t,r)=>{for(const o of s)if(t(o)){if(r)return!1;throw Error("The set contains at least one similar element.")}return s.add(e),!0},Ev=(s,e,[t,r],o)=>{Os(s,[e,t,r],l=>l[0]===e&&l[1]===t,o)},Pv=(s,[e,t,r],o)=>{const l=s.get(e);l===void 0?s.set(e,new Set([[t,r]])):Os(l,[t,r],c=>c[0]===t,o)},Gi=s=>"inputs"in s,lc=(s,e,t,r)=>{if(Gi(e)){const o=e.inputs[r];return s.connect(o,t,0),[o,t,0]}return s.connect(e,t,r),[e,t,r]},Ky=(s,e,t)=>{for(const r of s)if(r[0]===e&&r[1]===t)return s.delete(r),r;return null},l1=(s,e,t)=>Tc(s,r=>r[0]===e&&r[1]===t),Zy=(s,e)=>{if(!na(s).delete(e))throw new Error("Missing the expected event listener.")},Qy=(s,e,t)=>{const r=Rn(s,e),o=Tc(r,l=>l[0]===t);return r.size===0&&s.delete(e),o},cc=(s,e,t,r)=>{Gi(e)?s.disconnect(e.inputs[r],t,0):s.disconnect(e,t,r)},et=s=>Rn(cf,s),Xo=s=>Rn(uf,s),Ps=s=>Ih.has(s),$l=s=>!Oi.has(s),Av=(s,e)=>new Promise(t=>{if(e!==null)t(!0);else{const r=s.createScriptProcessor(256,1,1),o=s.createGain(),l=s.createBuffer(1,2,44100),c=l.getChannelData(0);c[0]=1,c[1]=1;const u=s.createBufferSource();u.buffer=l,u.loop=!0,u.connect(r).connect(s.destination),u.connect(o),u.disconnect(o),r.onaudioprocess=h=>{const f=h.inputBuffer.getChannelData(0);Array.prototype.some.call(f,m=>m===1)?t(!0):t(!1),u.stop(),r.onaudioprocess=null,u.disconnect(r),r.disconnect(s.destination)},u.start()}}),ih=(s,e)=>{const t=new Map;for(const r of s)for(const o of r){const l=t.get(o);t.set(o,l===void 0?1:l+1)}t.forEach((r,o)=>e(o,r))},uc=s=>"context"in s,c1=s=>{const e=new Map;s.connect=(t=>(r,o=0,l=0)=>{const c=uc(r)?t(r,o,l):t(r,o),u=e.get(r);return u===void 0?e.set(r,[{input:l,output:o}]):u.every(h=>h.input!==l||h.output!==o)&&u.push({input:l,output:o}),c})(s.connect.bind(s)),s.disconnect=(t=>(r,o,l)=>{if(t.apply(s),r===void 0)e.clear();else if(typeof r=="number")for(const[c,u]of e){const h=u.filter(f=>f.output!==r);h.length===0?e.delete(c):e.set(c,h)}else if(e.has(r))if(o===void 0)e.delete(r);else{const c=e.get(r);if(c!==void 0){const u=c.filter(h=>h.output!==o&&(h.input!==l||l===void 0));u.length===0?e.delete(r):e.set(r,u)}}for(const[c,u]of e)u.forEach(h=>{uc(c)?s.connect(c,h.output,h.input):s.connect(c,h.output)})})(s.disconnect)},u1=(s,e,t,r)=>{const{activeInputs:o,passiveInputs:l}=sa(e),{outputs:c}=Vt(s),u=na(s),h=f=>{const m=et(s),g=Xo(e);if(f){const y=Qy(l,s,t);Ev(o,s,y,!1),!r&&!Ps(s)&&m.connect(g,t)}else{const y=l1(o,s,t);Pv(l,y,!1),!r&&!Ps(s)&&m.disconnect(g,t)}};return Os(c,[e,t],f=>f[0]===e&&f[1]===t,!0)?(u.add(h),mr(s)?Ev(o,s,[t,h],!0):Pv(l,[s,t,h],!0),!0):!1},d1=(s,e,t,r)=>{const{activeInputs:o,passiveInputs:l}=Vt(e),c=Ky(o[r],s,t);return c===null?[qy(l,s,t,r)[2],!1]:[c[2],!0]},h1=(s,e,t)=>{const{activeInputs:r,passiveInputs:o}=sa(e),l=Ky(r,s,t);return l===null?[Qy(o,s,t)[1],!1]:[l[2],!0]},hf=(s,e,t,r,o)=>{const[l,c]=d1(s,t,r,o);if(l!==null&&(Zy(s,l),c&&!e&&!Ps(s)&&cc(et(s),et(t),r,o)),mr(t)){const{activeInputs:u}=Vt(t);Fh(t,u)}},ff=(s,e,t,r)=>{const[o,l]=h1(s,t,r);o!==null&&(Zy(s,o),l&&!e&&!Ps(s)&&et(s).disconnect(Xo(t),r))},f1=(s,e)=>{const t=Vt(s),r=[];for(const o of t.outputs)ia(o)?hf(s,e,...o):ff(s,e,...o),r.push(o[0]);return t.outputs.clear(),r},p1=(s,e,t)=>{const r=Vt(s),o=[];for(const l of r.outputs)l[1]===t&&(ia(l)?hf(s,e,...l):ff(s,e,...l),o.push(l[0]),r.outputs.delete(l));return o},m1=(s,e,t,r,o)=>{const l=Vt(s);return Array.from(l.outputs).filter(c=>c[0]===t&&(r===void 0||c[1]===r)&&(o===void 0||c[2]===o)).map(c=>(ia(c)?hf(s,e,...c):ff(s,e,...c),l.outputs.delete(c),c[0]))},g1=(s,e,t,r,o,l,c,u,h,f,m,g,y,x,w,_)=>class extends f{constructor(T,M,L,V){super(L),this._context=T,this._nativeAudioNode=L;const E=m(T);g(E)&&t(Av,()=>Av(E,_))!==!0&&c1(L),cf.set(this,L),Wy.set(this,new Set),T.state!=="closed"&&M&&Ii(this),s(this,V,L)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(T){this._nativeAudioNode.channelCount=T}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(T){this._nativeAudioNode.channelCountMode=T}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(T){this._nativeAudioNode.channelInterpretation=T}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(T,M=0,L=0){if(M<0||M>=this._nativeAudioNode.numberOfOutputs)throw o();const V=m(this._context),E=w(V);if(y(T)||x(T))throw l();if(ac(T)){const C=et(T);try{const U=lc(this._nativeAudioNode,C,M,L),G=$l(this);(E||G)&&this._nativeAudioNode.disconnect(...U),this.context.state!=="closed"&&!G&&$l(T)&&Ii(T)}catch(U){throw U.code===12?l():U}if(e(this,T,M,L,E)){const U=h([this],T);ih(U,r(E))}return T}const P=Xo(T);if(P.name==="playbackRate"&&P.maxValue===1024)throw c();try{this._nativeAudioNode.connect(P,M),(E||$l(this))&&this._nativeAudioNode.disconnect(P,M)}catch(C){throw C.code===12?l():C}if(u1(this,T,M,E)){const C=h([this],T);ih(C,r(E))}}disconnect(T,M,L){let V;const E=m(this._context),P=w(E);if(T===void 0)V=f1(this,P);else if(typeof T=="number"){if(T<0||T>=this.numberOfOutputs)throw o();V=p1(this,P,T)}else{if(M!==void 0&&(M<0||M>=this.numberOfOutputs)||ac(T)&&L!==void 0&&(L<0||L>=T.numberOfInputs))throw o();if(V=m1(this,P,T,M,L),V.length===0)throw l()}for(const R of V){const C=h([this],R);ih(C,u)}}},v1=(s,e,t,r,o,l,c,u,h,f,m,g,y)=>(x,w,_,b=null,T=null)=>{const M=_.value,L=new EC(M),V=w?r(L):null,E={get defaultValue(){return M},get maxValue(){return b===null?_.maxValue:b},get minValue(){return T===null?_.minValue:T},get value(){return _.value},set value(P){_.value=P,E.setValueAtTime(P,x.context.currentTime)},cancelAndHoldAtTime(P){if(typeof _.cancelAndHoldAtTime=="function")V===null&&L.flush(x.context.currentTime),L.add(o(P)),_.cancelAndHoldAtTime(P);else{const R=Array.from(L).pop();V===null&&L.flush(x.context.currentTime),L.add(o(P));const C=Array.from(L).pop();_.cancelScheduledValues(P),R!==C&&C!==void 0&&(C.type==="exponentialRampToValue"?_.exponentialRampToValueAtTime(C.value,C.endTime):C.type==="linearRampToValue"?_.linearRampToValueAtTime(C.value,C.endTime):C.type==="setValue"?_.setValueAtTime(C.value,C.startTime):C.type==="setValueCurve"&&_.setValueCurveAtTime(C.values,C.startTime,C.duration))}return E},cancelScheduledValues(P){return V===null&&L.flush(x.context.currentTime),L.add(l(P)),_.cancelScheduledValues(P),E},exponentialRampToValueAtTime(P,R){if(P===0)throw new RangeError;if(!Number.isFinite(R)||R<0)throw new RangeError;const C=x.context.currentTime;return V===null&&L.flush(C),Array.from(L).length===0&&(L.add(f(M,C)),_.setValueAtTime(M,C)),L.add(c(P,R)),_.exponentialRampToValueAtTime(P,R),E},linearRampToValueAtTime(P,R){const C=x.context.currentTime;return V===null&&L.flush(C),Array.from(L).length===0&&(L.add(f(M,C)),_.setValueAtTime(M,C)),L.add(u(P,R)),_.linearRampToValueAtTime(P,R),E},setTargetAtTime(P,R,C){return V===null&&L.flush(x.context.currentTime),L.add(h(P,R,C)),_.setTargetAtTime(P,R,C),E},setValueAtTime(P,R){return V===null&&L.flush(x.context.currentTime),L.add(f(P,R)),_.setValueAtTime(P,R),E},setValueCurveAtTime(P,R,C){const O=P instanceof Float32Array?P:new Float32Array(P);if(g!==null&&g.name==="webkitAudioContext"){const U=R+C,G=x.context.sampleRate,B=Math.ceil(R*G),q=Math.floor(U*G),ee=q-B,te=new Float32Array(ee);for(let J=0;J<ee;J+=1){const z=(O.length-1)/C*((B+J)/G-R),Z=Math.floor(z),X=Math.ceil(z);te[J]=Z===X?O[Z]:(1-(z-Z))*O[Z]+(1-(X-z))*O[X]}V===null&&L.flush(x.context.currentTime),L.add(m(te,R,C)),_.setValueCurveAtTime(te,R,C);const K=q/G;K<U&&y(E,te[te.length-1],K),y(E,O[O.length-1],U)}else V===null&&L.flush(x.context.currentTime),L.add(m(O,R,C)),_.setValueCurveAtTime(O,R,C);return E}};return t.set(E,_),e.set(E,x),s(E,V),E},y1=s=>({replay(e){for(const t of s)if(t.type==="exponentialRampToValue"){const{endTime:r,value:o}=t;e.exponentialRampToValueAtTime(o,r)}else if(t.type==="linearRampToValue"){const{endTime:r,value:o}=t;e.linearRampToValueAtTime(o,r)}else if(t.type==="setTarget"){const{startTime:r,target:o,timeConstant:l}=t;e.setTargetAtTime(o,r,l)}else if(t.type==="setValue"){const{startTime:r,value:o}=t;e.setValueAtTime(o,r)}else if(t.type==="setValueCurve"){const{duration:r,startTime:o,values:l}=t;e.setValueCurveAtTime(l,o,r)}else throw new Error("Can't apply an unknown automation.")}});class Jy{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((r,o)=>e.call(t,r,o,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const _1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},w1=(s,e,t,r,o,l,c,u,h,f,m,g,y,x)=>class extends e{constructor(_,b,T){var M;const L=u(_),V=h(L),E=m({..._1,...T});y(E);const P=Dh.get(L),R=P==null?void 0:P.get(b),C=V||L.state!=="closed"?L:(M=c(L))!==null&&M!==void 0?M:L,O=o(C,V?null:_.baseLatency,f,b,R,E),U=V?r(b,E,R):null;super(_,!0,O,U);const G=[];O.parameters.forEach((q,ee)=>{const te=t(this,V,q);G.push([ee,te])}),this._nativeAudioWorkletNode=O,this._onprocessorerror=null,this._parameters=new Jy(G),V&&s(L,this);const{activeInputs:B}=l(this);g(O,B)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(_){const b=typeof _=="function"?x(this,_):null;this._nativeAudioWorkletNode.onprocessorerror=b;const T=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=T!==null&&T===b?_:T}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function dc(s,e,t,r,o){if(typeof s.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),s.copyFromChannel(e[t],r,o);else{const l=s.getChannelData(r);if(e[t].byteLength===0)e[t]=l.slice(o,o+128);else{const c=new Float32Array(l.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(c)}}}const e_=(s,e,t,r,o)=>{typeof s.copyToChannel=="function"?e[t].byteLength!==0&&s.copyToChannel(e[t],r,o):e[t].byteLength!==0&&s.getChannelData(r).set(e[t],o)},hc=(s,e)=>{const t=[];for(let r=0;r<s;r+=1){const o=[],l=typeof e=="number"?e:e[r];for(let c=0;c<l;c+=1)o.push(new Float32Array(128));t.push(o)}return t},x1=(s,e)=>{const t=Rn(Lh,s),r=et(e);return Rn(t,r)},S1=async(s,e,t,r,o,l,c)=>{const u=e===null?Math.ceil(s.context.length/128)*128:e.length,h=r.channelCount*r.numberOfInputs,f=o.reduce((b,T)=>b+T,0),m=f===0?null:t.createBuffer(f,u,t.sampleRate);if(l===void 0)throw new Error("Missing the processor constructor.");const g=Vt(s),y=await x1(t,s),x=hc(r.numberOfInputs,r.channelCount),w=hc(r.numberOfOutputs,o),_=Array.from(s.parameters.keys()).reduce((b,T)=>({...b,[T]:new Float32Array(128)}),{});for(let b=0;b<u;b+=128){if(r.numberOfInputs>0&&e!==null)for(let T=0;T<r.numberOfInputs;T+=1)for(let M=0;M<r.channelCount;M+=1)dc(e,x[T],M,M,b);l.parameterDescriptors!==void 0&&e!==null&&l.parameterDescriptors.forEach(({name:T},M)=>{dc(e,_,T,h+M,b)});for(let T=0;T<r.numberOfInputs;T+=1)for(let M=0;M<o[T];M+=1)w[T][M].byteLength===0&&(w[T][M]=new Float32Array(128));try{const T=x.map((L,V)=>g.activeInputs[V].size===0?[]:L),M=c(b/t.sampleRate,t.sampleRate,()=>y.process(T,w,_));if(m!==null)for(let L=0,V=0;L<r.numberOfOutputs;L+=1){for(let E=0;E<o[L];E+=1)e_(m,w[L],E,V+E,b);V+=o[L]}if(!M)break}catch(T){s.dispatchEvent(new ErrorEvent("processorerror",{colno:T.colno,filename:T.filename,lineno:T.lineno,message:T.message}));break}}return m},b1=(s,e,t,r,o,l,c,u,h,f,m,g,y,x,w,_)=>(b,T,M)=>{const L=new WeakMap;let V=null;const E=async(P,R)=>{let C=m(P),O=null;const U=Ot(C,R),G=Array.isArray(T.outputChannelCount)?T.outputChannelCount:Array.from(T.outputChannelCount);if(g===null){const B=G.reduce((K,J)=>K+J,0),q=o(R,{channelCount:Math.max(1,B),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,B)}),ee=[];for(let K=0;K<P.numberOfOutputs;K+=1)ee.push(r(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:G[K]}));const te=c(R,{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1});te.connect=e.bind(null,ee),te.disconnect=h.bind(null,ee),O=[q,ee,te]}else U||(C=new g(R,b));if(L.set(R,O===null?C:O[2]),O!==null){if(V===null){if(M===void 0)throw new Error("Missing the processor constructor.");if(y===null)throw new Error("Missing the native OfflineAudioContext constructor.");const J=P.channelCount*P.numberOfInputs,z=M.parameterDescriptors===void 0?0:M.parameterDescriptors.length,Z=J+z;V=S1(P,Z===0?null:await(async()=>{const A=new y(Z,Math.ceil(P.context.length/128)*128,R.sampleRate),$=[],le=[];for(let ce=0;ce<T.numberOfInputs;ce+=1)$.push(c(A,{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1})),le.push(o(A,{channelCount:T.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:T.channelCount}));const ne=await Promise.all(Array.from(P.parameters.values()).map(async ce=>{const de=l(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ce.value});return await x(A,ce,de.offset),de})),re=r(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,J+z)});for(let ce=0;ce<T.numberOfInputs;ce+=1){$[ce].connect(le[ce]);for(let de=0;de<T.channelCount;de+=1)le[ce].connect(re,de,ce*T.channelCount+de)}for(const[ce,de]of ne.entries())de.connect(re,0,J+ce),de.start(0);return re.connect(A.destination),await Promise.all($.map(ce=>w(P,A,ce))),_(A)})(),R,T,G,M,f)}const B=await V,q=t(R,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[ee,te,K]=O;B!==null&&(q.buffer=B,q.start(0)),q.connect(ee);for(let J=0,z=0;J<P.numberOfOutputs;J+=1){const Z=te[J];for(let X=0;X<G[J];X+=1)ee.connect(Z,z+X,X);z+=G[J]}return K}if(U)for(const[B,q]of P.parameters.entries())await s(R,q,C.parameters.get(B));else for(const[B,q]of P.parameters.entries())await x(R,q,C.parameters.get(B));return await w(P,R,C),C};return{render(P,R){u(R,P);const C=L.get(R);return C!==void 0?Promise.resolve(C):E(P,R)}}},T1=(s,e,t,r,o,l,c,u,h,f,m,g,y,x,w,_,b,T,M,L)=>class extends w{constructor(E,P){super(E,P),this._nativeContext=E,this._audioWorklet=s===void 0?void 0:{addModule:(R,C)=>s(this,R,C)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new o(this)}createBuffer(E,P,R){return new t({length:P,numberOfChannels:E,sampleRate:R})}createBufferSource(){return new r(this)}createChannelMerger(E=6){return new l(this,{numberOfInputs:E})}createChannelSplitter(E=6){return new c(this,{numberOfOutputs:E})}createConstantSource(){return new u(this)}createConvolver(){return new h(this)}createDelay(E=1){return new m(this,{maxDelayTime:E})}createDynamicsCompressor(){return new g(this)}createGain(){return new y(this)}createIIRFilter(E,P){return new x(this,{feedback:P,feedforward:E})}createOscillator(){return new _(this)}createPanner(){return new b(this)}createPeriodicWave(E,P,R={disableNormalization:!1}){return new T(this,{...R,imag:P,real:E})}createStereoPanner(){return new M(this)}createWaveShaper(){return new L(this)}decodeAudioData(E,P,R){return f(this._nativeContext,E).then(C=>(typeof P=="function"&&P(C),C),C=>{throw typeof R=="function"&&R(C),C})}},C1={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},k1=(s,e,t,r,o,l,c,u)=>class extends s{constructor(f,m){const g=l(f),y={...C1,...m},x=o(g,y),w=c(g),_=w?t():null;super(f,!1,x,_),this._Q=e(this,w,x.Q,Ft,en),this._detune=e(this,w,x.detune,1200*Math.log2(Ft),-1200*Math.log2(Ft)),this._frequency=e(this,w,x.frequency,f.sampleRate/2,0),this._gain=e(this,w,x.gain,40*Math.log10(Ft),en),this._nativeBiquadFilterNode=x,u(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(f){this._nativeBiquadFilterNode.type=f}getFrequencyResponse(f,m,g){try{this._nativeBiquadFilterNode.getFrequencyResponse(f,m,g)}catch(y){throw y.code===11?r():y}if(f.length!==m.length||m.length!==g.length)throw r()}},E1=(s,e,t,r,o)=>()=>{const l=new WeakMap,c=async(u,h)=>{let f=t(u);const m=Ot(f,h);if(!m){const g={Q:f.Q.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,gain:f.gain.value,type:f.type};f=e(h,g)}return l.set(h,f),m?(await s(h,u.Q,f.Q),await s(h,u.detune,f.detune),await s(h,u.frequency,f.frequency),await s(h,u.gain,f.gain)):(await r(h,u.Q,f.Q),await r(h,u.detune,f.detune),await r(h,u.frequency,f.frequency),await r(h,u.gain,f.gain)),await o(u,h,f),f};return{render(u,h){const f=l.get(h);return f!==void 0?Promise.resolve(f):c(u,h)}}},P1=(s,e)=>(t,r)=>{const o=e.get(t);if(o!==void 0)return o;const l=s.get(t);if(l!==void 0)return l;try{const c=r();return c instanceof Promise?(s.set(t,c),c.catch(()=>!1).then(u=>(s.delete(t),e.set(t,u),u))):(e.set(t,c),c)}catch{return e.set(t,!1),!1}},A1={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},N1=(s,e,t,r,o)=>class extends s{constructor(c,u){const h=r(c),f={...A1,...u},m=t(h,f),g=o(h)?e():null;super(c,!1,m,g)}},R1=(s,e,t)=>()=>{const r=new WeakMap,o=async(l,c)=>{let u=e(l);if(!Ot(u,c)){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfInputs:u.numberOfInputs};u=s(c,f)}return r.set(c,u),await t(l,c,u),u};return{render(l,c){const u=r.get(c);return u!==void 0?Promise.resolve(u):o(l,c)}}},M1={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},O1=(s,e,t,r,o,l)=>class extends s{constructor(u,h){const f=r(u),m=l({...M1,...h}),g=t(f,m),y=o(f)?e():null;super(u,!1,g,y)}},I1=(s,e,t)=>()=>{const r=new WeakMap,o=async(l,c)=>{let u=e(l);if(!Ot(u,c)){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfOutputs:u.numberOfOutputs};u=s(c,f)}return r.set(c,u),await t(l,c,u),u};return{render(l,c){const u=r.get(c);return u!==void 0?Promise.resolve(u):o(l,c)}}},D1=s=>(e,t,r)=>s(t,e,r),L1=s=>(e,t,r=0,o=0)=>{const l=e[r];if(l===void 0)throw s();return uc(t)?l.connect(t,0,o):l.connect(t,0)},F1=s=>(e,t)=>{const r=s(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=e.createBuffer(1,2,44100);return r.buffer=o,r.loop=!0,r.connect(t),r.start(),()=>{r.stop(),r.disconnect(t)}},V1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},B1=(s,e,t,r,o,l,c)=>class extends s{constructor(h,f){const m=o(h),g={...V1,...f},y=r(m,g),x=l(m),w=x?t():null;super(h,!1,y,w),this._constantSourceNodeRenderer=w,this._nativeConstantSourceNode=y,this._offset=e(this,x,y.offset,Ft,en),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(h){const f=typeof h=="function"?c(this,h):null;this._nativeConstantSourceNode.onended=f;const m=this._nativeConstantSourceNode.onended;this._onended=m!==null&&m===f?h:m}start(h=0){if(this._nativeConstantSourceNode.start(h),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=h),this.context.state!=="closed"){Ii(this);const f=()=>{this._nativeConstantSourceNode.removeEventListener("ended",f),mr(this)&&ra(this)};this._nativeConstantSourceNode.addEventListener("ended",f)}}stop(h=0){this._nativeConstantSourceNode.stop(h),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=h)}},z1=(s,e,t,r,o)=>()=>{const l=new WeakMap;let c=null,u=null;const h=async(f,m)=>{let g=t(f);const y=Ot(g,m);if(!y){const x={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,offset:g.offset.value};g=e(m,x),c!==null&&g.start(c),u!==null&&g.stop(u)}return l.set(m,g),y?await s(m,f.offset,g.offset):await r(m,f.offset,g.offset),await o(f,m,g),g};return{set start(f){c=f},set stop(f){u=f},render(f,m){const g=l.get(m);return g!==void 0?Promise.resolve(g):h(f,m)}}},U1=s=>e=>(s[0]=e,s[0]),j1={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},G1=(s,e,t,r,o,l)=>class extends s{constructor(u,h){const f=r(u),m={...j1,...h},g=t(f,m),x=o(f)?e():null;super(u,!1,g,x),this._isBufferNullified=!1,this._nativeConvolverNode=g,m.buffer!==null&&l(this,m.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(u){if(this._nativeConvolverNode.buffer=u,u===null&&this._nativeConvolverNode.buffer!==null){const h=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=h.createBuffer(1,1,h.sampleRate),this._isBufferNullified=!0,l(this,0)}else this._isBufferNullified=!1,l(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(u){this._nativeConvolverNode.normalize=u}},W1=(s,e,t)=>()=>{const r=new WeakMap,o=async(l,c)=>{let u=e(l);if(!Ot(u,c)){const f={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,disableNormalization:!u.normalize};u=s(c,f)}return r.set(c,u),Gi(u)?await t(l,c,u.inputs[0]):await t(l,c,u),u};return{render(l,c){const u=r.get(c);return u!==void 0?Promise.resolve(u):o(l,c)}}},$1=(s,e)=>(t,r,o)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,r,o)}catch(l){throw l.name==="SyntaxError"?s():l}},q1=()=>new DOMException("","DataCloneError"),Nv=s=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(r=>{const o=()=>{t.onmessage=null,e.close(),t.close(),r()};t.onmessage=()=>o();try{e.postMessage(s,[s])}catch{}finally{o()}})},H1=(s,e,t,r,o,l,c,u,h,f,m)=>(g,y)=>{const x=c(g)?g:l(g);if(o.has(y)){const w=t();return Promise.reject(w)}try{o.add(y)}catch{}return e(h,()=>h(x))?x.decodeAudioData(y).then(w=>(Nv(y).catch(()=>{}),e(u,()=>u(w))||m(w),s.add(w),w)):new Promise((w,_)=>{const b=async()=>{try{await Nv(y)}catch{}},T=M=>{_(M),b()};try{x.decodeAudioData(y,M=>{typeof M.copyFromChannel!="function"&&(f(M),df(M)),s.add(M),b().then(()=>w(M))},M=>{T(M===null?r():M)})}catch(M){T(M)}})},Y1=(s,e,t,r,o,l,c,u)=>(h,f)=>{const m=e.get(h);if(m===void 0)throw new Error("Missing the expected cycle count.");const g=l(h.context),y=u(g);if(m===f){if(e.delete(h),!y&&c(h)){const x=r(h),{outputs:w}=t(h);for(const _ of w)if(ia(_)){const b=r(_[0]);s(x,b,_[1],_[2])}else{const b=o(_[0]);x.connect(b,_[1])}}}else e.set(h,m-f)},X1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},K1=(s,e,t,r,o,l,c)=>class extends s{constructor(h,f){const m=o(h),g={...X1,...f},y=r(m,g),x=l(m),w=x?t(g.maxDelayTime):null;super(h,!1,y,w),this._delayTime=e(this,x,y.delayTime),c(this,g.maxDelayTime)}get delayTime(){return this._delayTime}},Z1=(s,e,t,r,o)=>l=>{const c=new WeakMap,u=async(h,f)=>{let m=t(h);const g=Ot(m,f);if(!g){const y={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,delayTime:m.delayTime.value,maxDelayTime:l};m=e(f,y)}return c.set(f,m),g?await s(f,h.delayTime,m.delayTime):await r(f,h.delayTime,m.delayTime),await o(h,f,m),m};return{render(h,f){const m=c.get(f);return m!==void 0?Promise.resolve(m):u(h,f)}}},Q1=s=>(e,t,r,o)=>s(e[o],l=>l[0]===t&&l[1]===r),J1=s=>(e,t)=>{s(e).delete(t)},ek=s=>"delayTime"in s,tk=(s,e,t)=>function r(o,l){const c=ac(l)?l:t(s,l);if(ek(c))return[];if(o[0]===c)return[o];if(o.includes(c))return[];const{outputs:u}=e(c);return Array.from(u).map(h=>r([...o,c],h[0])).reduce((h,f)=>h.concat(f),[])},Ol=(s,e,t)=>{const r=e[t];if(r===void 0)throw s();return r},nk=s=>(e,t=void 0,r=void 0,o=0)=>t===void 0?e.forEach(l=>l.disconnect()):typeof t=="number"?Ol(s,e,t).disconnect():uc(t)?r===void 0?e.forEach(l=>l.disconnect(t)):o===void 0?Ol(s,e,r).disconnect(t,0):Ol(s,e,r).disconnect(t,0,o):r===void 0?e.forEach(l=>l.disconnect(t)):Ol(s,e,r).disconnect(t,0),rk={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},sk=(s,e,t,r,o,l,c,u)=>class extends s{constructor(f,m){const g=l(f),y={...rk,...m},x=r(g,y),w=c(g),_=w?t():null;super(f,!1,x,_),this._attack=e(this,w,x.attack),this._knee=e(this,w,x.knee),this._nativeDynamicsCompressorNode=x,this._ratio=e(this,w,x.ratio),this._release=e(this,w,x.release),this._threshold=e(this,w,x.threshold),u(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(f){const m=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=f,f>2)throw this._nativeDynamicsCompressorNode.channelCount=m,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(f){const m=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=f,f==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=m,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},ik=(s,e,t,r,o)=>()=>{const l=new WeakMap,c=async(u,h)=>{let f=t(u);const m=Ot(f,h);if(!m){const g={attack:f.attack.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,knee:f.knee.value,ratio:f.ratio.value,release:f.release.value,threshold:f.threshold.value};f=e(h,g)}return l.set(h,f),m?(await s(h,u.attack,f.attack),await s(h,u.knee,f.knee),await s(h,u.ratio,f.ratio),await s(h,u.release,f.release),await s(h,u.threshold,f.threshold)):(await r(h,u.attack,f.attack),await r(h,u.knee,f.knee),await r(h,u.ratio,f.ratio),await r(h,u.release,f.release),await r(h,u.threshold,f.threshold)),await o(u,h,f),f};return{render(u,h){const f=l.get(h);return f!==void 0?Promise.resolve(f):c(u,h)}}},ok=()=>new DOMException("","EncodingError"),ak=s=>e=>new Promise((t,r)=>{if(s===null){r(new SyntaxError);return}const o=s.document.head;if(o===null)r(new SyntaxError);else{const l=s.document.createElement("script"),c=new Blob([e],{type:"application/javascript"}),u=URL.createObjectURL(c),h=s.onerror,f=()=>{s.onerror=h,URL.revokeObjectURL(u)};s.onerror=(m,g,y,x,w)=>{if(g===u||g===s.location.href&&y===1&&x===1)return f(),r(w),!1;if(h!==null)return h(m,g,y,x,w)},l.onerror=()=>{f(),r(new SyntaxError)},l.onload=()=>{f(),t()},l.src=u,l.type="module",o.appendChild(l)}}),lk=s=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,r,o){if(r!==null){let l=this._listeners.get(r);l===void 0&&(l=s(this,r),typeof r=="function"&&this._listeners.set(r,l)),this._nativeEventTarget.addEventListener(t,l,o)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,r,o){const l=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(t,l===void 0?null:l,o)}},ck=s=>(e,t,r)=>{Object.defineProperties(s,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{s!==null&&(delete s.currentFrame,delete s.currentTime)}},uk=s=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw s()},dk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},hk=(s,e,t,r,o,l)=>class extends s{constructor(u,h){const f=o(u),m={...dk,...h},g=r(f,m),y=l(f),x=y?t():null;super(u,!1,g,x),this._gain=e(this,y,g.gain,Ft,en)}get gain(){return this._gain}},fk=(s,e,t,r,o)=>()=>{const l=new WeakMap,c=async(u,h)=>{let f=t(u);const m=Ot(f,h);if(!m){const g={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:f.gain.value};f=e(h,g)}return l.set(h,f),m?await s(h,u.gain,f.gain):await r(h,u.gain,f.gain),await o(u,h,f),f};return{render(u,h){const f=l.get(h);return f!==void 0?Promise.resolve(f):c(u,h)}}},pk=(s,e)=>t=>e(s,t),mk=s=>e=>{const t=s(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},gk=s=>e=>{var t;return(t=s.get(e))!==null&&t!==void 0?t:0},vk=s=>e=>{const t=s(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},yk=s=>e=>s.get(e),St=()=>new DOMException("","InvalidStateError"),_k=s=>e=>{const t=s.get(e);if(t===void 0)throw St();return t},wk=(s,e)=>t=>{let r=s.get(t);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),s.set(t,r),r},xk=s=>e=>{const t=s.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},Cc=()=>new DOMException("","InvalidAccessError"),Sk=s=>{s.getFrequencyResponse=(e=>(t,r,o)=>{if(t.length!==r.length||r.length!==o.length)throw Cc();return e.call(s,t,r,o)})(s.getFrequencyResponse)},bk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Tk=(s,e,t,r,o,l)=>class extends s{constructor(u,h){const f=r(u),m=o(f),g={...bk,...h},y=e(f,m?null:u.baseLatency,g),x=m?t(g.feedback,g.feedforward):null;super(u,!1,y,x),Sk(y),this._nativeIIRFilterNode=y,l(this,1)}getFrequencyResponse(u,h,f){return this._nativeIIRFilterNode.getFrequencyResponse(u,h,f)}},t_=(s,e,t,r,o,l,c,u,h,f,m)=>{const g=f.length;let y=u;for(let x=0;x<g;x+=1){let w=t[0]*f[x];for(let _=1;_<o;_+=1){const b=y-_&h-1;w+=t[_]*l[b],w-=s[_]*c[b]}for(let _=o;_<r;_+=1)w+=t[_]*l[y-_&h-1];for(let _=o;_<e;_+=1)w-=s[_]*c[y-_&h-1];l[y]=f[x],c[y]=w,y=y+1&h-1,m[x]=w}return y},Ck=(s,e,t,r)=>{const o=t instanceof Float64Array?t:new Float64Array(t),l=r instanceof Float64Array?r:new Float64Array(r),c=o.length,u=l.length,h=Math.min(c,u);if(o[0]!==1){for(let w=0;w<c;w+=1)l[w]/=o[0];for(let w=1;w<u;w+=1)o[w]/=o[0]}const f=32,m=new Float32Array(f),g=new Float32Array(f),y=e.createBuffer(s.numberOfChannels,s.length,s.sampleRate),x=s.numberOfChannels;for(let w=0;w<x;w+=1){const _=s.getChannelData(w),b=y.getChannelData(w);m.fill(0),g.fill(0),t_(o,c,l,u,h,m,g,0,f,_,b)}return y},kk=(s,e,t,r,o)=>(l,c)=>{const u=new WeakMap;let h=null;const f=async(m,g)=>{let y=null,x=e(m);const w=Ot(x,g);if(g.createIIRFilter===void 0?y=s(g,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):w||(x=g.createIIRFilter(c,l)),u.set(g,y===null?x:y),y!==null){if(h===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const b=new t(m.context.destination.channelCount,m.context.length,g.sampleRate);h=(async()=>{await r(m,b,b.destination);const T=await o(b);return Ck(T,g,l,c)})()}const _=await h;return y.buffer=_,y.start(0),y}return await r(m,g,x),x};return{render(m,g){const y=u.get(g);return y!==void 0?Promise.resolve(y):f(m,g)}}},Ek=(s,e,t,r,o,l)=>c=>(u,h)=>{const f=s.get(u);if(f===void 0){if(!c&&l(u)){const m=r(u),{outputs:g}=t(u);for(const y of g)if(ia(y)){const x=r(y[0]);e(m,x,y[1],y[2])}else{const x=o(y[0]);m.disconnect(x,y[1])}}s.set(u,h)}else s.set(u,f+h)},Pk=(s,e)=>t=>{const r=s.get(t);return e(r)||e(t)},Ak=(s,e)=>t=>s.has(t)||e(t),Nk=(s,e)=>t=>s.has(t)||e(t),Rk=(s,e)=>t=>{const r=s.get(t);return e(r)||e(t)},Mk=s=>e=>s!==null&&e instanceof s,Ok=s=>e=>s!==null&&typeof s.AudioNode=="function"&&e instanceof s.AudioNode,Ik=s=>e=>s!==null&&typeof s.AudioParam=="function"&&e instanceof s.AudioParam,Dk=(s,e)=>t=>s(t)||e(t),Lk=s=>e=>s!==null&&e instanceof s,Fk=s=>s!==null&&s.isSecureContext,Vk=(s,e,t,r)=>class extends s{constructor(l,c){const u=t(l),h=e(u,c);if(r(u))throw TypeError();super(l,!0,h,null),this._nativeMediaElementAudioSourceNode=h}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},Bk={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},zk=(s,e,t,r)=>class extends s{constructor(l,c){const u=t(l);if(r(u))throw new TypeError;const h={...Bk,...c},f=e(u,h);super(l,!1,f,null),this._nativeMediaStreamAudioDestinationNode=f}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},Uk=(s,e,t,r)=>class extends s{constructor(l,c){const u=t(l),h=e(u,c);if(r(u))throw new TypeError;super(l,!0,h,null),this._nativeMediaStreamAudioSourceNode=h}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},jk=(s,e,t)=>class extends s{constructor(o,l){const c=t(o),u=e(c,l);super(o,!0,u,null)}},Gk=(s,e,t,r,o,l)=>class extends t{constructor(u,h){super(u),this._nativeContext=u,bc.set(this,u),r(u)&&o.set(u,new Set),this._destination=new s(this,h),this._listener=e(this,u),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(u){const h=typeof u=="function"?l(this,u):null;this._nativeContext.onstatechange=h;const f=this._nativeContext.onstatechange;this._onstatechange=f!==null&&f===h?u:f}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Ko=s=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=s.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},Wk=(s,e)=>(t,r,o)=>{const l=new Set;return t.connect=(c=>(u,h=0,f=0)=>{const m=l.size===0;if(e(u))return c.call(t,u,h,f),s(l,[u,h,f],g=>g[0]===u&&g[1]===h&&g[2]===f,!0),m&&r(),u;c.call(t,u,h),s(l,[u,h],g=>g[0]===u&&g[1]===h,!0),m&&r()})(t.connect),t.disconnect=(c=>(u,h,f)=>{const m=l.size>0;if(u===void 0)c.apply(t),l.clear();else if(typeof u=="number"){c.call(t,u);for(const y of l)y[1]===u&&l.delete(y)}else{e(u)?c.call(t,u,h,f):c.call(t,u,h);for(const y of l)y[0]===u&&(h===void 0||y[1]===h)&&(f===void 0||y[2]===f)&&l.delete(y)}const g=l.size===0;m&&g&&o()})(t.disconnect),t},rt=(s,e,t)=>{const r=e[t];r!==void 0&&r!==s[t]&&(s[t]=r)},yt=(s,e)=>{rt(s,e,"channelCount"),rt(s,e,"channelCountMode"),rt(s,e,"channelInterpretation")},Rv=s=>typeof s.getFloatTimeDomainData=="function",$k=s=>{s.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);s.getByteTimeDomainData(t);const r=Math.max(t.length,s.fftSize);for(let o=0;o<r;o+=1)e[o]=(t[o]-128)*.0078125;return e}},qk=(s,e)=>(t,r)=>{const o=t.createAnalyser();if(yt(o,r),!(r.maxDecibels>r.minDecibels))throw e();return rt(o,r,"fftSize"),rt(o,r,"maxDecibels"),rt(o,r,"minDecibels"),rt(o,r,"smoothingTimeConstant"),s(Rv,()=>Rv(o))||$k(o),o},Hk=s=>s===null?null:s.hasOwnProperty("AudioBuffer")?s.AudioBuffer:null,at=(s,e,t)=>{const r=e[t];r!==void 0&&r!==s[t].value&&(s[t].value=r)},Yk=s=>{s.start=(e=>{let t=!1;return(r=0,o=0,l)=>{if(t)throw St();e.call(s,r,o,l),t=!0}})(s.start)},pf=s=>{s.start=(e=>(t=0,r=0,o)=>{if(typeof o=="number"&&o<0||r<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(s,t,r,o)})(s.start)},mf=s=>{s.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(s,t)})(s.stop)},Xk=(s,e,t,r,o,l,c,u,h,f,m)=>(g,y)=>{const x=g.createBufferSource();return yt(x,y),at(x,y,"playbackRate"),rt(x,y,"buffer"),rt(x,y,"loop"),rt(x,y,"loopEnd"),rt(x,y,"loopStart"),e(t,()=>t(g))||Yk(x),e(r,()=>r(g))||h(x),e(o,()=>o(g))||f(x,g),e(l,()=>l(g))||pf(x),e(c,()=>c(g))||m(x,g),e(u,()=>u(g))||mf(x),s(g,x),x},Kk=s=>s===null?null:s.hasOwnProperty("AudioContext")?s.AudioContext:s.hasOwnProperty("webkitAudioContext")?s.webkitAudioContext:null,Zk=(s,e)=>(t,r,o)=>{const l=t.destination;if(l.channelCount!==r)try{l.channelCount=r}catch{}o&&l.channelCountMode!=="explicit"&&(l.channelCountMode="explicit"),l.maxChannelCount===0&&Object.defineProperty(l,"maxChannelCount",{value:r});const c=s(t,{channelCount:r,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:1});return e(c,"channelCount",u=>()=>u.call(c),u=>h=>{u.call(c,h);try{l.channelCount=h}catch(f){if(h>l.maxChannelCount)throw f}}),e(c,"channelCountMode",u=>()=>u.call(c),u=>h=>{u.call(c,h),l.channelCountMode=h}),e(c,"channelInterpretation",u=>()=>u.call(c),u=>h=>{u.call(c,h),l.channelInterpretation=h}),Object.defineProperty(c,"maxChannelCount",{get:()=>l.maxChannelCount}),c.connect(l),c},Qk=s=>s===null?null:s.hasOwnProperty("AudioWorkletNode")?s.AudioWorkletNode:null,Jk=s=>{const{port1:e}=new MessageChannel;try{e.postMessage(s)}finally{e.close()}},eE=(s,e,t,r,o)=>(l,c,u,h,f,m)=>{if(u!==null)try{const g=new u(l,h,m),y=new Map;let x=null;if(Object.defineProperties(g,{channelCount:{get:()=>m.channelCount,set:()=>{throw s()}},channelCountMode:{get:()=>"explicit",set:()=>{throw s()}},onprocessorerror:{get:()=>x,set:w=>{typeof x=="function"&&g.removeEventListener("processorerror",x),x=typeof w=="function"?w:null,typeof x=="function"&&g.addEventListener("processorerror",x)}}}),g.addEventListener=(w=>(..._)=>{if(_[0]==="processorerror"){const b=typeof _[1]=="function"?_[1]:typeof _[1]=="object"&&_[1]!==null&&typeof _[1].handleEvent=="function"?_[1].handleEvent:null;if(b!==null){const T=y.get(_[1]);T!==void 0?_[1]=T:(_[1]=M=>{M.type==="error"?(Object.defineProperties(M,{type:{value:"processorerror"}}),b(M)):b(new ErrorEvent(_[0],{...M}))},y.set(b,_[1]))}}return w.call(g,"error",_[1],_[2]),w.call(g,..._)})(g.addEventListener),g.removeEventListener=(w=>(..._)=>{if(_[0]==="processorerror"){const b=y.get(_[1]);b!==void 0&&(y.delete(_[1]),_[1]=b)}return w.call(g,"error",_[1],_[2]),w.call(g,_[0],_[1],_[2])})(g.removeEventListener),m.numberOfOutputs!==0){const w=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return g.connect(w).connect(l.destination),o(g,()=>w.disconnect(),()=>w.connect(l.destination))}return g}catch(g){throw g.code===11?r():g}if(f===void 0)throw r();return Jk(m),e(l,c,f,m)},n_=(s,e)=>s===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(s*e))))),tE=s=>new Promise((e,t)=>{const{port1:r,port2:o}=new MessageChannel;r.onmessage=({data:l})=>{r.close(),o.close(),e(l)},r.onmessageerror=({data:l})=>{r.close(),o.close(),t(l)},o.postMessage(s)}),nE=async(s,e)=>{const t=await tE(e);return new s(t)},rE=(s,e,t,r)=>{let o=Lh.get(s);o===void 0&&(o=new WeakMap,Lh.set(s,o));const l=nE(t,r);return o.set(e,l),l},sE=(s,e,t,r,o,l,c,u,h,f,m,g,y)=>(x,w,_,b)=>{if(b.numberOfInputs===0&&b.numberOfOutputs===0)throw h();const T=Array.isArray(b.outputChannelCount)?b.outputChannelCount:Array.from(b.outputChannelCount);if(T.some(se=>se<1))throw h();if(T.length!==b.numberOfOutputs)throw e();if(b.channelCountMode!=="explicit")throw h();const M=b.channelCount*b.numberOfInputs,L=T.reduce((se,he)=>se+he,0),V=_.parameterDescriptors===void 0?0:_.parameterDescriptors.length;if(M+V>6||L>6)throw h();const E=new MessageChannel,P=[],R=[];for(let se=0;se<b.numberOfInputs;se+=1)P.push(c(x,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1})),R.push(o(x,{channelCount:b.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:b.channelCount}));const C=[];if(_.parameterDescriptors!==void 0)for(const{defaultValue:se,maxValue:he,minValue:Me,name:De}of _.parameterDescriptors){const Te=l(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:b.parameterData[De]!==void 0?b.parameterData[De]:se===void 0?0:se});Object.defineProperties(Te.offset,{defaultValue:{get:()=>se===void 0?0:se},maxValue:{get:()=>he===void 0?Ft:he},minValue:{get:()=>Me===void 0?en:Me}}),C.push(Te)}const O=r(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,M+V)}),U=n_(w,x.sampleRate),G=u(x,U,M+V,Math.max(1,L)),B=o(x,{channelCount:Math.max(1,L),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,L)}),q=[];for(let se=0;se<b.numberOfOutputs;se+=1)q.push(r(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:T[se]}));for(let se=0;se<b.numberOfInputs;se+=1){P[se].connect(R[se]);for(let he=0;he<b.channelCount;he+=1)R[se].connect(O,he,se*b.channelCount+he)}const ee=new Jy(_.parameterDescriptors===void 0?[]:_.parameterDescriptors.map(({name:se},he)=>{const Me=C[he];return Me.connect(O,0,M+he),Me.start(0),[se,Me.offset]}));O.connect(G);let te=b.channelInterpretation,K=null;const J=b.numberOfOutputs===0?[G]:q,z={get bufferSize(){return U},get channelCount(){return b.channelCount},set channelCount(se){throw t()},get channelCountMode(){return b.channelCountMode},set channelCountMode(se){throw t()},get channelInterpretation(){return te},set channelInterpretation(se){for(const he of P)he.channelInterpretation=se;te=se},get context(){return G.context},get inputs(){return P},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get onprocessorerror(){return K},set onprocessorerror(se){typeof K=="function"&&z.removeEventListener("processorerror",K),K=typeof se=="function"?se:null,typeof K=="function"&&z.addEventListener("processorerror",K)},get parameters(){return ee},get port(){return E.port2},addEventListener(...se){return G.addEventListener(se[0],se[1],se[2])},connect:s.bind(null,J),disconnect:f.bind(null,J),dispatchEvent(...se){return G.dispatchEvent(se[0])},removeEventListener(...se){return G.removeEventListener(se[0],se[1],se[2])}},Z=new Map;E.port1.addEventListener=(se=>(...he)=>{if(he[0]==="message"){const Me=typeof he[1]=="function"?he[1]:typeof he[1]=="object"&&he[1]!==null&&typeof he[1].handleEvent=="function"?he[1].handleEvent:null;if(Me!==null){const De=Z.get(he[1]);De!==void 0?he[1]=De:(he[1]=Te=>{m(x.currentTime,x.sampleRate,()=>Me(Te))},Z.set(Me,he[1]))}}return se.call(E.port1,he[0],he[1],he[2])})(E.port1.addEventListener),E.port1.removeEventListener=(se=>(...he)=>{if(he[0]==="message"){const Me=Z.get(he[1]);Me!==void 0&&(Z.delete(he[1]),he[1]=Me)}return se.call(E.port1,he[0],he[1],he[2])})(E.port1.removeEventListener);let X=null;Object.defineProperty(E.port1,"onmessage",{get:()=>X,set:se=>{typeof X=="function"&&E.port1.removeEventListener("message",X),X=typeof se=="function"?se:null,typeof X=="function"&&(E.port1.addEventListener("message",X),E.port1.start())}}),_.prototype.port=E.port1;let A=null;rE(x,z,_,b).then(se=>A=se);const le=hc(b.numberOfInputs,b.channelCount),ne=hc(b.numberOfOutputs,T),re=_.parameterDescriptors===void 0?[]:_.parameterDescriptors.reduce((se,{name:he})=>({...se,[he]:new Float32Array(128)}),{});let ce=!0;const de=()=>{b.numberOfOutputs>0&&G.disconnect(B);for(let se=0,he=0;se<b.numberOfOutputs;se+=1){const Me=q[se];for(let De=0;De<T[se];De+=1)B.disconnect(Me,he+De,De);he+=T[se]}},Q=new Map;G.onaudioprocess=({inputBuffer:se,outputBuffer:he})=>{if(A!==null){const Me=g(z);for(let De=0;De<U;De+=128){for(let Te=0;Te<b.numberOfInputs;Te+=1)for(let Re=0;Re<b.channelCount;Re+=1)dc(se,le[Te],Re,Re,De);_.parameterDescriptors!==void 0&&_.parameterDescriptors.forEach(({name:Te},Re)=>{dc(se,re,Te,M+Re,De)});for(let Te=0;Te<b.numberOfInputs;Te+=1)for(let Re=0;Re<T[Te];Re+=1)ne[Te][Re].byteLength===0&&(ne[Te][Re]=new Float32Array(128));try{const Te=le.map((Pe,Oe)=>{if(Me[Oe].size>0)return Q.set(Oe,U/128),Pe;const on=Q.get(Oe);return on===void 0?[]:(Pe.every(er=>er.every(Ls=>Ls===0))&&(on===1?Q.delete(Oe):Q.set(Oe,on-1)),Pe)});ce=m(x.currentTime+De/x.sampleRate,x.sampleRate,()=>A.process(Te,ne,re));for(let Pe=0,Oe=0;Pe<b.numberOfOutputs;Pe+=1){for(let bt=0;bt<T[Pe];bt+=1)e_(he,ne[Pe],bt,Oe+bt,De);Oe+=T[Pe]}}catch(Te){ce=!1,z.dispatchEvent(new ErrorEvent("processorerror",{colno:Te.colno,filename:Te.filename,lineno:Te.lineno,message:Te.message}))}if(!ce){for(let Te=0;Te<b.numberOfInputs;Te+=1){P[Te].disconnect(R[Te]);for(let Re=0;Re<b.channelCount;Re+=1)R[De].disconnect(O,Re,Te*b.channelCount+Re)}if(_.parameterDescriptors!==void 0){const Te=_.parameterDescriptors.length;for(let Re=0;Re<Te;Re+=1){const Pe=C[Re];Pe.disconnect(O,0,M+Re),Pe.stop()}}O.disconnect(G),G.onaudioprocess=null,pe?de():Be();break}}}};let pe=!1;const be=c(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Fe=()=>G.connect(be).connect(x.destination),Be=()=>{G.disconnect(be),be.disconnect()},It=()=>{if(ce){Be(),b.numberOfOutputs>0&&G.connect(B);for(let se=0,he=0;se<b.numberOfOutputs;se+=1){const Me=q[se];for(let De=0;De<T[se];De+=1)B.connect(Me,he+De,De);he+=T[se]}}pe=!0},we=()=>{ce&&(Fe(),de()),pe=!1};return Fe(),y(z,It,we)},r_=(s,e)=>{const t=s.createBiquadFilter();return yt(t,e),at(t,e,"Q"),at(t,e,"detune"),at(t,e,"frequency"),at(t,e,"gain"),rt(t,e,"type"),t},iE=(s,e)=>(t,r)=>{const o=t.createChannelMerger(r.numberOfInputs);return s!==null&&s.name==="webkitAudioContext"&&e(t,o),yt(o,r),o},oE=s=>{const e=s.numberOfOutputs;Object.defineProperty(s,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw St()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw St()}}),Object.defineProperty(s,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw St()}})},oa=(s,e)=>{const t=s.createChannelSplitter(e.numberOfOutputs);return yt(t,e),oE(t),t},aE=(s,e,t,r,o)=>(l,c)=>{if(l.createConstantSource===void 0)return t(l,c);const u=l.createConstantSource();return yt(u,c),at(u,c,"offset"),e(r,()=>r(l))||pf(u),e(o,()=>o(l))||mf(u),s(l,u),u},Wi=(s,e)=>(s.connect=e.connect.bind(e),s.disconnect=e.disconnect.bind(e),s),lE=(s,e,t,r)=>(o,{offset:l,...c})=>{const u=o.createBuffer(1,2,44100),h=e(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),f=t(o,{...c,gain:l}),m=u.getChannelData(0);m[0]=1,m[1]=1,h.buffer=u,h.loop=!0;const g={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(w){f.channelCount=w},get channelCountMode(){return f.channelCountMode},set channelCountMode(w){f.channelCountMode=w},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(w){f.channelInterpretation=w},get context(){return f.context},get inputs(){return[]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get offset(){return f.gain},get onended(){return h.onended},set onended(w){h.onended=w},addEventListener(...w){return h.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return h.dispatchEvent(w[0])},removeEventListener(...w){return h.removeEventListener(w[0],w[1],w[2])},start(w=0){h.start.call(h,w)},stop(w=0){h.stop.call(h,w)}},y=()=>h.connect(f),x=()=>h.disconnect(f);return s(o,h),r(Wi(g,f),y,x)},cE=(s,e)=>(t,r)=>{const o=t.createConvolver();if(yt(o,r),r.disableNormalization===o.normalize&&(o.normalize=!r.disableNormalization),rt(o,r,"buffer"),r.channelCount>2||(e(o,"channelCount",l=>()=>l.call(o),l=>c=>{if(c>2)throw s();return l.call(o,c)}),r.channelCountMode==="max"))throw s();return e(o,"channelCountMode",l=>()=>l.call(o),l=>c=>{if(c==="max")throw s();return l.call(o,c)}),o},s_=(s,e)=>{const t=s.createDelay(e.maxDelayTime);return yt(t,e),at(t,e,"delayTime"),t},uE=s=>(e,t)=>{const r=e.createDynamicsCompressor();if(yt(r,t),t.channelCount>2||t.channelCountMode==="max")throw s();return at(r,t,"attack"),at(r,t,"knee"),at(r,t,"ratio"),at(r,t,"release"),at(r,t,"threshold"),r},Xt=(s,e)=>{const t=s.createGain();return yt(t,e),at(t,e,"gain"),t},dE=s=>(e,t,r)=>{if(e.createIIRFilter===void 0)return s(e,t,r);const o=e.createIIRFilter(r.feedforward,r.feedback);return yt(o,r),o};function hE(s,e){const t=e[0]*e[0]+e[1]*e[1];return[(s[0]*e[0]+s[1]*e[1])/t,(s[1]*e[0]-s[0]*e[1])/t]}function fE(s,e){return[s[0]*e[0]-s[1]*e[1],s[0]*e[1]+s[1]*e[0]]}function Mv(s,e){let t=[0,0];for(let r=s.length-1;r>=0;r-=1)t=fE(t,e),t[0]+=s[r];return t}const pE=(s,e,t,r)=>(o,l,{channelCount:c,channelCountMode:u,channelInterpretation:h,feedback:f,feedforward:m})=>{const g=n_(l,o.sampleRate),y=f instanceof Float64Array?f:new Float64Array(f),x=m instanceof Float64Array?m:new Float64Array(m),w=y.length,_=x.length,b=Math.min(w,_);if(w===0||w>20)throw r();if(y[0]===0)throw e();if(_===0||_>20)throw r();if(x[0]===0)throw e();if(y[0]!==1){for(let C=0;C<_;C+=1)x[C]/=y[0];for(let C=1;C<w;C+=1)y[C]/=y[0]}const T=t(o,g,c,c);T.channelCount=c,T.channelCountMode=u,T.channelInterpretation=h;const M=32,L=[],V=[],E=[];for(let C=0;C<c;C+=1){L.push(0);const O=new Float32Array(M),U=new Float32Array(M);O.fill(0),U.fill(0),V.push(O),E.push(U)}T.onaudioprocess=C=>{const O=C.inputBuffer,U=C.outputBuffer,G=O.numberOfChannels;for(let B=0;B<G;B+=1){const q=O.getChannelData(B),ee=U.getChannelData(B);L[B]=t_(y,w,x,_,b,V[B],E[B],L[B],M,q,ee)}};const P=o.sampleRate/2;return Wi({get bufferSize(){return g},get channelCount(){return T.channelCount},set channelCount(C){T.channelCount=C},get channelCountMode(){return T.channelCountMode},set channelCountMode(C){T.channelCountMode=C},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(C){T.channelInterpretation=C},get context(){return T.context},get inputs(){return[T]},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},addEventListener(...C){return T.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return T.dispatchEvent(C[0])},getFrequencyResponse(C,O,U){if(C.length!==O.length||O.length!==U.length)throw s();const G=C.length;for(let B=0;B<G;B+=1){const q=-Math.PI*(C[B]/P),ee=[Math.cos(q),Math.sin(q)],te=Mv(x,ee),K=Mv(y,ee),J=hE(te,K);O[B]=Math.sqrt(J[0]*J[0]+J[1]*J[1]),U[B]=Math.atan2(J[1],J[0])}},removeEventListener(...C){return T.removeEventListener(C[0],C[1],C[2])}},T)},mE=(s,e)=>s.createMediaElementSource(e.mediaElement),gE=(s,e)=>{const t=s.createMediaStreamDestination();return yt(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},vE=(s,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((l,c)=>l.id<c.id?-1:l.id>c.id?1:0);const r=t.slice(0,1),o=s.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(o,"mediaStream",{value:e}),o},yE=(s,e)=>(t,{mediaStreamTrack:r})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(r);const o=new MediaStream([r]),l=t.createMediaStreamSource(o);if(r.kind!=="audio")throw s();if(e(t))throw new TypeError;return l},_E=s=>s===null?null:s.hasOwnProperty("OfflineAudioContext")?s.OfflineAudioContext:s.hasOwnProperty("webkitOfflineAudioContext")?s.webkitOfflineAudioContext:null,wE=(s,e,t,r,o,l)=>(c,u)=>{const h=c.createOscillator();return yt(h,u),at(h,u,"detune"),at(h,u,"frequency"),u.periodicWave!==void 0?h.setPeriodicWave(u.periodicWave):rt(h,u,"type"),e(t,()=>t(c))||pf(h),e(r,()=>r(c))||l(h,c),e(o,()=>o(c))||mf(h),s(c,h),h},xE=s=>(e,t)=>{const r=e.createPanner();return r.orientationX===void 0?s(e,t):(yt(r,t),at(r,t,"orientationX"),at(r,t,"orientationY"),at(r,t,"orientationZ"),at(r,t,"positionX"),at(r,t,"positionY"),at(r,t,"positionZ"),rt(r,t,"coneInnerAngle"),rt(r,t,"coneOuterAngle"),rt(r,t,"coneOuterGain"),rt(r,t,"distanceModel"),rt(r,t,"maxDistance"),rt(r,t,"panningModel"),rt(r,t,"refDistance"),rt(r,t,"rolloffFactor"),r)},SE=(s,e,t,r,o,l,c,u,h,f)=>(m,{coneInnerAngle:g,coneOuterAngle:y,coneOuterGain:x,distanceModel:w,maxDistance:_,orientationX:b,orientationY:T,orientationZ:M,panningModel:L,positionX:V,positionY:E,positionZ:P,refDistance:R,rolloffFactor:C,...O})=>{const U=m.createPanner();if(O.channelCount>2||O.channelCountMode==="max")throw c();yt(U,O);const G={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},B=t(m,{...G,channelInterpretation:"speakers",numberOfInputs:6}),q=r(m,{...O,gain:1}),ee=r(m,{...G,gain:1}),te=r(m,{...G,gain:0}),K=r(m,{...G,gain:0}),J=r(m,{...G,gain:0}),z=r(m,{...G,gain:0}),Z=r(m,{...G,gain:0}),X=o(m,256,6,1),A=l(m,{...G,curve:new Float32Array([1,1]),oversample:"none"});let $=[b,T,M],le=[V,E,P];const ne=new Float32Array(1);X.onaudioprocess=({inputBuffer:Q})=>{const pe=[h(Q,ne,0),h(Q,ne,1),h(Q,ne,2)];pe.some((Fe,Be)=>Fe!==$[Be])&&(U.setOrientation(...pe),$=pe);const be=[h(Q,ne,3),h(Q,ne,4),h(Q,ne,5)];be.some((Fe,Be)=>Fe!==le[Be])&&(U.setPosition(...be),le=be)},Object.defineProperty(te.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"defaultValue",{get:()=>0}),Object.defineProperty(J.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0});const re={get bufferSize(){},get channelCount(){return U.channelCount},set channelCount(Q){if(Q>2)throw c();q.channelCount=Q,U.channelCount=Q},get channelCountMode(){return U.channelCountMode},set channelCountMode(Q){if(Q==="max")throw c();q.channelCountMode=Q,U.channelCountMode=Q},get channelInterpretation(){return U.channelInterpretation},set channelInterpretation(Q){q.channelInterpretation=Q,U.channelInterpretation=Q},get coneInnerAngle(){return U.coneInnerAngle},set coneInnerAngle(Q){U.coneInnerAngle=Q},get coneOuterAngle(){return U.coneOuterAngle},set coneOuterAngle(Q){U.coneOuterAngle=Q},get coneOuterGain(){return U.coneOuterGain},set coneOuterGain(Q){if(Q<0||Q>1)throw e();U.coneOuterGain=Q},get context(){return U.context},get distanceModel(){return U.distanceModel},set distanceModel(Q){U.distanceModel=Q},get inputs(){return[q]},get maxDistance(){return U.maxDistance},set maxDistance(Q){if(Q<0)throw new RangeError;U.maxDistance=Q},get numberOfInputs(){return U.numberOfInputs},get numberOfOutputs(){return U.numberOfOutputs},get orientationX(){return ee.gain},get orientationY(){return te.gain},get orientationZ(){return K.gain},get panningModel(){return U.panningModel},set panningModel(Q){U.panningModel=Q},get positionX(){return J.gain},get positionY(){return z.gain},get positionZ(){return Z.gain},get refDistance(){return U.refDistance},set refDistance(Q){if(Q<0)throw new RangeError;U.refDistance=Q},get rolloffFactor(){return U.rolloffFactor},set rolloffFactor(Q){if(Q<0)throw new RangeError;U.rolloffFactor=Q},addEventListener(...Q){return q.addEventListener(Q[0],Q[1],Q[2])},dispatchEvent(...Q){return q.dispatchEvent(Q[0])},removeEventListener(...Q){return q.removeEventListener(Q[0],Q[1],Q[2])}};g!==re.coneInnerAngle&&(re.coneInnerAngle=g),y!==re.coneOuterAngle&&(re.coneOuterAngle=y),x!==re.coneOuterGain&&(re.coneOuterGain=x),w!==re.distanceModel&&(re.distanceModel=w),_!==re.maxDistance&&(re.maxDistance=_),b!==re.orientationX.value&&(re.orientationX.value=b),T!==re.orientationY.value&&(re.orientationY.value=T),M!==re.orientationZ.value&&(re.orientationZ.value=M),L!==re.panningModel&&(re.panningModel=L),V!==re.positionX.value&&(re.positionX.value=V),E!==re.positionY.value&&(re.positionY.value=E),P!==re.positionZ.value&&(re.positionZ.value=P),R!==re.refDistance&&(re.refDistance=R),C!==re.rolloffFactor&&(re.rolloffFactor=C),($[0]!==1||$[1]!==0||$[2]!==0)&&U.setOrientation(...$),(le[0]!==0||le[1]!==0||le[2]!==0)&&U.setPosition(...le);const ce=()=>{q.connect(U),s(q,A,0,0),A.connect(ee).connect(B,0,0),A.connect(te).connect(B,0,1),A.connect(K).connect(B,0,2),A.connect(J).connect(B,0,3),A.connect(z).connect(B,0,4),A.connect(Z).connect(B,0,5),B.connect(X).connect(m.destination)},de=()=>{q.disconnect(U),u(q,A,0,0),A.disconnect(ee),ee.disconnect(B),A.disconnect(te),te.disconnect(B),A.disconnect(K),K.disconnect(B),A.disconnect(J),J.disconnect(B),A.disconnect(z),z.disconnect(B),A.disconnect(Z),Z.disconnect(B),B.disconnect(X),X.disconnect(m.destination)};return f(Wi(re,U),ce,de)},bE=s=>(e,{disableNormalization:t,imag:r,real:o})=>{const l=r instanceof Float32Array?r:new Float32Array(r),c=o instanceof Float32Array?o:new Float32Array(o),u=e.createPeriodicWave(c,l,{disableNormalization:t});if(Array.from(r).length<2)throw s();return u},aa=(s,e,t,r)=>s.createScriptProcessor(e,t,r),TE=(s,e)=>(t,r)=>{const o=r.channelCountMode;if(o==="clamped-max")throw e();if(t.createStereoPanner===void 0)return s(t,r);const l=t.createStereoPanner();return yt(l,r),at(l,r,"pan"),Object.defineProperty(l,"channelCountMode",{get:()=>o,set:c=>{if(c!==o)throw e()}}),l},CE=(s,e,t,r,o,l)=>{const u=new Float32Array([1,1]),h=Math.PI/2,f={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},m={...f,oversample:"none"},g=(w,_,b,T)=>{const M=new Float32Array(16385),L=new Float32Array(16385);for(let O=0;O<16385;O+=1){const U=O/16384*h;M[O]=Math.cos(U),L[O]=Math.sin(U)}const V=t(w,{...f,gain:0}),E=r(w,{...m,curve:M}),P=r(w,{...m,curve:u}),R=t(w,{...f,gain:0}),C=r(w,{...m,curve:L});return{connectGraph(){_.connect(V),_.connect(P.inputs===void 0?P:P.inputs[0]),_.connect(R),P.connect(b),b.connect(E.inputs===void 0?E:E.inputs[0]),b.connect(C.inputs===void 0?C:C.inputs[0]),E.connect(V.gain),C.connect(R.gain),V.connect(T,0,0),R.connect(T,0,1)},disconnectGraph(){_.disconnect(V),_.disconnect(P.inputs===void 0?P:P.inputs[0]),_.disconnect(R),P.disconnect(b),b.disconnect(E.inputs===void 0?E:E.inputs[0]),b.disconnect(C.inputs===void 0?C:C.inputs[0]),E.disconnect(V.gain),C.disconnect(R.gain),V.disconnect(T,0,0),R.disconnect(T,0,1)}}},y=(w,_,b,T)=>{const M=new Float32Array(16385),L=new Float32Array(16385),V=new Float32Array(16385),E=new Float32Array(16385),P=Math.floor(16385/2);for(let J=0;J<16385;J+=1)if(J>P){const z=(J-P)/(16384-P)*h;M[J]=Math.cos(z),L[J]=Math.sin(z),V[J]=0,E[J]=1}else{const z=J/(16384-P)*h;M[J]=1,L[J]=0,V[J]=Math.cos(z),E[J]=Math.sin(z)}const R=e(w,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),C=t(w,{...f,gain:0}),O=r(w,{...m,curve:M}),U=t(w,{...f,gain:0}),G=r(w,{...m,curve:L}),B=r(w,{...m,curve:u}),q=t(w,{...f,gain:0}),ee=r(w,{...m,curve:V}),te=t(w,{...f,gain:0}),K=r(w,{...m,curve:E});return{connectGraph(){_.connect(R),_.connect(B.inputs===void 0?B:B.inputs[0]),R.connect(C,0),R.connect(U,0),R.connect(q,1),R.connect(te,1),B.connect(b),b.connect(O.inputs===void 0?O:O.inputs[0]),b.connect(G.inputs===void 0?G:G.inputs[0]),b.connect(ee.inputs===void 0?ee:ee.inputs[0]),b.connect(K.inputs===void 0?K:K.inputs[0]),O.connect(C.gain),G.connect(U.gain),ee.connect(q.gain),K.connect(te.gain),C.connect(T,0,0),q.connect(T,0,0),U.connect(T,0,1),te.connect(T,0,1)},disconnectGraph(){_.disconnect(R),_.disconnect(B.inputs===void 0?B:B.inputs[0]),R.disconnect(C,0),R.disconnect(U,0),R.disconnect(q,1),R.disconnect(te,1),B.disconnect(b),b.disconnect(O.inputs===void 0?O:O.inputs[0]),b.disconnect(G.inputs===void 0?G:G.inputs[0]),b.disconnect(ee.inputs===void 0?ee:ee.inputs[0]),b.disconnect(K.inputs===void 0?K:K.inputs[0]),O.disconnect(C.gain),G.disconnect(U.gain),ee.disconnect(q.gain),K.disconnect(te.gain),C.disconnect(T,0,0),q.disconnect(T,0,0),U.disconnect(T,0,1),te.disconnect(T,0,1)}}},x=(w,_,b,T,M)=>{if(_===1)return g(w,b,T,M);if(_===2)return y(w,b,T,M);throw o()};return(w,{channelCount:_,channelCountMode:b,pan:T,...M})=>{if(b==="max")throw o();const L=s(w,{...M,channelCount:1,channelCountMode:b,numberOfInputs:2}),V=t(w,{...M,channelCount:_,channelCountMode:b,gain:1}),E=t(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:T});let{connectGraph:P,disconnectGraph:R}=x(w,_,V,E,L);Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(E.gain,"maxValue",{get:()=>1}),Object.defineProperty(E.gain,"minValue",{get:()=>-1});const C={get bufferSize(){},get channelCount(){return V.channelCount},set channelCount(B){V.channelCount!==B&&(O&&R(),{connectGraph:P,disconnectGraph:R}=x(w,B,V,E,L),O&&P()),V.channelCount=B},get channelCountMode(){return V.channelCountMode},set channelCountMode(B){if(B==="clamped-max"||B==="max")throw o();V.channelCountMode=B},get channelInterpretation(){return V.channelInterpretation},set channelInterpretation(B){V.channelInterpretation=B},get context(){return V.context},get inputs(){return[V]},get numberOfInputs(){return V.numberOfInputs},get numberOfOutputs(){return V.numberOfOutputs},get pan(){return E.gain},addEventListener(...B){return V.addEventListener(B[0],B[1],B[2])},dispatchEvent(...B){return V.dispatchEvent(B[0])},removeEventListener(...B){return V.removeEventListener(B[0],B[1],B[2])}};let O=!1;const U=()=>{P(),O=!0},G=()=>{R(),O=!1};return l(Wi(C,L),U,G)}},kE=(s,e,t,r,o,l,c)=>(u,h)=>{const f=u.createWaveShaper();if(l!==null&&l.name==="webkitAudioContext"&&u.createGain().gain.automationRate===void 0)return t(u,h);yt(f,h);const m=h.curve===null||h.curve instanceof Float32Array?h.curve:new Float32Array(h.curve);if(m!==null&&m.length<2)throw e();rt(f,{curve:m},"curve"),rt(f,h,"oversample");let g=null,y=!1;return c(f,"curve",_=>()=>_.call(f),_=>b=>(_.call(f,b),y&&(r(b)&&g===null?g=s(u,f):!r(b)&&g!==null&&(g(),g=null)),b)),o(f,()=>{y=!0,r(f.curve)&&(g=s(u,f))},()=>{y=!1,g!==null&&(g(),g=null)})},EE=(s,e,t,r,o)=>(l,{curve:c,oversample:u,...h})=>{const f=l.createWaveShaper(),m=l.createWaveShaper();yt(f,h),yt(m,h);const g=t(l,{...h,gain:1}),y=t(l,{...h,gain:-1}),x=t(l,{...h,gain:1}),w=t(l,{...h,gain:-1});let _=null,b=!1,T=null;const M={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(E){g.channelCount=E,y.channelCount=E,f.channelCount=E,x.channelCount=E,m.channelCount=E,w.channelCount=E},get channelCountMode(){return f.channelCountMode},set channelCountMode(E){g.channelCountMode=E,y.channelCountMode=E,f.channelCountMode=E,x.channelCountMode=E,m.channelCountMode=E,w.channelCountMode=E},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(E){g.channelInterpretation=E,y.channelInterpretation=E,f.channelInterpretation=E,x.channelInterpretation=E,m.channelInterpretation=E,w.channelInterpretation=E},get context(){return f.context},get curve(){return T},set curve(E){if(E!==null&&E.length<2)throw e();if(E===null)f.curve=E,m.curve=E;else{const P=E.length,R=new Float32Array(P+2-P%2),C=new Float32Array(P+2-P%2);R[0]=E[0],C[0]=-E[P-1];const O=Math.ceil((P+1)/2),U=(P+1)/2-1;for(let G=1;G<O;G+=1){const B=G/O*U,q=Math.floor(B),ee=Math.ceil(B);R[G]=q===ee?E[q]:(1-(B-q))*E[q]+(1-(ee-B))*E[ee],C[G]=q===ee?-E[P-1-q]:-((1-(B-q))*E[P-1-q])-(1-(ee-B))*E[P-1-ee]}R[O]=P%2===1?E[O-1]:(E[O-2]+E[O-1])/2,f.curve=R,m.curve=C}T=E,b&&(r(T)&&_===null?_=s(l,g):_!==null&&(_(),_=null))},get inputs(){return[g]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get oversample(){return f.oversample},set oversample(E){f.oversample=E,m.oversample=E},addEventListener(...E){return g.addEventListener(E[0],E[1],E[2])},dispatchEvent(...E){return g.dispatchEvent(E[0])},removeEventListener(...E){return g.removeEventListener(E[0],E[1],E[2])}};c!==null&&(M.curve=c instanceof Float32Array?c:new Float32Array(c)),u!==M.oversample&&(M.oversample=u);const L=()=>{g.connect(f).connect(x),g.connect(y).connect(m).connect(w).connect(x),b=!0,r(T)&&(_=s(l,g))},V=()=>{g.disconnect(f),f.disconnect(x),g.disconnect(y),y.disconnect(m),m.disconnect(w),w.disconnect(x),b=!1,_!==null&&(_(),_=null)};return o(Wi(M,x),L,V)},zt=()=>new DOMException("","NotSupportedError"),PE={numberOfChannels:1},AE=(s,e,t,r,o)=>class extends s{constructor(c,u,h){let f;if(typeof c=="number"&&u!==void 0&&h!==void 0)f={length:u,numberOfChannels:c,sampleRate:h};else if(typeof c=="object")f=c;else throw new Error("The given parameters are not valid.");const{length:m,numberOfChannels:g,sampleRate:y}={...PE,...f},x=r(g,m,y);e(Ko,()=>Ko(x))||x.addEventListener("statechange",(()=>{let w=0;const _=b=>{this._state==="running"&&(w>0?(x.removeEventListener("statechange",_),b.stopImmediatePropagation(),this._waitForThePromiseToSettle(b)):w+=1)};return _})()),super(x,g),this._length=m,this._nativeOfflineAudioContext=x,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Xy(this)}))}_waitForThePromiseToSettle(c){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(c):setTimeout(()=>this._waitForThePromiseToSettle(c))}},NE={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},RE=(s,e,t,r,o,l,c)=>class extends s{constructor(h,f){const m=o(h),g={...NE,...f},y=t(m,g),x=l(m),w=x?r():null,_=h.sampleRate/2;super(h,!1,y,w),this._detune=e(this,x,y.detune,153600,-153600),this._frequency=e(this,x,y.frequency,_,-_),this._nativeOscillatorNode=y,this._onended=null,this._oscillatorNodeRenderer=w,this._oscillatorNodeRenderer!==null&&g.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=g.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(h){const f=typeof h=="function"?c(this,h):null;this._nativeOscillatorNode.onended=f;const m=this._nativeOscillatorNode.onended;this._onended=m!==null&&m===f?h:m}get type(){return this._nativeOscillatorNode.type}set type(h){this._nativeOscillatorNode.type=h,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(h){this._nativeOscillatorNode.setPeriodicWave(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=h)}start(h=0){if(this._nativeOscillatorNode.start(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=h),this.context.state!=="closed"){Ii(this);const f=()=>{this._nativeOscillatorNode.removeEventListener("ended",f),mr(this)&&ra(this)};this._nativeOscillatorNode.addEventListener("ended",f)}}stop(h=0){this._nativeOscillatorNode.stop(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=h)}},ME=(s,e,t,r,o)=>()=>{const l=new WeakMap;let c=null,u=null,h=null;const f=async(m,g)=>{let y=t(m);const x=Ot(y,g);if(!x){const w={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,detune:y.detune.value,frequency:y.frequency.value,periodicWave:c===null?void 0:c,type:y.type};y=e(g,w),u!==null&&y.start(u),h!==null&&y.stop(h)}return l.set(g,y),x?(await s(g,m.detune,y.detune),await s(g,m.frequency,y.frequency)):(await r(g,m.detune,y.detune),await r(g,m.frequency,y.frequency)),await o(m,g,y),y};return{set periodicWave(m){c=m},set start(m){u=m},set stop(m){h=m},render(m,g){const y=l.get(g);return y!==void 0?Promise.resolve(y):f(m,g)}}},OE={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},IE=(s,e,t,r,o,l,c)=>class extends s{constructor(h,f){const m=o(h),g={...OE,...f},y=t(m,g),x=l(m),w=x?r():null;super(h,!1,y,w),this._nativePannerNode=y,this._orientationX=e(this,x,y.orientationX,Ft,en),this._orientationY=e(this,x,y.orientationY,Ft,en),this._orientationZ=e(this,x,y.orientationZ,Ft,en),this._positionX=e(this,x,y.positionX,Ft,en),this._positionY=e(this,x,y.positionY,Ft,en),this._positionZ=e(this,x,y.positionZ,Ft,en),c(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(h){this._nativePannerNode.coneInnerAngle=h}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(h){this._nativePannerNode.coneOuterAngle=h}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(h){this._nativePannerNode.coneOuterGain=h}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(h){this._nativePannerNode.distanceModel=h}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(h){this._nativePannerNode.maxDistance=h}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(h){this._nativePannerNode.panningModel=h}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(h){this._nativePannerNode.refDistance=h}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(h){this._nativePannerNode.rolloffFactor=h}},DE=(s,e,t,r,o,l,c,u,h,f)=>()=>{const m=new WeakMap;let g=null;const y=async(x,w)=>{let _=null,b=l(x);const T={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation},M={...T,coneInnerAngle:b.coneInnerAngle,coneOuterAngle:b.coneOuterAngle,coneOuterGain:b.coneOuterGain,distanceModel:b.distanceModel,maxDistance:b.maxDistance,panningModel:b.panningModel,refDistance:b.refDistance,rolloffFactor:b.rolloffFactor},L=Ot(b,w);if("bufferSize"in b)_=r(w,{...T,gain:1});else if(!L){const V={...M,orientationX:b.orientationX.value,orientationY:b.orientationY.value,orientationZ:b.orientationZ.value,positionX:b.positionX.value,positionY:b.positionY.value,positionZ:b.positionZ.value};b=o(w,V)}if(m.set(w,_===null?b:_),_!==null){if(g===null){if(c===null)throw new Error("Missing the native OfflineAudioContext constructor.");const G=new c(6,x.context.length,w.sampleRate),B=e(G,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});B.connect(G.destination),g=(async()=>{const q=await Promise.all([x.orientationX,x.orientationY,x.orientationZ,x.positionX,x.positionY,x.positionZ].map(async(ee,te)=>{const K=t(G,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:te===0?1:0});return await u(G,ee,K.offset),K}));for(let ee=0;ee<6;ee+=1)q[ee].connect(B,0,ee),q[ee].start(0);return f(G)})()}const V=await g,E=r(w,{...T,gain:1});await h(x,w,E);const P=[];for(let G=0;G<V.numberOfChannels;G+=1)P.push(V.getChannelData(G));let R=[P[0][0],P[1][0],P[2][0]],C=[P[3][0],P[4][0],P[5][0]],O=r(w,{...T,gain:1}),U=o(w,{...M,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:C[0],positionY:C[1],positionZ:C[2]});E.connect(O).connect(U.inputs[0]),U.connect(_);for(let G=128;G<V.length;G+=128){const B=[P[0][G],P[1][G],P[2][G]],q=[P[3][G],P[4][G],P[5][G]];if(B.some((ee,te)=>ee!==R[te])||q.some((ee,te)=>ee!==C[te])){R=B,C=q;const ee=G/w.sampleRate;O.gain.setValueAtTime(0,ee),O=r(w,{...T,gain:0}),U=o(w,{...M,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:C[0],positionY:C[1],positionZ:C[2]}),O.gain.setValueAtTime(1,ee),E.connect(O).connect(U.inputs[0]),U.connect(_)}}return _}return L?(await s(w,x.orientationX,b.orientationX),await s(w,x.orientationY,b.orientationY),await s(w,x.orientationZ,b.orientationZ),await s(w,x.positionX,b.positionX),await s(w,x.positionY,b.positionY),await s(w,x.positionZ,b.positionZ)):(await u(w,x.orientationX,b.orientationX),await u(w,x.orientationY,b.orientationY),await u(w,x.orientationZ,b.orientationZ),await u(w,x.positionX,b.positionX),await u(w,x.positionY,b.positionY),await u(w,x.positionZ,b.positionZ)),Gi(b)?await h(x,w,b.inputs[0]):await h(x,w,b),b};return{render(x,w){const _=m.get(w);return _!==void 0?Promise.resolve(_):y(x,w)}}},LE={disableNormalization:!1},FE=(s,e,t,r)=>class i_{constructor(l,c){const u=e(l),h=r({...LE,...c}),f=s(u,h);return t.add(f),f}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===i_.prototype||t.has(l)}},VE=(s,e)=>(t,r,o)=>(s(r).replay(o),e(r,t,o)),BE=(s,e,t)=>async(r,o,l)=>{const c=s(r);await Promise.all(c.activeInputs.map((u,h)=>Array.from(u).map(async([f,m])=>{const y=await e(f).render(f,o),x=r.context.destination;!t(f)&&(r!==x||!t(r))&&y.connect(l,m,h)})).reduce((u,h)=>[...u,...h],[]))},zE=(s,e,t)=>async(r,o,l)=>{const c=e(r);await Promise.all(Array.from(c.activeInputs).map(async([u,h])=>{const m=await s(u).render(u,o);t(u)||m.connect(l,h)}))},UE=(s,e,t,r)=>o=>s(Ko,()=>Ko(o))?Promise.resolve(s(r,r)).then(l=>{if(!l){const c=t(o,512,0,1);o.oncomplete=()=>{c.onaudioprocess=null,c.disconnect()},c.onaudioprocess=()=>o.currentTime,c.connect(o.destination)}return o.startRendering()}):new Promise(l=>{const c=e(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=u=>{c.disconnect(),l(u.renderedBuffer)},c.connect(o.destination),o.startRendering()}),jE=s=>(e,t)=>{s.set(e,t)},GE=s=>(e,t)=>s.set(e,t),WE=(s,e,t,r,o,l,c,u)=>(h,f)=>t(h).render(h,f).then(()=>Promise.all(Array.from(r(f)).map(m=>t(m).render(m,f)))).then(()=>o(f)).then(m=>(typeof m.copyFromChannel!="function"?(c(m),df(m)):e(l,()=>l(m))||u(m),s.add(m),m)),$E={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},qE=(s,e,t,r,o,l)=>class extends s{constructor(u,h){const f=o(u),m={...$E,...h},g=t(f,m),y=l(f),x=y?r():null;super(u,!1,g,x),this._pan=e(this,y,g.pan)}get pan(){return this._pan}},HE=(s,e,t,r,o)=>()=>{const l=new WeakMap,c=async(u,h)=>{let f=t(u);const m=Ot(f,h);if(!m){const g={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,pan:f.pan.value};f=e(h,g)}return l.set(h,f),m?await s(h,u.pan,f.pan):await r(h,u.pan,f.pan),Gi(f)?await o(u,h,f.inputs[0]):await o(u,h,f),f};return{render(u,h){const f=l.get(h);return f!==void 0?Promise.resolve(f):c(u,h)}}},YE=s=>()=>{if(s===null)return!1;try{new s({length:1,sampleRate:44100})}catch{return!1}return!0},XE=(s,e)=>async()=>{if(s===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),o=URL.createObjectURL(t);let l=!1,c=!1;try{await r.audioWorklet.addModule(o);const u=new s(r,"a",{numberOfOutputs:0}),h=r.createOscillator();u.port.onmessage=()=>l=!0,u.onprocessorerror=()=>c=!0,h.connect(u),h.start(0),await r.startRendering(),await new Promise(f=>setTimeout(f))}catch{}finally{URL.revokeObjectURL(o)}return l&&!c},KE=(s,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),r=s(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{t.oncomplete=()=>{r.disconnect(),o(t.currentTime!==0)},t.startRendering()})},ZE=()=>new DOMException("","UnknownError"),QE={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},JE=(s,e,t,r,o,l,c)=>class extends s{constructor(h,f){const m=o(h),g={...QE,...f},y=t(m,g),w=l(m)?r():null;super(h,!0,y,w),this._isCurveNullified=!1,this._nativeWaveShaperNode=y,c(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(h){if(h===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(h.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=h}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(h){this._nativeWaveShaperNode.oversample=h}},eP=(s,e,t)=>()=>{const r=new WeakMap,o=async(l,c)=>{let u=e(l);if(!Ot(u,c)){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,curve:u.curve,oversample:u.oversample};u=s(c,f)}return r.set(c,u),Gi(u)?await t(l,c,u.inputs[0]):await t(l,c,u),u};return{render(l,c){const u=r.get(c);return u!==void 0?Promise.resolve(u):o(l,c)}}},tP=()=>typeof window>"u"?null:window,nP=(s,e)=>t=>{t.copyFromChannel=(r,o,l=0)=>{const c=s(l),u=s(o);if(u>=t.numberOfChannels)throw e();const h=t.length,f=t.getChannelData(u),m=r.length;for(let g=c<0?-c:0;g+c<h&&g<m;g+=1)r[g]=f[g+c]},t.copyToChannel=(r,o,l=0)=>{const c=s(l),u=s(o);if(u>=t.numberOfChannels)throw e();const h=t.length,f=t.getChannelData(u),m=r.length;for(let g=c<0?-c:0;g+c<h&&g<m;g+=1)f[g+c]=r[g]}},rP=s=>e=>{e.copyFromChannel=(t=>(r,o,l=0)=>{const c=s(l),u=s(o);if(c<e.length)return t.call(e,r,u,c)})(e.copyFromChannel),e.copyToChannel=(t=>(r,o,l=0)=>{const c=s(l),u=s(o);if(c<e.length)return t.call(e,r,u,c)})(e.copyToChannel)},sP=s=>(e,t)=>{const r=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),s(e,"buffer",o=>()=>{const l=o.call(e);return l===r?null:l},o=>l=>o.call(e,l===null?r:l))},iP=(s,e)=>(t,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw s()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw s()}});const o=t.createBufferSource();e(r,()=>{const u=r.numberOfInputs;for(let h=0;h<u;h+=1)o.connect(r,0,h)},()=>o.disconnect(r))},o_=(s,e,t)=>s.copyFromChannel===void 0?s.getChannelData(t)[0]:(s.copyFromChannel(e,t),e[0]),a_=s=>{if(s===null)return!1;const e=s.length;return e%2!==0?s[Math.floor(e/2)]!==0:s[e/2-1]+s[e/2]!==0},la=(s,e,t,r)=>{let o=s;for(;!o.hasOwnProperty(e);)o=Object.getPrototypeOf(o);const{get:l,set:c}=Object.getOwnPropertyDescriptor(o,e);Object.defineProperty(s,e,{get:t(l),set:r(c)})},oP=s=>({...s,outputChannelCount:s.outputChannelCount!==void 0?s.outputChannelCount:s.numberOfInputs===1&&s.numberOfOutputs===1?[s.channelCount]:Array.from({length:s.numberOfOutputs},()=>1)}),aP=s=>({...s,channelCount:s.numberOfOutputs}),lP=s=>{const{imag:e,real:t}=s;return e===void 0?t===void 0?{...s,imag:[0,0],real:[0,0]}:{...s,imag:Array.from(t,()=>0),real:t}:t===void 0?{...s,imag:e,real:Array.from(e,()=>0)}:{...s,imag:e,real:t}},l_=(s,e,t)=>{try{s.setValueAtTime(e,t)}catch(r){if(r.code!==9)throw r;l_(s,e,t+1e-7)}},cP=s=>{const e=s.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},uP=s=>{const e=s.createBufferSource(),t=s.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},dP=s=>{const e=s.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},gf=s=>{const e=s.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},c_=s=>{const e=s.createBuffer(1,1,44100),t=s.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},vf=s=>{const e=s.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},hP=s=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(s)}finally{e.close(),t.close()}},fP=s=>{s.start=(e=>(t=0,r=0,o)=>{const l=s.buffer,c=l===null?r:Math.min(l.duration,r);l!==null&&c>l.duration-.5/s.context.sampleRate?e.call(s,t,0,0):e.call(s,t,c,o)})(s.start)},u_=(s,e)=>{const t=e.createGain();s.connect(t);const r=(o=>()=>{o.call(s,t),s.removeEventListener("ended",r)})(s.disconnect);s.addEventListener("ended",r),Wi(s,t),s.stop=(o=>{let l=!1;return(c=0)=>{if(l)try{o.call(s,c)}catch{t.gain.setValueAtTime(0,c)}else o.call(s,c),l=!0}})(s.stop)},$i=(s,e)=>t=>{const r={value:s};return Object.defineProperties(t,{currentTarget:r,target:r}),typeof e=="function"?e.call(s,t):e.handleEvent.call(s,t)},pP=IC(Os),mP=zC(Os),gP=Q1(Tc),d_=new WeakMap,vP=gk(d_),Ln=P1(new Map,new WeakMap),Xn=tP(),h_=qk(Ln,Zn),yf=mk(Vt),kt=BE(Vt,yf,Ps),yP=$C(h_,et,kt),Ze=_k(bc),_r=_E(Xn),Ye=Lk(_r),f_=new WeakMap,p_=lk($i),ca=Kk(Xn),_f=Mk(ca),wf=Ok(Xn),m_=Ik(Xn),Zo=Qk(Xn),ht=g1(DC(jy),BC(pP,mP,lc,gP,cc,Vt,vP,na,et,Os,mr,Ps,$l),Ln,Ek(Ih,cc,Vt,et,Xo,mr),Zn,Cc,zt,Y1(lc,Ih,Vt,et,Xo,Ze,mr,Ye),tk(f_,Vt,Rn),p_,Ze,_f,wf,m_,Ye,Zo),_P=WC(ht,yP,Zn,h_,Ze,Ye),xf=new WeakSet,Ov=Hk(Xn),g_=U1(new Uint32Array(1)),Sf=nP(g_,Zn),bf=rP(g_),v_=HC(xf,Ln,zt,Ov,_r,YE(Ov),Sf,bf),kc=UC(Xt),y_=zE(yf,sa,Ps),Qn=D1(y_),qi=Xk(kc,Ln,cP,uP,dP,gf,c_,vf,fP,sP(la),u_),Jn=VE(vk(sa),y_),wP=KC(Qn,qi,et,Jn,kt),Fn=v1(LC(Gy),f_,uf,y1,PC,AC,NC,RC,MC,Rh,zy,ca,l_),xP=XC(ht,wP,Fn,St,qi,Ze,Ye,$i),SP=i1(ht,o1,Zn,St,Zk(Xt,la),Ze,Ye,kt),bP=E1(Qn,r_,et,Jn,kt),Is=GE(d_),TP=k1(ht,Fn,bP,Cc,r_,Ze,Ye,Is),es=Wk(Os,wf),CP=iP(St,es),ts=iE(ca,CP),kP=R1(ts,et,kt),EP=N1(ht,kP,ts,Ze,Ye),PP=I1(oa,et,kt),AP=O1(ht,PP,oa,Ze,Ye,aP),NP=lE(kc,qi,Xt,es),Hi=aE(kc,Ln,NP,gf,vf),RP=z1(Qn,Hi,et,Jn,kt),MP=B1(ht,Fn,RP,Hi,Ze,Ye,$i),__=cE(zt,la),OP=W1(__,et,kt),IP=G1(ht,OP,__,Ze,Ye,Is),DP=Z1(Qn,s_,et,Jn,kt),LP=K1(ht,Fn,DP,s_,Ze,Ye,Is),w_=uE(zt),FP=ik(Qn,w_,et,Jn,kt),VP=sk(ht,Fn,FP,w_,zt,Ze,Ye,Is),BP=fk(Qn,Xt,et,Jn,kt),zP=hk(ht,Fn,BP,Xt,Ze,Ye),UP=pE(Cc,St,aa,zt),Ec=UE(Ln,Xt,aa,KE(Xt,_r)),jP=kk(qi,et,_r,kt,Ec),GP=dE(UP),WP=Tk(ht,GP,jP,Ze,Ye,Is),$P=a1(Fn,ts,Hi,aa,zt,o_,Ye,la),x_=new WeakMap,qP=Gk(SP,$P,p_,Ye,x_,$i),S_=wE(kc,Ln,gf,c_,vf,u_),HP=ME(Qn,S_,et,Jn,kt),YP=RE(ht,Fn,S_,HP,Ze,Ye,$i),b_=F1(qi),XP=EE(b_,St,Xt,a_,es),Pc=kE(b_,St,XP,a_,es,ca,la),KP=SE(lc,St,ts,Xt,aa,Pc,zt,cc,o_,es),T_=xE(KP),ZP=DE(Qn,ts,Hi,Xt,T_,et,_r,Jn,kt,Ec),QP=IE(ht,Fn,T_,ZP,Ze,Ye,Is),JP=bE(Zn),eA=FE(JP,Ze,new WeakSet,lP),tA=CE(ts,oa,Xt,Pc,zt,es),C_=TE(tA,zt),nA=HE(Qn,C_,et,Jn,kt),rA=qE(ht,Fn,C_,nA,Ze,Ye),sA=eP(Pc,et,kt),iA=JE(ht,St,Pc,sA,Ze,Ye,Is),k_=Fk(Xn),Tf=ck(Xn),E_=new WeakMap,oA=wk(E_,_r),aA=k_?VC(Ln,zt,ak(Xn),Tf,uk(OC),Ze,oA,Ye,Zo,new WeakMap,new WeakMap,XE(Zo,_r),Xn):void 0,lA=Dk(_f,Ye),cA=H1(xf,Ln,q1,ok,new WeakSet,Ze,lA,oc,Ko,Sf,bf),P_=T1(aA,_P,v_,xP,TP,EP,AP,MP,IP,cA,LP,VP,zP,WP,qP,YP,QP,eA,rA,iA),uA=Vk(ht,mE,Ze,Ye),dA=zk(ht,gE,Ze,Ye),hA=Uk(ht,vE,Ze,Ye),fA=yE(St,Ye),pA=jk(ht,fA,Ze),mA=s1(P_,St,zt,ZE,uA,dA,hA,pA,ca),Cf=xk(x_),gA=jC(Cf),A_=L1(Zn),vA=J1(Cf),N_=nk(Zn),R_=new WeakMap,yA=pk(R_,Rn),_A=sE(A_,Zn,St,ts,oa,Hi,Xt,aa,zt,N_,Tf,yA,es),wA=eE(St,_A,Xt,zt,es),xA=b1(Qn,A_,qi,ts,oa,Hi,Xt,vA,N_,Tf,et,Zo,_r,Jn,kt,Ec),SA=yk(E_),bA=jE(R_),Iv=k_?w1(gA,ht,Fn,xA,wA,Vt,SA,Ze,Ye,Zo,oP,bA,hP,$i):void 0,TA=$1(zt,_r),CA=WE(xf,Ln,yf,Cf,Ec,oc,Sf,bf),kA=AE(P_,Ln,St,TA,CA),EA=Pk(bc,_f),PA=Ak(cf,wf),AA=Nk(uf,m_),NA=Rk(bc,Ye);function gn(s){return s===void 0}function Ve(s){return s!==void 0}function RA(s){return typeof s=="function"}function Zr(s){return typeof s=="number"}function Cs(s){return Object.prototype.toString.call(s)==="[object Object]"&&s.constructor===Object}function MA(s){return typeof s=="boolean"}function sn(s){return Array.isArray(s)}function gr(s){return typeof s=="string"}function Il(s){return gr(s)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(s)}function Ne(s,e){if(!s)throw new Error(e)}function mn(s,e,t=1/0){if(!(e<=s&&s<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${s}`)}function M_(s){!s.isOffline&&s.state!=="running"&&Ac('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let O_=!1,Dv=!1;function Lv(s){O_=s}function OA(s){gn(s)&&O_&&!Dv&&(Dv=!0,Ac("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let I_=console;function IA(...s){I_.log(...s)}function Ac(...s){I_.warn(...s)}function DA(s){return new mA(s)}function LA(s,e,t){return new kA(s,e,t)}const tn=typeof self=="object"?self:null,FA=tn&&(tn.hasOwnProperty("AudioContext")||tn.hasOwnProperty("webkitAudioContext"));function VA(s,e,t){return Ne(Ve(Iv),"AudioWorkletNode only works in a secure context (https or localhost)"),new(s instanceof(tn==null?void 0:tn.BaseAudioContext)?tn==null?void 0:tn.AudioWorkletNode:Iv)(s,e,t)}var qn=function(){return qn=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},qn.apply(this,arguments)};function D_(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(s);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(s,r[o])&&(t[r[o]]=s[r[o]]);return t}function Vn(s,e,t,r){var o=arguments.length,l=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(s,e,t,r);else for(var u=s.length-1;u>=0;u--)(c=s[u])&&(l=(o<3?c(l):o>3?c(e,t,l):c(e,t))||l);return o>3&&l&&Object.defineProperty(e,t,l),l}function dt(s,e,t,r){function o(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function u(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?l(m.value):o(m.value).then(u,h)}f((r=r.apply(s,e||[])).next())})}function BA(s,e,t){if(t||arguments.length===2)for(var r=0,o=e.length,l;r<o;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return s.concat(l||Array.prototype.slice.call(e))}class zA{constructor(e,t,r,o){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(o||44100),.001),this.updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),r=new Worker(t);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function As(s){return AA(s)}function Yr(s){return PA(s)}function ql(s){return NA(s)}function pi(s){return EA(s)}function UA(s){return s instanceof v_}function jA(s,e){return s==="value"||As(e)||Yr(e)||UA(e)}function ks(s,...e){if(!e.length)return s;const t=e.shift();if(Cs(s)&&Cs(t))for(const r in t)jA(r,t[r])?s[r]=t[r]:Cs(t[r])?(s[r]||Object.assign(s,{[r]:{}}),ks(s[r],t[r])):Object.assign(s,{[r]:t[r]});return ks(s,...e)}function GA(s,e){return s.length===e.length&&s.every((t,r)=>e[r]===t)}function Se(s,e,t=[],r){const o={},l=Array.from(e);if(Cs(l[0])&&r&&!Reflect.has(l[0],r)&&(Object.keys(l[0]).some(u=>Reflect.has(s,u))||(ks(o,{[r]:l[0]}),t.splice(t.indexOf(r),1),l.shift())),l.length===1&&Cs(l[0]))ks(o,l[0]);else for(let c=0;c<t.length;c++)Ve(l[c])&&(o[t[c]]=l[c]);return ks(s,o)}function WA(s){return s.constructor.getDefaults()}function Ai(s,e){return gn(s)?e:s}function Bh(s,e){return e.forEach(t=>{Reflect.has(s,t)&&delete s[t]}),s}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class wr{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||tn&&this.toString()===tn.TONE_DEBUG_CLASS)&&IA(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}wr.version=By;const kf=1e-6;function Di(s,e){return s>e+kf}function zh(s,e){return Di(s,e)||Pn(s,e)}function fc(s,e){return s+kf<e}function Pn(s,e){return Math.abs(s-e)<kf}function $A(s,e,t){return Math.max(Math.min(s,t),e)}class vn extends wr{constructor(){super(),this.name="Timeline",this._timeline=[];const e=Se(vn.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Ne(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];Ne(zh(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const r=this._search(e,t);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const r=this._search(e,t);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(Pn(this._timeline[t].time,e)){for(let r=t;r>=0&&Pn(this._timeline[r].time,e);r--)t=r;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&zh(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let r=0;const o=this._timeline.length;let l=o;if(o>0&&this._timeline[o-1][t]<=e)return o-1;for(;r<l;){let c=Math.floor(r+(l-r)/2);const u=this._timeline[c],h=this._timeline[c+1];if(Pn(u[t],e)){for(let f=c;f<this._timeline.length;f++){const m=this._timeline[f];if(Pn(m[t],e))c=f;else break}return c}else{if(fc(u[t],e)&&Di(h[t],e))return c;Di(u[t],e)?l=c:r=c+1}}return-1}_iterate(e,t=0,r=this._timeline.length-1){this._timeline.slice(t,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const r=this._search(e);return r!==-1&&this._iterate(t,0,r),this}forEachAfter(e,t){const r=this._search(e);return this._iterate(t,r+1),this}forEachBetween(e,t,r){let o=this._search(e),l=this._search(t);return o!==-1&&l!==-1?(this._timeline[o].time!==e&&(o+=1),this._timeline[l].time===t&&(l-=1),this._iterate(r,o,l)):o===-1&&this._iterate(r,0,l),this}forEachFrom(e,t){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(t,r+1),this}forEachAtTime(e,t){const r=this._search(e);if(r!==-1&&Pn(this._timeline[r].time,e)){let o=r;for(let l=r;l>=0&&Pn(this._timeline[l].time,e);l--)o=l;this._iterate(l=>{t(l)},o,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const L_=[];function Nc(s){L_.push(s)}function qA(s){L_.forEach(e=>e(s))}const F_=[];function Rc(s){F_.push(s)}function HA(s){F_.forEach(e=>e(s))}class ua extends wr{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(o=>{gn(this._events)&&(this._events={}),this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(t)}),this}once(e,t){const r=(...o)=>{t(...o),this.off(e,r)};return this.on(e,r),this}off(e,t){return e.split(/\W+/).forEach(o=>{if(gn(this._events)&&(this._events={}),this._events.hasOwnProperty(o))if(gn(t))this._events[o]=[];else{const l=this._events[o];for(let c=l.length-1;c>=0;c--)l[c]===t&&l.splice(c,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let o=0,l=r.length;o<l;o++)r[o].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const r=Object.getOwnPropertyDescriptor(ua.prototype,t);Object.defineProperty(e.prototype,t,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class V_ extends ua{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class da extends V_{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new vn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const r=Se(da.getDefaults(),arguments,["context"]);r.context?(this._context=r.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=DA({latencyHint:r.latencyHint}),this._latencyHint=r.latencyHint),this._ticker=new zA(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(qA(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,r){return this._context.createBuffer(e,t,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,r){return this._context.createPeriodicWave(e,t,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Ne(pi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Ne(pi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Ne(pi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Ne(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Ne(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Ne(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Ne(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return VA(this.rawContext,e,t)}addAudioWorkletModule(e){return dt(this,void 0,void 0,function*(){Ne(Ve(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return dt(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return pi(this._context)?this._context.resume():Promise.resolve()}close(){return dt(this,void 0,void 0,function*(){pi(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&HA(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),r=t.getChannelData(0);for(let l=0;l<r.length;l++)r[l]=e;const o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=t,o.loop=!0,o.start(0),this._constants.set(e,o),o}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(e,t){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const r=++this._timeoutIds,o=()=>{const l=this.now();this._timeouts.add({callback:()=>{e(),o()},id:r,time:l+t})};return o(),r}}class YA extends V_{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return dt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Ge(s,e){sn(e)?e.forEach(t=>Ge(s,t)):Object.defineProperty(s,e,{enumerable:!0,writable:!1})}function B_(s,e){sn(e)?e.forEach(t=>B_(s,t)):Object.defineProperty(s,e,{writable:!0})}const He=()=>{};class Xe extends wr{constructor(){super(),this.name="ToneAudioBuffer",this.onload=He;const e=Se(Xe.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,gr(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:He,onload:He,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:An().sampleRate}set(e){return e instanceof Xe?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return dt(this,void 0,void 0,function*(){const t=Xe.load(e).then(r=>{this.set(r),this.onload(this)});Xe.downloads.push(t);try{yield t}finally{const r=Xe.downloads.indexOf(t);Xe.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=sn(e)&&e[0].length>0,r=t?e.length:1,o=t?e[0].length:e.length,l=An(),c=l.createBuffer(r,o,l.sampleRate),u=!t&&r===1?[e]:e;for(let h=0;h<r;h++)c.copyToChannel(u[h],h);return this._buffer=c,this}toMono(e){if(Zr(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const r=this.numberOfChannels;for(let o=0;o<r;o++){const l=this.toArray(o);for(let c=0;c<l.length;c++)t[c]+=l[c]}t=t.map(o=>o/r),this.fromArray(t)}return this}toArray(e){if(Zr(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let r=0;r<this.numberOfChannels;r++)t[r]=this.getChannelData(r);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){Ne(this.loaded,"Buffer is not loaded");const r=Math.floor(e*this.sampleRate),o=Math.floor(t*this.sampleRate);Ne(r<o,"The start time must be less than the end time");const l=o-r,c=An().createBuffer(this.numberOfChannels,l,this.sampleRate);for(let u=0;u<this.numberOfChannels;u++)c.copyToChannel(this.getChannelData(u).subarray(r,o),u);return new Xe(c)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Xe().fromArray(e)}static fromUrl(e){return dt(this,void 0,void 0,function*(){return yield new Xe().load(e)})}static load(e){return dt(this,void 0,void 0,function*(){const t=Xe.baseUrl===""||Xe.baseUrl.endsWith("/")?Xe.baseUrl:Xe.baseUrl+"/",r=yield fetch(t+e);if(!r.ok)throw new Error(`could not load url: ${e}`);const o=yield r.arrayBuffer();return yield An().decodeAudioData(o)})}static supportsType(e){const t=e.split("."),r=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return dt(this,void 0,void 0,function*(){for(yield Promise.resolve();Xe.downloads.length;)yield Xe.downloads[0]})}}Xe.baseUrl="";Xe.downloads=[];class Mc extends da{constructor(){super({clockSource:"offline",context:ql(arguments[0])?arguments[0]:LA(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:ql(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=ql(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return dt(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const r=Math.floor(this.sampleRate/128);e&&t%r===0&&(yield new Promise(o=>setTimeout(o,1)))}})}render(){return dt(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Xe(t)})}close(){return Promise.resolve()}}const z_=new YA;let Ss=z_;function An(){return Ss===z_&&FA&&XA(new da),Ss}function XA(s,e=!1){e&&Ss.dispose(),pi(s)?Ss=new da(s):ql(s)?Ss=new Mc(s):Ss=s}function KA(){return Ss.resume()}if(tn&&!tn.TONE_SILENCE_LOGGING){const e=` * Tone.js v${By} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function ZA(s){return Math.pow(10,s/20)}function QA(s){return 20*(Math.log(s)/Math.LN10)}function U_(s){return Math.pow(2,s/12)}let Oc=440;function JA(){return Oc}function eN(s){Oc=s}function bs(s){return Math.round(j_(s))}function j_(s){return 69+12*Math.log2(s/Oc)}function G_(s){return Oc*Math.pow(2,(s-69)/12)}class Ef extends wr{constructor(e,t,r){super(),this.defaultUnits="s",this._val=t,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const r=parseInt(e,10),o=t==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*o:this._beatsToUnits(4/r)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,r)=>{let o=0;return e&&e!=="0"&&(o+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(o+=this._beatsToUnits(parseFloat(t))),r&&r!=="0"&&(o+=this._beatsToUnits(parseFloat(r)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Ef&&this.fromType(this._val),gn(this._val))return this._noArg();if(gr(this._val)&&gn(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Cs(this._val)){let e=0;for(const t in this._val)if(Ve(this._val[t])){const r=this._val[t],o=new this.constructor(this.context,t).valueOf()*r;e+=o}return e}if(Ve(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return gr(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Nn extends Ef{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new Nn(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const r=new this.constructor(this.context,e).valueOf(),o=this.valueOf(),u=Math.round(o/r)*r-o;return o+u*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let l=1;l<9;l++){const c=Math.pow(2,l);t.push(c+"n."),t.push(c+"n"),t.push(c+"t")}t.push("0");let r=t[0],o=new Nn(this.context,t[0]).toSeconds();return t.forEach(l=>{const c=new Nn(this.context,l).toSeconds();Math.abs(c-e)<Math.abs(o-e)&&(r=l,o=c)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const r=Math.floor(t/this._getTimeSignature());let o=t%1*4;t=Math.floor(t)%this._getTimeSignature();const l=o.toString();return l.length>3&&(o=parseFloat(parseFloat(l).toFixed(3))),[r,t,o].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return bs(this.toFrequency())}_now(){return this.context.now()}}class rn extends Nn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return JA()}static set A4(e){eN(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:rn.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const o=tN[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?o:rn.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,r){let o=1;return e&&e!=="0"&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(o*=this._beatsToUnits(parseFloat(t))),r&&r!=="0"&&(o*=this._beatsToUnits(parseFloat(r)/4)),o}}})}transpose(e){return new rn(this.context,this.valueOf()*U_(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return bs(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/rn.A4);let r=Math.round(12*t)+57;const o=Math.floor(r/12);return o<0&&(r+=-12*o),nN[r%12]+o.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return G_(e)}static ftom(e){return bs(e)}}const tN={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},nN=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Uo extends Nn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Ht extends wr{constructor(){super();const e=Se(Ht.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:An()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return OA(e),new Nn(this.context,e).toSeconds()}toFrequency(e){return new rn(this.context,e).toFrequency()}toTicks(e){return new Uo(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(r=>{gn(e[r])&&delete t[r]}),t}get(){const e=WA(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const r=this[t];Ve(r)&&Ve(r.value)&&Ve(r.setValueAtTime)?e[t]=r.value:r instanceof Ht?e[t]=r._getPartialProperties(e[t]):sn(r)||Zr(r)||gr(r)||MA(r)?e[t]=r:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Ve(this[t])&&(this[t]&&Ve(this[t].value)&&Ve(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof Ht?this[t].set(e[t]):this[t]=e[t])}),this}}class Pf extends vn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,r){return mn(t,0),this.add(Object.assign({},r,{state:e,time:t})),this}getLastState(e,t){const r=this._search(t);for(let o=r;o>=0;o--){const l=this._timeline[o];if(l.state===e)return l}}getNextState(e,t){const r=this._search(t);if(r!==-1)for(let o=r;o<this._timeline.length;o++){const l=this._timeline[o];if(l.state===e)return l}}}class qe extends Ht{constructor(){const e=Se(qe.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Ne(Ve(e.param)&&(As(e.param)||e.param instanceof qe),"param must be an AudioParam");!As(e.param);)e.param=e.param._param;this._swappable=Ve(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new vn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Ve(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ht.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Ve(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Ve(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Ve(this.maxValue)&&Ve(this.minValue)&&mn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?ZA(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?QA(e):e}setValueAtTime(e,t){const r=this.toSeconds(t),o=this._fromType(e);return Ne(isFinite(o)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(o),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,r),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),r=this._events.getAfter(t),o=this._events.get(t);let l=this._initialValue;if(o===null)l=this._initialValue;else if(o.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const c=this._events.getBefore(o.time);let u;c===null?u=this._initialValue:u=c.value,o.type==="setTargetAtTime"&&(l=this._exponentialApproach(o.time,u,o.value,o.constant,t))}else if(r===null)l=o.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let c=o.value;if(o.type==="setTargetAtTime"){const u=this._events.getBefore(o.time);u===null?c=this._initialValue:c=u.value}r.type==="linearRampToValueAtTime"?l=this._linearInterpolate(o.time,c,r.time,r.value,t):l=this._exponentialInterpolate(o.time,c,r.time,r.value,t)}else l=o.value;return this._toType(l)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const r=this._fromType(e),o=this.toSeconds(t);return Ne(isFinite(r)&&isFinite(o),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this._events.add({time:o,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,o),this._param.linearRampToValueAtTime(r,o),this}exponentialRampToValueAtTime(e,t){let r=this._fromType(e);r=Pn(r,0)?this._minOutput:r,this._assertRange(r);const o=this.toSeconds(t);return Ne(isFinite(r)&&isFinite(o),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:o,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,o),this._param.exponentialRampToValueAtTime(r,o),this}exponentialRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(t)),this}linearRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(t)),this}targetRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,t),this}exponentialApproachValueAtTime(e,t,r){t=this.toSeconds(t),r=this.toSeconds(r);const o=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,t,o),this.cancelAndHoldAtTime(t+r*.9),this.linearRampToValueAtTime(e,t+r),this}setTargetAtTime(e,t,r){const o=this._fromType(e);Ne(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const l=this.toSeconds(t);return this._assertRange(o),Ne(isFinite(o)&&isFinite(l),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:r,time:l,type:"setTargetAtTime",value:o}),this.log(this.units,"setTargetAtTime",e,l,r),this._param.setTargetAtTime(o,l,r),this}setValueCurveAtTime(e,t,r,o=1){r=this.toSeconds(r),t=this.toSeconds(t);const l=this._fromType(e[0])*o;this.setValueAtTime(this._toType(l),t);const c=r/(e.length-1);for(let u=1;u<e.length;u++){const h=this._fromType(e[u])*o;this.linearRampToValueAtTime(this._toType(h),t+u*c)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return Ne(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),r=this._fromType(this.getValueAtTime(t));Ne(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+r);const o=this._events.get(t),l=this._events.getAfter(t);return o&&Pn(o.time,t)?l?(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):l&&(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time),l.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),t):l.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),t)),this._events.add({time:t,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,t),this}rampTo(e,t=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,r):this.linearRampTo(e,t,r),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const r=this._events.get(t);if(r&&r.type==="setTargetAtTime"){const o=this._events.getAfter(r.time),l=o?o.time:t+2,c=(l-t)/10;for(let u=t;u<l;u+=c)e.linearRampToValueAtTime(this.getValueAtTime(u),u)}return this._events.forEachAfter(this.context.currentTime,o=>{o.type==="cancelScheduledValues"?e.cancelScheduledValues(o.time):o.type==="setTargetAtTime"?e.setTargetAtTime(o.value,o.time,o.constant):e[o.type](o.value,o.time)}),this}setParam(e){Ne(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,r,o,l){return r+(t-r)*Math.exp(-(l-e)/o)}_linearInterpolate(e,t,r,o,l){return t+(o-t)*((l-e)/(r-e))}_exponentialInterpolate(e,t,r,o,l){return t*Math.pow(o/t,(l-e)/(r-e))}}class Ee extends Ht{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Ve(this.input)?As(this.input)||this.input instanceof qe?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ve(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Ve(e)&&(e instanceof Ee||Yr(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Ne(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,r=0){return Mn(this,e,t,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Ac("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,r=0){return W_(this,e,t,r),this}chain(...e){return Li(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Ve(this.input)&&(this.input instanceof Ee?this.input.dispose():Yr(this.input)&&this.input.disconnect()),Ve(this.output)&&(this.output instanceof Ee?this.output.dispose():Yr(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Li(...s){const e=s.shift();s.reduce((t,r)=>(t instanceof Ee?t.connect(r):Yr(t)&&Mn(t,r),r),e)}function Mn(s,e,t=0,r=0){for(Ne(Ve(s),"Cannot connect from undefined node"),Ne(Ve(e),"Cannot connect to undefined node"),(e instanceof Ee||Yr(e))&&Ne(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Ne(s.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof Ee||e instanceof qe;)Ve(e.input)&&(e=e.input);for(;s instanceof Ee;)Ve(s.output)&&(s=s.output);As(e)?s.connect(e,t):s.connect(e,t,r)}function W_(s,e,t=0,r=0){if(Ve(e))for(;e instanceof Ee;)e=e.input;for(;!Yr(s);)Ve(s.output)&&(s=s.output);As(e)?s.disconnect(e,t):Yr(e)?s.disconnect(e,t,r):s.disconnect()}class je extends Ee{constructor(){const e=Se(je.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new qe({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Ge(this,"gain")}static getDefaults(){return Object.assign(Ee.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Fi extends Ee{constructor(e){super(e),this.onended=He,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new je({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const r=this.toSeconds(t);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(Ee.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:He})}_startGain(e,t=1){Ne(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+r):this._gainNode.gain.exponentialApproachValueAtTime(t,e,r)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Ne(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==He&&(this.onended(this),this.onended=He,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Ne(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=He,this}}class Af extends Fi{constructor(){const e=Se(Af.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Mn(this._source,this._gainNode),this.offset=new qe({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Fi.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class tt extends Ee{constructor(){const e=Se(tt.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new Af({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Ee.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,r=0){return Ic(this,e,t,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,r){return this._param.exponentialRampTo(e,t,r),this}linearRampTo(e,t,r){return this._param.linearRampTo(e,t,r),this}targetRampTo(e,t,r){return this._param.targetRampTo(e,t,r),this}exponentialApproachValueAtTime(e,t,r){return this._param.exponentialApproachValueAtTime(e,t,r),this}setTargetAtTime(e,t,r){return this._param.setTargetAtTime(e,t,r),this}setValueCurveAtTime(e,t,r,o){return this._param.setValueCurveAtTime(e,t,r,o),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,r){return this._param.rampTo(e,t,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Ic(s,e,t,r){(e instanceof qe||As(e)||e instanceof tt&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof tt&&(e.overridden=!0)),Mn(s,e,t,r)}class Nf extends qe{constructor(){const e=Se(Nf.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new vn(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(qe.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,r){t=this.toSeconds(t),this.setRampPoint(t);const o=this._fromType(e),l=this._events.get(t),c=Math.round(Math.max(1/r,1));for(let u=0;u<=c;u++){const h=r*u+t,f=this._exponentialApproach(l.time,l.value,o,r,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}setValueAtTime(e,t){const r=this.toSeconds(t);super.setValueAtTime(e,t);const o=this._events.get(r),l=this._events.previousEvent(o),c=this._getTicksUntilEvent(l,r);return o.ticks=Math.max(c,0),this}linearRampToValueAtTime(e,t){const r=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const o=this._events.get(r),l=this._events.previousEvent(o),c=this._getTicksUntilEvent(l,r);return o.ticks=Math.max(c,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const r=this._fromType(e),o=this._events.get(t),l=Math.round(Math.max((t-o.time)*10,1)),c=(t-o.time)/l;for(let u=0;u<=l;u++){const h=c*u+o.time,f=this._exponentialInterpolate(o.time,o.value,t,r,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(gn(e.ticks)){const c=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(c,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let o=this._fromType(this.getValueAtTime(t));const l=this._events.get(t);return l&&l.time===t&&l.type==="setValueAtTime"&&(o=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(r+o)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),r=this._events.get(t);return Math.max(this._getTicksUntilEvent(r,t),0)}getDurationOfTicks(e,t){const r=this.toSeconds(t),o=this.getTicksAtTime(t);return this.getTimeOfTick(o+e)-r}getTimeOfTick(e){const t=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&r&&r.type==="linearRampToValueAtTime"&&t.value!==r.value){const o=this._fromType(this.getValueAtTime(t.time)),c=(this._fromType(this.getValueAtTime(r.time))-o)/(r.time-t.time),u=Math.sqrt(Math.pow(o,2)-2*c*(t.ticks-e)),h=(-o+u)/c,f=(-o-u)/c;return(h>0?h:f)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const r=this.toSeconds(t),o=this.toSeconds(e),l=this.getTicksAtTime(r);return this.getTicksAtTime(r+o)-l}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class Rf extends tt{constructor(){const e=Se(Rf.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new Nf({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(tt.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Mf extends Ht{constructor(){const e=Se(Mf.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Pf,this._tickOffset=new vn,this._ticksAtTime=new vn,this._secondsAtTime=new vn,this.frequency=new Rf({context:this.context,units:e.units,value:e.frequency}),Ge(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Ht.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),Ve(t)&&this.setTicksAtTime(t,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const r=this._state.get(t);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),r=this._state.getLastState("stopped",t),o=this._ticksAtTime.get(t),l={state:"paused",time:t};this._state.add(l);let c=o||r,u=o?o.ticks:0,h=null;return this._state.forEachBetween(c.time,t+this.sampleTime,f=>{let m=c.time;const g=this._tickOffset.get(f.time);g&&g.time>=c.time&&(u=g.ticks,m=g.time),c.state==="started"&&f.state!=="started"&&(u+=this.frequency.getTicksAtTime(f.time)-this.frequency.getTicksAtTime(m),f.time!==l.time&&(h={state:f.state,time:f.time,ticks:u})),c=f}),this._state.remove(l),h&&this._ticksAtTime.add(h),u}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),r=this.frequency.timeToTicks(e,t);this.setTicksAtTime(r,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);const o=this._secondsAtTime.get(e);let l=o||t,c=o?o.seconds:0,u=null;return this._state.forEachBetween(l.time,e+this.sampleTime,h=>{let f=l.time;const m=this._tickOffset.get(h.time);m&&m.time>=l.time&&(c=m.seconds,f=m.time),l.state==="started"&&h.state!=="started"&&(c+=h.time-f,h.time!==r.time&&(u={state:h.state,time:h.time,seconds:c})),l=h}),this._state.remove(r),u&&this._secondsAtTime.add(u),c}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const r=this._tickOffset.get(t),o=this._state.get(t),l=Math.max(r.time,o.time),c=this.frequency.getTicksAtTime(l)+e-r.ticks;return this.frequency.getTimeOfTick(c)}forEachTickBetween(e,t,r){let o=this._state.get(e);this._state.forEachBetween(e,t,c=>{o&&o.state==="started"&&c.state!=="started"&&this.forEachTickBetween(Math.max(o.time,e),c.time-this.sampleTime,r),o=c});let l=null;if(o&&o.state==="started"){const c=Math.max(o.time,e),u=this.frequency.getTicksAtTime(c),h=this.frequency.getTicksAtTime(o.time),f=u-h;let m=Math.ceil(f)-f;m=Pn(m,1)?0:m;let g=this.frequency.getTimeOfTick(u+m);for(;g<t;){try{r(g,Math.round(this.getTicksAtTime(g)))}catch(y){l=y;break}g+=this.frequency.getDurationOfTicks(1,g)}}if(l)throw l;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Dc extends Ht{constructor(){const e=Se(Dc.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=He,this._lastUpdate=0,this._state=new Pf("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new Mf({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ge(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Ht.getDefaults(),{callback:He,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){M_(this.context);const r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,t),r<this._lastUpdate&&this.emit("start",r,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const r=this.toSeconds(t),o=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(o+e,r)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,r=>{switch(r.state){case"started":const o=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,o);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,t,(r,o)=>{this.callback(r,o)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}ua.mixin(Dc);class Es extends Ee{constructor(){const e=Se(Es.getDefaults(),arguments,["delayTime","maxDelay"]);super(e),this.name="Delay";const t=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(t,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(t),this.delayTime=new qe({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),Ge(this,"delayTime")}static getDefaults(){return Object.assign(Ee.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Yi extends Ee{constructor(){const e=Se(Yi.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new je({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Ge(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(Ee.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Of extends Ee{constructor(){const e=Se(Of.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Yi({context:this.context}),this.output=new je({context:this.context}),this.volume=this.input.volume,Li(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Ee.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Li(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Nc(s=>{s.destination=new Of({context:s})});Rc(s=>{s.destination.dispose()});class rN extends Ee{constructor(){super(...arguments),this.name="Listener",this.positionX=new qe({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new qe({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new qe({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new qe({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new qe({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new qe({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new qe({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new qe({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new qe({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Ee.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Nc(s=>{s.listener=new rN({context:s})});Rc(s=>{s.listener.dispose()});class If extends wr{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=Se(If.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const r=e.urls[t];this.add(t,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:He,onload:He,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Ne(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,r=He,o=He){return gr(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Xe(this.baseUrl+t,r,o))):this._buffers.set(e.toString(),new Xe(t,r,o)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class pc extends rn{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return bs(super._frequencyToUnits(e))}_ticksToUnits(e){return bs(super._ticksToUnits(e))}_beatsToUnits(e){return bs(super._beatsToUnits(e))}_secondsToUnits(e){return bs(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return G_(this.toMidi())}transpose(e){return new pc(this.context,this.toMidi()+e)}}class vi extends Uo{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class sN extends Ht{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new vn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Nc(s=>{s.draw=new sN({context:s})});Rc(s=>{s.draw.dispose()});class iN extends wr{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Ne(Ve(e.time),"Events must have a time property"),Ne(Ve(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new oN(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const r of t)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let r,o=null;if(t>0)if(e.left.right===null)r=e.left,r.right=e.right,o=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,o=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,o=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,o=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),o&&this._rebalance(o)}e.dispose()}_rotateLeft(e){const t=e.parent,r=e.isLeftChild(),o=e.right;o&&(e.right=o.left,o.left=e),t!==null?r?t.left=o:t.right=o:this._setRoot(o)}_rotateRight(e){const t=e.parent,r=e.isLeftChild(),o=e.left;o&&(e.left=o.right,o.right=e),t!==null?r?t.left=o:t.right=o:this._setRoot(o)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let r=t[0];for(let o=1;o<t.length;o++)t[o].low>r.low&&(r=t[o]);return r.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(r=>t.push(r)),t.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const r=[];this._root.search(e,r),r.forEach(o=>{o.event&&t(o.event)})}return this}forEachFrom(e,t){if(this._root!==null){const r=[];this._root.searchAfter(e,r),r.forEach(o=>{o.event&&t(o.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class oN{constructor(e,t,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class aN extends wr{constructor(e){super(),this.name="TimelineValue",this._timeline=new vn({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Kn extends Ee{constructor(){super(Se(Kn.getDefaults(),arguments,["context"]))}connect(e,t=0,r=0){return Ic(this,e,t,r),this}}class Xi extends Kn{constructor(){const e=Se(Xi.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,sn(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):RA(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(tt.getDefaults(),{length:1024})}setMap(e,t=1024){const r=new Float32Array(t);for(let o=0,l=t;o<l;o++){const c=o/(l-1)*2-1;r[o]=e(c,o)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(r=>r.includes(e));Ne(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Df extends Kn{constructor(){const e=Se(Df.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Xi({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Kn.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Qr{constructor(e,t){this.id=Qr._eventId++,this._remainderTime=0;const r=Object.assign(Qr.getDefaults(),t);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=Math.floor(r.time),this._remainderTime=r.time-this.time}static getDefaults(){return{callback:He,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Qr._eventId=0;class Lf extends Qr{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(Lf.getDefaults(),t);this.duration=r.duration,this._interval=r.interval,this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Qr.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return fc(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new vi(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){fc(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new vi(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Di(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Lc extends Ht{constructor(){const e=Se(Lc.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new aN(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new vn,this._repeatedEvents=new iN,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new Dc({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Ge(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Ht.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const r=t%(this._swingTicks*2)/(this._swingTicks*2),o=Math.sin(r*Math.PI)*this._swingAmount;e+=new vi(this.context,this._swingTicks*2/3).toSeconds()*o}Lv(!0),this._timeline.forEachAtTime(t,r=>r.invoke(e)),Lv(!1)}schedule(e,t){const r=new Qr(this,{callback:e,time:new Uo(this.context,t).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,t,r,o=1/0){const l=new Lf(this,{callback:e,duration:new Nn(this.context,o).toTicks(),interval:new Nn(this.context,t).toTicks(),time:new Uo(this.context,r).toTicks()});return this._addEvent(l,this._repeatedEvents)}scheduleOnce(e,t){const r=new Qr(this,{callback:e,once:!0,time:new Uo(this.context,t).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(t,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new vi(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let r;return Ve(t)&&(r=this.toTicks(t)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){sn(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Nn(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Nn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new vi(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new vi(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),r=this._clock.frequency.timeToTicks(e,t);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(t),o=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,t),l=t+o;this.emit("stop",l),this._clock.setTicksAtTime(e,l),this.emit("start",l,this._clock.getSecondsAtTime(l))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),r=this.getTicksAtTime(t),o=e-r%e;return this._clock.nextTickTime(o,t)}}syncSignal(e,t){const r=this.now();let o=this.bpm,l=1/(60/o.getValueAtTime(r)/this.PPQ),c=[];if(e.units==="time"){const h=.015625/l,f=new je(h),m=new Df(-1),g=new je(h);o.chain(f,m,g),o=g,l=1/l,c=[f,m,g]}t||(e.getValueAtTime(r)!==0?t=e.getValueAtTime(r)/l:t=0);const u=new je(t);return o.connect(u),u.connect(e._param),c.push(u),this._syncedSignals.push({initial:e.value,nodes:c,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const r=this._syncedSignals[t];r.signal===e&&(r.nodes.forEach(o=>o.dispose()),r.signal.value=r.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),B_(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}ua.mixin(Lc);Nc(s=>{s.transport=new Lc({context:s})});Rc(s=>{s.transport.dispose()});class Bt extends Ee{constructor(e){super(e),this.input=void 0,this._state=new Pf("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=He,this._syncedStop=He,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Yi({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Ge(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(Ee.getDefaults(),{mute:!1,onstop:He,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,r){let o=gn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(o=this._clampToCurrentTime(o),!this._synced&&this._state.getValueAtTime(o)==="started")Ne(Di(o,this._state.get(o).time),"Start time must be strictly greater than previous start time"),this._state.cancel(o),this._state.setStateAtTime("started",o),this.log("restart",o),this.restart(o,t,r);else if(this.log("start",o),this._state.setStateAtTime("started",o),this._synced){const l=this._state.get(o);l&&(l.offset=this.toSeconds(Ai(t,0)),l.duration=r?this.toSeconds(r):void 0);const c=this.context.transport.schedule(u=>{this._start(u,t,r)},o);this._scheduled.push(c),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>o&&this._syncedStart(this.now(),this.context.transport.seconds)}else M_(this.context),this._start(o,t,r);return this}stop(e){let t=gn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Ve(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const r=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(r)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Di(t,0)){const r=this._state.get(t);if(r&&r.state==="started"&&r.time!==t){const o=t-this.toSeconds(r.time);let l;r.duration&&(l=this.toSeconds(r.duration)-o),this._start(e,this.toSeconds(r.offset)+o,l)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=He,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class ha extends Fi{constructor(){const e=Se(ha.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Mn(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new qe({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Xe(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Fi.getDefaults(),{url:new Xe,loop:!1,loopEnd:0,loopStart:0,onload:He,onerror:He,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,r,o=1){Ne(this.buffer.loaded,"buffer is either not set or not loaded");const l=this.toSeconds(e);this._startGain(l,o),this.loop?t=Ai(t,this.loopStart):t=Ai(t,0);let c=Math.max(this.toSeconds(t),0);if(this.loop){const u=this.toSeconds(this.loopEnd)||this.buffer.duration,h=this.toSeconds(this.loopStart),f=u-h;zh(c,u)&&(c=(c-h)%f+h),Pn(c,this.buffer.duration)&&(c=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,fc(c,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(l,c)),Ve(r)){let u=this.toSeconds(r);u=Math.max(u,0),this.stop(l+u)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class mc extends Bt{constructor(){const e=Se(mc.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Bt.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(Ne(e in Fv,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const t=Fv[this._type];this._source=new ha({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const ci=44100*5,oh=2,ur={brown:null,pink:null,white:null},Fv={get brown(){if(!ur.brown){const s=[];for(let e=0;e<oh;e++){const t=new Float32Array(ci);s[e]=t;let r=0;for(let o=0;o<ci;o++){const l=Math.random()*2-1;t[o]=(r+.02*l)/1.02,r=t[o],t[o]*=3.5}}ur.brown=new Xe().fromArray(s)}return ur.brown},get pink(){if(!ur.pink){const s=[];for(let e=0;e<oh;e++){const t=new Float32Array(ci);s[e]=t;let r,o,l,c,u,h,f;r=o=l=c=u=h=f=0;for(let m=0;m<ci;m++){const g=Math.random()*2-1;r=.99886*r+g*.0555179,o=.99332*o+g*.0750759,l=.969*l+g*.153852,c=.8665*c+g*.3104856,u=.55*u+g*.5329522,h=-.7616*h-g*.016898,t[m]=r+o+l+c+u+h+f+g*.5362,t[m]*=.11,f=g*.115926}}ur.pink=new Xe().fromArray(s)}return ur.pink},get white(){if(!ur.white){const s=[];for(let e=0;e<oh;e++){const t=new Float32Array(ci);s[e]=t;for(let r=0;r<ci;r++)t[r]=Math.random()*2-1}ur.white=new Xe().fromArray(s)}return ur.white}};function Ds(s,e){return dt(this,void 0,void 0,function*(){const t=e/s.context.sampleRate,r=new Mc(1,t,s.context.sampleRate);return new s.constructor(Object.assign(s.get(),{frequency:2/t,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class Ff extends Fi{constructor(){const e=Se(Ff.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Mn(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new qe({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new qe({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Ge(this,["frequency","detune"])}static getDefaults(){return Object.assign(Fi.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class lt extends Bt{constructor(){const e=Se(lt.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new tt({context:this.context,units:"frequency",value:e.frequency}),Ge(this,"frequency"),this.detune=new tt({context:this.context,units:"cents",value:e.detune}),Ge(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Bt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),r=new Ff({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return lt._periodicWaveCache.find(t=>t.phase===this._phase&&GA(t.partials,this._partials));{const e=lt._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const r=this._getCachedPeriodicWave();if(Ve(r)){const{partials:o,wave:l}=r;this._wave=l,this._partials=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[o,l]=this._getRealImaginary(e,this._phase),c=this.context.createPeriodicWave(o,l);this._wave=c,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),lt._periodicWaveCache.push({imag:l,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:o,type:this._type,wave:this._wave}),lt._periodicWaveCache.length>100&&lt._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){mn(e,0);let t=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(t=r[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const o=new Float32Array(e);this._partials.forEach((l,c)=>o[c]=l),this._partials=Array.from(o),this.type=this._type}}_getRealImaginary(e,t){let o=2048;const l=new Float32Array(o),c=new Float32Array(o);let u=1;if(e==="custom"){if(u=this._partials.length+1,this._partialCount=this._partials.length,o=u,this._partials.length===0)return[l,c]}else{const h=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);h?(u=parseInt(h[2],10)+1,this._partialCount=parseInt(h[2],10),e=h[1],u=Math.max(u,2),o=u):this._partialCount=0,this._partials=[]}for(let h=1;h<o;++h){const f=2/(h*Math.PI);let m;switch(e){case"sine":m=h<=u?1:0,this._partials[h-1]=m;break;case"square":m=h&1?2*f:0,this._partials[h-1]=m;break;case"sawtooth":m=f*(h&1?1:-1),this._partials[h-1]=m;break;case"triangle":h&1?m=2*(f*f)*(h-1>>1&1?-1:1):m=0,this._partials[h-1]=m;break;case"custom":m=this._partials[h-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}m!==0?(l[h]=-m*Math.sin(t*h),c[h]=m*Math.cos(t*h)):(l[h]=0,c[h]=0)}return[l,c]}_inverseFFT(e,t,r){let o=0;const l=e.length;for(let c=0;c<l;c++)o+=e[c]*Math.cos(c*r)+t[c]*Math.sin(c*r);return o}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let r=0;const o=Math.PI*2,l=32;for(let c=0;c<l;c++)r=Math.max(this._inverseFFT(e,t,c/l*o),r);return $A(-this._inverseFFT(e,t,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Ds(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}lt._periodicWaveCache=[];class $_ extends Kn{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Xi({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ns extends tt{constructor(){const e=Se(Ns.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new je({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(tt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Fc extends Bt{constructor(){const e=Se(Fc.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new $_({context:this.context}),this._modulationNode=new je({context:this.context}),this._carrier=new lt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new lt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ns({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ge(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(lt.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Ds(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Vc extends Bt{constructor(){const e=Se(Vc.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new je({context:this.context,gain:0}),this._carrier=new lt({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new tt({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new lt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ns({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Ns({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ge(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(lt.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Ds(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class fa extends Bt{constructor(){const e=Se(fa.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new je({context:this.context,gain:0}),this._thresh=new Xi({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new tt({context:this.context,units:"audioRange",value:e.width}),this._triangle=new lt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ge(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Bt.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Ds(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Bc extends Bt{constructor(){const e=Se(Bc.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new tt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new tt({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Ge(this,["frequency","detune"])}static getDefaults(){return Object.assign(lt.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,r=e/(this._oscillators.length-1);this._forEach((o,l)=>o.detune.value=t+r*l)}}get count(){return this._oscillators.length}set count(e){if(mn(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const r=new lt({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):He});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[t]=r}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,r)=>t.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Ds(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class zc extends Bt{constructor(){const e=Se(zc.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Ns({context:this.context,value:2}),this._pulse=new fa({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new lt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ge(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Bt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Ds(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Vv={am:Fc,fat:Bc,fm:Vc,oscillator:lt,pulse:fa,pwm:zc};class gc extends Bt{constructor(){const e=Se(gc.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new tt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new tt({context:this.context,units:"cents",value:e.detune}),Ge(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(lt.getDefaults(),Vc.getDefaults(),Fc.getDefaults(),Bc.getDefaults(),fa.getDefaults(),zc.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=Vv[e],r=this.now();if(this._oscillator){const o=this._oscillator;o.stop(r),this.context.setTimeout(()=>o.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof Vv[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Zr(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Zr(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&gr(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Ds(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Vf extends tt{constructor(){super(Se(Vf.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new je({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Li(this._constantSource,this._sum)}static getDefaults(){return Object.assign(tt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Bf extends Kn{constructor(){const e=Se(Bf.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new Ns({context:this.context,value:e.max-e.min}),this._add=this.output=new Vf({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Kn.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class zf extends Kn{constructor(){super(Se(zf.getDefaults(),arguments)),this.name="Zero",this._gain=new je({context:this.context}),this.output=this._gain,this.input=void 0,Mn(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),W_(this.context.getConstant(0),this._gain),this}}class vc extends Ee{constructor(){const e=Se(vc.getDefaults(),arguments,["frequency","min","max"]);super(e),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=qe.prototype._fromType,this._toType=qe.prototype._toType,this._is=qe.prototype._is,this._clampValue=qe.prototype._clampValue,this._oscillator=new lt(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new je({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new tt({context:this.context,units:"audioRange",value:0}),this._zeros=new zf({context:this.context}),this._a2g=new $_({context:this.context}),this._scaler=this.output=new Bf({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Ge(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(lt.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const t=this.min,r=this.max;this._units=e,this.min=t,this.max=r}get state(){return this._oscillator.state}connect(e,t,r){return(e instanceof qe||e instanceof tt)&&(this.convert=e.convert,this.units=e.units),Ic(this,e,t,r),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function q_(s,e=1/0){const t=new WeakMap;return function(r,o){Reflect.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(l){mn(l,s,e),t.set(this,l)}})}}function xr(s,e=1/0){const t=new WeakMap;return function(r,o){Reflect.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(l){mn(this.toSeconds(l),s,e),t.set(this,l)}})}}class Uc extends Bt{constructor(){const e=Se(Uc.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Xe({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Bt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:He,onerror:He,playbackRate:1,reverse:!1})}load(e){return dt(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=He){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,r){return super.start(e,t,r),this}_start(e,t,r){this._loop?t=Ai(t,this._loopStart):t=Ai(t,0);const o=this.toSeconds(t),l=r;r=Ai(r,Math.max(this._buffer.duration-o,0));let c=this.toSeconds(r);c=c/this._playbackRate,e=this.toSeconds(e);const u=new ha({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+c),this._state.setStateAtTime("stopped",e+c,{implicitEnd:!0})),this._activeSources.add(u),this._loop&&gn(l)?u.start(e,o):u.start(e,o,c-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(t))}restart(e,t,r){return super.restart(e,t,r),this}_restart(e,t,r){var o;(o=[...this._activeSources].pop())===null||o===void 0||o.stop(e),this._start(e,t,r)}seek(e,t){const r=this.toSeconds(t);if(this._state.getValueAtTime(r)==="started"){const o=this.toSeconds(e);this._stop(r),this._start(r,o)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&mn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&mn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),r=this._state.getNextState("stopped",t);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(o=>o.cancelStop())),this._activeSources.forEach(o=>{o.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Vn([xr(0)],Uc.prototype,"fadeIn",void 0);Vn([xr(0)],Uc.prototype,"fadeOut",void 0);class lN extends Kn{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Xi({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ns extends Ee{constructor(){const e=Se(ns.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new tt({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(Ee.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(gr(e))return e;{let r;for(r in Dl)if(Dl[r][t]===e)return r;return e}}_setCurve(e,t,r){if(gr(r)&&Reflect.has(Dl,r)){const o=Dl[r];Cs(o)?e!=="_decayCurve"&&(this[e]=o[t]):this[e]=o}else if(sn(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let o=this.toSeconds(this.attack);const l=this.toSeconds(this.decay),c=this.getValueAtTime(e);if(c>0){const u=1/o;o=(1-c)/u}if(o<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,o,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,o,e);else{this._sig.cancelAndHoldAtTime(e);let u=this._attackCurve;for(let h=1;h<u.length;h++)if(u[h-1]<=c&&c<=u[h]){u=this._attackCurve.slice(h),u[0]=c;break}this._sig.setValueCurveAtTime(u,e,o,t)}if(l&&this.sustain<1){const u=t*this.sustain,h=e+o;this.log("decay",h),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(u,l+h):this._sig.exponentialApproachValueAtTime(u,h,l)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(Ne(sn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,r=1){return t=this.toSeconds(t),this.triggerAttack(t,r),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,r=0){return Ic(this,e,t,r),this}asArray(){return dt(this,arguments,void 0,function*(e=1024){const t=e/this.context.sampleRate,r=new Mc(1,t,this.context.sampleRate),o=this.toSeconds(this.attack)+this.toSeconds(this.decay),l=o+this.toSeconds(this.release),c=l*.1,u=l+c,h=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/u,decay:t*this.toSeconds(this.decay)/u,release:t*this.toSeconds(this.release)/u,context:r}));return h._sig.toDestination(),h.triggerAttackRelease(t*(o+c)/u,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Vn([xr(0)],ns.prototype,"attack",void 0);Vn([xr(0)],ns.prototype,"decay",void 0);Vn([q_(0,1)],ns.prototype,"sustain",void 0);Vn([xr(0)],ns.prototype,"release",void 0);const Dl=(()=>{let e,t;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/127*(Math.PI/2));const o=[],l=6.4;for(e=0;e<127;e++){t=e/127;const y=Math.sin(t*(Math.PI*2)*l-Math.PI/2)+1;o[e]=y/10+t*.83}o[127]=1;const c=[],u=5;for(e=0;e<128;e++)c[e]=Math.ceil(e/127*u)/u;const h=[];for(e=0;e<128;e++)t=e/127,h[e]=.5*(1-Math.cos(Math.PI*t));const f=[];for(e=0;e<128;e++){t=e/127;const y=Math.pow(t,3)*4+.2,x=Math.cos(y*Math.PI*2*t);f[e]=Math.abs(x*(1-t))}function m(y){const x=new Array(y.length);for(let w=0;w<y.length;w++)x[w]=1-y[w];return x}function g(y){return y.slice(0).reverse()}return{bounce:{In:m(f),Out:f},cosine:{In:r,Out:g(r)},exponential:"exponential",linear:"linear",ripple:{In:o,Out:m(o)},sine:{In:h,Out:m(h)},step:{In:c,Out:m(c)}}})();class Jr extends Ee{constructor(){const e=Se(Jr.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new Yi({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ge(this,"volume")}static getDefaults(){return Object.assign(Ee.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const r=this["_original_"+e]=this[e];this[e]=(...o)=>{const l=o[t],c=this.context.transport.schedule(u=>{o[t]=u,r.apply(this,o)},l);this._scheduledEvents.push(c)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,r,o){const l=this.toSeconds(r),c=this.toSeconds(t);return this.triggerAttack(e,l,o),this.triggerRelease(l+c),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Rs extends Jr{constructor(){const e=Se(Rs.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Jr.getDefaults(),{detune:0,onsilence:He,portamento:0})}triggerAttack(e,t,r=1){this.log("triggerAttack",e,t,r);const o=this.toSeconds(t);return this._triggerEnvelopeAttack(o,r),this.setNote(e,o),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const r=this.toSeconds(t),o=e instanceof rn?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const l=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(o,l,r)}else this.frequency.setValueAtTime(o,r);return this}}Vn([xr(0)],Rs.prototype,"portamento",void 0);class Uf extends ns{constructor(){super(Se(Uf.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new je({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Vi extends Rs{constructor(){const e=Se(Vi.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new gc(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Uf(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Ge(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Rs.getDefaults(),{envelope:Object.assign(Bh(ns.getDefaults(),Object.keys(Ee.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Bh(gc.getDefaults(),[...Object.keys(Bt.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+o)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class jc extends Vi{constructor(){const e=Se(jc.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Ge(this,["oscillator","envelope"])}static getDefaults(){return ks(Rs.getDefaults(),Vi.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const r=this.toSeconds(t),o=this.toFrequency(e instanceof rn?e.toFrequency():e),l=o*this.octaves;return this.oscillator.frequency.setValueAtTime(l,r),this.oscillator.frequency.exponentialRampToValueAtTime(o,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Vn([q_(0)],jc.prototype,"octaves",void 0);Vn([xr(0)],jc.prototype,"pitchDecay",void 0);const H_=new Set;function jf(s){H_.add(s)}function Y_(s,e){const t=`registerProcessor("${s}", ${e})`;H_.add(t)}const cN=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;jf(cN);const uN=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;jf(uN);const dN=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;jf(dN);const hN="feedback-comb-filter",fN=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;Y_(hN,fN);class Gf extends Jr{constructor(){const e=Se(Gf.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=o=>this.releaseAll(o),Ne(!Zr(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const r=this._voices.indexOf(this._dummyVoice);this._voices.splice(r,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Jr.getDefaults(),{maxPolyphony:32,options:{},voice:Vi})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(r=>r.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return Ne(e instanceof Rs,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else Ac("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,r){e.forEach(o=>{const l=new pc(this.context,o).toMidi(),c=this._getNextAvailableVoice();c&&(c.triggerAttack(o,t,r),this._activeVoices.push({midi:l,voice:c,released:!1}),this.log("triggerAttack",o,t))})}_triggerRelease(e,t){e.forEach(r=>{const o=new pc(this.context,r).toMidi(),l=this._activeVoices.find(({midi:c,released:u})=>c===o&&!u);l&&(l.voice.triggerRelease(t),l.released=!0,this.log("triggerRelease",r,t))})}_scheduleEvent(e,t,r,o){Ne(!this.disposed,"Synth was already disposed"),r<=this.now()?e==="attack"?this._triggerAttack(t,r,o):this._triggerRelease(t,r):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,r,o)},r-this.now())}triggerAttack(e,t,r){Array.isArray(e)||(e=[e]);const o=this.toSeconds(t);return this._scheduleEvent("attack",e,o,r),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const r=this.toSeconds(t);return this._scheduleEvent("release",e,r),this}triggerAttackRelease(e,t,r,o){const l=this.toSeconds(r);if(this.triggerAttack(e,l,o),sn(t)){Ne(sn(e),"If the duration is an array, the notes must also be an array"),e=e;for(let c=0;c<e.length;c++){const u=t[Math.min(c,t.length-1)],h=this.toSeconds(u);Ne(h>0,"The duration must be greater than 0"),this.triggerRelease(e[c],l+h)}}else{const c=this.toSeconds(t);Ne(c>0,"The duration must be greater than 0"),this.triggerRelease(e,l+c)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const t=Bh(e,["onsilence","context"]);return this.options=ks(this.options,t),this._voices.forEach(r=>r.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(({voice:r})=>{r.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Gc extends Jr{constructor(){const e=Se(Gc.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(r=>{const o=parseInt(r,10);if(Ne(Il(r)||Zr(o)&&isFinite(o),`url key is neither a note or midi pitch: ${r}`),Il(r)){const l=new rn(this.context,r).toMidi();t[l]=e.urls[r]}else Zr(o)&&isFinite(o)&&(t[o]=e.urls[o])}),this._buffers=new If({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Jr.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:He,onerror:He,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,r=1){return this.log("triggerAttack",e,t,r),Array.isArray(e)||(e=[e]),e.forEach(o=>{const l=j_(new rn(this.context,o).toFrequency()),c=Math.round(l),u=l-c,h=this._findClosest(c),f=c-h,m=this._buffers.get(f),g=U_(h+u),y=new ha({url:m,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:g}).connect(this.output);y.start(t,0,m.duration/g,r),sn(this._activeSources.get(c))||this._activeSources.set(c,[]),this._activeSources.get(c).push(y),y.onended=()=>{if(this._activeSources&&this._activeSources.has(c)){const x=this._activeSources.get(c),w=x.indexOf(y);w!==-1&&x.splice(w,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(r=>{const o=new rn(this.context,r).toMidi();if(this._activeSources.has(o)&&this._activeSources.get(o).length){const l=this._activeSources.get(o);t=this.toSeconds(t),l.forEach(c=>{c.stop(t)}),this._activeSources.set(o,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,r,o=1){const l=this.toSeconds(r);return this.triggerAttack(e,l,o),sn(t)?(Ne(sn(e),"notes must be an array when duration is array"),e.forEach((c,u)=>{const h=t[Math.min(u,t.length-1)];this.triggerRelease(c,l+this.toSeconds(h))})):this.triggerRelease(e,l+this.toSeconds(t)),this}add(e,t,r){if(Ne(Il(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Il(e)){const o=new rn(this.context,e).toMidi();this._buffers.add(o,t,r)}else this._buffers.add(e,t,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}Vn([xr(0)],Gc.prototype,"attack",void 0);Vn([xr(0)],Gc.prototype,"release",void 0);class Wc extends Ee{constructor(){const e=Se(Wc.getDefaults(),arguments,["fade"]);super(e),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new lN({context:this.context}),this.a=new je({context:this.context,gain:0}),this.b=new je({context:this.context,gain:0}),this.output=new je({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new tt({context:this.context,units:"normalRange",value:e.fade}),Ge(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",Mn(this._split,this.a.gain,0),Mn(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(Ee.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Bv extends Ee{constructor(e){super(e),this.name="Effect",this._dryWet=new Wc({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new je({context:this.context}),this.effectReturn=new je({context:this.context}),this.input=new je({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Ge(this,"wet")}static getDefaults(){return Object.assign(Ee.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Wf extends Ee{constructor(){const e=Se(Wf.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new qe({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Ge(this,"pan")}static getDefaults(){return Object.assign(Ee.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const pN="bit-crusher",mN=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;Y_(pN,mN);class $c extends Ee{constructor(){const e=Se($c.getDefaults(),arguments,["channels"]);super(e),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(Ee.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class pa extends Ee{constructor(){const e=Se(pa.getDefaults(),arguments,["channels"]);super(e),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(Ee.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class zv extends Ee{constructor(e){super(e),this.name="StereoEffect",this.input=new je({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new Wc({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new $c({context:this.context,channels:2}),this._merge=new pa({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Ge(this,["wet"])}connectEffectLeft(...e){this._split.connect(e[0],0,0),Li(...e),Mn(e[e.length-1],this._merge,0,0)}connectEffectRight(...e){this._split.connect(e[0],1,0),Li(...e),Mn(e[e.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(Ee.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class Uh extends zv{constructor(e){super(e),this.feedback=new tt({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new je({context:this.context}),this._feedbackR=new je({context:this.context}),this._feedbackSplit=new $c({context:this.context,channels:2}),this._feedbackMerge=new pa({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Ge(this,["feedback"])}static getDefaults(){return Object.assign(zv.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class $f extends Uh{constructor(){const e=Se($f.getDefaults(),arguments,["frequency","delayTime","depth"]);super(e),this.name="Chorus",this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new vc({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new vc({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new Es({context:this.context}),this._delayNodeR=new Es({context:this.context}),this.frequency=this._lfoL.frequency,Ge(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=e.type,this.spread=e.spread}static getDefaults(){return Object.assign(Uh.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(e){this._depth=e;const t=this._delayTime*e;this._lfoL.min=Math.max(this._delayTime-t,0),this._lfoL.max=this._delayTime+t,this._lfoR.min=Math.max(this._delayTime-t,0),this._lfoR.max=this._delayTime+t}get delayTime(){return this._delayTime*1e3}set delayTime(e){this._delayTime=e/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Uv extends Uh{constructor(e){super(e),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),Ge(this,["feedback"])}}class qf extends Uv{constructor(){const e=Se(qf.getDefaults(),arguments,["delayTime","feedback"]);super(e),this.name="PingPongDelay",this._leftDelay=new Es({context:this.context,maxDelay:e.maxDelay}),this._rightDelay=new Es({context:this.context,maxDelay:e.maxDelay}),this._rightPreDelay=new Es({context:this.context,maxDelay:e.maxDelay}),this.delayTime=new tt({context:this.context,units:"time",value:e.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),Ge(this,["delayTime"])}static getDefaults(){return Object.assign(Uv.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class Hf extends Bv{constructor(){const e=Se(Hf.getDefaults(),arguments,["decay"]);super(e),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const t=this.toSeconds(e.decay);mn(t,.001),this._decay=t;const r=this.toSeconds(e.preDelay);mn(r,0),this._preDelay=r,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Bv.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),mn(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),mn(e,0),this._preDelay=e,this.generate()}generate(){return dt(this,void 0,void 0,function*(){const e=this.ready,t=new Mc(2,this._decay+this._preDelay,this.context.sampleRate),r=new mc({context:t}),o=new mc({context:t}),l=new pa({context:t});r.connect(l,0,0),o.connect(l,0,1);const c=new je({context:t}).toDestination();l.connect(c),r.start(0),o.start(0),c.gain.setValueAtTime(0,0),c.gain.setValueAtTime(1,this._preDelay),c.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const u=t.render();return this.ready=u.then(He),yield e,this._convolver.buffer=(yield u).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class pt extends Ee{constructor(){const e=Se(pt.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new je({context:this.context}),pt._allSolos.has(this.context)||pt._allSolos.set(this.context,new Set),pt._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(Ee.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),pt._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){pt._soloed.has(this.context)||pt._soloed.set(this.context,new Set),pt._soloed.get(this.context).add(this)}_removeSolo(){pt._soloed.has(this.context)&&pt._soloed.get(this.context).delete(this)}_isSoloed(){return pt._soloed.has(this.context)&&pt._soloed.get(this.context).has(this)}_noSolos(){return!pt._soloed.has(this.context)||pt._soloed.has(this.context)&&pt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),pt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}pt._allSolos=new Map;pt._soloed=new Map;class Yf extends Ee{constructor(){const e=Se(Yf.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new Wf({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Yi({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Ge(this,["pan","volume"])}static getDefaults(){return Object.assign(Ee.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class yi extends Ee{constructor(){const e=Se(yi.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new pt({solo:e.solo,context:this.context}),this._panVol=this.output=new Yf({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ge(this,["pan","volume"])}static getDefaults(){return Object.assign(Ee.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return yi.buses.has(e)||yi.buses.set(e,new je({context:this.context})),yi.buses.get(e)}send(e,t=0){const r=this._getBus(e),o=new je({context:this.context,units:"decibels",gain:t});return this.connect(o),o.connect(r),o}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}yi.buses=new Map;An().transport;An().destination;An().destination;An().listener;An().draw;An();class gN extends Error{constructor(e){super(`ToneJS initialization error: ${e}`)}}const _s=class _s{static async initialize(){if(console.log("Initializing ToneJS"),!_s.initialized)try{await KA(),_s.initialized=!0,console.log("ToneJS has been initialized")}catch(e){throw new gN(`Failed to start ToneJS: ${e}`)}}static isInitialized(){return _s.initialized}static reset(){_s.initialized=!1}};Y(_s,"initialized",!1);let Qo=_s;const qo=class qo{constructor(){Y(this,"lastPlayedNote",null);Y(this,"synth",null);this.initializeSynth()}async onMouseDown(e,t,r){Qo.isInitialized()||await Qo.initialize(),await this.playNoteAtPosition(e,t,r)}async onMouseMove(e,t,r){await this.playNoteAtPosition(e,t,r)}async onMouseUp(){this.reset()}reset(){this.lastPlayedNote=null}initializeSynth(){const e=new Gf(Vi,{envelope:{attack:.8,decay:0,sustain:1,release:1.2}});e.maxPolyphony=100;const t=new Hf({decay:2,wet:.9}),r=new $f(4,2.5,1),o=new qf("4n",.5).chain(new je(.7)),l=new je(1).toDestination();e.chain(r,t,l),e.chain(r,o,t,l),this.synth=e}async playNote(e){if(!this.synth){console.warn("Synth not initialized");return}this.synth.triggerAttackRelease(e.pitch,"32n",void 0,e.velocity)}async playNoteAtPosition(e,t,r){if(!r||e<0||e>1||t<0||t>1)return;const o=r.smokeDensity.getAtNormalized(e,t),l=Math.floor(t*(qo.PENTATONIC_SCALE.length-1)),c=qo.PENTATONIC_SCALE[l],u=Math.max(.5,Math.min(1,o*2)),h={pitch:c,velocity:u};this.areNotesEqual(this.lastPlayedNote,h)||(await this.playNote(h),this.lastPlayedNote=h)}areNotesEqual(e,t){return e?e.pitch===t.pitch&&e.velocity===t.velocity:!1}};Y(qo,"PENTATONIC_SCALE",[261.63,293.66,329.63,392,440,523.25,587.33,659.25,783.99,880,1046.5,1174.66,1318.51,1567.98,1760]);let jh=qo;const X_={samplingIntervalMs:100,textureSampleDownscale:4};class vN{constructor(e={}){Y(this,"simulation",null);Y(this,"canvas",null);Y(this,"canvasBounds",null);Y(this,"canvasBoundsUpdateTime",0);Y(this,"audioInitialized",!1);Y(this,"sampledTextureData",null);Y(this,"samplingInterval",null);Y(this,"isMouseDown",!1);Y(this,"audioPreset",null);Y(this,"config");Y(this,"boundHandlers",{});this.config={...X_,...e}}async initialize(e,t,r){console.log("Initializing Audio Visualization Mediator"),this.canvas=e,this.simulation=t,this.audioPreset=r??new jh,this.setupAudioInitialization()}startSampling(){this.samplingInterval||!this.simulation||(this.sampleTextures(),this.samplingInterval=window.setInterval(()=>this.sampleTextures(),this.config.samplingIntervalMs))}stopSampling(){this.samplingInterval&&(clearInterval(this.samplingInterval),this.samplingInterval=null)}async onMouseDown(e,t){if(!this.audioPreset)return;this.isMouseDown=!0;const r=this.getCoordinates(e,t);r&&(this.startSampling(),await this.audioPreset.onMouseDown(r.normalizedX,r.normalizedY,this.sampledTextureData))}async onMouseMove(e,t){if(!this.audioInitialized||!this.audioPreset||!this.isMouseDown)return;const r=this.getCoordinates(e,t);r&&await this.audioPreset.onMouseMove(r.normalizedX,r.normalizedY,this.sampledTextureData)}async onMouseUp(e,t){if(!this.audioInitialized||!this.audioPreset)return;this.isMouseDown=!1;const r=this.getCoordinates(e,t);r&&await this.audioPreset.onMouseUp(r.normalizedX,r.normalizedY,this.sampledTextureData)}onMouseLeave(){var e;this.isMouseDown=!1,this.stopSampling(),(e=this.audioPreset)==null||e.reset()}reset(){var e;this.stopSampling(),this.isMouseDown=!1,(e=this.audioPreset)==null||e.reset(),this.sampledTextureData=null}destroy(){this.stopSampling(),this.removeAudioInitializationListeners(),this.simulation=null,this.canvas=null,this.audioPreset=null,this.sampledTextureData=null,this.audioInitialized=!1}isAudioInitialized(){return this.audioInitialized}setAudioPreset(e){var t;(t=this.audioPreset)==null||t.reset(),this.audioPreset=e}async sampleTextures(){if(this.simulation)try{this.sampledTextureData=await this.simulation.sampleTextures(this.config.textureSampleDownscale)}catch(e){console.warn("Failed to sample textures:",e)}}getCoordinates(e,t){var g;const r=this.getCachedCanvasBounds();if(!r)return null;const o=e-r.left,l=t-r.top,c=o/r.width,u=1-l/r.height;if(c<0||c>1||u<0||u>1)return null;const h=(g=this.simulation)==null?void 0:g.getGridSize(),f=c*((h==null?void 0:h.width)??1),m=u*((h==null?void 0:h.height)??1);return{normalizedX:c,normalizedY:u,gridX:f,gridY:m}}getCachedCanvasBounds(){const e=performance.now();return(!this.canvasBounds||e-this.canvasBoundsUpdateTime>100)&&this.canvas&&(this.canvasBounds=this.canvas.getBoundingClientRect(),this.canvasBoundsUpdateTime=e),this.canvasBounds}setupAudioInitialization(){if(!this.canvas)throw new TC("Canvas not initialized");const e=async()=>{if(!this.audioInitialized)try{await Qo.initialize(),this.audioInitialized=!0,console.log("Audio engine initialized successfully"),this.removeAudioInitializationListeners()}catch(r){console.warn("Failed to initialize audio engine:",r)}};this.boundHandlers={click:e,mousedown:e,keydown:e};const t=this.canvas;t.addEventListener("click",this.boundHandlers.click,{once:!0}),t.addEventListener("mousedown",this.boundHandlers.mousedown,{once:!0}),t.addEventListener("keydown",this.boundHandlers.keydown,{once:!0}),document.addEventListener("keydown",this.boundHandlers.keydown,{once:!0})}removeAudioInitializationListeners(){if(!this.canvas)return;const e=this.canvas;e.removeEventListener("click",this.boundHandlers.click),e.removeEventListener("mousedown",this.boundHandlers.mousedown),e.removeEventListener("keydown",this.boundHandlers.keydown),document.removeEventListener("keydown",this.boundHandlers.keydown)}}function yN(s=X_){const e=k.useRef(null);k.useEffect(()=>(e.current=new vN(s),()=>{var m;(m=e.current)==null||m.destroy(),e.current=null}),[s]);const t=k.useCallback(async(m,g,y)=>{e.current&&await e.current.initialize(m,g,y)},[]),r=k.useCallback(async(m,g)=>{var y;await((y=e.current)==null?void 0:y.onMouseDown(m,g))},[]),o=k.useCallback(async(m,g)=>{var y;await((y=e.current)==null?void 0:y.onMouseMove(m,g))},[]),l=k.useCallback(async(m,g)=>{var y;await((y=e.current)==null?void 0:y.onMouseUp(m,g))},[]),c=k.useCallback(()=>{var m;(m=e.current)==null||m.onMouseLeave()},[]),u=k.useCallback(()=>{var m;(m=e.current)==null||m.reset()},[]),h=k.useCallback(()=>{var m;return((m=e.current)==null?void 0:m.isAudioInitialized())??!1},[]),f=k.useCallback(m=>{var g;(g=e.current)==null||g.setAudioPreset(m)},[]);return{initialize:t,handleMouseDown:r,handleMouseMove:o,handleMouseUp:l,handleMouseLeave:c,reset:u,isAudioInitialized:h,setAudioPreset:f}}function _N(s,e,t={}){const{serialize:r=JSON.stringify,deserialize:o=JSON.parse,storage:l="localStorage"}=t,c=l==="localStorage"?localStorage:sessionStorage,[u,h]=k.useState(()=>{try{const f=c.getItem(s);return f===null?e:o(f)}catch(f){return console.warn(`Failed to load persisted state for key "${s}":`,f),e}});return k.useEffect(()=>{try{c.setItem(s,r(u))}catch(f){console.warn(`Failed to persist state for key "${s}":`,f)}},[s,u,r,c]),[u,h]}function Yn(s,e,{checkForDefaultPrevented:t=!0}={}){return function(o){if(s==null||s(o),t===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function wN(s,e){const t=k.createContext(e),r=l=>{const{children:c,...u}=l,h=k.useMemo(()=>u,Object.values(u));return I.jsx(t.Provider,{value:h,children:c})};r.displayName=s+"Provider";function o(l){const c=k.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${l}\` must be used within \`${s}\``)}return[r,o]}function K_(s,e=[]){let t=[];function r(l,c){const u=k.createContext(c),h=t.length;t=[...t,c];const f=g=>{var T;const{scope:y,children:x,...w}=g,_=((T=y==null?void 0:y[s])==null?void 0:T[h])||u,b=k.useMemo(()=>w,Object.values(w));return I.jsx(_.Provider,{value:b,children:x})};f.displayName=l+"Provider";function m(g,y){var _;const x=((_=y==null?void 0:y[s])==null?void 0:_[h])||u,w=k.useContext(x);if(w)return w;if(c!==void 0)return c;throw new Error(`\`${g}\` must be used within \`${l}\``)}return[f,m]}const o=()=>{const l=t.map(c=>k.createContext(c));return function(u){const h=(u==null?void 0:u[s])||l;return k.useMemo(()=>({[`__scope${s}`]:{...u,[s]:h}}),[u,h])}};return o.scopeName=s,[r,xN(o,...e)]}function xN(...s){const e=s[0];if(s.length===1)return e;const t=()=>{const r=s.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const c=r.reduce((u,{useScope:h,scopeName:f})=>{const g=h(l)[`__scope${f}`];return{...u,...g}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var Bi=globalThis!=null&&globalThis.document?k.useLayoutEffect:()=>{},SN=ty[" useId ".trim().toString()]||(()=>{}),bN=0;function ah(s){const[e,t]=k.useState(SN());return Bi(()=>{t(r=>r??String(bN++))},[s]),s||(e?`radix-${e}`:"")}var TN=ty[" useInsertionEffect ".trim().toString()]||Bi;function Z_({prop:s,defaultProp:e,onChange:t=()=>{},caller:r}){const[o,l,c]=CN({defaultProp:e,onChange:t}),u=s!==void 0,h=u?s:o;{const m=k.useRef(s!==void 0);k.useEffect(()=>{const g=m.current;g!==u&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=u},[u,r])}const f=k.useCallback(m=>{var g;if(u){const y=kN(m)?m(s):m;y!==s&&((g=c.current)==null||g.call(c,y))}else l(m)},[u,s,l,c]);return[h,f]}function CN({defaultProp:s,onChange:e}){const[t,r]=k.useState(s),o=k.useRef(t),l=k.useRef(e);return TN(()=>{l.current=e},[e]),k.useEffect(()=>{var c;o.current!==t&&((c=l.current)==null||c.call(l,t),o.current=t)},[t,o]),[t,r,l]}function kN(s){return typeof s=="function"}var EN=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],yn=EN.reduce((s,e)=>{const t=ef(`Primitive.${e}`),r=k.forwardRef((o,l)=>{const{asChild:c,...u}=o,h=c?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),I.jsx(h,{...u,ref:l})});return r.displayName=`Primitive.${e}`,{...s,[e]:r}},{});function PN(s,e){s&&Zh.flushSync(()=>s.dispatchEvent(e))}function Jo(s){const e=k.useRef(s);return k.useEffect(()=>{e.current=s}),k.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function AN(s,e=globalThis==null?void 0:globalThis.document){const t=Jo(s);k.useEffect(()=>{const r=o=>{o.key==="Escape"&&t(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var NN="DismissableLayer",Gh="dismissableLayer.update",RN="dismissableLayer.pointerDownOutside",MN="dismissableLayer.focusOutside",jv,Q_=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),J_=k.forwardRef((s,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:l,onInteractOutside:c,onDismiss:u,...h}=s,f=k.useContext(Q_),[m,g]=k.useState(null),y=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=k.useState({}),w=vr(e,R=>g(R)),_=Array.from(f.layers),[b]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),T=_.indexOf(b),M=m?_.indexOf(m):-1,L=f.layersWithOutsidePointerEventsDisabled.size>0,V=M>=T,E=DN(R=>{const C=R.target,O=[...f.branches].some(U=>U.contains(C));!V||O||(o==null||o(R),c==null||c(R),R.defaultPrevented||u==null||u())},y),P=LN(R=>{const C=R.target;[...f.branches].some(U=>U.contains(C))||(l==null||l(R),c==null||c(R),R.defaultPrevented||u==null||u())},y);return AN(R=>{M===f.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&u&&(R.preventDefault(),u()))},y),k.useEffect(()=>{if(m)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(jv=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),Gv(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=jv)}},[m,y,t,f]),k.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),Gv())},[m,f]),k.useEffect(()=>{const R=()=>x({});return document.addEventListener(Gh,R),()=>document.removeEventListener(Gh,R)},[]),I.jsx(yn.div,{...h,ref:w,style:{pointerEvents:L?V?"auto":"none":void 0,...s.style},onFocusCapture:Yn(s.onFocusCapture,P.onFocusCapture),onBlurCapture:Yn(s.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Yn(s.onPointerDownCapture,E.onPointerDownCapture)})});J_.displayName=NN;var ON="DismissableLayerBranch",IN=k.forwardRef((s,e)=>{const t=k.useContext(Q_),r=k.useRef(null),o=vr(e,r);return k.useEffect(()=>{const l=r.current;if(l)return t.branches.add(l),()=>{t.branches.delete(l)}},[t.branches]),I.jsx(yn.div,{...s,ref:o})});IN.displayName=ON;function DN(s,e=globalThis==null?void 0:globalThis.document){const t=Jo(s),r=k.useRef(!1),o=k.useRef(()=>{});return k.useEffect(()=>{const l=u=>{if(u.target&&!r.current){let h=function(){e0(RN,t,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=h,e.addEventListener("click",o.current,{once:!0})):h()}else e.removeEventListener("click",o.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",l),e.removeEventListener("click",o.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function LN(s,e=globalThis==null?void 0:globalThis.document){const t=Jo(s),r=k.useRef(!1);return k.useEffect(()=>{const o=l=>{l.target&&!r.current&&e0(MN,t,{originalEvent:l},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Gv(){const s=new CustomEvent(Gh);document.dispatchEvent(s)}function e0(s,e,t,{discrete:r}){const o=t.originalEvent.target,l=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:t});e&&o.addEventListener(s,e,{once:!0}),r?PN(o,l):o.dispatchEvent(l)}var lh="focusScope.autoFocusOnMount",ch="focusScope.autoFocusOnUnmount",Wv={bubbles:!1,cancelable:!0},FN="FocusScope",t0=k.forwardRef((s,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:l,...c}=s,[u,h]=k.useState(null),f=Jo(o),m=Jo(l),g=k.useRef(null),y=vr(e,_=>h(_)),x=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(r){let _=function(L){if(x.paused||!u)return;const V=L.target;u.contains(V)?g.current=V:Wr(g.current,{select:!0})},b=function(L){if(x.paused||!u)return;const V=L.relatedTarget;V!==null&&(u.contains(V)||Wr(g.current,{select:!0}))},T=function(L){if(document.activeElement===document.body)for(const E of L)E.removedNodes.length>0&&Wr(u)};document.addEventListener("focusin",_),document.addEventListener("focusout",b);const M=new MutationObserver(T);return u&&M.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",b),M.disconnect()}}},[r,u,x.paused]),k.useEffect(()=>{if(u){qv.add(x);const _=document.activeElement;if(!u.contains(_)){const T=new CustomEvent(lh,Wv);u.addEventListener(lh,f),u.dispatchEvent(T),T.defaultPrevented||(VN(GN(n0(u)),{select:!0}),document.activeElement===_&&Wr(u))}return()=>{u.removeEventListener(lh,f),setTimeout(()=>{const T=new CustomEvent(ch,Wv);u.addEventListener(ch,m),u.dispatchEvent(T),T.defaultPrevented||Wr(_??document.body,{select:!0}),u.removeEventListener(ch,m),qv.remove(x)},0)}}},[u,f,m,x]);const w=k.useCallback(_=>{if(!t&&!r||x.paused)return;const b=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,T=document.activeElement;if(b&&T){const M=_.currentTarget,[L,V]=BN(M);L&&V?!_.shiftKey&&T===V?(_.preventDefault(),t&&Wr(L,{select:!0})):_.shiftKey&&T===L&&(_.preventDefault(),t&&Wr(V,{select:!0})):T===M&&_.preventDefault()}},[t,r,x.paused]);return I.jsx(yn.div,{tabIndex:-1,...c,ref:y,onKeyDown:w})});t0.displayName=FN;function VN(s,{select:e=!1}={}){const t=document.activeElement;for(const r of s)if(Wr(r,{select:e}),document.activeElement!==t)return}function BN(s){const e=n0(s),t=$v(e,s),r=$v(e.reverse(),s);return[t,r]}function n0(s){const e=[],t=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function $v(s,e){for(const t of s)if(!zN(t,{upTo:e}))return t}function zN(s,{upTo:e}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(e!==void 0&&s===e)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function UN(s){return s instanceof HTMLInputElement&&"select"in s}function Wr(s,{select:e=!1}={}){if(s&&s.focus){const t=document.activeElement;s.focus({preventScroll:!0}),s!==t&&UN(s)&&e&&s.select()}}var qv=jN();function jN(){let s=[];return{add(e){const t=s[0];e!==t&&(t==null||t.pause()),s=Hv(s,e),s.unshift(e)},remove(e){var t;s=Hv(s,e),(t=s[0])==null||t.resume()}}}function Hv(s,e){const t=[...s],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function GN(s){return s.filter(e=>e.tagName!=="A")}var WN="Portal",r0=k.forwardRef((s,e)=>{var u;const{container:t,...r}=s,[o,l]=k.useState(!1);Bi(()=>l(!0),[]);const c=t||o&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?LS.createPortal(I.jsx(yn.div,{...r,ref:e}),c):null});r0.displayName=WN;function $N(s,e){return k.useReducer((t,r)=>e[t][r]??t,s)}var ma=s=>{const{present:e,children:t}=s,r=qN(e),o=typeof t=="function"?t({present:r.isPresent}):k.Children.only(t),l=vr(r.ref,HN(o));return typeof t=="function"||r.isPresent?k.cloneElement(o,{ref:l}):null};ma.displayName="Presence";function qN(s){const[e,t]=k.useState(),r=k.useRef(null),o=k.useRef(s),l=k.useRef("none"),c=s?"mounted":"unmounted",[u,h]=$N(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const f=Ll(r.current);l.current=u==="mounted"?f:"none"},[u]),Bi(()=>{const f=r.current,m=o.current;if(m!==s){const y=l.current,x=Ll(f);s?h("MOUNT"):x==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(m&&y!==x?"ANIMATION_OUT":"UNMOUNT"),o.current=s}},[s,h]),Bi(()=>{if(e){let f;const m=e.ownerDocument.defaultView??window,g=x=>{const _=Ll(r.current).includes(x.animationName);if(x.target===e&&_&&(h("ANIMATION_END"),!o.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",f=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},y=x=>{x.target===e&&(l.current=Ll(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{m.clearTimeout(f),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:k.useCallback(f=>{r.current=f?getComputedStyle(f):null,t(f)},[])}}function Ll(s){return(s==null?void 0:s.animationName)||"none"}function HN(s){var r,o;let e=(r=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=(o=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:o.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var uh=0;function YN(){k.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??Yv()),document.body.insertAdjacentElement("beforeend",s[1]??Yv()),uh++,()=>{uh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),uh--}},[])}function Yv(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var Hl="right-scroll-bar-position",Yl="width-before-scroll-bar",XN="with-scroll-bars-hidden",KN="--removed-body-scroll-bar-size";function dh(s,e){return typeof s=="function"?s(e):s&&(s.current=e),s}function ZN(s,e){var t=k.useState(function(){return{value:s,callback:e,facade:{get current(){return t.value},set current(r){var o=t.value;o!==r&&(t.value=r,t.callback(r,o))}}}})[0];return t.callback=e,t.facade}var QN=typeof window<"u"?k.useLayoutEffect:k.useEffect,Xv=new WeakMap;function JN(s,e){var t=ZN(null,function(r){return s.forEach(function(o){return dh(o,r)})});return QN(function(){var r=Xv.get(t);if(r){var o=new Set(r),l=new Set(s),c=t.current;o.forEach(function(u){l.has(u)||dh(u,null)}),l.forEach(function(u){o.has(u)||dh(u,c)})}Xv.set(t,s)},[s]),t}function eR(s){return s}function tR(s,e){e===void 0&&(e=eR);var t=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:s},useMedium:function(l){var c=e(l,r);return t.push(c),function(){t=t.filter(function(u){return u!==c})}},assignSyncMedium:function(l){for(r=!0;t.length;){var c=t;t=[],c.forEach(l)}t={push:function(u){return l(u)},filter:function(){return t}}},assignMedium:function(l){r=!0;var c=[];if(t.length){var u=t;t=[],u.forEach(l),c=t}var h=function(){var m=c;c=[],m.forEach(l)},f=function(){return Promise.resolve().then(h)};f(),t={push:function(m){c.push(m),f()},filter:function(m){return c=c.filter(m),t}}}};return o}function nR(s){s===void 0&&(s={});var e=tR(null);return e.options=qn({async:!0,ssr:!1},s),e}var s0=function(s){var e=s.sideCar,t=D_(s,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,qn({},t))};s0.isSideCarExport=!0;function rR(s,e){return s.useMedium(e),s0}var i0=nR(),hh=function(){},qc=k.forwardRef(function(s,e){var t=k.useRef(null),r=k.useState({onScrollCapture:hh,onWheelCapture:hh,onTouchMoveCapture:hh}),o=r[0],l=r[1],c=s.forwardProps,u=s.children,h=s.className,f=s.removeScrollBar,m=s.enabled,g=s.shards,y=s.sideCar,x=s.noRelative,w=s.noIsolation,_=s.inert,b=s.allowPinchZoom,T=s.as,M=T===void 0?"div":T,L=s.gapMode,V=D_(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=y,P=JN([t,e]),R=qn(qn({},V),o);return k.createElement(k.Fragment,null,m&&k.createElement(E,{sideCar:i0,removeScrollBar:f,shards:g,noRelative:x,noIsolation:w,inert:_,setCallbacks:l,allowPinchZoom:!!b,lockRef:t,gapMode:L}),c?k.cloneElement(k.Children.only(u),qn(qn({},R),{ref:P})):k.createElement(M,qn({},R,{className:h,ref:P}),u))});qc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};qc.classNames={fullWidth:Yl,zeroRight:Hl};var sR=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function iR(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var e=sR();return e&&s.setAttribute("nonce",e),s}function oR(s,e){s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}function aR(s){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(s)}var lR=function(){var s=0,e=null;return{add:function(t){s==0&&(e=iR())&&(oR(e,t),aR(e)),s++},remove:function(){s--,!s&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},cR=function(){var s=lR();return function(e,t){k.useEffect(function(){return s.add(e),function(){s.remove()}},[e&&t])}},o0=function(){var s=cR(),e=function(t){var r=t.styles,o=t.dynamic;return s(r,o),null};return e},uR={left:0,top:0,right:0,gap:0},fh=function(s){return parseInt(s||"",10)||0},dR=function(s){var e=window.getComputedStyle(document.body),t=e[s==="padding"?"paddingLeft":"marginLeft"],r=e[s==="padding"?"paddingTop":"marginTop"],o=e[s==="padding"?"paddingRight":"marginRight"];return[fh(t),fh(r),fh(o)]},hR=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return uR;var e=dR(s),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},fR=o0(),Ni="data-scroll-locked",pR=function(s,e,t,r){var o=s.left,l=s.top,c=s.right,u=s.gap;return t===void 0&&(t="margin"),`
  .`.concat(XN,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Ni,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Hl,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Yl,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Hl," .").concat(Hl,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Yl," .").concat(Yl,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ni,`] {
    `).concat(KN,": ").concat(u,`px;
  }
`)},Kv=function(){var s=parseInt(document.body.getAttribute(Ni)||"0",10);return isFinite(s)?s:0},mR=function(){k.useEffect(function(){return document.body.setAttribute(Ni,(Kv()+1).toString()),function(){var s=Kv()-1;s<=0?document.body.removeAttribute(Ni):document.body.setAttribute(Ni,s.toString())}},[])},gR=function(s){var e=s.noRelative,t=s.noImportant,r=s.gapMode,o=r===void 0?"margin":r;mR();var l=k.useMemo(function(){return hR(o)},[o]);return k.createElement(fR,{styles:pR(l,!e,o,t?"":"!important")})},Wh=!1;if(typeof window<"u")try{var Fl=Object.defineProperty({},"passive",{get:function(){return Wh=!0,!0}});window.addEventListener("test",Fl,Fl),window.removeEventListener("test",Fl,Fl)}catch{Wh=!1}var ui=Wh?{passive:!1}:!1,vR=function(s){return s.tagName==="TEXTAREA"},a0=function(s,e){if(!(s instanceof Element))return!1;var t=window.getComputedStyle(s);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!vR(s)&&t[e]==="visible")},yR=function(s){return a0(s,"overflowY")},_R=function(s){return a0(s,"overflowX")},Zv=function(s,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=l0(s,r);if(o){var l=c0(s,r),c=l[1],u=l[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},wR=function(s){var e=s.scrollTop,t=s.scrollHeight,r=s.clientHeight;return[e,t,r]},xR=function(s){var e=s.scrollLeft,t=s.scrollWidth,r=s.clientWidth;return[e,t,r]},l0=function(s,e){return s==="v"?yR(e):_R(e)},c0=function(s,e){return s==="v"?wR(e):xR(e)},SR=function(s,e){return s==="h"&&e==="rtl"?-1:1},bR=function(s,e,t,r,o){var l=SR(s,window.getComputedStyle(e).direction),c=l*r,u=t.target,h=e.contains(u),f=!1,m=c>0,g=0,y=0;do{var x=c0(s,u),w=x[0],_=x[1],b=x[2],T=_-b-l*w;(w||T)&&l0(s,u)&&(g+=T,y+=w),u=u.parentNode.host||u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(m&&Math.abs(g)<1||!m&&Math.abs(y)<1)&&(f=!0),f},Vl=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},Qv=function(s){return[s.deltaX,s.deltaY]},Jv=function(s){return s&&"current"in s?s.current:s},TR=function(s,e){return s[0]===e[0]&&s[1]===e[1]},CR=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},kR=0,di=[];function ER(s){var e=k.useRef([]),t=k.useRef([0,0]),r=k.useRef(),o=k.useState(kR++)[0],l=k.useState(o0)[0],c=k.useRef(s);k.useEffect(function(){c.current=s},[s]),k.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(o));var _=BA([s.lockRef.current],(s.shards||[]).map(Jv),!0).filter(Boolean);return _.forEach(function(b){return b.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),_.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(o))})}}},[s.inert,s.lockRef.current,s.shards]);var u=k.useCallback(function(_,b){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!c.current.allowPinchZoom;var T=Vl(_),M=t.current,L="deltaX"in _?_.deltaX:M[0]-T[0],V="deltaY"in _?_.deltaY:M[1]-T[1],E,P=_.target,R=Math.abs(L)>Math.abs(V)?"h":"v";if("touches"in _&&R==="h"&&P.type==="range")return!1;var C=Zv(R,P);if(!C)return!0;if(C?E=R:(E=R==="v"?"h":"v",C=Zv(R,P)),!C)return!1;if(!r.current&&"changedTouches"in _&&(L||V)&&(r.current=E),!E)return!0;var O=r.current||E;return bR(O,b,_,O==="h"?L:V)},[]),h=k.useCallback(function(_){var b=_;if(!(!di.length||di[di.length-1]!==l)){var T="deltaY"in b?Qv(b):Vl(b),M=e.current.filter(function(E){return E.name===b.type&&(E.target===b.target||b.target===E.shadowParent)&&TR(E.delta,T)})[0];if(M&&M.should){b.cancelable&&b.preventDefault();return}if(!M){var L=(c.current.shards||[]).map(Jv).filter(Boolean).filter(function(E){return E.contains(b.target)}),V=L.length>0?u(b,L[0]):!c.current.noIsolation;V&&b.cancelable&&b.preventDefault()}}},[]),f=k.useCallback(function(_,b,T,M){var L={name:_,delta:b,target:T,should:M,shadowParent:PR(T)};e.current.push(L),setTimeout(function(){e.current=e.current.filter(function(V){return V!==L})},1)},[]),m=k.useCallback(function(_){t.current=Vl(_),r.current=void 0},[]),g=k.useCallback(function(_){f(_.type,Qv(_),_.target,u(_,s.lockRef.current))},[]),y=k.useCallback(function(_){f(_.type,Vl(_),_.target,u(_,s.lockRef.current))},[]);k.useEffect(function(){return di.push(l),s.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:y}),document.addEventListener("wheel",h,ui),document.addEventListener("touchmove",h,ui),document.addEventListener("touchstart",m,ui),function(){di=di.filter(function(_){return _!==l}),document.removeEventListener("wheel",h,ui),document.removeEventListener("touchmove",h,ui),document.removeEventListener("touchstart",m,ui)}},[]);var x=s.removeScrollBar,w=s.inert;return k.createElement(k.Fragment,null,w?k.createElement(l,{styles:CR(o)}):null,x?k.createElement(gR,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function PR(s){for(var e=null;s!==null;)s instanceof ShadowRoot&&(e=s.host,s=s.host),s=s.parentNode;return e}const AR=rR(i0,ER);var u0=k.forwardRef(function(s,e){return k.createElement(qc,qn({},s,{ref:e,sideCar:AR}))});u0.classNames=qc.classNames;var NR=function(s){if(typeof document>"u")return null;var e=Array.isArray(s)?s[0]:s;return e.ownerDocument.body},hi=new WeakMap,Bl=new WeakMap,zl={},ph=0,d0=function(s){return s&&(s.host||d0(s.parentNode))},RR=function(s,e){return e.map(function(t){if(s.contains(t))return t;var r=d0(t);return r&&s.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",s,". Doing nothing"),null)}).filter(function(t){return!!t})},MR=function(s,e,t,r){var o=RR(e,Array.isArray(s)?s:[s]);zl[t]||(zl[t]=new WeakMap);var l=zl[t],c=[],u=new Set,h=new Set(o),f=function(g){!g||u.has(g)||(u.add(g),f(g.parentNode))};o.forEach(f);var m=function(g){!g||h.has(g)||Array.prototype.forEach.call(g.children,function(y){if(u.has(y))m(y);else try{var x=y.getAttribute(r),w=x!==null&&x!=="false",_=(hi.get(y)||0)+1,b=(l.get(y)||0)+1;hi.set(y,_),l.set(y,b),c.push(y),_===1&&w&&Bl.set(y,!0),b===1&&y.setAttribute(t,"true"),w||y.setAttribute(r,"true")}catch(T){console.error("aria-hidden: cannot operate on ",y,T)}})};return m(e),u.clear(),ph++,function(){c.forEach(function(g){var y=hi.get(g)-1,x=l.get(g)-1;hi.set(g,y),l.set(g,x),y||(Bl.has(g)||g.removeAttribute(r),Bl.delete(g)),x||g.removeAttribute(t)}),ph--,ph||(hi=new WeakMap,hi=new WeakMap,Bl=new WeakMap,zl={})}},OR=function(s,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(s)?s:[s]),o=NR(s);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),MR(r,o,t,"aria-hidden")):function(){return null}},Hc="Dialog",[h0,zM]=K_(Hc),[IR,Bn]=h0(Hc),f0=s=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:o,onOpenChange:l,modal:c=!0}=s,u=k.useRef(null),h=k.useRef(null),[f,m]=Z_({prop:r,defaultProp:o??!1,onChange:l,caller:Hc});return I.jsx(IR,{scope:e,triggerRef:u,contentRef:h,contentId:ah(),titleId:ah(),descriptionId:ah(),open:f,onOpenChange:m,onOpenToggle:k.useCallback(()=>m(g=>!g),[m]),modal:c,children:t})};f0.displayName=Hc;var p0="DialogTrigger",DR=k.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,o=Bn(p0,t),l=vr(e,o.triggerRef);return I.jsx(yn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Zf(o.open),...r,ref:l,onClick:Yn(s.onClick,o.onOpenToggle)})});DR.displayName=p0;var Xf="DialogPortal",[LR,m0]=h0(Xf,{forceMount:void 0}),g0=s=>{const{__scopeDialog:e,forceMount:t,children:r,container:o}=s,l=Bn(Xf,e);return I.jsx(LR,{scope:e,forceMount:t,children:k.Children.map(r,c=>I.jsx(ma,{present:t||l.open,children:I.jsx(r0,{asChild:!0,container:o,children:c})}))})};g0.displayName=Xf;var yc="DialogOverlay",v0=k.forwardRef((s,e)=>{const t=m0(yc,s.__scopeDialog),{forceMount:r=t.forceMount,...o}=s,l=Bn(yc,s.__scopeDialog);return l.modal?I.jsx(ma,{present:r||l.open,children:I.jsx(VR,{...o,ref:e})}):null});v0.displayName=yc;var FR=ef("DialogOverlay.RemoveScroll"),VR=k.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,o=Bn(yc,t);return I.jsx(u0,{as:FR,allowPinchZoom:!0,shards:[o.contentRef],children:I.jsx(yn.div,{"data-state":Zf(o.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ms="DialogContent",y0=k.forwardRef((s,e)=>{const t=m0(Ms,s.__scopeDialog),{forceMount:r=t.forceMount,...o}=s,l=Bn(Ms,s.__scopeDialog);return I.jsx(ma,{present:r||l.open,children:l.modal?I.jsx(BR,{...o,ref:e}):I.jsx(zR,{...o,ref:e})})});y0.displayName=Ms;var BR=k.forwardRef((s,e)=>{const t=Bn(Ms,s.__scopeDialog),r=k.useRef(null),o=vr(e,t.contentRef,r);return k.useEffect(()=>{const l=r.current;if(l)return OR(l)},[]),I.jsx(_0,{...s,ref:o,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Yn(s.onCloseAutoFocus,l=>{var c;l.preventDefault(),(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Yn(s.onPointerDownOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&l.preventDefault()}),onFocusOutside:Yn(s.onFocusOutside,l=>l.preventDefault())})}),zR=k.forwardRef((s,e)=>{const t=Bn(Ms,s.__scopeDialog),r=k.useRef(!1),o=k.useRef(!1);return I.jsx(_0,{...s,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var c,u;(c=s.onCloseAutoFocus)==null||c.call(s,l),l.defaultPrevented||(r.current||(u=t.triggerRef.current)==null||u.focus(),l.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:l=>{var h,f;(h=s.onInteractOutside)==null||h.call(s,l),l.defaultPrevented||(r.current=!0,l.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const c=l.target;((f=t.triggerRef.current)==null?void 0:f.contains(c))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&o.current&&l.preventDefault()}})}),_0=k.forwardRef((s,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:l,...c}=s,u=Bn(Ms,t),h=k.useRef(null),f=vr(e,h);return YN(),I.jsxs(I.Fragment,{children:[I.jsx(t0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:l,children:I.jsx(J_,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Zf(u.open),...c,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),I.jsxs(I.Fragment,{children:[I.jsx(UR,{titleId:u.titleId}),I.jsx(GR,{contentRef:h,descriptionId:u.descriptionId})]})]})}),Kf="DialogTitle",w0=k.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,o=Bn(Kf,t);return I.jsx(yn.h2,{id:o.titleId,...r,ref:e})});w0.displayName=Kf;var x0="DialogDescription",S0=k.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,o=Bn(x0,t);return I.jsx(yn.p,{id:o.descriptionId,...r,ref:e})});S0.displayName=x0;var b0="DialogClose",T0=k.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,o=Bn(b0,t);return I.jsx(yn.button,{type:"button",...r,ref:e,onClick:Yn(s.onClick,()=>o.onOpenChange(!1))})});T0.displayName=b0;function Zf(s){return s?"open":"closed"}var C0="DialogTitleWarning",[UM,k0]=wN(C0,{contentName:Ms,titleName:Kf,docsSlug:"dialog"}),UR=({titleId:s})=>{const e=k0(C0),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return k.useEffect(()=>{s&&(document.getElementById(s)||console.error(t))},[t,s]),null},jR="DialogDescriptionWarning",GR=({contentRef:s,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${k0(jR).contentName}}.`;return k.useEffect(()=>{var l;const o=(l=s.current)==null?void 0:l.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(r))},[r,s,e]),null},WR=f0,$R=g0,E0=v0,P0=y0,A0=w0,N0=S0,qR=T0;const HR=WR,YR=$R,R0=k.forwardRef(({className:s,...e},t)=>I.jsx(E0,{ref:t,className:Mt("fixed inset-0 z-50 bg-black/50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...e}));R0.displayName=E0.displayName;const M0=k.forwardRef(({className:s,children:e,hideCloseButton:t=!1,...r},o)=>I.jsxs(YR,{children:[I.jsx(R0,{}),I.jsxs(P0,{ref:o,className:Mt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg",s),...r,children:[e,!t&&I.jsxs(qR,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[I.jsx(oT,{className:"h-4 w-4"}),I.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));M0.displayName=P0.displayName;const O0=({className:s,...e})=>I.jsx("div",{className:Mt("flex flex-col space-y-1.5 text-center sm:text-left",s),...e});O0.displayName="DialogHeader";const I0=({className:s,...e})=>I.jsx("div",{className:Mt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...e});I0.displayName="DialogFooter";const D0=k.forwardRef(({className:s,...e},t)=>I.jsx(A0,{ref:t,className:Mt("text-lg font-semibold leading-none tracking-tight",s),...e}));D0.displayName=A0.displayName;const $h=k.forwardRef(({className:s,...e},t)=>I.jsx(N0,{ref:t,className:Mt("text-sm text-muted-foreground",s),...e}));$h.displayName=N0.displayName;const qh=[{name:"Purple",color:[.65,.35,.85]},{name:"Blue",color:[.3,.5,.9]},{name:"Green",color:[.3,.8,.4]},{name:"Red",color:[.9,.3,.3]},{name:"Orange",color:[.9,.6,.2]},{name:"Pink",color:[.9,.4,.7]},{name:"Cyan",color:[.2,.8,.8]},{name:"Yellow",color:[.9,.9,.3]}];function XR(s){const e=k.useRef({value:s,previous:s});return k.useMemo(()=>(e.current.value!==s&&(e.current.previous=e.current.value,e.current.value=s),e.current.previous),[s])}function KR(s){const[e,t]=k.useState(void 0);return Bi(()=>{if(s){t({width:s.offsetWidth,height:s.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const l=o[0];let c,u;if("borderBoxSize"in l){const h=l.borderBoxSize,f=Array.isArray(h)?h[0]:h;c=f.inlineSize,u=f.blockSize}else c=s.offsetWidth,u=s.offsetHeight;t({width:c,height:u})});return r.observe(s,{box:"border-box"}),()=>r.unobserve(s)}else t(void 0)},[s]),e}var Yc="Checkbox",[ZR,jM]=K_(Yc),[QR,Qf]=ZR(Yc);function JR(s){const{__scopeCheckbox:e,checked:t,children:r,defaultChecked:o,disabled:l,form:c,name:u,onCheckedChange:h,required:f,value:m="on",internal_do_not_use_render:g}=s,[y,x]=Z_({prop:t,defaultProp:o??!1,onChange:h,caller:Yc}),[w,_]=k.useState(null),[b,T]=k.useState(null),M=k.useRef(!1),L=w?!!c||!!w.closest("form"):!0,V={checked:y,disabled:l,setChecked:x,control:w,setControl:_,name:u,form:c,value:m,hasConsumerStoppedPropagationRef:M,required:f,defaultChecked:Xr(o)?!1:o,isFormControl:L,bubbleInput:b,setBubbleInput:T};return I.jsx(QR,{scope:e,...V,children:eM(g)?g(V):r})}var L0="CheckboxTrigger",F0=k.forwardRef(({__scopeCheckbox:s,onKeyDown:e,onClick:t,...r},o)=>{const{control:l,value:c,disabled:u,checked:h,required:f,setControl:m,setChecked:g,hasConsumerStoppedPropagationRef:y,isFormControl:x,bubbleInput:w}=Qf(L0,s),_=vr(o,m),b=k.useRef(h);return k.useEffect(()=>{const T=l==null?void 0:l.form;if(T){const M=()=>g(b.current);return T.addEventListener("reset",M),()=>T.removeEventListener("reset",M)}},[l,g]),I.jsx(yn.button,{type:"button",role:"checkbox","aria-checked":Xr(h)?"mixed":h,"aria-required":f,"data-state":G0(h),"data-disabled":u?"":void 0,disabled:u,value:c,...r,ref:_,onKeyDown:Yn(e,T=>{T.key==="Enter"&&T.preventDefault()}),onClick:Yn(t,T=>{g(M=>Xr(M)?!0:!M),w&&x&&(y.current=T.isPropagationStopped(),y.current||T.stopPropagation())})})});F0.displayName=L0;var V0=k.forwardRef((s,e)=>{const{__scopeCheckbox:t,name:r,checked:o,defaultChecked:l,required:c,disabled:u,value:h,onCheckedChange:f,form:m,...g}=s;return I.jsx(JR,{__scopeCheckbox:t,checked:o,defaultChecked:l,disabled:u,required:c,onCheckedChange:f,name:r,form:m,value:h,internal_do_not_use_render:({isFormControl:y})=>I.jsxs(I.Fragment,{children:[I.jsx(F0,{...g,ref:e,__scopeCheckbox:t}),y&&I.jsx(j0,{__scopeCheckbox:t})]})})});V0.displayName=Yc;var B0="CheckboxIndicator",z0=k.forwardRef((s,e)=>{const{__scopeCheckbox:t,forceMount:r,...o}=s,l=Qf(B0,t);return I.jsx(ma,{present:r||Xr(l.checked)||l.checked===!0,children:I.jsx(yn.span,{"data-state":G0(l.checked),"data-disabled":l.disabled?"":void 0,...o,ref:e,style:{pointerEvents:"none",...s.style}})})});z0.displayName=B0;var U0="CheckboxBubbleInput",j0=k.forwardRef(({__scopeCheckbox:s,...e},t)=>{const{control:r,hasConsumerStoppedPropagationRef:o,checked:l,defaultChecked:c,required:u,disabled:h,name:f,value:m,form:g,bubbleInput:y,setBubbleInput:x}=Qf(U0,s),w=vr(t,x),_=XR(l),b=KR(r);k.useEffect(()=>{const M=y;if(!M)return;const L=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(L,"checked").set,P=!o.current;if(_!==l&&E){const R=new Event("click",{bubbles:P});M.indeterminate=Xr(l),E.call(M,Xr(l)?!1:l),M.dispatchEvent(R)}},[y,_,l,o]);const T=k.useRef(Xr(l)?!1:l);return I.jsx(yn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??T.current,required:u,disabled:h,name:f,value:m,form:g,...e,tabIndex:-1,ref:w,style:{...e.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});j0.displayName=U0;function eM(s){return typeof s=="function"}function Xr(s){return s==="indeterminate"}function G0(s){return Xr(s)?"indeterminate":s?"checked":"unchecked"}function tM({className:s,...e}){return I.jsx(V0,{"data-slot":"checkbox",className:Mt("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...e,children:I.jsx(z0,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:I.jsx(sT,{className:"size-3.5"})})})}function nM({selectedColorIndex:s,onColorSelect:e,isVisible:t,onVisibilityChange:r,autoHideDelay:o=3e3,lavaLampMode:l,onLavaLampModeChange:c}){const u=k.useRef(null),h=k.useCallback(()=>{r(!0),u.current&&window.clearTimeout(u.current),u.current=window.setTimeout(()=>{r(!1)},o)},[r,o]),f=k.useCallback(g=>{e(g),h()},[e,h]),m=k.useCallback(()=>{c(!l),h()},[l,c,h]);return k.useEffect(()=>()=>{u.current&&window.clearTimeout(u.current)},[]),k.useEffect(()=>{t&&u.current===null&&h()},[t,h]),I.jsx("div",{className:`fixed bottom-6 left-1/2 transform -translate-x-1/2 z-10 transition-all duration-500 ease-in-out ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:I.jsx("div",{className:"bg-black/80 backdrop-blur-md border border-neutral-700 rounded-2xl px-6 py-4 shadow-2xl",children:I.jsxs("div",{className:"space-y-4",children:[I.jsx("div",{className:"grid grid-cols-8 gap-3",children:qh.map((g,y)=>I.jsx("button",{onClick:()=>f(y),className:`w-10 h-10 rounded-full border-2 transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-white/50 ${s===y?"border-white shadow-lg shadow-white/20":"border-neutral-600 hover:border-neutral-400"}`,style:{backgroundColor:`rgb(${g.color.map(x=>Math.floor(x*255)).join(", ")})`},title:g.name},g.name))}),I.jsx("div",{className:"flex items-center justify-center pt-2 border-t border-neutral-700",children:I.jsxs("label",{className:"flex items-center justify-center gap-2 cursor-pointer",children:[I.jsx(tM,{checked:l,onCheckedChange:m,className:"border-neutral-600 hover:cursor-pointer"}),I.jsx("span",{className:"text-sm font-medium transition-colors text-neutral-100 vertical-align-middle",style:{fontFamily:"Baskervville, serif"},children:"Lava Lamp"})]})})]})})})}function rM(){const s=k.useRef(null),e=k.useRef(null),t=k.useRef(null),[r,o]=k.useState(!1),[l,c]=k.useState(!0),[u,h]=k.useState(null),[f,m]=k.useState(!0),[g,y]=_N("fluxlab-color-index",0),[x,w]=k.useState(!1),[_,b]=k.useState(!1),T=k.useRef(new Set),[M,L]=k.useState(!0),[V,E]=k.useState(!0),P=k.useRef(null),[R,C]=k.useState({width:typeof window<"u"?window.innerWidth:800,height:typeof window<"u"?window.innerHeight:600}),O=k.useRef({js:0,fps:0,timestep:0,gpu:0,gpuSupported:!1}),[U,G]=k.useState(O.current),B=ZT(),q=Mi.DENSITY,ee="smokeDensity",te=k.useRef(!1),K=k.useRef(null),J=k.useRef(0),z=k.useRef(new vC),Z=k.useRef(new QT("Mouse Move Events")),X=k.useRef({mouseMoveCallsPerSecond:0}),[A,$]=k.useState(X.current),le=k.useRef(null),ne=yN(),re=k.useRef(!1),ce=k.useCallback(we=>{y(we),e.current&&e.current.setSmokeColor(qh[we].color)},[]),de=k.useCallback(we=>{b(we),we||Rl(T.current)},[]),Q=k.useCallback(we=>{!f&&yC(we)&&w(!0),V||E(!0),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{E(!1)},3e3)},[f,V]),pe=k.useCallback(async()=>{try{document.documentElement.requestFullscreen&&await document.documentElement.requestFullscreen()}catch(we){console.log("Fullscreen not supported or denied:",we)}},[]),be=k.useCallback(async()=>{m(!1),await pe()},[pe]);k.useEffect(()=>{const we=()=>{C({width:window.innerWidth,height:window.innerHeight}),z.current.clearCache()};return window.addEventListener("resize",we),()=>window.removeEventListener("resize",we)},[]),k.useEffect(()=>{const we=()=>L(!0),se=()=>L(!1);return window.addEventListener("focus",we),window.addEventListener("blur",se),()=>{window.removeEventListener("focus",we),window.removeEventListener("blur",se)}},[]);const Fe=k.useCallback(()=>{if(!e.current||!s.current)return null;const we=s.current.getBoundingClientRect();return{simulation:e.current,audioVisualization:ne,canvasBounds:we,isLavaLampMode:_,intervalTracker:T.current,isWindowFocused:M}},[ne,_,M]),Be=k.useCallback(()=>{const we=Fe();we&&xC(we,Be)},[Fe]),It=k.useCallback(we=>{if(Z.current.recordCall(),!(!r||!e.current||we.length===0))for(const se of we){const he=z.current.clientToGrid(se.clientX,se.clientY);if(he)if(se.type==="mousedown")te.current=!0,e.current.addSmoke(he.x,he.y),K.current=he,J.current=se.timestamp,ne.handleMouseDown(se.clientX,se.clientY);else if(se.type==="mousemove"){if(Q(se.clientY),te.current&&(e.current.addSmoke(he.x,he.y),ne.handleMouseMove(se.clientX,se.clientY),K.current)){const Me=(se.timestamp-J.current)/1e3;if(Me>0){const De=(he.x-K.current.x)/Me,Te=(he.y-K.current.y)/Me,Re=.02,Pe=10;let Oe=De*Re,bt=Te*Re;const on=Math.sqrt(Oe*Oe+bt*bt);if(on>Pe){const er=Pe/on;Oe*=er,bt*=er}e.current.addVelocity(he.x,he.y,Oe,bt)}K.current=he,J.current=se.timestamp}}else se.type==="mouseup"&&(te.current=!1,K.current=null,ne.handleMouseUp(se.clientX,se.clientY))}},[r,ne,Q]);return k.useEffect(()=>{r&&e.current&&s.current&&!re.current&&(ne.initialize(s.current,e.current),z.current.initialize(s.current,e.current),re.current=!0)},[r,ne]),k.useEffect(()=>{le.current=new JT(It);const we=s.current;if(!we)return;const se=Te=>{var Re;(Re=le.current)==null||Re.addEvent({clientX:Te.clientX,clientY:Te.clientY,type:"mousedown",timestamp:performance.now()})},he=Te=>{var Re;(Re=le.current)==null||Re.addEvent({clientX:Te.clientX,clientY:Te.clientY,type:"mousemove",timestamp:performance.now()})},Me=Te=>{var Re;(Re=le.current)==null||Re.addEvent({clientX:Te.clientX,clientY:Te.clientY,type:"mouseup",timestamp:performance.now()})},De=()=>{te.current=!1,K.current=null,ne.handleMouseLeave()};return we.addEventListener("mousedown",se),we.addEventListener("mousemove",he,{passive:!0}),we.addEventListener("mouseup",Me),we.addEventListener("mouseleave",De),()=>{var Te;(Te=le.current)==null||Te.destroy(),we&&(we.removeEventListener("mousedown",se),we.removeEventListener("mousemove",he),we.removeEventListener("mouseup",Me),we.removeEventListener("mouseleave",De))}},[It,ne]),k.useEffect(()=>{const we=setInterval(()=>{e.current&&G(e.current.getPerformanceMetrics()),$({mouseMoveCallsPerSecond:Z.current.getCallsPerSecond()})},100);return()=>clearInterval(we)},[]),k.useEffect(()=>{_&&r&&(Rl(T.current),Be())},[_,r]),k.useEffect(()=>{_&&r&&M&&(Rl(T.current),Be())},[M]),k.useEffect(()=>()=>{console.log("Component cleanup - destroying simulation"),P.current&&clearTimeout(P.current),Rl(T.current),e.current&&(e.current.destroy(),e.current=null),o(!1)},[]),k.useEffect(()=>{(async()=>{if(!s.current||e.current)return;console.log("Initializing Smoke Simulation");const se={grid:{size:{width:512,height:Math.floor(512*(R.height/R.width))},scale:.9}},he=new bC(se);e.current=he;try{await he.initialize(s),e.current===he&&(he.setSmokeColor(qh[g].color),o(!0),h(null))}catch(Me){console.error("Failed to initialize smoke simulation:",Me),e.current===he&&(he.destroy(),e.current=null,o(!1),h(Me instanceof Error?Me.message:"Unknown error"))}})()},[R,g]),k.useEffect(()=>{if(!l||!r||!e.current)return;const we=()=>{if(e.current&&l)try{e.current.step({shaderMode:q,texture:ee}),t.current=requestAnimationFrame(we)}catch(se){console.error("Failed to step simulation:",se),c(!1)}};return t.current=requestAnimationFrame(we),()=>{t.current!==null&&(cancelAnimationFrame(t.current),t.current=null)}},[l,r,q,ee]),k.useEffect(()=>{if(r&&!l&&e.current)try{e.current.step({renderOnly:!0,shaderMode:q,texture:ee})}catch(we){console.error("Failed to update visualization:",we)}},[q,ee,r,l]),I.jsxs(I.Fragment,{children:[I.jsx(HR,{open:f,onOpenChange:()=>{},children:I.jsxs(M0,{hideCloseButton:!0,className:"max-w-lg bg-black/95 backdrop-blur-md border-neutral-800 text-neutral-100 shadow-2xl",children:[I.jsxs(O0,{className:"text-center space-y-6",children:[I.jsxs(D0,{className:"text-center text-4xl font-normal tracking-wide text-neutral-100 flex items-center justify-center gap-3",style:{fontFamily:"Baskervville, serif"},children:[I.jsx("img",{src:"/flux-lab/Astroid_filled.svg",alt:"FluxLab Icon",className:"w-9 h-9 brightness-0 invert"}),"FluxLab"]}),I.jsxs("div",{className:"space-y-4",children:[I.jsx($h,{className:"text-neutral-400 text-base font-light tracking-wide text-center",style:{fontFamily:"Baskervville, serif"},children:"Music from movement."}),I.jsx("div",{className:"w-16 h-px bg-neutral-600 mx-auto"}),I.jsx($h,{className:"text-neutral-400 text-base font-light tracking-wide text-center",style:{fontFamily:"Baskervville, serif"},children:"Click and drag to synthesize. Seek the spectrum in the depths below."})]})]}),I.jsx(I0,{className:"mt-8",children:I.jsx(Hn,{onClick:be,variant:"outline",className:"w-full bg-transparent border-neutral-600 text-neutral-100 hover:bg-neutral-900 hover:border-neutral-500 py-3 text-lg font-light tracking-wider transition-all duration-500 hover:text-neutral-200",style:{fontFamily:"Baskervville, serif",letterSpacing:"0.1em",transition:"all 0.5s ease"},onMouseEnter:we=>{we.currentTarget.style.letterSpacing="0.3em"},onMouseLeave:we=>{we.currentTarget.style.letterSpacing="0.1em"},children:"Enter"})})]})}),I.jsxs("div",{className:"w-screen h-screen overflow-hidden relative",children:[I.jsx(KT,{metrics:U,eventMetrics:A,isVisible:B}),I.jsx(nM,{selectedColorIndex:g,onColorSelect:ce,isVisible:x,onVisibilityChange:w,lavaLampMode:_,onLavaLampModeChange:de}),u&&I.jsxs("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-10 text-red-500 text-sm bg-red-50 p-3 rounded-lg border border-red-200",children:[I.jsx("strong",{children:"Error:"})," ",u]}),I.jsx("canvas",{width:R.width,height:R.height,ref:s,className:"block",style:{width:"100vw",height:"100vh",cursor:V?"crosshair":"none"}})]})]})}const Xc=eb({component:()=>I.jsx(gy,{})}),sM=Qh({getParentRoute:()=>Xc,path:"/",component:()=>I.jsx(rM,{})}),iM=Qh({getParentRoute:()=>Xc,path:"/tests",component:lT}),oM=Qh({getParentRoute:()=>Xc,path:"/tests/$testId",component:qT}),aM=Xc.addChildren([sM,iM,oM]),lM=tb({routeTree:aM,basepath:"/flux-lab"});function cM(){return I.jsx(sb,{router:lM})}Kx.createRoot(document.getElementById("root")).render(I.jsx(k.StrictMode,{children:I.jsx(cM,{})}));
