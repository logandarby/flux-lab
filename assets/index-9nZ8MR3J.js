var zx=Object.defineProperty;var Ux=(s,e,t)=>e in s?zx(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var X=(s,e,t)=>Ux(s,typeof e!="symbol"?e+"":e,t);function jx(s,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in s)){const l=Object.getOwnPropertyDescriptor(r,o);l&&Object.defineProperty(s,o,l.get?l:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function ey(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Bd={exports:{}},Lo={},zd={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function Gx(){if(Bg)return Ie;Bg=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function y(P){return P===null||typeof P!="object"?null:(P=g&&P[g]||P["@@iterator"],typeof P=="function"?P:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function b(P,$,ce){this.props=P,this.context=$,this.refs=_,this.updater=ce||x}b.prototype.isReactComponent={},b.prototype.setState=function(P,$){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,$,"setState")},b.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function T(){}T.prototype=b.prototype;function R(P,$,ce){this.props=P,this.context=$,this.refs=_,this.updater=ce||x}var L=R.prototype=new T;L.constructor=R,w(L,b.prototype),L.isPureReactComponent=!0;var V=Array.isArray,E=Object.prototype.hasOwnProperty,N={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function C(P,$,ce){var ie,ne={},ae=null,ue=null;if($!=null)for(ie in $.ref!==void 0&&(ue=$.ref),$.key!==void 0&&(ae=""+$.key),$)E.call($,ie)&&!M.hasOwnProperty(ie)&&(ne[ie]=$[ie]);var Q=arguments.length-2;if(Q===1)ne.children=ce;else if(1<Q){for(var pe=Array(Q),Te=0;Te<Q;Te++)pe[Te]=arguments[Te+2];ne.children=pe}if(P&&P.defaultProps)for(ie in Q=P.defaultProps,Q)ne[ie]===void 0&&(ne[ie]=Q[ie]);return{$$typeof:s,type:P,key:ae,ref:ue,props:ne,_owner:N.current}}function O(P,$){return{$$typeof:s,type:P.type,key:$,ref:P.ref,props:P.props,_owner:P._owner}}function U(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function j(P){var $={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ce){return $[ce]})}var B=/\/+/g;function q(P,$){return typeof P=="object"&&P!==null&&P.key!=null?j(""+P.key):$.toString(36)}function ee(P,$,ce,ie,ne){var ae=typeof P;(ae==="undefined"||ae==="boolean")&&(P=null);var ue=!1;if(P===null)ue=!0;else switch(ae){case"string":case"number":ue=!0;break;case"object":switch(P.$$typeof){case s:case e:ue=!0}}if(ue)return ue=P,ne=ne(ue),P=ie===""?"."+q(ue,0):ie,V(ne)?(ce="",P!=null&&(ce=P.replace(B,"$&/")+"/"),ee(ne,$,ce,"",function(Te){return Te})):ne!=null&&(U(ne)&&(ne=O(ne,ce+(!ne.key||ue&&ue.key===ne.key?"":(""+ne.key).replace(B,"$&/")+"/")+P)),$.push(ne)),1;if(ue=0,ie=ie===""?".":ie+":",V(P))for(var Q=0;Q<P.length;Q++){ae=P[Q];var pe=ie+q(ae,Q);ue+=ee(ae,$,ce,pe,ne)}else if(pe=y(P),typeof pe=="function")for(P=pe.call(P),Q=0;!(ae=P.next()).done;)ae=ae.value,pe=ie+q(ae,Q++),ue+=ee(ae,$,ce,pe,ne);else if(ae==="object")throw $=String(P),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return ue}function te(P,$,ce){if(P==null)return P;var ie=[],ne=0;return ee(P,ie,"","",function(ae){return $.call(ce,ae,ne++)}),ie}function K(P){if(P._status===-1){var $=P._result;$=$(),$.then(function(ce){(P._status===0||P._status===-1)&&(P._status=1,P._result=ce)},function(ce){(P._status===0||P._status===-1)&&(P._status=2,P._result=ce)}),P._status===-1&&(P._status=0,P._result=$)}if(P._status===1)return P._result.default;throw P._result}var J={current:null},z={transition:null},Z={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:z,ReactCurrentOwner:N};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Ie.Children={map:te,forEach:function(P,$,ce){te(P,function(){$.apply(this,arguments)},ce)},count:function(P){var $=0;return te(P,function(){$++}),$},toArray:function(P){return te(P,function($){return $})||[]},only:function(P){if(!U(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Ie.Component=b,Ie.Fragment=t,Ie.Profiler=o,Ie.PureComponent=R,Ie.StrictMode=r,Ie.Suspense=h,Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,Ie.act=Y,Ie.cloneElement=function(P,$,ce){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var ie=w({},P.props),ne=P.key,ae=P.ref,ue=P._owner;if($!=null){if($.ref!==void 0&&(ae=$.ref,ue=N.current),$.key!==void 0&&(ne=""+$.key),P.type&&P.type.defaultProps)var Q=P.type.defaultProps;for(pe in $)E.call($,pe)&&!M.hasOwnProperty(pe)&&(ie[pe]=$[pe]===void 0&&Q!==void 0?Q[pe]:$[pe])}var pe=arguments.length-2;if(pe===1)ie.children=ce;else if(1<pe){Q=Array(pe);for(var Te=0;Te<pe;Te++)Q[Te]=arguments[Te+2];ie.children=Q}return{$$typeof:s,type:P.type,key:ne,ref:ae,props:ie,_owner:ue}},Ie.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:l,_context:P},P.Consumer=P},Ie.createElement=C,Ie.createFactory=function(P){var $=C.bind(null,P);return $.type=P,$},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(P){return{$$typeof:u,render:P}},Ie.isValidElement=U,Ie.lazy=function(P){return{$$typeof:m,_payload:{_status:-1,_result:P},_init:K}},Ie.memo=function(P,$){return{$$typeof:f,type:P,compare:$===void 0?null:$}},Ie.startTransition=function(P){var $=z.transition;z.transition={};try{P()}finally{z.transition=$}},Ie.unstable_act=Y,Ie.useCallback=function(P,$){return J.current.useCallback(P,$)},Ie.useContext=function(P){return J.current.useContext(P)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(P){return J.current.useDeferredValue(P)},Ie.useEffect=function(P,$){return J.current.useEffect(P,$)},Ie.useId=function(){return J.current.useId()},Ie.useImperativeHandle=function(P,$,ce){return J.current.useImperativeHandle(P,$,ce)},Ie.useInsertionEffect=function(P,$){return J.current.useInsertionEffect(P,$)},Ie.useLayoutEffect=function(P,$){return J.current.useLayoutEffect(P,$)},Ie.useMemo=function(P,$){return J.current.useMemo(P,$)},Ie.useReducer=function(P,$,ce){return J.current.useReducer(P,$,ce)},Ie.useRef=function(P){return J.current.useRef(P)},Ie.useState=function(P){return J.current.useState(P)},Ie.useSyncExternalStore=function(P,$,ce){return J.current.useSyncExternalStore(P,$,ce)},Ie.useTransition=function(){return J.current.useTransition()},Ie.version="18.3.1",Ie}var zg;function ea(){return zg||(zg=1,zd.exports=Gx()),zd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function Wx(){if(Ug)return Lo;Ug=1;var s=ea(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,f){var m,g={},y=null,x=null;f!==void 0&&(y=""+f),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(x=h.ref);for(m in h)r.call(h,m)&&!l.hasOwnProperty(m)&&(g[m]=h[m]);if(u&&u.defaultProps)for(m in h=u.defaultProps,h)g[m]===void 0&&(g[m]=h[m]);return{$$typeof:e,type:u,key:y,ref:x,props:g,_owner:o.current}}return Lo.Fragment=t,Lo.jsx=c,Lo.jsxs=c,Lo}var jg;function $x(){return jg||(jg=1,Bd.exports=Wx()),Bd.exports}var I=$x(),k=ea();const ta=ey(k),ty=jx({__proto__:null,default:ta},[k]);var Tl={},Ud={exports:{}},$t={},jd={exports:{}},Gd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg;function qx(){return Gg||(Gg=1,function(s){function e(z,Z){var Y=z.length;z.push(Z);e:for(;0<Y;){var P=Y-1>>>1,$=z[P];if(0<o($,Z))z[P]=Z,z[Y]=$,Y=P;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Z=z[0],Y=z.pop();if(Y!==Z){z[0]=Y;e:for(var P=0,$=z.length,ce=$>>>1;P<ce;){var ie=2*(P+1)-1,ne=z[ie],ae=ie+1,ue=z[ae];if(0>o(ne,Y))ae<$&&0>o(ue,ne)?(z[P]=ue,z[ae]=Y,P=ae):(z[P]=ne,z[ie]=Y,P=ie);else if(ae<$&&0>o(ue,Y))z[P]=ue,z[ae]=Y,P=ae;else break e}}return Z}function o(z,Z){var Y=z.sortIndex-Z.sortIndex;return Y!==0?Y:z.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();s.unstable_now=function(){return c.now()-u}}var h=[],f=[],m=1,g=null,y=3,x=!1,w=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(z){for(var Z=t(f);Z!==null;){if(Z.callback===null)r(f);else if(Z.startTime<=z)r(f),Z.sortIndex=Z.expirationTime,e(h,Z);else break;Z=t(f)}}function V(z){if(_=!1,L(z),!w)if(t(h)!==null)w=!0,K(E);else{var Z=t(f);Z!==null&&J(V,Z.startTime-z)}}function E(z,Z){w=!1,_&&(_=!1,T(C),C=-1),x=!0;var Y=y;try{for(L(Z),g=t(h);g!==null&&(!(g.expirationTime>Z)||z&&!j());){var P=g.callback;if(typeof P=="function"){g.callback=null,y=g.priorityLevel;var $=P(g.expirationTime<=Z);Z=s.unstable_now(),typeof $=="function"?g.callback=$:g===t(h)&&r(h),L(Z)}else r(h);g=t(h)}if(g!==null)var ce=!0;else{var ie=t(f);ie!==null&&J(V,ie.startTime-Z),ce=!1}return ce}finally{g=null,y=Y,x=!1}}var N=!1,M=null,C=-1,O=5,U=-1;function j(){return!(s.unstable_now()-U<O)}function B(){if(M!==null){var z=s.unstable_now();U=z;var Z=!0;try{Z=M(!0,z)}finally{Z?q():(N=!1,M=null)}}else N=!1}var q;if(typeof R=="function")q=function(){R(B)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,te=ee.port2;ee.port1.onmessage=B,q=function(){te.postMessage(null)}}else q=function(){b(B,0)};function K(z){M=z,N||(N=!0,q())}function J(z,Z){C=b(function(){z(s.unstable_now())},Z)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(z){z.callback=null},s.unstable_continueExecution=function(){w||x||(w=!0,K(E))},s.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<z?Math.floor(1e3/z):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_getFirstCallbackNode=function(){return t(h)},s.unstable_next=function(z){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var Y=y;y=Z;try{return z()}finally{y=Y}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(z,Z){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Y=y;y=z;try{return Z()}finally{y=Y}},s.unstable_scheduleCallback=function(z,Z,Y){var P=s.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?P+Y:P):Y=P,z){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=Y+$,z={id:m++,callback:Z,priorityLevel:z,startTime:Y,expirationTime:$,sortIndex:-1},Y>P?(z.sortIndex=Y,e(f,z),t(h)===null&&z===t(f)&&(_?(T(C),C=-1):_=!0,J(V,Y-P))):(z.sortIndex=$,e(h,z),w||x||(w=!0,K(E))),z},s.unstable_shouldYield=j,s.unstable_wrapCallback=function(z){var Z=y;return function(){var Y=y;y=Z;try{return z.apply(this,arguments)}finally{y=Y}}}}(Gd)),Gd}var Wg;function Hx(){return Wg||(Wg=1,jd.exports=qx()),jd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g;function Yx(){if($g)return $t;$g=1;var s=ea(),e=Hx();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function l(n,i){c(n,i),c(n+"Capture",i)}function c(n,i){for(o[n]=i,n=0;n<i.length;n++)r.add(i[n])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function y(n){return h.call(g,n)?!0:h.call(m,n)?!1:f.test(n)?g[n]=!0:(m[n]=!0,!1)}function x(n,i,a,d){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function w(n,i,a,d){if(i===null||typeof i>"u"||x(n,i,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function _(n,i,a,d,p,v,S){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=v,this.removeEmptyString=S}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){b[n]=new _(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];b[i]=new _(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){b[n]=new _(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){b[n]=new _(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){b[n]=new _(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){b[n]=new _(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){b[n]=new _(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){b[n]=new _(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){b[n]=new _(n,5,!1,n.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function R(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(T,R);b[i]=new _(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(T,R);b[i]=new _(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(T,R);b[i]=new _(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){b[n]=new _(n,1,!1,n.toLowerCase(),null,!1,!1)}),b.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){b[n]=new _(n,1,!1,n.toLowerCase(),null,!0,!0)});function L(n,i,a,d){var p=b.hasOwnProperty(i)?b[i]:null;(p!==null?p.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(w(i,a,p,d)&&(a=null),d||p===null?y(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):p.mustUseProperty?n[p.propertyName]=a===null?p.type===3?!1:"":a:(i=p.attributeName,d=p.attributeNamespace,a===null?n.removeAttribute(i):(p=p.type,a=p===3||p===4&&a===!0?"":""+a,d?n.setAttributeNS(d,i,a):n.setAttribute(i,a))))}var V=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),N=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),j=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),z=Symbol.iterator;function Z(n){return n===null||typeof n!="object"?null:(n=z&&n[z]||n["@@iterator"],typeof n=="function"?n:null)}var Y=Object.assign,P;function $(n){if(P===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);P=i&&i[1]||""}return`
`+P+n}var ce=!1;function ie(n,i){if(!n||ce)return"";ce=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(H){var d=H}Reflect.construct(n,[],i)}else{try{i.call()}catch(H){d=H}n.call(i.prototype)}else{try{throw Error()}catch(H){d=H}n()}}catch(H){if(H&&d&&typeof H.stack=="string"){for(var p=H.stack.split(`
`),v=d.stack.split(`
`),S=p.length-1,A=v.length-1;1<=S&&0<=A&&p[S]!==v[A];)A--;for(;1<=S&&0<=A;S--,A--)if(p[S]!==v[A]){if(S!==1||A!==1)do if(S--,A--,0>A||p[S]!==v[A]){var D=`
`+p[S].replace(" at new "," at ");return n.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",n.displayName)),D}while(1<=S&&0<=A);break}}}finally{ce=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?$(n):""}function ne(n){switch(n.tag){case 5:return $(n.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return n=ie(n.type,!1),n;case 11:return n=ie(n.type.render,!1),n;case 1:return n=ie(n.type,!0),n;default:return""}}function ae(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case M:return"Fragment";case N:return"Portal";case O:return"Profiler";case C:return"StrictMode";case q:return"Suspense";case ee:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case j:return(n.displayName||"Context")+".Consumer";case U:return(n._context.displayName||"Context")+".Provider";case B:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case te:return i=n.displayName||null,i!==null?i:ae(n.type)||"Memo";case K:i=n._payload,n=n._init;try{return ae(n(i))}catch{}}return null}function ue(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(i);case 8:return i===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Q(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function pe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Te(n){var i=pe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),d=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var p=a.get,v=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return p.call(this)},set:function(S){d=""+S,v.call(this,S)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(S){d=""+S},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function he(n){n._valueTracker||(n._valueTracker=Te(n))}function Se(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),d="";return n&&(d=pe(n)?n.checked?"true":"false":n.value),n=d,n!==a?(i.setValue(n),!0):!1}function Be(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function nt(n,i){var a=i.checked;return Y({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function de(n,i){var a=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;a=Q(i.value!=null?i.value:a),n._wrapperState={initialChecked:d,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function fe(n,i){i=i.checked,i!=null&&L(n,"checked",i,!1)}function Re(n,i){fe(n,i);var a=Q(i.value),d=i.type;if(a!=null)d==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Me(n,i.type,a):i.hasOwnProperty("defaultValue")&&Me(n,i.type,Q(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Le(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Me(n,i,a){(i!=="number"||Be(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Fe=Array.isArray;function Pe(n,i,a,d){if(n=n.options,i){i={};for(var p=0;p<a.length;p++)i["$"+a[p]]=!0;for(a=0;a<n.length;a++)p=i.hasOwnProperty("$"+n[a].value),n[a].selected!==p&&(n[a].selected=p),p&&d&&(n[a].defaultSelected=!0)}else{for(a=""+Q(a),i=null,p=0;p<n.length;p++){if(n[p].value===a){n[p].selected=!0,d&&(n[p].defaultSelected=!0);return}i!==null||n[p].disabled||(i=n[p])}i!==null&&(i.selected=!0)}}function De(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return Y({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function sn(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(Fe(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Q(a)}}function Jn(n,i){var a=Q(i.value),d=Q(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),d!=null&&(n.defaultValue=""+d)}function Ls(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Fs(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kc(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Fs(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ga,Jf=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,d,p){MSApp.execUnsafeLocalFunction(function(){return n(i,a,d,p)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(ga=ga||document.createElement("div"),ga.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=ga.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Zi(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},W0=["Webkit","ms","Moz","O"];Object.keys(Qi).forEach(function(n){W0.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Qi[i]=Qi[n]})});function ep(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Qi.hasOwnProperty(n)&&Qi[n]?(""+i).trim():i+"px"}function tp(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var d=a.indexOf("--")===0,p=ep(a,i[a],d);a==="float"&&(a="cssFloat"),d?n.setProperty(a,p):n[a]=p}}var $0=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zc(n,i){if(i){if($0[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Qc(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jc=null;function eu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var tu=null,Vs=null,Bs=null;function np(n){if(n=xo(n)){if(typeof tu!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Ba(i),tu(n.stateNode,n.type,i))}}function rp(n){Vs?Bs?Bs.push(n):Bs=[n]:Vs=n}function sp(){if(Vs){var n=Vs,i=Bs;if(Bs=Vs=null,np(n),i)for(n=0;n<i.length;n++)np(i[n])}}function ip(n,i){return n(i)}function op(){}var nu=!1;function ap(n,i,a){if(nu)return n(i,a);nu=!0;try{return ip(n,i,a)}finally{nu=!1,(Vs!==null||Bs!==null)&&(op(),sp())}}function Ji(n,i){var a=n.stateNode;if(a===null)return null;var d=Ba(a);if(d===null)return null;a=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var ru=!1;if(u)try{var eo={};Object.defineProperty(eo,"passive",{get:function(){ru=!0}}),window.addEventListener("test",eo,eo),window.removeEventListener("test",eo,eo)}catch{ru=!1}function q0(n,i,a,d,p,v,S,A,D){var H=Array.prototype.slice.call(arguments,3);try{i.apply(a,H)}catch(se){this.onError(se)}}var to=!1,va=null,ya=!1,su=null,H0={onError:function(n){to=!0,va=n}};function Y0(n,i,a,d,p,v,S,A,D){to=!1,va=null,q0.apply(H0,arguments)}function X0(n,i,a,d,p,v,S,A,D){if(Y0.apply(this,arguments),to){if(to){var H=va;to=!1,va=null}else throw Error(t(198));ya||(ya=!0,su=H)}}function ns(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function lp(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function cp(n){if(ns(n)!==n)throw Error(t(188))}function K0(n){var i=n.alternate;if(!i){if(i=ns(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,d=i;;){var p=a.return;if(p===null)break;var v=p.alternate;if(v===null){if(d=p.return,d!==null){a=d;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===a)return cp(p),n;if(v===d)return cp(p),i;v=v.sibling}throw Error(t(188))}if(a.return!==d.return)a=p,d=v;else{for(var S=!1,A=p.child;A;){if(A===a){S=!0,a=p,d=v;break}if(A===d){S=!0,d=p,a=v;break}A=A.sibling}if(!S){for(A=v.child;A;){if(A===a){S=!0,a=v,d=p;break}if(A===d){S=!0,d=v,a=p;break}A=A.sibling}if(!S)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function up(n){return n=K0(n),n!==null?dp(n):null}function dp(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=dp(n);if(i!==null)return i;n=n.sibling}return null}var hp=e.unstable_scheduleCallback,fp=e.unstable_cancelCallback,Z0=e.unstable_shouldYield,Q0=e.unstable_requestPaint,ut=e.unstable_now,J0=e.unstable_getCurrentPriorityLevel,iu=e.unstable_ImmediatePriority,pp=e.unstable_UserBlockingPriority,_a=e.unstable_NormalPriority,ew=e.unstable_LowPriority,mp=e.unstable_IdlePriority,wa=null,Bn=null;function tw(n){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(wa,n,void 0,(n.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:sw,nw=Math.log,rw=Math.LN2;function sw(n){return n>>>=0,n===0?32:31-(nw(n)/rw|0)|0}var xa=64,Sa=4194304;function no(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ba(n,i){var a=n.pendingLanes;if(a===0)return 0;var d=0,p=n.suspendedLanes,v=n.pingedLanes,S=a&268435455;if(S!==0){var A=S&~p;A!==0?d=no(A):(v&=S,v!==0&&(d=no(v)))}else S=a&~p,S!==0?d=no(S):v!==0&&(d=no(v));if(d===0)return 0;if(i!==0&&i!==d&&(i&p)===0&&(p=d&-d,v=i&-i,p>=v||p===16&&(v&4194240)!==0))return i;if((d&4)!==0&&(d|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=d;0<i;)a=31-yn(i),p=1<<a,d|=n[a],i&=~p;return d}function iw(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ow(n,i){for(var a=n.suspendedLanes,d=n.pingedLanes,p=n.expirationTimes,v=n.pendingLanes;0<v;){var S=31-yn(v),A=1<<S,D=p[S];D===-1?((A&a)===0||(A&d)!==0)&&(p[S]=iw(A,i)):D<=i&&(n.expiredLanes|=A),v&=~A}}function ou(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function gp(){var n=xa;return xa<<=1,(xa&4194240)===0&&(xa=64),n}function au(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function ro(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-yn(i),n[i]=a}function aw(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<a;){var p=31-yn(a),v=1<<p;i[p]=0,d[p]=-1,n[p]=-1,a&=~v}}function lu(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var d=31-yn(a),p=1<<d;p&i|n[d]&i&&(n[d]|=i),a&=~p}}var $e=0;function vp(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var yp,cu,_p,wp,xp,uu=!1,Ta=[],xr=null,Sr=null,br=null,so=new Map,io=new Map,Tr=[],lw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sp(n,i){switch(n){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":so.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":io.delete(i.pointerId)}}function oo(n,i,a,d,p,v){return n===null||n.nativeEvent!==v?(n={blockedOn:i,domEventName:a,eventSystemFlags:d,nativeEvent:v,targetContainers:[p]},i!==null&&(i=xo(i),i!==null&&cu(i)),n):(n.eventSystemFlags|=d,i=n.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),n)}function cw(n,i,a,d,p){switch(i){case"focusin":return xr=oo(xr,n,i,a,d,p),!0;case"dragenter":return Sr=oo(Sr,n,i,a,d,p),!0;case"mouseover":return br=oo(br,n,i,a,d,p),!0;case"pointerover":var v=p.pointerId;return so.set(v,oo(so.get(v)||null,n,i,a,d,p)),!0;case"gotpointercapture":return v=p.pointerId,io.set(v,oo(io.get(v)||null,n,i,a,d,p)),!0}return!1}function bp(n){var i=rs(n.target);if(i!==null){var a=ns(i);if(a!==null){if(i=a.tag,i===13){if(i=lp(a),i!==null){n.blockedOn=i,xp(n.priority,function(){_p(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ca(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=hu(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var d=new a.constructor(a.type,a);Jc=d,a.target.dispatchEvent(d),Jc=null}else return i=xo(a),i!==null&&cu(i),n.blockedOn=a,!1;i.shift()}return!0}function Tp(n,i,a){Ca(n)&&a.delete(i)}function uw(){uu=!1,xr!==null&&Ca(xr)&&(xr=null),Sr!==null&&Ca(Sr)&&(Sr=null),br!==null&&Ca(br)&&(br=null),so.forEach(Tp),io.forEach(Tp)}function ao(n,i){n.blockedOn===i&&(n.blockedOn=null,uu||(uu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,uw)))}function lo(n){function i(p){return ao(p,n)}if(0<Ta.length){ao(Ta[0],n);for(var a=1;a<Ta.length;a++){var d=Ta[a];d.blockedOn===n&&(d.blockedOn=null)}}for(xr!==null&&ao(xr,n),Sr!==null&&ao(Sr,n),br!==null&&ao(br,n),so.forEach(i),io.forEach(i),a=0;a<Tr.length;a++)d=Tr[a],d.blockedOn===n&&(d.blockedOn=null);for(;0<Tr.length&&(a=Tr[0],a.blockedOn===null);)bp(a),a.blockedOn===null&&Tr.shift()}var zs=V.ReactCurrentBatchConfig,ka=!0;function dw(n,i,a,d){var p=$e,v=zs.transition;zs.transition=null;try{$e=1,du(n,i,a,d)}finally{$e=p,zs.transition=v}}function hw(n,i,a,d){var p=$e,v=zs.transition;zs.transition=null;try{$e=4,du(n,i,a,d)}finally{$e=p,zs.transition=v}}function du(n,i,a,d){if(ka){var p=hu(n,i,a,d);if(p===null)Au(n,i,d,Ea,a),Sp(n,d);else if(cw(p,n,i,a,d))d.stopPropagation();else if(Sp(n,d),i&4&&-1<lw.indexOf(n)){for(;p!==null;){var v=xo(p);if(v!==null&&yp(v),v=hu(n,i,a,d),v===null&&Au(n,i,d,Ea,a),v===p)break;p=v}p!==null&&d.stopPropagation()}else Au(n,i,d,null,a)}}var Ea=null;function hu(n,i,a,d){if(Ea=null,n=eu(d),n=rs(n),n!==null)if(i=ns(n),i===null)n=null;else if(a=i.tag,a===13){if(n=lp(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Ea=n,null}function Cp(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J0()){case iu:return 1;case pp:return 4;case _a:case ew:return 16;case mp:return 536870912;default:return 16}default:return 16}}var Cr=null,fu=null,Pa=null;function kp(){if(Pa)return Pa;var n,i=fu,a=i.length,d,p="value"in Cr?Cr.value:Cr.textContent,v=p.length;for(n=0;n<a&&i[n]===p[n];n++);var S=a-n;for(d=1;d<=S&&i[a-d]===p[v-d];d++);return Pa=p.slice(n,1<d?1-d:void 0)}function Aa(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Na(){return!0}function Ep(){return!1}function Xt(n){function i(a,d,p,v,S){this._reactName=a,this._targetInst=p,this.type=d,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(v):v[A]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Na:Ep,this.isPropagationStopped=Ep,this}return Y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Na)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Na)},persist:function(){},isPersistent:Na}),i}var Us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pu=Xt(Us),co=Y({},Us,{view:0,detail:0}),fw=Xt(co),mu,gu,uo,Ra=Y({},co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==uo&&(uo&&n.type==="mousemove"?(mu=n.screenX-uo.screenX,gu=n.screenY-uo.screenY):gu=mu=0,uo=n),mu)},movementY:function(n){return"movementY"in n?n.movementY:gu}}),Pp=Xt(Ra),pw=Y({},Ra,{dataTransfer:0}),mw=Xt(pw),gw=Y({},co,{relatedTarget:0}),vu=Xt(gw),vw=Y({},Us,{animationName:0,elapsedTime:0,pseudoElement:0}),yw=Xt(vw),_w=Y({},Us,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ww=Xt(_w),xw=Y({},Us,{data:0}),Ap=Xt(xw),Sw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cw(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Tw[n])?!!i[n]:!1}function yu(){return Cw}var kw=Y({},co,{key:function(n){if(n.key){var i=Sw[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Aa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?bw[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yu,charCode:function(n){return n.type==="keypress"?Aa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Aa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ew=Xt(kw),Pw=Y({},Ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Np=Xt(Pw),Aw=Y({},co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yu}),Nw=Xt(Aw),Rw=Y({},Us,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mw=Xt(Rw),Ow=Y({},Ra,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Iw=Xt(Ow),Dw=[9,13,27,32],_u=u&&"CompositionEvent"in window,ho=null;u&&"documentMode"in document&&(ho=document.documentMode);var Lw=u&&"TextEvent"in window&&!ho,Rp=u&&(!_u||ho&&8<ho&&11>=ho),Mp=" ",Op=!1;function Ip(n,i){switch(n){case"keyup":return Dw.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var js=!1;function Fw(n,i){switch(n){case"compositionend":return Dp(i);case"keypress":return i.which!==32?null:(Op=!0,Mp);case"textInput":return n=i.data,n===Mp&&Op?null:n;default:return null}}function Vw(n,i){if(js)return n==="compositionend"||!_u&&Ip(n,i)?(n=kp(),Pa=fu=Cr=null,js=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Rp&&i.locale!=="ko"?null:i.data;default:return null}}var Bw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Bw[n.type]:i==="textarea"}function Fp(n,i,a,d){rp(d),i=La(i,"onChange"),0<i.length&&(a=new pu("onChange","change",null,a,d),n.push({event:a,listeners:i}))}var fo=null,po=null;function zw(n){tm(n,0)}function Ma(n){var i=Hs(n);if(Se(i))return n}function Uw(n,i){if(n==="change")return i}var Vp=!1;if(u){var wu;if(u){var xu="oninput"in document;if(!xu){var Bp=document.createElement("div");Bp.setAttribute("oninput","return;"),xu=typeof Bp.oninput=="function"}wu=xu}else wu=!1;Vp=wu&&(!document.documentMode||9<document.documentMode)}function zp(){fo&&(fo.detachEvent("onpropertychange",Up),po=fo=null)}function Up(n){if(n.propertyName==="value"&&Ma(po)){var i=[];Fp(i,po,n,eu(n)),ap(zw,i)}}function jw(n,i,a){n==="focusin"?(zp(),fo=i,po=a,fo.attachEvent("onpropertychange",Up)):n==="focusout"&&zp()}function Gw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ma(po)}function Ww(n,i){if(n==="click")return Ma(i)}function $w(n,i){if(n==="input"||n==="change")return Ma(i)}function qw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var _n=typeof Object.is=="function"?Object.is:qw;function mo(n,i){if(_n(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),d=Object.keys(i);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var p=a[d];if(!h.call(i,p)||!_n(n[p],i[p]))return!1}return!0}function jp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Gp(n,i){var a=jp(n);n=0;for(var d;a;){if(a.nodeType===3){if(d=n+a.textContent.length,n<=i&&d>=i)return{node:a,offset:i-n};n=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jp(a)}}function Wp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Wp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function $p(){for(var n=window,i=Be();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Be(n.document)}return i}function Su(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Hw(n){var i=$p(),a=n.focusedElem,d=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Wp(a.ownerDocument.documentElement,a)){if(d!==null&&Su(a)){if(i=d.start,n=d.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var p=a.textContent.length,v=Math.min(d.start,p);d=d.end===void 0?v:Math.min(d.end,p),!n.extend&&v>d&&(p=d,d=v,v=p),p=Gp(a,v);var S=Gp(a,d);p&&S&&(n.rangeCount!==1||n.anchorNode!==p.node||n.anchorOffset!==p.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),n.removeAllRanges(),v>d?(n.addRange(i),n.extend(S.node,S.offset)):(i.setEnd(S.node,S.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Yw=u&&"documentMode"in document&&11>=document.documentMode,Gs=null,bu=null,go=null,Tu=!1;function qp(n,i,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Tu||Gs==null||Gs!==Be(d)||(d=Gs,"selectionStart"in d&&Su(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),go&&mo(go,d)||(go=d,d=La(bu,"onSelect"),0<d.length&&(i=new pu("onSelect","select",null,i,a),n.push({event:i,listeners:d}),i.target=Gs)))}function Oa(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ws={animationend:Oa("Animation","AnimationEnd"),animationiteration:Oa("Animation","AnimationIteration"),animationstart:Oa("Animation","AnimationStart"),transitionend:Oa("Transition","TransitionEnd")},Cu={},Hp={};u&&(Hp=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function Ia(n){if(Cu[n])return Cu[n];if(!Ws[n])return n;var i=Ws[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Hp)return Cu[n]=i[a];return n}var Yp=Ia("animationend"),Xp=Ia("animationiteration"),Kp=Ia("animationstart"),Zp=Ia("transitionend"),Qp=new Map,Jp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(n,i){Qp.set(n,i),l(i,[n])}for(var ku=0;ku<Jp.length;ku++){var Eu=Jp[ku],Xw=Eu.toLowerCase(),Kw=Eu[0].toUpperCase()+Eu.slice(1);kr(Xw,"on"+Kw)}kr(Yp,"onAnimationEnd"),kr(Xp,"onAnimationIteration"),kr(Kp,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(Zp,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zw=new Set("cancel close invalid load scroll toggle".split(" ").concat(vo));function em(n,i,a){var d=n.type||"unknown-event";n.currentTarget=a,X0(d,i,void 0,n),n.currentTarget=null}function tm(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var d=n[a],p=d.event;d=d.listeners;e:{var v=void 0;if(i)for(var S=d.length-1;0<=S;S--){var A=d[S],D=A.instance,H=A.currentTarget;if(A=A.listener,D!==v&&p.isPropagationStopped())break e;em(p,A,H),v=D}else for(S=0;S<d.length;S++){if(A=d[S],D=A.instance,H=A.currentTarget,A=A.listener,D!==v&&p.isPropagationStopped())break e;em(p,A,H),v=D}}}if(ya)throw n=su,ya=!1,su=null,n}function Qe(n,i){var a=i[Du];a===void 0&&(a=i[Du]=new Set);var d=n+"__bubble";a.has(d)||(nm(i,n,2,!1),a.add(d))}function Pu(n,i,a){var d=0;i&&(d|=4),nm(a,n,d,i)}var Da="_reactListening"+Math.random().toString(36).slice(2);function yo(n){if(!n[Da]){n[Da]=!0,r.forEach(function(a){a!=="selectionchange"&&(Zw.has(a)||Pu(a,!1,n),Pu(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Da]||(i[Da]=!0,Pu("selectionchange",!1,i))}}function nm(n,i,a,d){switch(Cp(i)){case 1:var p=dw;break;case 4:p=hw;break;default:p=du}a=p.bind(null,i,a,n),p=void 0,!ru||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),d?p!==void 0?n.addEventListener(i,a,{capture:!0,passive:p}):n.addEventListener(i,a,!0):p!==void 0?n.addEventListener(i,a,{passive:p}):n.addEventListener(i,a,!1)}function Au(n,i,a,d,p){var v=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var A=d.stateNode.containerInfo;if(A===p||A.nodeType===8&&A.parentNode===p)break;if(S===4)for(S=d.return;S!==null;){var D=S.tag;if((D===3||D===4)&&(D=S.stateNode.containerInfo,D===p||D.nodeType===8&&D.parentNode===p))return;S=S.return}for(;A!==null;){if(S=rs(A),S===null)return;if(D=S.tag,D===5||D===6){d=v=S;continue e}A=A.parentNode}}d=d.return}ap(function(){var H=v,se=eu(a),oe=[];e:{var re=Qp.get(n);if(re!==void 0){var me=pu,ve=n;switch(n){case"keypress":if(Aa(a)===0)break e;case"keydown":case"keyup":me=Ew;break;case"focusin":ve="focus",me=vu;break;case"focusout":ve="blur",me=vu;break;case"beforeblur":case"afterblur":me=vu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=Pp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=mw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=Nw;break;case Yp:case Xp:case Kp:me=yw;break;case Zp:me=Mw;break;case"scroll":me=fw;break;case"wheel":me=Iw;break;case"copy":case"cut":case"paste":me=ww;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=Np}var we=(i&4)!==0,dt=!we&&n==="scroll",G=we?re!==null?re+"Capture":null:re;we=[];for(var F=H,W;F!==null;){W=F;var le=W.stateNode;if(W.tag===5&&le!==null&&(W=le,G!==null&&(le=Ji(F,G),le!=null&&we.push(_o(F,le,W)))),dt)break;F=F.return}0<we.length&&(re=new me(re,ve,null,a,se),oe.push({event:re,listeners:we}))}}if((i&7)===0){e:{if(re=n==="mouseover"||n==="pointerover",me=n==="mouseout"||n==="pointerout",re&&a!==Jc&&(ve=a.relatedTarget||a.fromElement)&&(rs(ve)||ve[er]))break e;if((me||re)&&(re=se.window===se?se:(re=se.ownerDocument)?re.defaultView||re.parentWindow:window,me?(ve=a.relatedTarget||a.toElement,me=H,ve=ve?rs(ve):null,ve!==null&&(dt=ns(ve),ve!==dt||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(me=null,ve=H),me!==ve)){if(we=Pp,le="onMouseLeave",G="onMouseEnter",F="mouse",(n==="pointerout"||n==="pointerover")&&(we=Np,le="onPointerLeave",G="onPointerEnter",F="pointer"),dt=me==null?re:Hs(me),W=ve==null?re:Hs(ve),re=new we(le,F+"leave",me,a,se),re.target=dt,re.relatedTarget=W,le=null,rs(se)===H&&(we=new we(G,F+"enter",ve,a,se),we.target=W,we.relatedTarget=dt,le=we),dt=le,me&&ve)t:{for(we=me,G=ve,F=0,W=we;W;W=$s(W))F++;for(W=0,le=G;le;le=$s(le))W++;for(;0<F-W;)we=$s(we),F--;for(;0<W-F;)G=$s(G),W--;for(;F--;){if(we===G||G!==null&&we===G.alternate)break t;we=$s(we),G=$s(G)}we=null}else we=null;me!==null&&rm(oe,re,me,we,!1),ve!==null&&dt!==null&&rm(oe,dt,ve,we,!0)}}e:{if(re=H?Hs(H):window,me=re.nodeName&&re.nodeName.toLowerCase(),me==="select"||me==="input"&&re.type==="file")var xe=Uw;else if(Lp(re))if(Vp)xe=$w;else{xe=Gw;var Ce=jw}else(me=re.nodeName)&&me.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(xe=Ww);if(xe&&(xe=xe(n,H))){Fp(oe,xe,a,se);break e}Ce&&Ce(n,re,H),n==="focusout"&&(Ce=re._wrapperState)&&Ce.controlled&&re.type==="number"&&Me(re,"number",re.value)}switch(Ce=H?Hs(H):window,n){case"focusin":(Lp(Ce)||Ce.contentEditable==="true")&&(Gs=Ce,bu=H,go=null);break;case"focusout":go=bu=Gs=null;break;case"mousedown":Tu=!0;break;case"contextmenu":case"mouseup":case"dragend":Tu=!1,qp(oe,a,se);break;case"selectionchange":if(Yw)break;case"keydown":case"keyup":qp(oe,a,se)}var ke;if(_u)e:{switch(n){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else js?Ip(n,a)&&(Ae="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(Rp&&a.locale!=="ko"&&(js||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&js&&(ke=kp()):(Cr=se,fu="value"in Cr?Cr.value:Cr.textContent,js=!0)),Ce=La(H,Ae),0<Ce.length&&(Ae=new Ap(Ae,n,null,a,se),oe.push({event:Ae,listeners:Ce}),ke?Ae.data=ke:(ke=Dp(a),ke!==null&&(Ae.data=ke)))),(ke=Lw?Fw(n,a):Vw(n,a))&&(H=La(H,"onBeforeInput"),0<H.length&&(se=new Ap("onBeforeInput","beforeinput",null,a,se),oe.push({event:se,listeners:H}),se.data=ke))}tm(oe,i)})}function _o(n,i,a){return{instance:n,listener:i,currentTarget:a}}function La(n,i){for(var a=i+"Capture",d=[];n!==null;){var p=n,v=p.stateNode;p.tag===5&&v!==null&&(p=v,v=Ji(n,a),v!=null&&d.unshift(_o(n,v,p)),v=Ji(n,i),v!=null&&d.push(_o(n,v,p))),n=n.return}return d}function $s(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function rm(n,i,a,d,p){for(var v=i._reactName,S=[];a!==null&&a!==d;){var A=a,D=A.alternate,H=A.stateNode;if(D!==null&&D===d)break;A.tag===5&&H!==null&&(A=H,p?(D=Ji(a,v),D!=null&&S.unshift(_o(a,D,A))):p||(D=Ji(a,v),D!=null&&S.push(_o(a,D,A)))),a=a.return}S.length!==0&&n.push({event:i,listeners:S})}var Qw=/\r\n?/g,Jw=/\u0000|\uFFFD/g;function sm(n){return(typeof n=="string"?n:""+n).replace(Qw,`
`).replace(Jw,"")}function Fa(n,i,a){if(i=sm(i),sm(n)!==i&&a)throw Error(t(425))}function Va(){}var Nu=null,Ru=null;function Mu(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ou=typeof setTimeout=="function"?setTimeout:void 0,ex=typeof clearTimeout=="function"?clearTimeout:void 0,im=typeof Promise=="function"?Promise:void 0,tx=typeof queueMicrotask=="function"?queueMicrotask:typeof im<"u"?function(n){return im.resolve(null).then(n).catch(nx)}:Ou;function nx(n){setTimeout(function(){throw n})}function Iu(n,i){var a=i,d=0;do{var p=a.nextSibling;if(n.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(d===0){n.removeChild(p),lo(i);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=p}while(a);lo(i)}function Er(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function om(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var qs=Math.random().toString(36).slice(2),zn="__reactFiber$"+qs,wo="__reactProps$"+qs,er="__reactContainer$"+qs,Du="__reactEvents$"+qs,rx="__reactListeners$"+qs,sx="__reactHandles$"+qs;function rs(n){var i=n[zn];if(i)return i;for(var a=n.parentNode;a;){if(i=a[er]||a[zn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=om(n);n!==null;){if(a=n[zn])return a;n=om(n)}return i}n=a,a=n.parentNode}return null}function xo(n){return n=n[zn]||n[er],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Hs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ba(n){return n[wo]||null}var Lu=[],Ys=-1;function Pr(n){return{current:n}}function Je(n){0>Ys||(n.current=Lu[Ys],Lu[Ys]=null,Ys--)}function Ke(n,i){Ys++,Lu[Ys]=n.current,n.current=i}var Ar={},Et=Pr(Ar),zt=Pr(!1),ss=Ar;function Xs(n,i){var a=n.type.contextTypes;if(!a)return Ar;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var p={},v;for(v in a)p[v]=i[v];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=p),p}function Ut(n){return n=n.childContextTypes,n!=null}function za(){Je(zt),Je(Et)}function am(n,i,a){if(Et.current!==Ar)throw Error(t(168));Ke(Et,i),Ke(zt,a)}function lm(n,i,a){var d=n.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var p in d)if(!(p in i))throw Error(t(108,ue(n)||"Unknown",p));return Y({},a,d)}function Ua(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ar,ss=Et.current,Ke(Et,n),Ke(zt,zt.current),!0}function cm(n,i,a){var d=n.stateNode;if(!d)throw Error(t(169));a?(n=lm(n,i,ss),d.__reactInternalMemoizedMergedChildContext=n,Je(zt),Je(Et),Ke(Et,n)):Je(zt),Ke(zt,a)}var tr=null,ja=!1,Fu=!1;function um(n){tr===null?tr=[n]:tr.push(n)}function ix(n){ja=!0,um(n)}function Nr(){if(!Fu&&tr!==null){Fu=!0;var n=0,i=$e;try{var a=tr;for($e=1;n<a.length;n++){var d=a[n];do d=d(!0);while(d!==null)}tr=null,ja=!1}catch(p){throw tr!==null&&(tr=tr.slice(n+1)),hp(iu,Nr),p}finally{$e=i,Fu=!1}}return null}var Ks=[],Zs=0,Ga=null,Wa=0,on=[],an=0,is=null,nr=1,rr="";function os(n,i){Ks[Zs++]=Wa,Ks[Zs++]=Ga,Ga=n,Wa=i}function dm(n,i,a){on[an++]=nr,on[an++]=rr,on[an++]=is,is=n;var d=nr;n=rr;var p=32-yn(d)-1;d&=~(1<<p),a+=1;var v=32-yn(i)+p;if(30<v){var S=p-p%5;v=(d&(1<<S)-1).toString(32),d>>=S,p-=S,nr=1<<32-yn(i)+p|a<<p|d,rr=v+n}else nr=1<<v|a<<p|d,rr=n}function Vu(n){n.return!==null&&(os(n,1),dm(n,1,0))}function Bu(n){for(;n===Ga;)Ga=Ks[--Zs],Ks[Zs]=null,Wa=Ks[--Zs],Ks[Zs]=null;for(;n===is;)is=on[--an],on[an]=null,rr=on[--an],on[an]=null,nr=on[--an],on[an]=null}var Kt=null,Zt=null,rt=!1,wn=null;function hm(n,i){var a=dn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function fm(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Kt=n,Zt=Er(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Kt=n,Zt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=is!==null?{id:nr,overflow:rr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=dn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,Kt=n,Zt=null,!0):!1;default:return!1}}function zu(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Uu(n){if(rt){var i=Zt;if(i){var a=i;if(!fm(n,i)){if(zu(n))throw Error(t(418));i=Er(a.nextSibling);var d=Kt;i&&fm(n,i)?hm(d,a):(n.flags=n.flags&-4097|2,rt=!1,Kt=n)}}else{if(zu(n))throw Error(t(418));n.flags=n.flags&-4097|2,rt=!1,Kt=n}}}function pm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Kt=n}function $a(n){if(n!==Kt)return!1;if(!rt)return pm(n),rt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Mu(n.type,n.memoizedProps)),i&&(i=Zt)){if(zu(n))throw mm(),Error(t(418));for(;i;)hm(n,i),i=Er(i.nextSibling)}if(pm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){Zt=Er(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}Zt=null}}else Zt=Kt?Er(n.stateNode.nextSibling):null;return!0}function mm(){for(var n=Zt;n;)n=Er(n.nextSibling)}function Qs(){Zt=Kt=null,rt=!1}function ju(n){wn===null?wn=[n]:wn.push(n)}var ox=V.ReactCurrentBatchConfig;function So(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,n));var p=d,v=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===v?i.ref:(i=function(S){var A=p.refs;S===null?delete A[v]:A[v]=S},i._stringRef=v,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function qa(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function gm(n){var i=n._init;return i(n._payload)}function vm(n){function i(G,F){if(n){var W=G.deletions;W===null?(G.deletions=[F],G.flags|=16):W.push(F)}}function a(G,F){if(!n)return null;for(;F!==null;)i(G,F),F=F.sibling;return null}function d(G,F){for(G=new Map;F!==null;)F.key!==null?G.set(F.key,F):G.set(F.index,F),F=F.sibling;return G}function p(G,F){return G=Vr(G,F),G.index=0,G.sibling=null,G}function v(G,F,W){return G.index=W,n?(W=G.alternate,W!==null?(W=W.index,W<F?(G.flags|=2,F):W):(G.flags|=2,F)):(G.flags|=1048576,F)}function S(G){return n&&G.alternate===null&&(G.flags|=2),G}function A(G,F,W,le){return F===null||F.tag!==6?(F=Od(W,G.mode,le),F.return=G,F):(F=p(F,W),F.return=G,F)}function D(G,F,W,le){var xe=W.type;return xe===M?se(G,F,W.props.children,le,W.key):F!==null&&(F.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===K&&gm(xe)===F.type)?(le=p(F,W.props),le.ref=So(G,F,W),le.return=G,le):(le=gl(W.type,W.key,W.props,null,G.mode,le),le.ref=So(G,F,W),le.return=G,le)}function H(G,F,W,le){return F===null||F.tag!==4||F.stateNode.containerInfo!==W.containerInfo||F.stateNode.implementation!==W.implementation?(F=Id(W,G.mode,le),F.return=G,F):(F=p(F,W.children||[]),F.return=G,F)}function se(G,F,W,le,xe){return F===null||F.tag!==7?(F=ps(W,G.mode,le,xe),F.return=G,F):(F=p(F,W),F.return=G,F)}function oe(G,F,W){if(typeof F=="string"&&F!==""||typeof F=="number")return F=Od(""+F,G.mode,W),F.return=G,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case E:return W=gl(F.type,F.key,F.props,null,G.mode,W),W.ref=So(G,null,F),W.return=G,W;case N:return F=Id(F,G.mode,W),F.return=G,F;case K:var le=F._init;return oe(G,le(F._payload),W)}if(Fe(F)||Z(F))return F=ps(F,G.mode,W,null),F.return=G,F;qa(G,F)}return null}function re(G,F,W,le){var xe=F!==null?F.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return xe!==null?null:A(G,F,""+W,le);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case E:return W.key===xe?D(G,F,W,le):null;case N:return W.key===xe?H(G,F,W,le):null;case K:return xe=W._init,re(G,F,xe(W._payload),le)}if(Fe(W)||Z(W))return xe!==null?null:se(G,F,W,le,null);qa(G,W)}return null}function me(G,F,W,le,xe){if(typeof le=="string"&&le!==""||typeof le=="number")return G=G.get(W)||null,A(F,G,""+le,xe);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case E:return G=G.get(le.key===null?W:le.key)||null,D(F,G,le,xe);case N:return G=G.get(le.key===null?W:le.key)||null,H(F,G,le,xe);case K:var Ce=le._init;return me(G,F,W,Ce(le._payload),xe)}if(Fe(le)||Z(le))return G=G.get(W)||null,se(F,G,le,xe,null);qa(F,le)}return null}function ve(G,F,W,le){for(var xe=null,Ce=null,ke=F,Ae=F=0,St=null;ke!==null&&Ae<W.length;Ae++){ke.index>Ae?(St=ke,ke=null):St=ke.sibling;var Ue=re(G,ke,W[Ae],le);if(Ue===null){ke===null&&(ke=St);break}n&&ke&&Ue.alternate===null&&i(G,ke),F=v(Ue,F,Ae),Ce===null?xe=Ue:Ce.sibling=Ue,Ce=Ue,ke=St}if(Ae===W.length)return a(G,ke),rt&&os(G,Ae),xe;if(ke===null){for(;Ae<W.length;Ae++)ke=oe(G,W[Ae],le),ke!==null&&(F=v(ke,F,Ae),Ce===null?xe=ke:Ce.sibling=ke,Ce=ke);return rt&&os(G,Ae),xe}for(ke=d(G,ke);Ae<W.length;Ae++)St=me(ke,G,Ae,W[Ae],le),St!==null&&(n&&St.alternate!==null&&ke.delete(St.key===null?Ae:St.key),F=v(St,F,Ae),Ce===null?xe=St:Ce.sibling=St,Ce=St);return n&&ke.forEach(function(Br){return i(G,Br)}),rt&&os(G,Ae),xe}function we(G,F,W,le){var xe=Z(W);if(typeof xe!="function")throw Error(t(150));if(W=xe.call(W),W==null)throw Error(t(151));for(var Ce=xe=null,ke=F,Ae=F=0,St=null,Ue=W.next();ke!==null&&!Ue.done;Ae++,Ue=W.next()){ke.index>Ae?(St=ke,ke=null):St=ke.sibling;var Br=re(G,ke,Ue.value,le);if(Br===null){ke===null&&(ke=St);break}n&&ke&&Br.alternate===null&&i(G,ke),F=v(Br,F,Ae),Ce===null?xe=Br:Ce.sibling=Br,Ce=Br,ke=St}if(Ue.done)return a(G,ke),rt&&os(G,Ae),xe;if(ke===null){for(;!Ue.done;Ae++,Ue=W.next())Ue=oe(G,Ue.value,le),Ue!==null&&(F=v(Ue,F,Ae),Ce===null?xe=Ue:Ce.sibling=Ue,Ce=Ue);return rt&&os(G,Ae),xe}for(ke=d(G,ke);!Ue.done;Ae++,Ue=W.next())Ue=me(ke,G,Ae,Ue.value,le),Ue!==null&&(n&&Ue.alternate!==null&&ke.delete(Ue.key===null?Ae:Ue.key),F=v(Ue,F,Ae),Ce===null?xe=Ue:Ce.sibling=Ue,Ce=Ue);return n&&ke.forEach(function(Bx){return i(G,Bx)}),rt&&os(G,Ae),xe}function dt(G,F,W,le){if(typeof W=="object"&&W!==null&&W.type===M&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case E:e:{for(var xe=W.key,Ce=F;Ce!==null;){if(Ce.key===xe){if(xe=W.type,xe===M){if(Ce.tag===7){a(G,Ce.sibling),F=p(Ce,W.props.children),F.return=G,G=F;break e}}else if(Ce.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===K&&gm(xe)===Ce.type){a(G,Ce.sibling),F=p(Ce,W.props),F.ref=So(G,Ce,W),F.return=G,G=F;break e}a(G,Ce);break}else i(G,Ce);Ce=Ce.sibling}W.type===M?(F=ps(W.props.children,G.mode,le,W.key),F.return=G,G=F):(le=gl(W.type,W.key,W.props,null,G.mode,le),le.ref=So(G,F,W),le.return=G,G=le)}return S(G);case N:e:{for(Ce=W.key;F!==null;){if(F.key===Ce)if(F.tag===4&&F.stateNode.containerInfo===W.containerInfo&&F.stateNode.implementation===W.implementation){a(G,F.sibling),F=p(F,W.children||[]),F.return=G,G=F;break e}else{a(G,F);break}else i(G,F);F=F.sibling}F=Id(W,G.mode,le),F.return=G,G=F}return S(G);case K:return Ce=W._init,dt(G,F,Ce(W._payload),le)}if(Fe(W))return ve(G,F,W,le);if(Z(W))return we(G,F,W,le);qa(G,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,F!==null&&F.tag===6?(a(G,F.sibling),F=p(F,W),F.return=G,G=F):(a(G,F),F=Od(W,G.mode,le),F.return=G,G=F),S(G)):a(G,F)}return dt}var Js=vm(!0),ym=vm(!1),Ha=Pr(null),Ya=null,ei=null,Gu=null;function Wu(){Gu=ei=Ya=null}function $u(n){var i=Ha.current;Je(Ha),n._currentValue=i}function qu(n,i,a){for(;n!==null;){var d=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),n===a)break;n=n.return}}function ti(n,i){Ya=n,Gu=ei=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(jt=!0),n.firstContext=null)}function ln(n){var i=n._currentValue;if(Gu!==n)if(n={context:n,memoizedValue:i,next:null},ei===null){if(Ya===null)throw Error(t(308));ei=n,Ya.dependencies={lanes:0,firstContext:n}}else ei=ei.next=n;return i}var as=null;function Hu(n){as===null?as=[n]:as.push(n)}function _m(n,i,a,d){var p=i.interleaved;return p===null?(a.next=a,Hu(i)):(a.next=p.next,p.next=a),i.interleaved=a,sr(n,d)}function sr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Rr=!1;function Yu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ir(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Mr(n,i,a){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(ze&2)!==0){var p=d.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),d.pending=i,sr(n,a)}return p=d.interleaved,p===null?(i.next=i,Hu(d)):(i.next=p.next,p.next=i),d.interleaved=i,sr(n,a)}function Xa(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var d=i.lanes;d&=n.pendingLanes,a|=d,i.lanes=a,lu(n,a)}}function xm(n,i){var a=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var p=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var S={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};v===null?p=v=S:v=v.next=S,a=a.next}while(a!==null);v===null?p=v=i:v=v.next=i}else p=v=i;a={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:d.shared,effects:d.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Ka(n,i,a,d){var p=n.updateQueue;Rr=!1;var v=p.firstBaseUpdate,S=p.lastBaseUpdate,A=p.shared.pending;if(A!==null){p.shared.pending=null;var D=A,H=D.next;D.next=null,S===null?v=H:S.next=H,S=D;var se=n.alternate;se!==null&&(se=se.updateQueue,A=se.lastBaseUpdate,A!==S&&(A===null?se.firstBaseUpdate=H:A.next=H,se.lastBaseUpdate=D))}if(v!==null){var oe=p.baseState;S=0,se=H=D=null,A=v;do{var re=A.lane,me=A.eventTime;if((d&re)===re){se!==null&&(se=se.next={eventTime:me,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var ve=n,we=A;switch(re=i,me=a,we.tag){case 1:if(ve=we.payload,typeof ve=="function"){oe=ve.call(me,oe,re);break e}oe=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=we.payload,re=typeof ve=="function"?ve.call(me,oe,re):ve,re==null)break e;oe=Y({},oe,re);break e;case 2:Rr=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,re=p.effects,re===null?p.effects=[A]:re.push(A))}else me={eventTime:me,lane:re,tag:A.tag,payload:A.payload,callback:A.callback,next:null},se===null?(H=se=me,D=oe):se=se.next=me,S|=re;if(A=A.next,A===null){if(A=p.shared.pending,A===null)break;re=A,A=re.next,re.next=null,p.lastBaseUpdate=re,p.shared.pending=null}}while(!0);if(se===null&&(D=oe),p.baseState=D,p.firstBaseUpdate=H,p.lastBaseUpdate=se,i=p.shared.interleaved,i!==null){p=i;do S|=p.lane,p=p.next;while(p!==i)}else v===null&&(p.shared.lanes=0);us|=S,n.lanes=S,n.memoizedState=oe}}function Sm(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var d=n[i],p=d.callback;if(p!==null){if(d.callback=null,d=a,typeof p!="function")throw Error(t(191,p));p.call(d)}}}var bo={},Un=Pr(bo),To=Pr(bo),Co=Pr(bo);function ls(n){if(n===bo)throw Error(t(174));return n}function Xu(n,i){switch(Ke(Co,i),Ke(To,n),Ke(Un,bo),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Kc(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=Kc(i,n)}Je(Un),Ke(Un,i)}function ni(){Je(Un),Je(To),Je(Co)}function bm(n){ls(Co.current);var i=ls(Un.current),a=Kc(i,n.type);i!==a&&(Ke(To,n),Ke(Un,a))}function Ku(n){To.current===n&&(Je(Un),Je(To))}var it=Pr(0);function Za(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Zu=[];function Qu(){for(var n=0;n<Zu.length;n++)Zu[n]._workInProgressVersionPrimary=null;Zu.length=0}var Qa=V.ReactCurrentDispatcher,Ju=V.ReactCurrentBatchConfig,cs=0,ot=null,gt=null,wt=null,Ja=!1,ko=!1,Eo=0,ax=0;function Pt(){throw Error(t(321))}function ed(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!_n(n[a],i[a]))return!1;return!0}function td(n,i,a,d,p,v){if(cs=v,ot=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Qa.current=n===null||n.memoizedState===null?dx:hx,n=a(d,p),ko){v=0;do{if(ko=!1,Eo=0,25<=v)throw Error(t(301));v+=1,wt=gt=null,i.updateQueue=null,Qa.current=fx,n=a(d,p)}while(ko)}if(Qa.current=nl,i=gt!==null&&gt.next!==null,cs=0,wt=gt=ot=null,Ja=!1,i)throw Error(t(300));return n}function nd(){var n=Eo!==0;return Eo=0,n}function jn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?ot.memoizedState=wt=n:wt=wt.next=n,wt}function cn(){if(gt===null){var n=ot.alternate;n=n!==null?n.memoizedState:null}else n=gt.next;var i=wt===null?ot.memoizedState:wt.next;if(i!==null)wt=i,gt=n;else{if(n===null)throw Error(t(310));gt=n,n={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},wt===null?ot.memoizedState=wt=n:wt=wt.next=n}return wt}function Po(n,i){return typeof i=="function"?i(n):i}function rd(n){var i=cn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=gt,p=d.baseQueue,v=a.pending;if(v!==null){if(p!==null){var S=p.next;p.next=v.next,v.next=S}d.baseQueue=p=v,a.pending=null}if(p!==null){v=p.next,d=d.baseState;var A=S=null,D=null,H=v;do{var se=H.lane;if((cs&se)===se)D!==null&&(D=D.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),d=H.hasEagerState?H.eagerState:n(d,H.action);else{var oe={lane:se,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};D===null?(A=D=oe,S=d):D=D.next=oe,ot.lanes|=se,us|=se}H=H.next}while(H!==null&&H!==v);D===null?S=d:D.next=A,_n(d,i.memoizedState)||(jt=!0),i.memoizedState=d,i.baseState=S,i.baseQueue=D,a.lastRenderedState=d}if(n=a.interleaved,n!==null){p=n;do v=p.lane,ot.lanes|=v,us|=v,p=p.next;while(p!==n)}else p===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function sd(n){var i=cn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=a.dispatch,p=a.pending,v=i.memoizedState;if(p!==null){a.pending=null;var S=p=p.next;do v=n(v,S.action),S=S.next;while(S!==p);_n(v,i.memoizedState)||(jt=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),a.lastRenderedState=v}return[v,d]}function Tm(){}function Cm(n,i){var a=ot,d=cn(),p=i(),v=!_n(d.memoizedState,p);if(v&&(d.memoizedState=p,jt=!0),d=d.queue,id(Pm.bind(null,a,d,n),[n]),d.getSnapshot!==i||v||wt!==null&&wt.memoizedState.tag&1){if(a.flags|=2048,Ao(9,Em.bind(null,a,d,p,i),void 0,null),xt===null)throw Error(t(349));(cs&30)!==0||km(a,i,p)}return p}function km(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=ot.updateQueue,i===null?(i={lastEffect:null,stores:null},ot.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Em(n,i,a,d){i.value=a,i.getSnapshot=d,Am(i)&&Nm(n)}function Pm(n,i,a){return a(function(){Am(i)&&Nm(n)})}function Am(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!_n(n,a)}catch{return!0}}function Nm(n){var i=sr(n,1);i!==null&&Tn(i,n,1,-1)}function Rm(n){var i=jn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:n},i.queue=n,n=n.dispatch=ux.bind(null,ot,n),[i.memoizedState,n]}function Ao(n,i,a,d){return n={tag:n,create:i,destroy:a,deps:d,next:null},i=ot.updateQueue,i===null?(i={lastEffect:null,stores:null},ot.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(d=a.next,a.next=n,n.next=d,i.lastEffect=n)),n}function Mm(){return cn().memoizedState}function el(n,i,a,d){var p=jn();ot.flags|=n,p.memoizedState=Ao(1|i,a,void 0,d===void 0?null:d)}function tl(n,i,a,d){var p=cn();d=d===void 0?null:d;var v=void 0;if(gt!==null){var S=gt.memoizedState;if(v=S.destroy,d!==null&&ed(d,S.deps)){p.memoizedState=Ao(i,a,v,d);return}}ot.flags|=n,p.memoizedState=Ao(1|i,a,v,d)}function Om(n,i){return el(8390656,8,n,i)}function id(n,i){return tl(2048,8,n,i)}function Im(n,i){return tl(4,2,n,i)}function Dm(n,i){return tl(4,4,n,i)}function Lm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Fm(n,i,a){return a=a!=null?a.concat([n]):null,tl(4,4,Lm.bind(null,i,n),a)}function od(){}function Vm(n,i){var a=cn();i=i===void 0?null:i;var d=a.memoizedState;return d!==null&&i!==null&&ed(i,d[1])?d[0]:(a.memoizedState=[n,i],n)}function Bm(n,i){var a=cn();i=i===void 0?null:i;var d=a.memoizedState;return d!==null&&i!==null&&ed(i,d[1])?d[0]:(n=n(),a.memoizedState=[n,i],n)}function zm(n,i,a){return(cs&21)===0?(n.baseState&&(n.baseState=!1,jt=!0),n.memoizedState=a):(_n(a,i)||(a=gp(),ot.lanes|=a,us|=a,n.baseState=!0),i)}function lx(n,i){var a=$e;$e=a!==0&&4>a?a:4,n(!0);var d=Ju.transition;Ju.transition={};try{n(!1),i()}finally{$e=a,Ju.transition=d}}function Um(){return cn().memoizedState}function cx(n,i,a){var d=Lr(n);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},jm(n))Gm(i,a);else if(a=_m(n,i,a,d),a!==null){var p=Dt();Tn(a,n,d,p),Wm(a,i,d)}}function ux(n,i,a){var d=Lr(n),p={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(jm(n))Gm(i,p);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var S=i.lastRenderedState,A=v(S,a);if(p.hasEagerState=!0,p.eagerState=A,_n(A,S)){var D=i.interleaved;D===null?(p.next=p,Hu(i)):(p.next=D.next,D.next=p),i.interleaved=p;return}}catch{}finally{}a=_m(n,i,p,d),a!==null&&(p=Dt(),Tn(a,n,d,p),Wm(a,i,d))}}function jm(n){var i=n.alternate;return n===ot||i!==null&&i===ot}function Gm(n,i){ko=Ja=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Wm(n,i,a){if((a&4194240)!==0){var d=i.lanes;d&=n.pendingLanes,a|=d,i.lanes=a,lu(n,a)}}var nl={readContext:ln,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},dx={readContext:ln,useCallback:function(n,i){return jn().memoizedState=[n,i===void 0?null:i],n},useContext:ln,useEffect:Om,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,el(4194308,4,Lm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return el(4194308,4,n,i)},useInsertionEffect:function(n,i){return el(4,2,n,i)},useMemo:function(n,i){var a=jn();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var d=jn();return i=a!==void 0?a(i):i,d.memoizedState=d.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},d.queue=n,n=n.dispatch=cx.bind(null,ot,n),[d.memoizedState,n]},useRef:function(n){var i=jn();return n={current:n},i.memoizedState=n},useState:Rm,useDebugValue:od,useDeferredValue:function(n){return jn().memoizedState=n},useTransition:function(){var n=Rm(!1),i=n[0];return n=lx.bind(null,n[1]),jn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var d=ot,p=jn();if(rt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),xt===null)throw Error(t(349));(cs&30)!==0||km(d,i,a)}p.memoizedState=a;var v={value:a,getSnapshot:i};return p.queue=v,Om(Pm.bind(null,d,v,n),[n]),d.flags|=2048,Ao(9,Em.bind(null,d,v,a,i),void 0,null),a},useId:function(){var n=jn(),i=xt.identifierPrefix;if(rt){var a=rr,d=nr;a=(d&~(1<<32-yn(d)-1)).toString(32)+a,i=":"+i+"R"+a,a=Eo++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=ax++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},hx={readContext:ln,useCallback:Vm,useContext:ln,useEffect:id,useImperativeHandle:Fm,useInsertionEffect:Im,useLayoutEffect:Dm,useMemo:Bm,useReducer:rd,useRef:Mm,useState:function(){return rd(Po)},useDebugValue:od,useDeferredValue:function(n){var i=cn();return zm(i,gt.memoizedState,n)},useTransition:function(){var n=rd(Po)[0],i=cn().memoizedState;return[n,i]},useMutableSource:Tm,useSyncExternalStore:Cm,useId:Um,unstable_isNewReconciler:!1},fx={readContext:ln,useCallback:Vm,useContext:ln,useEffect:id,useImperativeHandle:Fm,useInsertionEffect:Im,useLayoutEffect:Dm,useMemo:Bm,useReducer:sd,useRef:Mm,useState:function(){return sd(Po)},useDebugValue:od,useDeferredValue:function(n){var i=cn();return gt===null?i.memoizedState=n:zm(i,gt.memoizedState,n)},useTransition:function(){var n=sd(Po)[0],i=cn().memoizedState;return[n,i]},useMutableSource:Tm,useSyncExternalStore:Cm,useId:Um,unstable_isNewReconciler:!1};function xn(n,i){if(n&&n.defaultProps){i=Y({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function ad(n,i,a,d){i=n.memoizedState,a=a(d,i),a=a==null?i:Y({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var rl={isMounted:function(n){return(n=n._reactInternals)?ns(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var d=Dt(),p=Lr(n),v=ir(d,p);v.payload=i,a!=null&&(v.callback=a),i=Mr(n,v,p),i!==null&&(Tn(i,n,p,d),Xa(i,n,p))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var d=Dt(),p=Lr(n),v=ir(d,p);v.tag=1,v.payload=i,a!=null&&(v.callback=a),i=Mr(n,v,p),i!==null&&(Tn(i,n,p,d),Xa(i,n,p))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Dt(),d=Lr(n),p=ir(a,d);p.tag=2,i!=null&&(p.callback=i),i=Mr(n,p,d),i!==null&&(Tn(i,n,d,a),Xa(i,n,d))}};function $m(n,i,a,d,p,v,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,v,S):i.prototype&&i.prototype.isPureReactComponent?!mo(a,d)||!mo(p,v):!0}function qm(n,i,a){var d=!1,p=Ar,v=i.contextType;return typeof v=="object"&&v!==null?v=ln(v):(p=Ut(i)?ss:Et.current,d=i.contextTypes,v=(d=d!=null)?Xs(n,p):Ar),i=new i(a,v),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=rl,n.stateNode=i,i._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=p,n.__reactInternalMemoizedMaskedChildContext=v),i}function Hm(n,i,a,d){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,d),i.state!==n&&rl.enqueueReplaceState(i,i.state,null)}function ld(n,i,a,d){var p=n.stateNode;p.props=a,p.state=n.memoizedState,p.refs={},Yu(n);var v=i.contextType;typeof v=="object"&&v!==null?p.context=ln(v):(v=Ut(i)?ss:Et.current,p.context=Xs(n,v)),p.state=n.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(ad(n,i,v,a),p.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&rl.enqueueReplaceState(p,p.state,null),Ka(n,a,p,d),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308)}function ri(n,i){try{var a="",d=i;do a+=ne(d),d=d.return;while(d);var p=a}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:n,source:i,stack:p,digest:null}}function cd(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function ud(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var px=typeof WeakMap=="function"?WeakMap:Map;function Ym(n,i,a){a=ir(-1,a),a.tag=3,a.payload={element:null};var d=i.value;return a.callback=function(){ul||(ul=!0,Cd=d),ud(n,i)},a}function Xm(n,i,a){a=ir(-1,a),a.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var p=i.value;a.payload=function(){return d(p)},a.callback=function(){ud(n,i)}}var v=n.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(a.callback=function(){ud(n,i),typeof d!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var S=i.stack;this.componentDidCatch(i.value,{componentStack:S!==null?S:""})}),a}function Km(n,i,a){var d=n.pingCache;if(d===null){d=n.pingCache=new px;var p=new Set;d.set(i,p)}else p=d.get(i),p===void 0&&(p=new Set,d.set(i,p));p.has(a)||(p.add(a),n=Px.bind(null,n,i,a),i.then(n,n))}function Zm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Qm(n,i,a,d,p){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=ir(-1,1),i.tag=2,Mr(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=p,n)}var mx=V.ReactCurrentOwner,jt=!1;function It(n,i,a,d){i.child=n===null?ym(i,null,a,d):Js(i,n.child,a,d)}function Jm(n,i,a,d,p){a=a.render;var v=i.ref;return ti(i,p),d=td(n,i,a,d,v,p),a=nd(),n!==null&&!jt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~p,or(n,i,p)):(rt&&a&&Vu(i),i.flags|=1,It(n,i,d,p),i.child)}function eg(n,i,a,d,p){if(n===null){var v=a.type;return typeof v=="function"&&!Md(v)&&v.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=v,tg(n,i,v,d,p)):(n=gl(a.type,null,d,i,i.mode,p),n.ref=i.ref,n.return=i,i.child=n)}if(v=n.child,(n.lanes&p)===0){var S=v.memoizedProps;if(a=a.compare,a=a!==null?a:mo,a(S,d)&&n.ref===i.ref)return or(n,i,p)}return i.flags|=1,n=Vr(v,d),n.ref=i.ref,n.return=i,i.child=n}function tg(n,i,a,d,p){if(n!==null){var v=n.memoizedProps;if(mo(v,d)&&n.ref===i.ref)if(jt=!1,i.pendingProps=d=v,(n.lanes&p)!==0)(n.flags&131072)!==0&&(jt=!0);else return i.lanes=n.lanes,or(n,i,p)}return dd(n,i,a,d,p)}function ng(n,i,a){var d=i.pendingProps,p=d.children,v=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(ii,Qt),Qt|=a;else{if((a&1073741824)===0)return n=v!==null?v.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ke(ii,Qt),Qt|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=v!==null?v.baseLanes:a,Ke(ii,Qt),Qt|=d}else v!==null?(d=v.baseLanes|a,i.memoizedState=null):d=a,Ke(ii,Qt),Qt|=d;return It(n,i,p,a),i.child}function rg(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function dd(n,i,a,d,p){var v=Ut(a)?ss:Et.current;return v=Xs(i,v),ti(i,p),a=td(n,i,a,d,v,p),d=nd(),n!==null&&!jt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~p,or(n,i,p)):(rt&&d&&Vu(i),i.flags|=1,It(n,i,a,p),i.child)}function sg(n,i,a,d,p){if(Ut(a)){var v=!0;Ua(i)}else v=!1;if(ti(i,p),i.stateNode===null)il(n,i),qm(i,a,d),ld(i,a,d,p),d=!0;else if(n===null){var S=i.stateNode,A=i.memoizedProps;S.props=A;var D=S.context,H=a.contextType;typeof H=="object"&&H!==null?H=ln(H):(H=Ut(a)?ss:Et.current,H=Xs(i,H));var se=a.getDerivedStateFromProps,oe=typeof se=="function"||typeof S.getSnapshotBeforeUpdate=="function";oe||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(A!==d||D!==H)&&Hm(i,S,d,H),Rr=!1;var re=i.memoizedState;S.state=re,Ka(i,d,S,p),D=i.memoizedState,A!==d||re!==D||zt.current||Rr?(typeof se=="function"&&(ad(i,a,se,d),D=i.memoizedState),(A=Rr||$m(i,a,A,d,re,D,H))?(oe||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(i.flags|=4194308)):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=D),S.props=d,S.state=D,S.context=H,d=A):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{S=i.stateNode,wm(n,i),A=i.memoizedProps,H=i.type===i.elementType?A:xn(i.type,A),S.props=H,oe=i.pendingProps,re=S.context,D=a.contextType,typeof D=="object"&&D!==null?D=ln(D):(D=Ut(a)?ss:Et.current,D=Xs(i,D));var me=a.getDerivedStateFromProps;(se=typeof me=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(A!==oe||re!==D)&&Hm(i,S,d,D),Rr=!1,re=i.memoizedState,S.state=re,Ka(i,d,S,p);var ve=i.memoizedState;A!==oe||re!==ve||zt.current||Rr?(typeof me=="function"&&(ad(i,a,me,d),ve=i.memoizedState),(H=Rr||$m(i,a,H,d,re,ve,D)||!1)?(se||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(d,ve,D),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(d,ve,D)),typeof S.componentDidUpdate=="function"&&(i.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof S.componentDidUpdate!="function"||A===n.memoizedProps&&re===n.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&re===n.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=ve),S.props=d,S.state=ve,S.context=D,d=H):(typeof S.componentDidUpdate!="function"||A===n.memoizedProps&&re===n.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&re===n.memoizedState||(i.flags|=1024),d=!1)}return hd(n,i,a,d,v,p)}function hd(n,i,a,d,p,v){rg(n,i);var S=(i.flags&128)!==0;if(!d&&!S)return p&&cm(i,a,!1),or(n,i,v);d=i.stateNode,mx.current=i;var A=S&&typeof a.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,n!==null&&S?(i.child=Js(i,n.child,null,v),i.child=Js(i,null,A,v)):It(n,i,A,v),i.memoizedState=d.state,p&&cm(i,a,!0),i.child}function ig(n){var i=n.stateNode;i.pendingContext?am(n,i.pendingContext,i.pendingContext!==i.context):i.context&&am(n,i.context,!1),Xu(n,i.containerInfo)}function og(n,i,a,d,p){return Qs(),ju(p),i.flags|=256,It(n,i,a,d),i.child}var fd={dehydrated:null,treeContext:null,retryLane:0};function pd(n){return{baseLanes:n,cachePool:null,transitions:null}}function ag(n,i,a){var d=i.pendingProps,p=it.current,v=!1,S=(i.flags&128)!==0,A;if((A=S)||(A=n!==null&&n.memoizedState===null?!1:(p&2)!==0),A?(v=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(p|=1),Ke(it,p&1),n===null)return Uu(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(S=d.children,n=d.fallback,v?(d=i.mode,v=i.child,S={mode:"hidden",children:S},(d&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=vl(S,d,0,null),n=ps(n,d,a,null),v.return=i,n.return=i,v.sibling=n,i.child=v,i.child.memoizedState=pd(a),i.memoizedState=fd,n):md(i,S));if(p=n.memoizedState,p!==null&&(A=p.dehydrated,A!==null))return gx(n,i,S,d,A,p,a);if(v){v=d.fallback,S=i.mode,p=n.child,A=p.sibling;var D={mode:"hidden",children:d.children};return(S&1)===0&&i.child!==p?(d=i.child,d.childLanes=0,d.pendingProps=D,i.deletions=null):(d=Vr(p,D),d.subtreeFlags=p.subtreeFlags&14680064),A!==null?v=Vr(A,v):(v=ps(v,S,a,null),v.flags|=2),v.return=i,d.return=i,d.sibling=v,i.child=d,d=v,v=i.child,S=n.child.memoizedState,S=S===null?pd(a):{baseLanes:S.baseLanes|a,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=n.childLanes&~a,i.memoizedState=fd,d}return v=n.child,n=v.sibling,d=Vr(v,{mode:"visible",children:d.children}),(i.mode&1)===0&&(d.lanes=a),d.return=i,d.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=d,i.memoizedState=null,d}function md(n,i){return i=vl({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function sl(n,i,a,d){return d!==null&&ju(d),Js(i,n.child,null,a),n=md(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function gx(n,i,a,d,p,v,S){if(a)return i.flags&256?(i.flags&=-257,d=cd(Error(t(422))),sl(n,i,S,d)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(v=d.fallback,p=i.mode,d=vl({mode:"visible",children:d.children},p,0,null),v=ps(v,p,S,null),v.flags|=2,d.return=i,v.return=i,d.sibling=v,i.child=d,(i.mode&1)!==0&&Js(i,n.child,null,S),i.child.memoizedState=pd(S),i.memoizedState=fd,v);if((i.mode&1)===0)return sl(n,i,S,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var A=d.dgst;return d=A,v=Error(t(419)),d=cd(v,d,void 0),sl(n,i,S,d)}if(A=(S&n.childLanes)!==0,jt||A){if(d=xt,d!==null){switch(S&-S){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|S))!==0?0:p,p!==0&&p!==v.retryLane&&(v.retryLane=p,sr(n,p),Tn(d,n,p,-1))}return Rd(),d=cd(Error(t(421))),sl(n,i,S,d)}return p.data==="$?"?(i.flags|=128,i.child=n.child,i=Ax.bind(null,n),p._reactRetry=i,null):(n=v.treeContext,Zt=Er(p.nextSibling),Kt=i,rt=!0,wn=null,n!==null&&(on[an++]=nr,on[an++]=rr,on[an++]=is,nr=n.id,rr=n.overflow,is=i),i=md(i,d.children),i.flags|=4096,i)}function lg(n,i,a){n.lanes|=i;var d=n.alternate;d!==null&&(d.lanes|=i),qu(n.return,i,a)}function gd(n,i,a,d,p){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:p}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=a,v.tailMode=p)}function cg(n,i,a){var d=i.pendingProps,p=d.revealOrder,v=d.tail;if(It(n,i,d.children,a),d=it.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&lg(n,a,i);else if(n.tag===19)lg(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(Ke(it,d),(i.mode&1)===0)i.memoizedState=null;else switch(p){case"forwards":for(a=i.child,p=null;a!==null;)n=a.alternate,n!==null&&Za(n)===null&&(p=a),a=a.sibling;a=p,a===null?(p=i.child,i.child=null):(p=a.sibling,a.sibling=null),gd(i,!1,p,a,v);break;case"backwards":for(a=null,p=i.child,i.child=null;p!==null;){if(n=p.alternate,n!==null&&Za(n)===null){i.child=p;break}n=p.sibling,p.sibling=a,a=p,p=n}gd(i,!0,a,null,v);break;case"together":gd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function il(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function or(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),us|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=Vr(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Vr(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function vx(n,i,a){switch(i.tag){case 3:ig(i),Qs();break;case 5:bm(i);break;case 1:Ut(i.type)&&Ua(i);break;case 4:Xu(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,p=i.memoizedProps.value;Ke(Ha,d._currentValue),d._currentValue=p;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(Ke(it,it.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?ag(n,i,a):(Ke(it,it.current&1),n=or(n,i,a),n!==null?n.sibling:null);Ke(it,it.current&1);break;case 19:if(d=(a&i.childLanes)!==0,(n.flags&128)!==0){if(d)return cg(n,i,a);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ke(it,it.current),d)break;return null;case 22:case 23:return i.lanes=0,ng(n,i,a)}return or(n,i,a)}var ug,vd,dg,hg;ug=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},vd=function(){},dg=function(n,i,a,d){var p=n.memoizedProps;if(p!==d){n=i.stateNode,ls(Un.current);var v=null;switch(a){case"input":p=nt(n,p),d=nt(n,d),v=[];break;case"select":p=Y({},p,{value:void 0}),d=Y({},d,{value:void 0}),v=[];break;case"textarea":p=De(n,p),d=De(n,d),v=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=Va)}Zc(a,d);var S;a=null;for(H in p)if(!d.hasOwnProperty(H)&&p.hasOwnProperty(H)&&p[H]!=null)if(H==="style"){var A=p[H];for(S in A)A.hasOwnProperty(S)&&(a||(a={}),a[S]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(o.hasOwnProperty(H)?v||(v=[]):(v=v||[]).push(H,null));for(H in d){var D=d[H];if(A=p!=null?p[H]:void 0,d.hasOwnProperty(H)&&D!==A&&(D!=null||A!=null))if(H==="style")if(A){for(S in A)!A.hasOwnProperty(S)||D&&D.hasOwnProperty(S)||(a||(a={}),a[S]="");for(S in D)D.hasOwnProperty(S)&&A[S]!==D[S]&&(a||(a={}),a[S]=D[S])}else a||(v||(v=[]),v.push(H,a)),a=D;else H==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,A=A?A.__html:void 0,D!=null&&A!==D&&(v=v||[]).push(H,D)):H==="children"?typeof D!="string"&&typeof D!="number"||(v=v||[]).push(H,""+D):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(o.hasOwnProperty(H)?(D!=null&&H==="onScroll"&&Qe("scroll",n),v||A===D||(v=[])):(v=v||[]).push(H,D))}a&&(v=v||[]).push("style",a);var H=v;(i.updateQueue=H)&&(i.flags|=4)}},hg=function(n,i,a,d){a!==d&&(i.flags|=4)};function No(n,i){if(!rt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function At(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,d=0;if(i)for(var p=n.child;p!==null;)a|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)a|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=d,n.childLanes=a,i}function yx(n,i,a){var d=i.pendingProps;switch(Bu(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(i),null;case 1:return Ut(i.type)&&za(),At(i),null;case 3:return d=i.stateNode,ni(),Je(zt),Je(Et),Qu(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&($a(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,wn!==null&&(Pd(wn),wn=null))),vd(n,i),At(i),null;case 5:Ku(i);var p=ls(Co.current);if(a=i.type,n!==null&&i.stateNode!=null)dg(n,i,a,d,p),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(t(166));return At(i),null}if(n=ls(Un.current),$a(i)){d=i.stateNode,a=i.type;var v=i.memoizedProps;switch(d[zn]=i,d[wo]=v,n=(i.mode&1)!==0,a){case"dialog":Qe("cancel",d),Qe("close",d);break;case"iframe":case"object":case"embed":Qe("load",d);break;case"video":case"audio":for(p=0;p<vo.length;p++)Qe(vo[p],d);break;case"source":Qe("error",d);break;case"img":case"image":case"link":Qe("error",d),Qe("load",d);break;case"details":Qe("toggle",d);break;case"input":de(d,v),Qe("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!v.multiple},Qe("invalid",d);break;case"textarea":sn(d,v),Qe("invalid",d)}Zc(a,v),p=null;for(var S in v)if(v.hasOwnProperty(S)){var A=v[S];S==="children"?typeof A=="string"?d.textContent!==A&&(v.suppressHydrationWarning!==!0&&Fa(d.textContent,A,n),p=["children",A]):typeof A=="number"&&d.textContent!==""+A&&(v.suppressHydrationWarning!==!0&&Fa(d.textContent,A,n),p=["children",""+A]):o.hasOwnProperty(S)&&A!=null&&S==="onScroll"&&Qe("scroll",d)}switch(a){case"input":he(d),Le(d,v,!0);break;case"textarea":he(d),Ls(d);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(d.onclick=Va)}d=p,i.updateQueue=d,d!==null&&(i.flags|=4)}else{S=p.nodeType===9?p:p.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Fs(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=S.createElement(a,{is:d.is}):(n=S.createElement(a),a==="select"&&(S=n,d.multiple?S.multiple=!0:d.size&&(S.size=d.size))):n=S.createElementNS(n,a),n[zn]=i,n[wo]=d,ug(n,i,!1,!1),i.stateNode=n;e:{switch(S=Qc(a,d),a){case"dialog":Qe("cancel",n),Qe("close",n),p=d;break;case"iframe":case"object":case"embed":Qe("load",n),p=d;break;case"video":case"audio":for(p=0;p<vo.length;p++)Qe(vo[p],n);p=d;break;case"source":Qe("error",n),p=d;break;case"img":case"image":case"link":Qe("error",n),Qe("load",n),p=d;break;case"details":Qe("toggle",n),p=d;break;case"input":de(n,d),p=nt(n,d),Qe("invalid",n);break;case"option":p=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},p=Y({},d,{value:void 0}),Qe("invalid",n);break;case"textarea":sn(n,d),p=De(n,d),Qe("invalid",n);break;default:p=d}Zc(a,p),A=p;for(v in A)if(A.hasOwnProperty(v)){var D=A[v];v==="style"?tp(n,D):v==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Jf(n,D)):v==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&Zi(n,D):typeof D=="number"&&Zi(n,""+D):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?D!=null&&v==="onScroll"&&Qe("scroll",n):D!=null&&L(n,v,D,S))}switch(a){case"input":he(n),Le(n,d,!1);break;case"textarea":he(n),Ls(n);break;case"option":d.value!=null&&n.setAttribute("value",""+Q(d.value));break;case"select":n.multiple=!!d.multiple,v=d.value,v!=null?Pe(n,!!d.multiple,v,!1):d.defaultValue!=null&&Pe(n,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(n.onclick=Va)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return At(i),null;case 6:if(n&&i.stateNode!=null)hg(n,i,n.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(t(166));if(a=ls(Co.current),ls(Un.current),$a(i)){if(d=i.stateNode,a=i.memoizedProps,d[zn]=i,(v=d.nodeValue!==a)&&(n=Kt,n!==null))switch(n.tag){case 3:Fa(d.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Fa(d.nodeValue,a,(n.mode&1)!==0)}v&&(i.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[zn]=i,i.stateNode=d}return At(i),null;case 13:if(Je(it),d=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(rt&&Zt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)mm(),Qs(),i.flags|=98560,v=!1;else if(v=$a(i),d!==null&&d.dehydrated!==null){if(n===null){if(!v)throw Error(t(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[zn]=i}else Qs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;At(i),v=!1}else wn!==null&&(Pd(wn),wn=null),v=!0;if(!v)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(it.current&1)!==0?vt===0&&(vt=3):Rd())),i.updateQueue!==null&&(i.flags|=4),At(i),null);case 4:return ni(),vd(n,i),n===null&&yo(i.stateNode.containerInfo),At(i),null;case 10:return $u(i.type._context),At(i),null;case 17:return Ut(i.type)&&za(),At(i),null;case 19:if(Je(it),v=i.memoizedState,v===null)return At(i),null;if(d=(i.flags&128)!==0,S=v.rendering,S===null)if(d)No(v,!1);else{if(vt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(S=Za(n),S!==null){for(i.flags|=128,No(v,!1),d=S.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=a,a=i.child;a!==null;)v=a,n=d,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=n,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,n=S.dependencies,v.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ke(it,it.current&1|2),i.child}n=n.sibling}v.tail!==null&&ut()>oi&&(i.flags|=128,d=!0,No(v,!1),i.lanes=4194304)}else{if(!d)if(n=Za(S),n!==null){if(i.flags|=128,d=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),No(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!rt)return At(i),null}else 2*ut()-v.renderingStartTime>oi&&a!==1073741824&&(i.flags|=128,d=!0,No(v,!1),i.lanes=4194304);v.isBackwards?(S.sibling=i.child,i.child=S):(a=v.last,a!==null?a.sibling=S:i.child=S,v.last=S)}return v.tail!==null?(i=v.tail,v.rendering=i,v.tail=i.sibling,v.renderingStartTime=ut(),i.sibling=null,a=it.current,Ke(it,d?a&1|2:a&1),i):(At(i),null);case 22:case 23:return Nd(),d=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(i.flags|=8192),d&&(i.mode&1)!==0?(Qt&1073741824)!==0&&(At(i),i.subtreeFlags&6&&(i.flags|=8192)):At(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function _x(n,i){switch(Bu(i),i.tag){case 1:return Ut(i.type)&&za(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ni(),Je(zt),Je(Et),Qu(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Ku(i),null;case 13:if(Je(it),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Qs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Je(it),null;case 4:return ni(),null;case 10:return $u(i.type._context),null;case 22:case 23:return Nd(),null;case 24:return null;default:return null}}var ol=!1,Nt=!1,wx=typeof WeakSet=="function"?WeakSet:Set,ge=null;function si(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){at(n,i,d)}else a.current=null}function yd(n,i,a){try{a()}catch(d){at(n,i,d)}}var fg=!1;function xx(n,i){if(Nu=ka,n=$p(),Su(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var p=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var S=0,A=-1,D=-1,H=0,se=0,oe=n,re=null;t:for(;;){for(var me;oe!==a||p!==0&&oe.nodeType!==3||(A=S+p),oe!==v||d!==0&&oe.nodeType!==3||(D=S+d),oe.nodeType===3&&(S+=oe.nodeValue.length),(me=oe.firstChild)!==null;)re=oe,oe=me;for(;;){if(oe===n)break t;if(re===a&&++H===p&&(A=S),re===v&&++se===d&&(D=S),(me=oe.nextSibling)!==null)break;oe=re,re=oe.parentNode}oe=me}a=A===-1||D===-1?null:{start:A,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ru={focusedElem:n,selectionRange:a},ka=!1,ge=i;ge!==null;)if(i=ge,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ge=n;else for(;ge!==null;){i=ge;try{var ve=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var we=ve.memoizedProps,dt=ve.memoizedState,G=i.stateNode,F=G.getSnapshotBeforeUpdate(i.elementType===i.type?we:xn(i.type,we),dt);G.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var W=i.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(le){at(i,i.return,le)}if(n=i.sibling,n!==null){n.return=i.return,ge=n;break}ge=i.return}return ve=fg,fg=!1,ve}function Ro(n,i,a){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&n)===n){var v=p.destroy;p.destroy=void 0,v!==void 0&&yd(i,a,v)}p=p.next}while(p!==d)}}function al(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var d=a.create;a.destroy=d()}a=a.next}while(a!==i)}}function _d(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function pg(n){var i=n.alternate;i!==null&&(n.alternate=null,pg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[zn],delete i[wo],delete i[Du],delete i[rx],delete i[sx])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function mg(n){return n.tag===5||n.tag===3||n.tag===4}function gg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||mg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function wd(n,i,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Va));else if(d!==4&&(n=n.child,n!==null))for(wd(n,i,a),n=n.sibling;n!==null;)wd(n,i,a),n=n.sibling}function xd(n,i,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(xd(n,i,a),n=n.sibling;n!==null;)xd(n,i,a),n=n.sibling}var Tt=null,Sn=!1;function Or(n,i,a){for(a=a.child;a!==null;)vg(n,i,a),a=a.sibling}function vg(n,i,a){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(wa,a)}catch{}switch(a.tag){case 5:Nt||si(a,i);case 6:var d=Tt,p=Sn;Tt=null,Or(n,i,a),Tt=d,Sn=p,Tt!==null&&(Sn?(n=Tt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Tt.removeChild(a.stateNode));break;case 18:Tt!==null&&(Sn?(n=Tt,a=a.stateNode,n.nodeType===8?Iu(n.parentNode,a):n.nodeType===1&&Iu(n,a),lo(n)):Iu(Tt,a.stateNode));break;case 4:d=Tt,p=Sn,Tt=a.stateNode.containerInfo,Sn=!0,Or(n,i,a),Tt=d,Sn=p;break;case 0:case 11:case 14:case 15:if(!Nt&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var v=p,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&yd(a,i,S),p=p.next}while(p!==d)}Or(n,i,a);break;case 1:if(!Nt&&(si(a,i),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(A){at(a,i,A)}Or(n,i,a);break;case 21:Or(n,i,a);break;case 22:a.mode&1?(Nt=(d=Nt)||a.memoizedState!==null,Or(n,i,a),Nt=d):Or(n,i,a);break;default:Or(n,i,a)}}function yg(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new wx),i.forEach(function(d){var p=Nx.bind(null,n,d);a.has(d)||(a.add(d),d.then(p,p))})}}function bn(n,i){var a=i.deletions;if(a!==null)for(var d=0;d<a.length;d++){var p=a[d];try{var v=n,S=i,A=S;e:for(;A!==null;){switch(A.tag){case 5:Tt=A.stateNode,Sn=!1;break e;case 3:Tt=A.stateNode.containerInfo,Sn=!0;break e;case 4:Tt=A.stateNode.containerInfo,Sn=!0;break e}A=A.return}if(Tt===null)throw Error(t(160));vg(v,S,p),Tt=null,Sn=!1;var D=p.alternate;D!==null&&(D.return=null),p.return=null}catch(H){at(p,i,H)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)_g(i,n),i=i.sibling}function _g(n,i){var a=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(bn(i,n),Gn(n),d&4){try{Ro(3,n,n.return),al(3,n)}catch(we){at(n,n.return,we)}try{Ro(5,n,n.return)}catch(we){at(n,n.return,we)}}break;case 1:bn(i,n),Gn(n),d&512&&a!==null&&si(a,a.return);break;case 5:if(bn(i,n),Gn(n),d&512&&a!==null&&si(a,a.return),n.flags&32){var p=n.stateNode;try{Zi(p,"")}catch(we){at(n,n.return,we)}}if(d&4&&(p=n.stateNode,p!=null)){var v=n.memoizedProps,S=a!==null?a.memoizedProps:v,A=n.type,D=n.updateQueue;if(n.updateQueue=null,D!==null)try{A==="input"&&v.type==="radio"&&v.name!=null&&fe(p,v),Qc(A,S);var H=Qc(A,v);for(S=0;S<D.length;S+=2){var se=D[S],oe=D[S+1];se==="style"?tp(p,oe):se==="dangerouslySetInnerHTML"?Jf(p,oe):se==="children"?Zi(p,oe):L(p,se,oe,H)}switch(A){case"input":Re(p,v);break;case"textarea":Jn(p,v);break;case"select":var re=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!v.multiple;var me=v.value;me!=null?Pe(p,!!v.multiple,me,!1):re!==!!v.multiple&&(v.defaultValue!=null?Pe(p,!!v.multiple,v.defaultValue,!0):Pe(p,!!v.multiple,v.multiple?[]:"",!1))}p[wo]=v}catch(we){at(n,n.return,we)}}break;case 6:if(bn(i,n),Gn(n),d&4){if(n.stateNode===null)throw Error(t(162));p=n.stateNode,v=n.memoizedProps;try{p.nodeValue=v}catch(we){at(n,n.return,we)}}break;case 3:if(bn(i,n),Gn(n),d&4&&a!==null&&a.memoizedState.isDehydrated)try{lo(i.containerInfo)}catch(we){at(n,n.return,we)}break;case 4:bn(i,n),Gn(n);break;case 13:bn(i,n),Gn(n),p=n.child,p.flags&8192&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(Td=ut())),d&4&&yg(n);break;case 22:if(se=a!==null&&a.memoizedState!==null,n.mode&1?(Nt=(H=Nt)||se,bn(i,n),Nt=H):bn(i,n),Gn(n),d&8192){if(H=n.memoizedState!==null,(n.stateNode.isHidden=H)&&!se&&(n.mode&1)!==0)for(ge=n,se=n.child;se!==null;){for(oe=ge=se;ge!==null;){switch(re=ge,me=re.child,re.tag){case 0:case 11:case 14:case 15:Ro(4,re,re.return);break;case 1:si(re,re.return);var ve=re.stateNode;if(typeof ve.componentWillUnmount=="function"){d=re,a=re.return;try{i=d,ve.props=i.memoizedProps,ve.state=i.memoizedState,ve.componentWillUnmount()}catch(we){at(d,a,we)}}break;case 5:si(re,re.return);break;case 22:if(re.memoizedState!==null){Sg(oe);continue}}me!==null?(me.return=re,ge=me):Sg(oe)}se=se.sibling}e:for(se=null,oe=n;;){if(oe.tag===5){if(se===null){se=oe;try{p=oe.stateNode,H?(v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(A=oe.stateNode,D=oe.memoizedProps.style,S=D!=null&&D.hasOwnProperty("display")?D.display:null,A.style.display=ep("display",S))}catch(we){at(n,n.return,we)}}}else if(oe.tag===6){if(se===null)try{oe.stateNode.nodeValue=H?"":oe.memoizedProps}catch(we){at(n,n.return,we)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===n)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===n)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===n)break e;se===oe&&(se=null),oe=oe.return}se===oe&&(se=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:bn(i,n),Gn(n),d&4&&yg(n);break;case 21:break;default:bn(i,n),Gn(n)}}function Gn(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(mg(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(Zi(p,""),d.flags&=-33);var v=gg(n);xd(n,v,p);break;case 3:case 4:var S=d.stateNode.containerInfo,A=gg(n);wd(n,A,S);break;default:throw Error(t(161))}}catch(D){at(n,n.return,D)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Sx(n,i,a){ge=n,wg(n)}function wg(n,i,a){for(var d=(n.mode&1)!==0;ge!==null;){var p=ge,v=p.child;if(p.tag===22&&d){var S=p.memoizedState!==null||ol;if(!S){var A=p.alternate,D=A!==null&&A.memoizedState!==null||Nt;A=ol;var H=Nt;if(ol=S,(Nt=D)&&!H)for(ge=p;ge!==null;)S=ge,D=S.child,S.tag===22&&S.memoizedState!==null?bg(p):D!==null?(D.return=S,ge=D):bg(p);for(;v!==null;)ge=v,wg(v),v=v.sibling;ge=p,ol=A,Nt=H}xg(n)}else(p.subtreeFlags&8772)!==0&&v!==null?(v.return=p,ge=v):xg(n)}}function xg(n){for(;ge!==null;){var i=ge;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Nt||al(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!Nt)if(a===null)d.componentDidMount();else{var p=i.elementType===i.type?a.memoizedProps:xn(i.type,a.memoizedProps);d.componentDidUpdate(p,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var v=i.updateQueue;v!==null&&Sm(i,v,d);break;case 3:var S=i.updateQueue;if(S!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Sm(i,S,a)}break;case 5:var A=i.stateNode;if(a===null&&i.flags&4){a=A;var D=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var H=i.alternate;if(H!==null){var se=H.memoizedState;if(se!==null){var oe=se.dehydrated;oe!==null&&lo(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Nt||i.flags&512&&_d(i)}catch(re){at(i,i.return,re)}}if(i===n){ge=null;break}if(a=i.sibling,a!==null){a.return=i.return,ge=a;break}ge=i.return}}function Sg(n){for(;ge!==null;){var i=ge;if(i===n){ge=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ge=a;break}ge=i.return}}function bg(n){for(;ge!==null;){var i=ge;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{al(4,i)}catch(D){at(i,a,D)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var p=i.return;try{d.componentDidMount()}catch(D){at(i,p,D)}}var v=i.return;try{_d(i)}catch(D){at(i,v,D)}break;case 5:var S=i.return;try{_d(i)}catch(D){at(i,S,D)}}}catch(D){at(i,i.return,D)}if(i===n){ge=null;break}var A=i.sibling;if(A!==null){A.return=i.return,ge=A;break}ge=i.return}}var bx=Math.ceil,ll=V.ReactCurrentDispatcher,Sd=V.ReactCurrentOwner,un=V.ReactCurrentBatchConfig,ze=0,xt=null,pt=null,Ct=0,Qt=0,ii=Pr(0),vt=0,Mo=null,us=0,cl=0,bd=0,Oo=null,Gt=null,Td=0,oi=1/0,ar=null,ul=!1,Cd=null,Ir=null,dl=!1,Dr=null,hl=0,Io=0,kd=null,fl=-1,pl=0;function Dt(){return(ze&6)!==0?ut():fl!==-1?fl:fl=ut()}function Lr(n){return(n.mode&1)===0?1:(ze&2)!==0&&Ct!==0?Ct&-Ct:ox.transition!==null?(pl===0&&(pl=gp()),pl):(n=$e,n!==0||(n=window.event,n=n===void 0?16:Cp(n.type)),n)}function Tn(n,i,a,d){if(50<Io)throw Io=0,kd=null,Error(t(185));ro(n,a,d),((ze&2)===0||n!==xt)&&(n===xt&&((ze&2)===0&&(cl|=a),vt===4&&Fr(n,Ct)),Wt(n,d),a===1&&ze===0&&(i.mode&1)===0&&(oi=ut()+500,ja&&Nr()))}function Wt(n,i){var a=n.callbackNode;ow(n,i);var d=ba(n,n===xt?Ct:0);if(d===0)a!==null&&fp(a),n.callbackNode=null,n.callbackPriority=0;else if(i=d&-d,n.callbackPriority!==i){if(a!=null&&fp(a),i===1)n.tag===0?ix(Cg.bind(null,n)):um(Cg.bind(null,n)),tx(function(){(ze&6)===0&&Nr()}),a=null;else{switch(vp(d)){case 1:a=iu;break;case 4:a=pp;break;case 16:a=_a;break;case 536870912:a=mp;break;default:a=_a}a=Og(a,Tg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Tg(n,i){if(fl=-1,pl=0,(ze&6)!==0)throw Error(t(327));var a=n.callbackNode;if(ai()&&n.callbackNode!==a)return null;var d=ba(n,n===xt?Ct:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||i)i=ml(n,d);else{i=d;var p=ze;ze|=2;var v=Eg();(xt!==n||Ct!==i)&&(ar=null,oi=ut()+500,hs(n,i));do try{kx();break}catch(A){kg(n,A)}while(!0);Wu(),ll.current=v,ze=p,pt!==null?i=0:(xt=null,Ct=0,i=vt)}if(i!==0){if(i===2&&(p=ou(n),p!==0&&(d=p,i=Ed(n,p))),i===1)throw a=Mo,hs(n,0),Fr(n,d),Wt(n,ut()),a;if(i===6)Fr(n,d);else{if(p=n.current.alternate,(d&30)===0&&!Tx(p)&&(i=ml(n,d),i===2&&(v=ou(n),v!==0&&(d=v,i=Ed(n,v))),i===1))throw a=Mo,hs(n,0),Fr(n,d),Wt(n,ut()),a;switch(n.finishedWork=p,n.finishedLanes=d,i){case 0:case 1:throw Error(t(345));case 2:fs(n,Gt,ar);break;case 3:if(Fr(n,d),(d&130023424)===d&&(i=Td+500-ut(),10<i)){if(ba(n,0)!==0)break;if(p=n.suspendedLanes,(p&d)!==d){Dt(),n.pingedLanes|=n.suspendedLanes&p;break}n.timeoutHandle=Ou(fs.bind(null,n,Gt,ar),i);break}fs(n,Gt,ar);break;case 4:if(Fr(n,d),(d&4194240)===d)break;for(i=n.eventTimes,p=-1;0<d;){var S=31-yn(d);v=1<<S,S=i[S],S>p&&(p=S),d&=~v}if(d=p,d=ut()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*bx(d/1960))-d,10<d){n.timeoutHandle=Ou(fs.bind(null,n,Gt,ar),d);break}fs(n,Gt,ar);break;case 5:fs(n,Gt,ar);break;default:throw Error(t(329))}}}return Wt(n,ut()),n.callbackNode===a?Tg.bind(null,n):null}function Ed(n,i){var a=Oo;return n.current.memoizedState.isDehydrated&&(hs(n,i).flags|=256),n=ml(n,i),n!==2&&(i=Gt,Gt=a,i!==null&&Pd(i)),n}function Pd(n){Gt===null?Gt=n:Gt.push.apply(Gt,n)}function Tx(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var p=a[d],v=p.getSnapshot;p=p.value;try{if(!_n(v(),p))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Fr(n,i){for(i&=~bd,i&=~cl,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-yn(i),d=1<<a;n[a]=-1,i&=~d}}function Cg(n){if((ze&6)!==0)throw Error(t(327));ai();var i=ba(n,0);if((i&1)===0)return Wt(n,ut()),null;var a=ml(n,i);if(n.tag!==0&&a===2){var d=ou(n);d!==0&&(i=d,a=Ed(n,d))}if(a===1)throw a=Mo,hs(n,0),Fr(n,i),Wt(n,ut()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,fs(n,Gt,ar),Wt(n,ut()),null}function Ad(n,i){var a=ze;ze|=1;try{return n(i)}finally{ze=a,ze===0&&(oi=ut()+500,ja&&Nr())}}function ds(n){Dr!==null&&Dr.tag===0&&(ze&6)===0&&ai();var i=ze;ze|=1;var a=un.transition,d=$e;try{if(un.transition=null,$e=1,n)return n()}finally{$e=d,un.transition=a,ze=i,(ze&6)===0&&Nr()}}function Nd(){Qt=ii.current,Je(ii)}function hs(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,ex(a)),pt!==null)for(a=pt.return;a!==null;){var d=a;switch(Bu(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&za();break;case 3:ni(),Je(zt),Je(Et),Qu();break;case 5:Ku(d);break;case 4:ni();break;case 13:Je(it);break;case 19:Je(it);break;case 10:$u(d.type._context);break;case 22:case 23:Nd()}a=a.return}if(xt=n,pt=n=Vr(n.current,null),Ct=Qt=i,vt=0,Mo=null,bd=cl=us=0,Gt=Oo=null,as!==null){for(i=0;i<as.length;i++)if(a=as[i],d=a.interleaved,d!==null){a.interleaved=null;var p=d.next,v=a.pending;if(v!==null){var S=v.next;v.next=p,d.next=S}a.pending=d}as=null}return n}function kg(n,i){do{var a=pt;try{if(Wu(),Qa.current=nl,Ja){for(var d=ot.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}Ja=!1}if(cs=0,wt=gt=ot=null,ko=!1,Eo=0,Sd.current=null,a===null||a.return===null){vt=1,Mo=i,pt=null;break}e:{var v=n,S=a.return,A=a,D=i;if(i=Ct,A.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var H=D,se=A,oe=se.tag;if((se.mode&1)===0&&(oe===0||oe===11||oe===15)){var re=se.alternate;re?(se.updateQueue=re.updateQueue,se.memoizedState=re.memoizedState,se.lanes=re.lanes):(se.updateQueue=null,se.memoizedState=null)}var me=Zm(S);if(me!==null){me.flags&=-257,Qm(me,S,A,v,i),me.mode&1&&Km(v,H,i),i=me,D=H;var ve=i.updateQueue;if(ve===null){var we=new Set;we.add(D),i.updateQueue=we}else ve.add(D);break e}else{if((i&1)===0){Km(v,H,i),Rd();break e}D=Error(t(426))}}else if(rt&&A.mode&1){var dt=Zm(S);if(dt!==null){(dt.flags&65536)===0&&(dt.flags|=256),Qm(dt,S,A,v,i),ju(ri(D,A));break e}}v=D=ri(D,A),vt!==4&&(vt=2),Oo===null?Oo=[v]:Oo.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,i&=-i,v.lanes|=i;var G=Ym(v,D,i);xm(v,G);break e;case 1:A=D;var F=v.type,W=v.stateNode;if((v.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Ir===null||!Ir.has(W)))){v.flags|=65536,i&=-i,v.lanes|=i;var le=Xm(v,A,i);xm(v,le);break e}}v=v.return}while(v!==null)}Ag(a)}catch(xe){i=xe,pt===a&&a!==null&&(pt=a=a.return);continue}break}while(!0)}function Eg(){var n=ll.current;return ll.current=nl,n===null?nl:n}function Rd(){(vt===0||vt===3||vt===2)&&(vt=4),xt===null||(us&268435455)===0&&(cl&268435455)===0||Fr(xt,Ct)}function ml(n,i){var a=ze;ze|=2;var d=Eg();(xt!==n||Ct!==i)&&(ar=null,hs(n,i));do try{Cx();break}catch(p){kg(n,p)}while(!0);if(Wu(),ze=a,ll.current=d,pt!==null)throw Error(t(261));return xt=null,Ct=0,vt}function Cx(){for(;pt!==null;)Pg(pt)}function kx(){for(;pt!==null&&!Z0();)Pg(pt)}function Pg(n){var i=Mg(n.alternate,n,Qt);n.memoizedProps=n.pendingProps,i===null?Ag(n):pt=i,Sd.current=null}function Ag(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=yx(a,i,Qt),a!==null){pt=a;return}}else{if(a=_x(a,i),a!==null){a.flags&=32767,pt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{vt=6,pt=null;return}}if(i=i.sibling,i!==null){pt=i;return}pt=i=n}while(i!==null);vt===0&&(vt=5)}function fs(n,i,a){var d=$e,p=un.transition;try{un.transition=null,$e=1,Ex(n,i,a,d)}finally{un.transition=p,$e=d}return null}function Ex(n,i,a,d){do ai();while(Dr!==null);if((ze&6)!==0)throw Error(t(327));a=n.finishedWork;var p=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var v=a.lanes|a.childLanes;if(aw(n,v),n===xt&&(pt=xt=null,Ct=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||dl||(dl=!0,Og(_a,function(){return ai(),null})),v=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||v){v=un.transition,un.transition=null;var S=$e;$e=1;var A=ze;ze|=4,Sd.current=null,xx(n,a),_g(a,n),Hw(Ru),ka=!!Nu,Ru=Nu=null,n.current=a,Sx(a),Q0(),ze=A,$e=S,un.transition=v}else n.current=a;if(dl&&(dl=!1,Dr=n,hl=p),v=n.pendingLanes,v===0&&(Ir=null),tw(a.stateNode),Wt(n,ut()),i!==null)for(d=n.onRecoverableError,a=0;a<i.length;a++)p=i[a],d(p.value,{componentStack:p.stack,digest:p.digest});if(ul)throw ul=!1,n=Cd,Cd=null,n;return(hl&1)!==0&&n.tag!==0&&ai(),v=n.pendingLanes,(v&1)!==0?n===kd?Io++:(Io=0,kd=n):Io=0,Nr(),null}function ai(){if(Dr!==null){var n=vp(hl),i=un.transition,a=$e;try{if(un.transition=null,$e=16>n?16:n,Dr===null)var d=!1;else{if(n=Dr,Dr=null,hl=0,(ze&6)!==0)throw Error(t(331));var p=ze;for(ze|=4,ge=n.current;ge!==null;){var v=ge,S=v.child;if((ge.flags&16)!==0){var A=v.deletions;if(A!==null){for(var D=0;D<A.length;D++){var H=A[D];for(ge=H;ge!==null;){var se=ge;switch(se.tag){case 0:case 11:case 15:Ro(8,se,v)}var oe=se.child;if(oe!==null)oe.return=se,ge=oe;else for(;ge!==null;){se=ge;var re=se.sibling,me=se.return;if(pg(se),se===H){ge=null;break}if(re!==null){re.return=me,ge=re;break}ge=me}}}var ve=v.alternate;if(ve!==null){var we=ve.child;if(we!==null){ve.child=null;do{var dt=we.sibling;we.sibling=null,we=dt}while(we!==null)}}ge=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,ge=S;else e:for(;ge!==null;){if(v=ge,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Ro(9,v,v.return)}var G=v.sibling;if(G!==null){G.return=v.return,ge=G;break e}ge=v.return}}var F=n.current;for(ge=F;ge!==null;){S=ge;var W=S.child;if((S.subtreeFlags&2064)!==0&&W!==null)W.return=S,ge=W;else e:for(S=F;ge!==null;){if(A=ge,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:al(9,A)}}catch(xe){at(A,A.return,xe)}if(A===S){ge=null;break e}var le=A.sibling;if(le!==null){le.return=A.return,ge=le;break e}ge=A.return}}if(ze=p,Nr(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(wa,n)}catch{}d=!0}return d}finally{$e=a,un.transition=i}}return!1}function Ng(n,i,a){i=ri(a,i),i=Ym(n,i,1),n=Mr(n,i,1),i=Dt(),n!==null&&(ro(n,1,i),Wt(n,i))}function at(n,i,a){if(n.tag===3)Ng(n,n,a);else for(;i!==null;){if(i.tag===3){Ng(i,n,a);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ir===null||!Ir.has(d))){n=ri(a,n),n=Xm(i,n,1),i=Mr(i,n,1),n=Dt(),i!==null&&(ro(i,1,n),Wt(i,n));break}}i=i.return}}function Px(n,i,a){var d=n.pingCache;d!==null&&d.delete(i),i=Dt(),n.pingedLanes|=n.suspendedLanes&a,xt===n&&(Ct&a)===a&&(vt===4||vt===3&&(Ct&130023424)===Ct&&500>ut()-Td?hs(n,0):bd|=a),Wt(n,i)}function Rg(n,i){i===0&&((n.mode&1)===0?i=1:(i=Sa,Sa<<=1,(Sa&130023424)===0&&(Sa=4194304)));var a=Dt();n=sr(n,i),n!==null&&(ro(n,i,a),Wt(n,a))}function Ax(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Rg(n,a)}function Nx(n,i){var a=0;switch(n.tag){case 13:var d=n.stateNode,p=n.memoizedState;p!==null&&(a=p.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(i),Rg(n,a)}var Mg;Mg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||zt.current)jt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return jt=!1,vx(n,i,a);jt=(n.flags&131072)!==0}else jt=!1,rt&&(i.flags&1048576)!==0&&dm(i,Wa,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;il(n,i),n=i.pendingProps;var p=Xs(i,Et.current);ti(i,a),p=td(null,i,d,n,p,a);var v=nd();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Ut(d)?(v=!0,Ua(i)):v=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Yu(i),p.updater=rl,i.stateNode=p,p._reactInternals=i,ld(i,d,n,a),i=hd(null,i,d,!0,v,a)):(i.tag=0,rt&&v&&Vu(i),It(null,i,p,a),i=i.child),i;case 16:d=i.elementType;e:{switch(il(n,i),n=i.pendingProps,p=d._init,d=p(d._payload),i.type=d,p=i.tag=Mx(d),n=xn(d,n),p){case 0:i=dd(null,i,d,n,a);break e;case 1:i=sg(null,i,d,n,a);break e;case 11:i=Jm(null,i,d,n,a);break e;case 14:i=eg(null,i,d,xn(d.type,n),a);break e}throw Error(t(306,d,""))}return i;case 0:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:xn(d,p),dd(n,i,d,p,a);case 1:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:xn(d,p),sg(n,i,d,p,a);case 3:e:{if(ig(i),n===null)throw Error(t(387));d=i.pendingProps,v=i.memoizedState,p=v.element,wm(n,i),Ka(i,d,null,a);var S=i.memoizedState;if(d=S.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){p=ri(Error(t(423)),i),i=og(n,i,d,a,p);break e}else if(d!==p){p=ri(Error(t(424)),i),i=og(n,i,d,a,p);break e}else for(Zt=Er(i.stateNode.containerInfo.firstChild),Kt=i,rt=!0,wn=null,a=ym(i,null,d,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Qs(),d===p){i=or(n,i,a);break e}It(n,i,d,a)}i=i.child}return i;case 5:return bm(i),n===null&&Uu(i),d=i.type,p=i.pendingProps,v=n!==null?n.memoizedProps:null,S=p.children,Mu(d,p)?S=null:v!==null&&Mu(d,v)&&(i.flags|=32),rg(n,i),It(n,i,S,a),i.child;case 6:return n===null&&Uu(i),null;case 13:return ag(n,i,a);case 4:return Xu(i,i.stateNode.containerInfo),d=i.pendingProps,n===null?i.child=Js(i,null,d,a):It(n,i,d,a),i.child;case 11:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:xn(d,p),Jm(n,i,d,p,a);case 7:return It(n,i,i.pendingProps,a),i.child;case 8:return It(n,i,i.pendingProps.children,a),i.child;case 12:return It(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(d=i.type._context,p=i.pendingProps,v=i.memoizedProps,S=p.value,Ke(Ha,d._currentValue),d._currentValue=S,v!==null)if(_n(v.value,S)){if(v.children===p.children&&!zt.current){i=or(n,i,a);break e}}else for(v=i.child,v!==null&&(v.return=i);v!==null;){var A=v.dependencies;if(A!==null){S=v.child;for(var D=A.firstContext;D!==null;){if(D.context===d){if(v.tag===1){D=ir(-1,a&-a),D.tag=2;var H=v.updateQueue;if(H!==null){H=H.shared;var se=H.pending;se===null?D.next=D:(D.next=se.next,se.next=D),H.pending=D}}v.lanes|=a,D=v.alternate,D!==null&&(D.lanes|=a),qu(v.return,a,i),A.lanes|=a;break}D=D.next}}else if(v.tag===10)S=v.type===i.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=a,A=S.alternate,A!==null&&(A.lanes|=a),qu(S,a,i),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===i){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}It(n,i,p.children,a),i=i.child}return i;case 9:return p=i.type,d=i.pendingProps.children,ti(i,a),p=ln(p),d=d(p),i.flags|=1,It(n,i,d,a),i.child;case 14:return d=i.type,p=xn(d,i.pendingProps),p=xn(d.type,p),eg(n,i,d,p,a);case 15:return tg(n,i,i.type,i.pendingProps,a);case 17:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:xn(d,p),il(n,i),i.tag=1,Ut(d)?(n=!0,Ua(i)):n=!1,ti(i,a),qm(i,d,p),ld(i,d,p,a),hd(null,i,d,!0,n,a);case 19:return cg(n,i,a);case 22:return ng(n,i,a)}throw Error(t(156,i.tag))};function Og(n,i){return hp(n,i)}function Rx(n,i,a,d){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(n,i,a,d){return new Rx(n,i,a,d)}function Md(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Mx(n){if(typeof n=="function")return Md(n)?1:0;if(n!=null){if(n=n.$$typeof,n===B)return 11;if(n===te)return 14}return 2}function Vr(n,i){var a=n.alternate;return a===null?(a=dn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function gl(n,i,a,d,p,v){var S=2;if(d=n,typeof n=="function")Md(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case M:return ps(a.children,p,v,i);case C:S=8,p|=8;break;case O:return n=dn(12,a,i,p|2),n.elementType=O,n.lanes=v,n;case q:return n=dn(13,a,i,p),n.elementType=q,n.lanes=v,n;case ee:return n=dn(19,a,i,p),n.elementType=ee,n.lanes=v,n;case J:return vl(a,p,v,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case U:S=10;break e;case j:S=9;break e;case B:S=11;break e;case te:S=14;break e;case K:S=16,d=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=dn(S,a,i,p),i.elementType=n,i.type=d,i.lanes=v,i}function ps(n,i,a,d){return n=dn(7,n,d,i),n.lanes=a,n}function vl(n,i,a,d){return n=dn(22,n,d,i),n.elementType=J,n.lanes=a,n.stateNode={isHidden:!1},n}function Od(n,i,a){return n=dn(6,n,null,i),n.lanes=a,n}function Id(n,i,a){return i=dn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Ox(n,i,a,d,p){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=au(0),this.expirationTimes=au(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=au(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Dd(n,i,a,d,p,v,S,A,D){return n=new Ox(n,i,a,A,D),i===1?(i=1,v===!0&&(i|=8)):i=0,v=dn(3,null,null,i),n.current=v,v.stateNode=n,v.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yu(v),n}function Ix(n,i,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:d==null?null:""+d,children:n,containerInfo:i,implementation:a}}function Ig(n){if(!n)return Ar;n=n._reactInternals;e:{if(ns(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Ut(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Ut(a))return lm(n,a,i)}return i}function Dg(n,i,a,d,p,v,S,A,D){return n=Dd(a,d,!0,n,p,v,S,A,D),n.context=Ig(null),a=n.current,d=Dt(),p=Lr(a),v=ir(d,p),v.callback=i??null,Mr(a,v,p),n.current.lanes=p,ro(n,p,d),Wt(n,d),n}function yl(n,i,a,d){var p=i.current,v=Dt(),S=Lr(p);return a=Ig(a),i.context===null?i.context=a:i.pendingContext=a,i=ir(v,S),i.payload={element:n},d=d===void 0?null:d,d!==null&&(i.callback=d),n=Mr(p,i,S),n!==null&&(Tn(n,p,S,v),Xa(n,p,S)),S}function _l(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Lg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Ld(n,i){Lg(n,i),(n=n.alternate)&&Lg(n,i)}function Dx(){return null}var Fg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Fd(n){this._internalRoot=n}wl.prototype.render=Fd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));yl(n,i,null,null)},wl.prototype.unmount=Fd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;ds(function(){yl(null,n,null,null)}),i[er]=null}};function wl(n){this._internalRoot=n}wl.prototype.unstable_scheduleHydration=function(n){if(n){var i=wp();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Tr.length&&i!==0&&i<Tr[a].priority;a++);Tr.splice(a,0,n),a===0&&bp(n)}};function Vd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function xl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Vg(){}function Lx(n,i,a,d,p){if(p){if(typeof d=="function"){var v=d;d=function(){var H=_l(S);v.call(H)}}var S=Dg(i,d,n,0,null,!1,!1,"",Vg);return n._reactRootContainer=S,n[er]=S.current,yo(n.nodeType===8?n.parentNode:n),ds(),S}for(;p=n.lastChild;)n.removeChild(p);if(typeof d=="function"){var A=d;d=function(){var H=_l(D);A.call(H)}}var D=Dd(n,0,!1,null,null,!1,!1,"",Vg);return n._reactRootContainer=D,n[er]=D.current,yo(n.nodeType===8?n.parentNode:n),ds(function(){yl(i,D,a,d)}),D}function Sl(n,i,a,d,p){var v=a._reactRootContainer;if(v){var S=v;if(typeof p=="function"){var A=p;p=function(){var D=_l(S);A.call(D)}}yl(i,S,n,p)}else S=Lx(a,i,n,p,d);return _l(S)}yp=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=no(i.pendingLanes);a!==0&&(lu(i,a|1),Wt(i,ut()),(ze&6)===0&&(oi=ut()+500,Nr()))}break;case 13:ds(function(){var d=sr(n,1);if(d!==null){var p=Dt();Tn(d,n,1,p)}}),Ld(n,1)}},cu=function(n){if(n.tag===13){var i=sr(n,134217728);if(i!==null){var a=Dt();Tn(i,n,134217728,a)}Ld(n,134217728)}},_p=function(n){if(n.tag===13){var i=Lr(n),a=sr(n,i);if(a!==null){var d=Dt();Tn(a,n,i,d)}Ld(n,i)}},wp=function(){return $e},xp=function(n,i){var a=$e;try{return $e=n,i()}finally{$e=a}},tu=function(n,i,a){switch(i){case"input":if(Re(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var d=a[i];if(d!==n&&d.form===n.form){var p=Ba(d);if(!p)throw Error(t(90));Se(d),Re(d,p)}}}break;case"textarea":Jn(n,a);break;case"select":i=a.value,i!=null&&Pe(n,!!a.multiple,i,!1)}},ip=Ad,op=ds;var Fx={usingClientEntryPoint:!1,Events:[xo,Hs,Ba,rp,sp,Ad]},Do={findFiberByHostInstance:rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vx={bundleType:Do.bundleType,version:Do.version,rendererPackageName:Do.rendererPackageName,rendererConfig:Do.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=up(n),n===null?null:n.stateNode},findFiberByHostInstance:Do.findFiberByHostInstance||Dx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bl.isDisabled&&bl.supportsFiber)try{wa=bl.inject(Vx),Bn=bl}catch{}}return $t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fx,$t.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vd(i))throw Error(t(200));return Ix(n,i,null,a)},$t.createRoot=function(n,i){if(!Vd(n))throw Error(t(299));var a=!1,d="",p=Fg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=Dd(n,1,!1,null,null,a,!1,d,p),n[er]=i.current,yo(n.nodeType===8?n.parentNode:n),new Fd(i)},$t.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=up(i),n=n===null?null:n.stateNode,n},$t.flushSync=function(n){return ds(n)},$t.hydrate=function(n,i,a){if(!xl(i))throw Error(t(200));return Sl(null,n,i,!0,a)},$t.hydrateRoot=function(n,i,a){if(!Vd(n))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,p=!1,v="",S=Fg;if(a!=null&&(a.unstable_strictMode===!0&&(p=!0),a.identifierPrefix!==void 0&&(v=a.identifierPrefix),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),i=Dg(i,null,n,1,a??null,p,!1,v,S),n[er]=i.current,yo(n),d)for(n=0;n<d.length;n++)a=d[n],p=a._getVersion,p=p(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,p]:i.mutableSourceEagerHydrationData.push(a,p);return new wl(i)},$t.render=function(n,i,a){if(!xl(i))throw Error(t(200));return Sl(null,n,i,!1,a)},$t.unmountComponentAtNode=function(n){if(!xl(n))throw Error(t(40));return n._reactRootContainer?(ds(function(){Sl(null,null,n,!1,function(){n._reactRootContainer=null,n[er]=null})}),!0):!1},$t.unstable_batchedUpdates=Ad,$t.unstable_renderSubtreeIntoContainer=function(n,i,a,d){if(!xl(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Sl(n,i,a,!1,d)},$t.version="18.3.1-next-f1338f8080-20240426",$t}var qg;function ny(){if(qg)return Ud.exports;qg=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Ud.exports=Yx(),Ud.exports}var Hg;function Xx(){if(Hg)return Tl;Hg=1;var s=ny();return Tl.createRoot=s.createRoot,Tl.hydrateRoot=s.hydrateRoot,Tl}var Kx=Xx(),Zx="Invariant failed";function dr(s,e){if(!s)throw new Error(Zx)}const Ti=new WeakMap,Ul=new WeakMap,Xl={current:[]};let Wd=!1,zo=0;const Vo=new Set,Cl=new Map;function ry(s){const e=Array.from(s).sort((t,r)=>t instanceof Ci&&t.options.deps.includes(r)?1:r instanceof Ci&&r.options.deps.includes(t)?-1:0);for(const t of e){if(Xl.current.includes(t))continue;Xl.current.push(t),t.recompute();const r=Ul.get(t);if(r)for(const o of r){const l=Ti.get(o);l&&ry(l)}}}function Qx(s){s.listeners.forEach(e=>e({prevVal:s.prevState,currentVal:s.state}))}function Jx(s){s.listeners.forEach(e=>e({prevVal:s.prevState,currentVal:s.state}))}function sy(s){if(zo>0&&!Cl.has(s)&&Cl.set(s,s.prevState),Vo.add(s),!(zo>0)&&!Wd)try{for(Wd=!0;Vo.size>0;){const e=Array.from(Vo);Vo.clear();for(const t of e){const r=Cl.get(t)??t.prevState;t.prevState=r,Qx(t)}for(const t of e){const r=Ti.get(t);r&&(Xl.current.push(t),ry(r))}for(const t of e){const r=Ti.get(t);if(r)for(const o of r)Jx(o)}}}finally{Wd=!1,Xl.current=[],Cl.clear()}}function li(s){zo++;try{s()}finally{if(zo--,zo===0){const e=Array.from(Vo)[0];e&&sy(e)}}}function eS(s){return typeof s=="function"}class mh{constructor(e,t){this.listeners=new Set,this.subscribe=r=>{var o,l;this.listeners.add(r);const c=(l=(o=this.options)==null?void 0:o.onSubscribe)==null?void 0:l.call(o,r,this);return()=>{this.listeners.delete(r),c==null||c()}},this.prevState=e,this.state=e,this.options=t}setState(e){var t,r,o;this.prevState=this.state,(t=this.options)!=null&&t.updateFn?this.state=this.options.updateFn(this.prevState)(e):eS(e)?this.state=e(this.prevState):this.state=e,(o=(r=this.options)==null?void 0:r.onUpdate)==null||o.call(r),sy(this)}}class Ci{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const t=[],r=[];for(const o of this.options.deps)t.push(o.prevState),r.push(o.state);return this.lastSeenDepValues=r,{prevDepVals:t,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var t,r;this.prevState=this.state;const{prevDepVals:o,currDepVals:l,prevVal:c}=this.getDepVals();this.state=this.options.fn({prevDepVals:o,currDepVals:l,prevVal:c}),(r=(t=this.options).onUpdate)==null||r.call(t)},this.checkIfRecalculationNeededDeeply=()=>{for(const l of this.options.deps)l instanceof Ci&&l.checkIfRecalculationNeededDeeply();let t=!1;const r=this.lastSeenDepValues,{currDepVals:o}=this.getDepVals();for(let l=0;l<o.length;l++)if(o[l]!==r[l]){t=!0;break}t&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const t of this._subscriptions)t()}),this.subscribe=t=>{var r,o;this.listeners.add(t);const l=(o=(r=this.options).onSubscribe)==null?void 0:o.call(r,t,this);return()=>{this.listeners.delete(t),l==null||l()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const t of e)if(t instanceof Ci)t.registerOnGraph(),this.registerOnGraph(t.options.deps);else if(t instanceof mh){let r=Ti.get(t);r||(r=new Set,Ti.set(t,r)),r.add(this);let o=Ul.get(this);o||(o=new Set,Ul.set(this,o)),o.add(t)}}unregisterFromGraph(e=this.options.deps){for(const t of e)if(t instanceof Ci)this.unregisterFromGraph(t.options.deps);else if(t instanceof mh){const r=Ti.get(t);r&&r.delete(this);const o=Ul.get(this);o&&o.delete(t)}}}const qr="__TSR_index",Yg="popstate",Xg="beforeunload";function iy(s){let e=s.getLocation();const t=new Set,r=c=>{e=s.getLocation(),t.forEach(u=>u({location:e,action:c}))},o=c=>{s.notifyOnIndexChange??!0?r(c):e=s.getLocation()},l=async({task:c,navigateOpts:u,...h})=>{var f,m;if((u==null?void 0:u.ignoreBlocker)??!1){c();return}const y=((f=s.getBlockers)==null?void 0:f.call(s))??[],x=h.type==="PUSH"||h.type==="REPLACE";if(typeof document<"u"&&y.length&&x)for(const w of y){const _=Yo(h.path,h.state);if(await w.blockerFn({currentLocation:e,nextLocation:_,action:h.type})){(m=s.onBlocked)==null||m.call(s);return}}c()};return{get location(){return e},get length(){return s.getLength()},subscribers:t,subscribe:c=>(t.add(c),()=>{t.delete(c)}),push:(c,u,h)=>{const f=e.state[qr];u=gh(f+1,u),l({task:()=>{s.pushState(c,u),r({type:"PUSH"})},navigateOpts:h,type:"PUSH",path:c,state:u})},replace:(c,u,h)=>{const f=e.state[qr];u=gh(f,u),l({task:()=>{s.replaceState(c,u),r({type:"REPLACE"})},navigateOpts:h,type:"REPLACE",path:c,state:u})},go:(c,u)=>{l({task:()=>{s.go(c),o({type:"GO",index:c})},navigateOpts:u,type:"GO"})},back:c=>{l({task:()=>{s.back((c==null?void 0:c.ignoreBlocker)??!1),o({type:"BACK"})},navigateOpts:c,type:"BACK"})},forward:c=>{l({task:()=>{s.forward((c==null?void 0:c.ignoreBlocker)??!1),o({type:"FORWARD"})},navigateOpts:c,type:"FORWARD"})},canGoBack:()=>e.state[qr]!==0,createHref:c=>s.createHref(c),block:c=>{var u;if(!s.setBlockers)return()=>{};const h=((u=s.getBlockers)==null?void 0:u.call(s))??[];return s.setBlockers([...h,c]),()=>{var f,m;const g=((f=s.getBlockers)==null?void 0:f.call(s))??[];(m=s.setBlockers)==null||m.call(s,g.filter(y=>y!==c))}},flush:()=>{var c;return(c=s.flush)==null?void 0:c.call(s)},destroy:()=>{var c;return(c=s.destroy)==null?void 0:c.call(s)},notify:r}}function gh(s,e){return e||(e={}),{...e,key:Hh(),[qr]:s}}function tS(s){var e;const t=typeof document<"u"?window:void 0,r=t.history.pushState,o=t.history.replaceState;let l=[];const c=()=>l,u=O=>l=O,h=O=>O,f=()=>Yo(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state);(e=t.history.state)!=null&&e.key||t.history.replaceState({[qr]:0,key:Hh()},"");let m=f(),g,y=!1,x=!1,w=!1,_=!1;const b=()=>m;let T,R;const L=()=>{T&&(C._ignoreSubscribers=!0,(T.isPush?t.history.pushState:t.history.replaceState)(T.state,"",T.href),C._ignoreSubscribers=!1,T=void 0,R=void 0,g=void 0)},V=(O,U,j)=>{const B=h(U);R||(g=m),m=Yo(U,j),T={href:B,state:j,isPush:(T==null?void 0:T.isPush)||O==="push"},R||(R=Promise.resolve().then(()=>L()))},E=O=>{m=f(),C.notify({type:O})},N=async()=>{if(x){x=!1;return}const O=f(),U=O.state[qr]-m.state[qr],j=U===1,B=U===-1,q=!j&&!B||y;y=!1;const ee=q?"GO":B?"BACK":"FORWARD",te=q?{type:"GO",index:U}:{type:B?"BACK":"FORWARD"};if(w)w=!1;else{const K=c();if(typeof document<"u"&&K.length){for(const J of K)if(await J.blockerFn({currentLocation:m,nextLocation:O,action:ee})){x=!0,t.history.go(1),C.notify(te);return}}}m=f(),C.notify(te)},M=O=>{if(_){_=!1;return}let U=!1;const j=c();if(typeof document<"u"&&j.length)for(const B of j){const q=B.enableBeforeUnload??!0;if(q===!0){U=!0;break}if(typeof q=="function"&&q()===!0){U=!0;break}}if(U)return O.preventDefault(),O.returnValue=""},C=iy({getLocation:b,getLength:()=>t.history.length,pushState:(O,U)=>V("push",O,U),replaceState:(O,U)=>V("replace",O,U),back:O=>(O&&(w=!0),_=!0,t.history.back()),forward:O=>{O&&(w=!0),_=!0,t.history.forward()},go:O=>{y=!0,t.history.go(O)},createHref:O=>h(O),flush:L,destroy:()=>{t.history.pushState=r,t.history.replaceState=o,t.removeEventListener(Xg,M,{capture:!0}),t.removeEventListener(Yg,N)},onBlocked:()=>{g&&m!==g&&(m=g)},getBlockers:c,setBlockers:u,notifyOnIndexChange:!1});return t.addEventListener(Xg,M,{capture:!0}),t.addEventListener(Yg,N),t.history.pushState=function(...O){const U=r.apply(t.history,O);return C._ignoreSubscribers||E("PUSH"),U},t.history.replaceState=function(...O){const U=o.apply(t.history,O);return C._ignoreSubscribers||E("REPLACE"),U},C}function nS(s={initialEntries:["/"]}){const e=s.initialEntries;let t=s.initialIndex?Math.min(Math.max(s.initialIndex,0),e.length-1):e.length-1;const r=e.map((l,c)=>gh(c,void 0));return iy({getLocation:()=>Yo(e[t],r[t]),getLength:()=>e.length,pushState:(l,c)=>{t<e.length-1&&(e.splice(t+1),r.splice(t+1)),r.push(c),e.push(l),t=Math.max(e.length-1,0)},replaceState:(l,c)=>{r[t]=c,e[t]=l},back:()=>{t=Math.max(t-1,0)},forward:()=>{t=Math.min(t+1,e.length-1)},go:l=>{t=Math.min(Math.max(t+l,0),e.length-1)},createHref:l=>l})}function Yo(s,e){const t=s.indexOf("#"),r=s.indexOf("?");return{href:s,pathname:s.substring(0,t>0?r>0?Math.min(t,r):t:r>0?r:s.length),hash:t>-1?s.substring(t):"",search:r>-1?s.slice(r,t===-1?void 0:t):"",state:e||{[qr]:0,key:Hh()}}}function Hh(){return(Math.random()+1).toString(36).substring(7)}function gi(s){return s[s.length-1]}function rS(s){return typeof s=="function"}function _s(s,e){return rS(s)?s(e):s}function vh(s,e){return e.reduce((t,r)=>(t[r]=s[r],t),{})}function hn(s,e){if(s===e)return s;const t=e,r=Qg(s)&&Qg(t);if(r||Kg(s)&&Kg(t)){const o=r?s:Object.keys(s).concat(Object.getOwnPropertySymbols(s)),l=o.length,c=r?t:Object.keys(t).concat(Object.getOwnPropertySymbols(t)),u=c.length,h=r?[]:{};let f=0;for(let m=0;m<u;m++){const g=r?m:c[m];(!r&&o.includes(g)||r)&&s[g]===void 0&&t[g]===void 0?(h[g]=void 0,f++):(h[g]=hn(s[g],t[g]),h[g]===s[g]&&s[g]!==void 0&&f++)}return l===u&&f===l?s:h}return t}function Kg(s){return yh(s)&&Object.getOwnPropertyNames(s).length===Object.keys(s).length}function yh(s){if(!Zg(s))return!1;const e=s.constructor;if(typeof e>"u")return!0;const t=e.prototype;return!(!Zg(t)||!t.hasOwnProperty("isPrototypeOf"))}function Zg(s){return Object.prototype.toString.call(s)==="[object Object]"}function Qg(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Jg(s,e){let t=Object.keys(s);return e&&(t=t.filter(r=>s[r]!==void 0)),t}function ki(s,e,t){if(s===e)return!0;if(typeof s!=typeof e)return!1;if(yh(s)&&yh(e)){const r=(t==null?void 0:t.ignoreUndefined)??!0,o=Jg(s,r),l=Jg(e,r);return!(t!=null&&t.partial)&&o.length!==l.length?!1:l.every(c=>ki(s[c],e[c],t))}return Array.isArray(s)&&Array.isArray(e)?s.length!==e.length?!1:!s.some((r,o)=>!ki(r,e[o],t)):!1}function pi(s){let e,t;const r=new Promise((o,l)=>{e=o,t=l});return r.status="pending",r.resolve=o=>{r.status="resolved",r.value=o,e(o),s==null||s(o)},r.reject=o=>{r.status="rejected",t(o)},r}function sS(s){return/%[0-9A-Fa-f]{2}/.test(s)}function fr(s){return _c(s.filter(e=>e!==void 0).join("/"))}function _c(s){return s.replace(/\/{2,}/g,"/")}function Yh(s){return s==="/"?s:s.replace(/^\/{1,}/,"")}function ws(s){return s==="/"?s:s.replace(/\/{1,}$/,"")}function iS(s){return ws(Yh(s))}function Kl(s,e){return s!=null&&s.endsWith("/")&&s!=="/"&&s!==`${e}/`?s.slice(0,-1):s}function oS(s,e,t){return Kl(s,t)===Kl(e,t)}function aS({basepath:s,base:e,to:t,trailingSlash:r="never",caseSensitive:o}){var l,c;e=Zl(s,e,o),t=Zl(s,t,o);let u=Mi(e);const h=Mi(t);u.length>1&&((l=gi(u))==null?void 0:l.value)==="/"&&u.pop(),h.forEach((m,g)=>{m.value==="/"?g?g===h.length-1&&u.push(m):u=[m]:m.value===".."?u.pop():m.value==="."||u.push(m)}),u.length>1&&(((c=gi(u))==null?void 0:c.value)==="/"?r==="never"&&u.pop():r==="always"&&u.push({type:"pathname",value:"/"}));const f=fr([s,...u.map(m=>m.value)]);return _c(f)}function Mi(s){if(!s)return[];s=_c(s);const e=[];if(s.slice(0,1)==="/"&&(s=s.substring(1),e.push({type:"pathname",value:"/"})),!s)return e;const t=s.split("/").filter(Boolean);return e.push(...t.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:r.includes("%25")?r.split("%25").map(o=>decodeURI(o)).join("%25"):decodeURI(r)})),s.slice(-1)==="/"&&(s=s.substring(1),e.push({type:"pathname",value:"/"})),e}function kl({path:s,params:e,leaveWildcards:t,leaveParams:r,decodeCharMap:o}){const l=Mi(s);function c(m){const g=e[m],y=typeof g=="string";return["*","_splat"].includes(m)?y?encodeURI(g):g:y?lS(g,o):g}let u=!1;const h={},f=fr(l.map(m=>{if(m.type==="wildcard"){h._splat=e._splat;const g=c("_splat");return t?`${m.value}${g??""}`:g}if(m.type==="param"){const g=m.value.substring(1);if(!u&&!(g in e)&&(u=!0),h[g]=e[g],r){const y=c(m.value);return`${m.value}${y??""}`}return c(g)??"undefined"}return m.value}));return{usedParams:h,interpolatedPath:f,isMissingParams:u}}function lS(s,e){let t=encodeURIComponent(s);if(e)for(const[r,o]of e)t=t.replaceAll(r,o);return t}function El(s,e,t){const r=cS(s,e,t);if(!(t.to&&!r))return r??{}}function Zl(s,e,t=!1){const r=t?s:s.toLowerCase(),o=t?e:e.toLowerCase();switch(!0){case r==="/":return e;case o===r:return"";case e.length<s.length:return e;case o[r.length]!=="/":return e;case o.startsWith(r):return e.slice(s.length);default:return e}}function cS(s,e,t){if(s!=="/"&&!e.startsWith(s))return;e=Zl(s,e,t.caseSensitive);const r=Zl(s,`${t.to??"$"}`,t.caseSensitive),o=Mi(e),l=Mi(r);e.startsWith("/")||o.unshift({type:"pathname",value:"/"}),r.startsWith("/")||l.unshift({type:"pathname",value:"/"});const c={};return(()=>{for(let h=0;h<Math.max(o.length,l.length);h++){const f=o[h],m=l[h],g=h>=o.length-1,y=h>=l.length-1;if(m){if(m.type==="wildcard"){const x=decodeURI(fr(o.slice(h).map(w=>w.value)));return c["*"]=x,c._splat=x,!0}if(m.type==="pathname"){if(m.value==="/"&&!(f!=null&&f.value))return!0;if(f){if(t.caseSensitive){if(m.value!==f.value)return!1}else if(m.value.toLowerCase()!==f.value.toLowerCase())return!1}}if(!f)return!1;if(m.type==="param"){if(f.value==="/")return!1;f.value.charAt(0)!=="$"&&(c[m.value.substring(1)]=decodeURIComponent(f.value))}}if(!g&&y)return c["**"]=fr(o.slice(h+1).map(x=>x.value)),!!t.fuzzy&&(m==null?void 0:m.value)!=="/"}return!0})()?c:void 0}function fn(s){return!!(s!=null&&s.isNotFound)}function uS(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{return}}const Ql="tsr-scroll-restoration-v1_3",dS=(s,e)=>{let t;return(...r)=>{t||(t=setTimeout(()=>{s(...r),t=null},e))}};function hS(){const s=uS();if(!s)return;const e=s.getItem(Ql);let t=e?JSON.parse(e):{};return{state:t,set:r=>(t=_s(r,t)||t,s.setItem(Ql,JSON.stringify(t)))}}const $d=hS(),_h=s=>s.state.key||s.href;function fS(s){const e=[];let t;for(;t=s.parentNode;)e.unshift(`${s.tagName}:nth-child(${[].indexOf.call(t.children,s)+1})`),s=t;return`${e.join(" > ")}`.toLowerCase()}let Jl=!1;function oy(s,e,t,r,o){var l;let c;try{c=JSON.parse(sessionStorage.getItem(s)||"{}")}catch(f){console.error(f);return}const u=e||((l=window.history.state)==null?void 0:l.key),h=c[u];Jl=!0,(()=>{if(r&&h){for(const m in h){const g=h[m];if(m==="window")window.scrollTo({top:g.scrollY,left:g.scrollX,behavior:t});else if(m){const y=document.querySelector(m);y&&(y.scrollLeft=g.scrollX,y.scrollTop=g.scrollY)}}return}const f=window.location.hash.split("#")[1];if(f){const m=(window.history.state||{}).__hashScrollIntoViewOptions??!0;if(m){const g=document.getElementById(f);g&&g.scrollIntoView(m)}return}["window",...(o==null?void 0:o.filter(m=>m!=="window"))??[]].forEach(m=>{const g=m==="window"?window:document.querySelector(m);g&&g.scrollTo({top:0,left:0,behavior:t})})})(),Jl=!1}function pS(s,e){if($d===void 0||((s.options.scrollRestoration??!1)&&(s.isScrollRestoring=!0),typeof document>"u"||s.isScrollRestorationSetup))return;s.isScrollRestorationSetup=!0,Jl=!1;const r=s.options.getScrollRestorationKey||_h;window.history.scrollRestoration="manual";const o=l=>{if(Jl||!s.isScrollRestoring)return;let c="";if(l.target===document||l.target===window)c="window";else{const h=l.target.getAttribute("data-scroll-restoration-id");h?c=`[data-scroll-restoration-id="${h}"]`:c=fS(l.target)}const u=r(s.state.location);$d.set(h=>{const f=h[u]=h[u]||{},m=f[c]=f[c]||{};if(c==="window")m.scrollX=window.scrollX||0,m.scrollY=window.scrollY||0;else if(c){const g=document.querySelector(c);g&&(m.scrollX=g.scrollLeft||0,m.scrollY=g.scrollTop||0)}return h})};typeof document<"u"&&document.addEventListener("scroll",dS(o,100),!0),s.subscribe("onRendered",l=>{const c=r(l.toLocation);if(!s.resetNextScroll){s.resetNextScroll=!0;return}oy(Ql,c,s.options.scrollRestorationBehavior||void 0,s.isScrollRestoring||void 0,s.options.scrollToTopSelectors||void 0),s.isScrollRestoring&&$d.set(u=>(u[c]=u[c]||{},u))})}function mS(s){if(typeof document<"u"&&document.querySelector){const e=s.state.location.state.__hashScrollIntoViewOptions??!0;if(e&&s.state.location.hash!==""){const t=document.getElementById(s.state.location.hash);t&&t.scrollIntoView(e)}}}function gS(s,e){const t=Object.entries(s).flatMap(([o,l])=>Array.isArray(l)?l.map(c=>[o,String(c)]):[[o,String(l)]]);return""+new URLSearchParams(t).toString()}function qd(s){if(!s)return"";const e=sS(s)?decodeURIComponent(s):decodeURIComponent(encodeURIComponent(s));return e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e}function vS(s,e){const t=s;return[...new URLSearchParams(t).entries()].reduce((l,[c,u])=>{const h=l[c];return h==null?l[c]=qd(u):l[c]=Array.isArray(h)?[...h,qd(u)]:[h,qd(u)],l},{})}const yS=wS(JSON.parse),_S=xS(JSON.stringify,JSON.parse);function wS(s){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const t=vS(e);for(const r in t){const o=t[r];if(typeof o=="string")try{t[r]=s(o)}catch{}}return t}}function xS(s,e){function t(r){if(typeof r=="object"&&r!==null)try{return s(r)}catch{}else if(typeof r=="string"&&typeof e=="function")try{return e(r),s(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(l=>{const c=r[l];typeof c>"u"||c===void 0?delete r[l]:r[l]=t(c)});const o=gS(r).toString();return o?`?${o}`:""}}const Cn="__root__";function gs(s){return!!(s!=null&&s.isRedirect)}function Hd(s){return!!(s!=null&&s.isRedirect)&&s.href}function bs(s){const e=s.resolvedLocation,t=s.location,r=(e==null?void 0:e.pathname)!==t.pathname,o=(e==null?void 0:e.href)!==t.href,l=(e==null?void 0:e.hash)!==t.hash;return{fromLocation:e,toLocation:t,pathChanged:r,hrefChanged:o,hashChanged:l}}class SS{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=t=>t(),this.update=t=>{var r;t.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const o=this.options;this.options={...this.options,...t},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(l=>[encodeURIComponent(l),l])):void 0,(!this.basepath||t.basepath&&t.basepath!==o.basepath)&&(t.basepath===void 0||t.basepath===""||t.basepath==="/"?this.basepath="/":this.basepath=`/${iS(t.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?nS({initialEntries:[this.basepath||"/"]}):tS()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new mh(TS(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(l=>!["redirected"].includes(l.status))}}}),pS(this)),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const t=this.options.notFoundRoute;t&&(t.init({originalIndex:99999999999,defaultSsr:this.options.defaultSsr}),this.routesById[t.id]=t);const r=c=>{c.forEach((u,h)=>{u.init({originalIndex:h,defaultSsr:this.options.defaultSsr});const f=this.routesById[u.id];if(dr(!f,`Duplicate routes found with id: ${String(u.id)}`),this.routesById[u.id]=u,!u.isRoot&&u.path){const g=ws(u.fullPath);(!this.routesByPath[g]||u.fullPath.endsWith("/"))&&(this.routesByPath[g]=u)}const m=u.children;m!=null&&m.length&&r(m)})};r([this.routeTree]);const o=[];Object.values(this.routesById).forEach((c,u)=>{var h;if(c.isRoot||!c.path)return;const f=Yh(c.fullPath),m=Mi(f);for(;m.length>1&&((h=m[0])==null?void 0:h.value)==="/";)m.shift();const g=m.map(y=>y.value==="/"?.75:y.type==="param"?.5:y.type==="wildcard"?.25:1);o.push({child:c,trimmed:f,parsed:m,index:u,scores:g})}),this.flatRoutes=o.sort((c,u)=>{const h=Math.min(c.scores.length,u.scores.length);for(let f=0;f<h;f++)if(c.scores[f]!==u.scores[f])return u.scores[f]-c.scores[f];if(c.scores.length!==u.scores.length)return u.scores.length-c.scores.length;for(let f=0;f<h;f++)if(c.parsed[f].value!==u.parsed[f].value)return c.parsed[f].value>u.parsed[f].value?1:-1;return c.index-u.index}).map((c,u)=>(c.child.rank=u,c.child))},this.subscribe=(t,r)=>{const o={eventType:t,fn:r};return this.subscribers.add(o),()=>{this.subscribers.delete(o)}},this.emit=t=>{this.subscribers.forEach(r=>{r.eventType===t.type&&r.fn(t)})},this.parseLocation=(t,r)=>{const o=({pathname:h,search:f,hash:m,state:g})=>{const y=this.options.parseSearch(f),x=this.options.stringifySearch(y);return{pathname:h,searchStr:x,search:hn(t==null?void 0:t.search,y),hash:m.split("#").reverse()[0]??"",href:`${h}${x}${m}`,state:hn(t==null?void 0:t.state,g)}},l=o(r??this.history.location),{__tempLocation:c,__tempKey:u}=l.state;if(c&&(!u||u===this.tempLocationKey)){const h=o(c);return h.state.key=l.state.key,delete h.state.__tempLocation,{...h,maskedLocation:l}}return l},this.resolvePathWithBase=(t,r)=>aS({basepath:this.basepath,base:t,to:_c(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.matchRoutes=(t,r,o)=>typeof t=="string"?this.matchRoutesInternal({pathname:t,search:r},o):this.matchRoutesInternal(t,r),this.getMatchedRoutes=(t,r)=>{let o={};const l=ws(t.pathname),c=m=>El(this.basepath,l,{to:m.fullPath,caseSensitive:m.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let u=(r==null?void 0:r.to)!==void 0?this.routesByPath[r.to]:void 0;u?o=c(u):u=this.flatRoutes.find(m=>{const g=c(m);return g?(o=g,!0):!1});let h=u||this.routesById[Cn];const f=[h];for(;h.parentRoute;)h=h.parentRoute,f.unshift(h);return{matchedRoutes:f,routeParams:o,foundRoute:u}},this.cancelMatch=t=>{const r=this.getMatch(t);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var t;(t=this.state.pendingMatches)==null||t.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=t=>{const r=(l={},c)=>{var u,h,f,m,g,y,x;const w=l._fromLocation?this.matchRoutes(l._fromLocation,{_buildLocation:!0}):this.state.matches,_=l.from!=null?w.find(B=>El(this.basepath,ws(B.pathname),{to:l.from,caseSensitive:!1,fuzzy:!1})):void 0,b=(_==null?void 0:_.pathname)||this.latestLocation.pathname;dr(l.from==null||_!=null,"Could not find match for from: "+l.from);const T=(u=this.state.pendingMatches)!=null&&u.length?(h=gi(this.state.pendingMatches))==null?void 0:h.search:((f=gi(w))==null?void 0:f.search)||this.latestLocation.search,R=c==null?void 0:c.matchedRoutes.filter(B=>w.find(q=>q.routeId===B.id));let L;if(l.to){const B=(_==null?void 0:_.fullPath)||((m=gi(w))==null?void 0:m.fullPath)||this.latestLocation.pathname;L=this.resolvePathWithBase(B,`${l.to}`)}else{const B=this.routesById[(g=R==null?void 0:R.find(q=>{const ee=kl({path:q.fullPath,params:(c==null?void 0:c.routeParams)??{},decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;return fr([this.basepath,ee])===b}))==null?void 0:g.id];L=this.resolvePathWithBase(b,(B==null?void 0:B.to)??b)}const V={...(y=gi(w))==null?void 0:y.params};let E=(l.params??!0)===!0?V:{...V,..._s(l.params,V)};Object.keys(E).length>0&&(c==null||c.matchedRoutes.map(B=>{var q;return((q=B.options.params)==null?void 0:q.stringify)??B.options.stringifyParams}).filter(Boolean).forEach(B=>{E={...E,...B(E)}})),L=kl({path:L,params:E??{},leaveWildcards:!1,leaveParams:t.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;let N=T;if(t._includeValidateSearch&&((x=this.options.search)!=null&&x.strict)){let B={};c==null||c.matchedRoutes.forEach(q=>{try{q.options.validateSearch&&(B={...B,...Yd(q.options.validateSearch,{...B,...N})??{}})}catch{}}),N=B}N=(B=>{const q=(c==null?void 0:c.matchedRoutes.reduce((K,J)=>{var z;const Z=[];if("search"in J.options)(z=J.options.search)!=null&&z.middlewares&&Z.push(...J.options.search.middlewares);else if(J.options.preSearchFilters||J.options.postSearchFilters){const Y=({search:P,next:$})=>{let ce=P;"preSearchFilters"in J.options&&J.options.preSearchFilters&&(ce=J.options.preSearchFilters.reduce((ne,ae)=>ae(ne),P));const ie=$(ce);return"postSearchFilters"in J.options&&J.options.postSearchFilters?J.options.postSearchFilters.reduce((ne,ae)=>ae(ne),ie):ie};Z.push(Y)}if(t._includeValidateSearch&&J.options.validateSearch){const Y=({search:P,next:$})=>{const ce=$(P);try{return{...ce,...Yd(J.options.validateSearch,ce)??{}}}catch{return ce}};Z.push(Y)}return K.concat(Z)},[]))??[],ee=({search:K})=>l.search?l.search===!0?K:_s(l.search,K):{};q.push(ee);const te=(K,J)=>{if(K>=q.length)return J;const z=q[K];return z({search:J,next:Y=>te(K+1,Y)})};return te(0,B)})(N),N=hn(T,N);const C=this.options.stringifySearch(N),O=l.hash===!0?this.latestLocation.hash:l.hash?_s(l.hash,this.latestLocation.hash):void 0,U=O?`#${O}`:"";let j=l.state===!0?this.latestLocation.state:l.state?_s(l.state,this.latestLocation.state):{};return j=hn(this.latestLocation.state,j),{pathname:L,search:N,searchStr:C,state:j,hash:O??"",href:`${L}${C}${U}`,unmaskOnReload:l.unmaskOnReload}},o=(l={},c)=>{var u;const h=r(l);let f=c?r(c):void 0;if(!f){let y={};const x=(u=this.options.routeMasks)==null?void 0:u.find(w=>{const _=El(this.basepath,h.pathname,{to:w.from,caseSensitive:!1,fuzzy:!1});return _?(y=_,!0):!1});if(x){const{from:w,..._}=x;c={...vh(t,["from"]),..._,params:y},f=r(c)}}const m=this.getMatchedRoutes(h,l),g=r(l,m);if(f){const y=this.getMatchedRoutes(f,c),x=r(c,y);g.maskedLocation=x}return g};return t.mask?o(t,{...vh(t,["from"]),...t.mask}):o(t)},this.commitLocation=({viewTransition:t,ignoreBlocker:r,...o})=>{const l=()=>{const h=["key","__TSR_index","__hashScrollIntoViewOptions"];h.forEach(m=>{o.state[m]=this.latestLocation.state[m]});const f=ki(o.state,this.latestLocation.state);return h.forEach(m=>{delete o.state[m]}),f},c=this.latestLocation.href===o.href,u=this.commitLocationPromise;if(this.commitLocationPromise=pi(()=>{u==null||u.resolve()}),c&&l())this.load();else{let{maskedLocation:h,hashScrollIntoView:f,...m}=o;h&&(m={...h,state:{...h.state,__tempKey:void 0,__tempLocation:{...m,search:m.searchStr,state:{...m.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(m.unmaskOnReload??this.options.unmaskOnReload??!1)&&(m.state.__tempKey=this.tempLocationKey)),m.state.__hashScrollIntoViewOptions=f??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=t,this.history[o.replace?"replace":"push"](m.href,m.state,{ignoreBlocker:r})}return this.resetNextScroll=o.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:t,resetScroll:r,hashScrollIntoView:o,viewTransition:l,ignoreBlocker:c,href:u,...h}={})=>{if(u){const m=this.history.location.state.__TSR_index,g=Yo(u,{__TSR_index:t?m:m+1});h.to=g.pathname,h.search=this.options.parseSearch(g.search),h.hash=g.hash.slice(1)}const f=this.buildLocation({...h,_includeValidateSearch:!0});return this.commitLocation({...f,viewTransition:l,replace:t,resetScroll:r,hashScrollIntoView:o,ignoreBlocker:c})},this.navigate=({to:t,reloadDocument:r,href:o,...l})=>{if(r){if(!o){const c=this.buildLocation({to:t,...l});o=this.history.createHref(c.href)}l.replace?window.location.replace(o):window.location.href=o;return}return this.buildAndCommitLocation({...l,href:o,to:t})},this.load=async t=>{this.latestLocation=this.parseLocation(this.latestLocation);let r,o,l;for(l=new Promise(c=>{this.startTransition(async()=>{var u;try{const h=this.latestLocation,f=this.state.resolvedLocation;this.cancelMatches();let m;li(()=>{m=this.matchRoutes(h),this.__store.setState(g=>({...g,status:"pending",isLoading:!0,location:h,pendingMatches:m,cachedMatches:g.cachedMatches.filter(y=>!m.find(x=>x.id===y.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",...bs({resolvedLocation:f,location:h})}),this.emit({type:"onBeforeLoad",...bs({resolvedLocation:f,location:h})}),await this.loadMatches({sync:t==null?void 0:t.sync,matches:m,location:h,onReady:async()=>{this.startViewTransition(async()=>{let g,y,x;li(()=>{this.__store.setState(w=>{const _=w.matches,b=w.pendingMatches||w.matches;return g=_.filter(T=>!b.find(R=>R.id===T.id)),y=b.filter(T=>!_.find(R=>R.id===T.id)),x=_.filter(T=>b.find(R=>R.id===T.id)),{...w,isLoading:!1,loadedAt:Date.now(),matches:b,pendingMatches:void 0,cachedMatches:[...w.cachedMatches,...g.filter(T=>T.status!=="error")]}}),this.clearExpiredCache()}),[[g,"onLeave"],[y,"onEnter"],[x,"onStay"]].forEach(([w,_])=>{w.forEach(b=>{var T,R;(R=(T=this.looseRoutesById[b.routeId].options)[_])==null||R.call(T,b)})})})}})}catch(h){Hd(h)?(r=h,this.isServer||this.navigate({...r,replace:!0,ignoreBlocker:!0})):fn(h)&&(o=h),this.__store.setState(f=>({...f,statusCode:r?r.statusCode:o?404:f.matches.some(m=>m.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===l&&((u=this.commitLocationPromise)==null||u.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),c()})}),this.latestLoadPromise=l,await l;this.latestLoadPromise&&l!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(c=>({...c,statusCode:404}))},this.startViewTransition=t=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let o;if(typeof r=="object"&&this.isViewTransitionTypesSupported){const l=this.latestLocation,c=this.state.resolvedLocation,u=typeof r.types=="function"?r.types(bs({resolvedLocation:c,location:l})):r.types;o={update:t,types:u}}else o=t;document.startViewTransition(o)}else t()},this.updateMatch=(t,r)=>{var o;let l;const c=(o=this.state.pendingMatches)==null?void 0:o.find(m=>m.id===t),u=this.state.matches.find(m=>m.id===t),h=this.state.cachedMatches.find(m=>m.id===t),f=c?"pendingMatches":u?"matches":h?"cachedMatches":"";return f&&this.__store.setState(m=>{var g;return{...m,[f]:(g=m[f])==null?void 0:g.map(y=>y.id===t?l=r(y):y)}}),l},this.getMatch=t=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===t),this.loadMatches=async({location:t,matches:r,preload:o,onReady:l,updateMatch:c=this.updateMatch,sync:u})=>{let h,f=!1;const m=async()=>{f||(f=!0,await(l==null?void 0:l()))},g=x=>!!(o&&!this.state.matches.find(w=>w.id===x)),y=(x,w)=>{var _,b,T,R;if(Hd(w)&&!w.reloadDocument)throw w;if(gs(w)||fn(w)){if(c(x.id,L=>({...L,status:gs(w)?"redirected":fn(w)?"notFound":"error",isFetching:!1,error:w,beforeLoadPromise:void 0,loaderPromise:void 0})),w.routeId||(w.routeId=x.routeId),(_=x.beforeLoadPromise)==null||_.resolve(),(b=x.loaderPromise)==null||b.resolve(),(T=x.loadPromise)==null||T.resolve(),gs(w))throw f=!0,w=this.resolveRedirect({...w,_fromLocation:t}),w;if(fn(w))throw this._handleNotFound(r,w,{updateMatch:c}),(R=this.serverSsr)==null||R.onMatchSettled({router:this,match:this.getMatch(x.id)}),w}};try{await new Promise((x,w)=>{(async()=>{var _,b,T,R;try{const L=(N,M,C)=>{var O,U;const{id:j,routeId:B}=r[N],q=this.looseRoutesById[B];if(M instanceof Promise)throw M;M.routerCode=C,h=h??N,y(this.getMatch(j),M);try{(U=(O=q.options).onError)==null||U.call(O,M)}catch(ee){M=ee,y(this.getMatch(j),M)}c(j,ee=>{var te,K;return(te=ee.beforeLoadPromise)==null||te.resolve(),(K=ee.loadPromise)==null||K.resolve(),{...ee,error:M,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[N,{id:M,routeId:C}]of r.entries()){const O=this.getMatch(M),U=(_=r[N-1])==null?void 0:_.id,j=this.looseRoutesById[C],B=j.options.pendingMs??this.options.defaultPendingMs,q=!!(l&&!this.isServer&&!g(M)&&(j.options.loader||j.options.beforeLoad||ev(j))&&typeof B=="number"&&B!==1/0&&(j.options.pendingComponent??((b=this.options)==null?void 0:b.defaultPendingComponent)));let ee=!0;if((O.beforeLoadPromise||O.loaderPromise)&&(q&&setTimeout(()=>{try{m()}catch{}},B),await O.beforeLoadPromise,ee=this.getMatch(M).status!=="success"),ee){try{c(M,ue=>{const Q=ue.loadPromise;return{...ue,loadPromise:pi(()=>{Q==null||Q.resolve()}),beforeLoadPromise:pi()}});const te=new AbortController;let K;q&&(K=setTimeout(()=>{try{m()}catch{}},B));const{paramsError:J,searchError:z}=this.getMatch(M);J&&L(N,J,"PARSE_PARAMS"),z&&L(N,z,"VALIDATE_SEARCH");const Z=()=>U?this.getMatch(U).context:this.options.context??{};c(M,ue=>({...ue,isFetching:"beforeLoad",fetchCount:ue.fetchCount+1,abortController:te,pendingTimeout:K,context:{...Z(),...ue.__routeContext}}));const{search:Y,params:P,context:$,cause:ce}=this.getMatch(M),ie=g(M),ne={search:Y,abortController:te,params:P,preload:ie,context:$,location:t,navigate:ue=>this.navigate({...ue,_fromLocation:t}),buildLocation:this.buildLocation,cause:ie?"preload":ce,matches:r},ae=await((R=(T=j.options).beforeLoad)==null?void 0:R.call(T,ne))??{};(gs(ae)||fn(ae))&&L(N,ae,"BEFORE_LOAD"),c(M,ue=>({...ue,__beforeLoadContext:ae,context:{...Z(),...ue.__routeContext,...ae},abortController:te}))}catch(te){L(N,te,"BEFORE_LOAD")}c(M,te=>{var K;return(K=te.beforeLoadPromise)==null||K.resolve(),{...te,beforeLoadPromise:void 0,isFetching:!1}})}}const V=r.slice(0,h),E=[];V.forEach(({id:N,routeId:M},C)=>{E.push((async()=>{const{loaderPromise:O}=this.getMatch(N);let U=!1,j=!1;if(O){await O;const B=this.getMatch(N);B.error&&y(B,B.error)}else{const B=E[C-1],q=this.looseRoutesById[M],ee=()=>{const{params:ie,loaderDeps:ne,abortController:ae,context:ue,cause:Q}=this.getMatch(N),pe=g(N);return{params:ie,deps:ne,preload:!!pe,parentMatchPromise:B,abortController:ae,context:ue,location:t,navigate:Te=>this.navigate({...Te,_fromLocation:t}),cause:pe?"preload":Q,route:q}},te=Date.now()-this.getMatch(N).updatedAt,K=g(N),J=K?q.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:q.options.staleTime??this.options.defaultStaleTime??0,z=q.options.shouldReload,Z=typeof z=="function"?z(ee()):z;c(N,ie=>({...ie,loaderPromise:pi(),preload:!!K&&!this.state.matches.find(ne=>ne.id===N)}));const Y=()=>{var ie,ne,ae,ue,Q,pe;const Te=this.getMatch(N);if(!Te)return;const he={matches:r,match:Te,params:Te.params,loaderData:Te.loaderData},Se=(ne=(ie=q.options).head)==null?void 0:ne.call(ie,he),Be=Se==null?void 0:Se.meta,nt=Se==null?void 0:Se.links,de=Se==null?void 0:Se.scripts,fe=(ue=(ae=q.options).scripts)==null?void 0:ue.call(ae,he),Re=(pe=(Q=q.options).headers)==null?void 0:pe.call(Q,he);c(N,Le=>({...Le,meta:Be,links:nt,headScripts:de,headers:Re,scripts:fe}))},P=async()=>{var ie,ne,ae,ue,Q;try{const pe=async()=>{const Te=this.getMatch(N);Te.minPendingPromise&&await Te.minPendingPromise};try{this.loadRouteChunk(q),c(N,he=>({...he,isFetching:"loader"}));const Te=await((ne=(ie=q.options).loader)==null?void 0:ne.call(ie,ee()));y(this.getMatch(N),Te),await q._lazyPromise,await pe(),await q._componentsPromise,li(()=>{c(N,he=>({...he,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:Te})),Y()})}catch(Te){let he=Te;await pe(),y(this.getMatch(N),Te);try{(ue=(ae=q.options).onError)==null||ue.call(ae,Te)}catch(Se){he=Se,y(this.getMatch(N),Se)}li(()=>{c(N,Se=>({...Se,error:he,status:"error",isFetching:!1})),Y()})}(Q=this.serverSsr)==null||Q.onMatchSettled({router:this,match:this.getMatch(N)})}catch(pe){li(()=>{c(N,Te=>({...Te,loaderPromise:void 0})),Y()}),y(this.getMatch(N),pe)}},{status:$,invalid:ce}=this.getMatch(N);U=$==="success"&&(ce||(Z??te>J)),K&&q.options.preload===!1||(U&&!u?(j=!0,(async()=>{try{await P();const{loaderPromise:ie,loadPromise:ne}=this.getMatch(N);ie==null||ie.resolve(),ne==null||ne.resolve(),c(N,ae=>({...ae,loaderPromise:void 0}))}catch(ie){Hd(ie)&&await this.navigate(ie)}})()):$!=="success"||U&&u?await P():Y())}if(!j){const{loaderPromise:B,loadPromise:q}=this.getMatch(N);B==null||B.resolve(),q==null||q.resolve()}return c(N,B=>({...B,isFetching:j?B.isFetching:!1,loaderPromise:j?B.loaderPromise:void 0,invalid:!1})),this.getMatch(N)})())}),await Promise.all(E),x()}catch(L){w(L)}})()}),await m()}catch(x){if(gs(x)||fn(x))throw fn(x)&&!o&&await m(),x}return r},this.invalidate=t=>{const r=o=>{var l;return((l=t==null?void 0:t.filter)==null?void 0:l.call(t,o))??!0?{...o,invalid:!0,...o.status==="error"?{status:"pending",error:void 0}:{}}:o};return this.__store.setState(o=>{var l;return{...o,matches:o.matches.map(r),cachedMatches:o.cachedMatches.map(r),pendingMatches:(l=o.pendingMatches)==null?void 0:l.map(r)}}),this.load({sync:t==null?void 0:t.sync})},this.resolveRedirect=t=>{const r=t;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=t=>{const r=t==null?void 0:t.filter;r!==void 0?this.__store.setState(o=>({...o,cachedMatches:o.cachedMatches.filter(l=>!r(l))})):this.__store.setState(o=>({...o,cachedMatches:[]}))},this.clearExpiredCache=()=>{const t=r=>{const o=this.looseRoutesById[r.routeId];if(!o.options.loader)return!0;const l=(r.preload?o.options.preloadGcTime??this.options.defaultPreloadGcTime:o.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<l)};this.clearCache({filter:t})},this.loadRouteChunk=t=>(t._lazyPromise===void 0&&(t.lazyFn?t._lazyPromise=t.lazyFn().then(r=>{const{id:o,...l}=r.options;Object.assign(t.options,l)}):t._lazyPromise=Promise.resolve()),t._componentsPromise===void 0&&(t._componentsPromise=t._lazyPromise.then(()=>Promise.all(ay.map(async r=>{const o=t.options[r];o!=null&&o.preload&&await o.preload()})))),t._componentsPromise),this.preloadRoute=async t=>{const r=this.buildLocation(t);let o=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:t});const l=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(u=>u.id)),c=new Set([...l,...this.state.cachedMatches.map(u=>u.id)]);li(()=>{o.forEach(u=>{c.has(u.id)||this.__store.setState(h=>({...h,cachedMatches:[...h.cachedMatches,u]}))})});try{return o=await this.loadMatches({matches:o,location:r,preload:!0,updateMatch:(u,h)=>{l.has(u)?o=o.map(f=>f.id===u?h(f):f):this.updateMatch(u,h)}}),o}catch(u){if(gs(u))return u.reloadDocument?void 0:await this.preloadRoute({...u,_fromLocation:r});fn(u)||console.error(u);return}},this.matchRoute=(t,r)=>{const o={...t,to:t.to?this.resolvePathWithBase(t.from||"",t.to):void 0,params:t.params||{},leaveParams:!0},l=this.buildLocation(o);if(r!=null&&r.pending&&this.state.status!=="pending")return!1;const u=((r==null?void 0:r.pending)===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,h=El(this.basepath,u.pathname,{...r,to:l.pathname});return!h||t.params&&!ki(h,t.params,{partial:!0})?!1:h&&((r==null?void 0:r.includeSearch)??!0)?ki(u.search,l.search,{partial:!0})?h:!1:h},this._handleNotFound=(t,r,{updateMatch:o=this.updateMatch}={})=>{var l;const c=this.routesById[r.routeId??""]??this.routeTree,u={};for(const f of t)u[f.routeId]=f;!c.options.notFoundComponent&&((l=this.options)!=null&&l.defaultNotFoundComponent)&&(c.options.notFoundComponent=this.options.defaultNotFoundComponent),dr(c.options.notFoundComponent);const h=u[c.id];dr(h,"Could not find match for route: "+c.id),o(h.id,f=>({...f,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&c.parentRoute&&(r.routeId=c.parentRoute.id,this._handleNotFound(t,r,{updateMatch:o}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(t=>t.status==="notFound"||t.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??_S,parseSearch:e.parseSearch??yS}),typeof document<"u"&&(window.__TSR_ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(e,t){const{foundRoute:r,matchedRoutes:o,routeParams:l}=this.getMatchedRoutes(e,t==null?void 0:t.dest);let c=!1;(r?r.path!=="/"&&l["**"]:ws(e.pathname))&&(this.options.notFoundRoute?o.push(this.options.notFoundRoute):c=!0);const u=(()=>{if(c){if(this.options.notFoundMode!=="root")for(let g=o.length-1;g>=0;g--){const y=o[g];if(y.children)return y.id}return Cn}})(),h=o.map(g=>{var y;let x;const w=((y=g.options.params)==null?void 0:y.parse)??g.options.parseParams;if(w)try{const _=w(l);Object.assign(l,_)}catch(_){if(x=new bS(_.message,{cause:_}),t!=null&&t.throwOnError)throw x;return x}}),f=[],m=g=>(g==null?void 0:g.id)?g.context??this.options.context??{}:this.options.context??{};return o.forEach((g,y)=>{var x,w;const _=f[y-1],[b,T,R]=(()=>{const q=(_==null?void 0:_.search)??e.search,ee=(_==null?void 0:_._strictSearch)??{};try{const te=Yd(g.options.validateSearch,{...q})??{};return[{...q,...te},{...ee,...te},void 0]}catch(te){let K=te;if(te instanceof ec||(K=new ec(te.message,{cause:te})),t!=null&&t.throwOnError)throw K;return[q,{},K]}})(),L=((w=(x=g.options).loaderDeps)==null?void 0:w.call(x,{search:b}))??"",V=L?JSON.stringify(L):"",{usedParams:E,interpolatedPath:N}=kl({path:g.fullPath,params:l,decodeCharMap:this.pathParamsDecodeCharMap}),M=kl({path:g.id,params:l,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath+V,C=this.getMatch(M),O=this.state.matches.find(q=>q.routeId===g.id),U=O?"stay":"enter";let j;if(C)j={...C,cause:U,params:O?hn(O.params,l):l,_strictParams:E,search:hn(O?O.search:C.search,b),_strictSearch:T};else{const q=g.options.loader||g.options.beforeLoad||g.lazyFn||ev(g)?"pending":"success";j={id:M,index:y,routeId:g.id,params:O?hn(O.params,l):l,_strictParams:E,pathname:fr([this.basepath,N]),updatedAt:Date.now(),search:O?hn(O.search,b):b,_strictSearch:T,searchError:void 0,status:q,isFetching:!1,error:void 0,paramsError:h[y],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:U,loaderDeps:O?hn(O.loaderDeps,L):L,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:g.options.staticData||{},loadPromise:pi(),fullPath:g.fullPath}}t!=null&&t.preload||(j.globalNotFound=u===g.id),j.searchError=R;const B=m(_);j.context={...B,...j.__routeContext,...j.__beforeLoadContext},f.push(j)}),f.forEach((g,y)=>{var x,w;const _=this.looseRoutesById[g.routeId];if(!this.getMatch(g.id)&&(t==null?void 0:t._buildLocation)!==!0){const T=f[y-1],R=m(T),L={deps:g.loaderDeps,params:g.params,context:R,location:e,navigate:V=>this.navigate({...V,_fromLocation:e}),buildLocation:this.buildLocation,cause:g.cause,abortController:g.abortController,preload:!!g.preload,matches:f};g.__routeContext=((w=(x=_.options).context)==null?void 0:w.call(x,L))??{},g.context={...R,...g.__routeContext,...g.__beforeLoadContext}}}),f}}class ec extends Error{}class bS extends Error{}function TS(s){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:s,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Yd(s,e){if(s==null)return{};if("~standard"in s){const t=s["~standard"].validate(e);if(t instanceof Promise)throw new ec("Async validation not supported");if(t.issues)throw new ec(JSON.stringify(t.issues,void 0,2),{cause:t});return t.value}return"parse"in s?s.parse(e):typeof s=="function"?s(e):{}}const ay=["component","errorComponent","pendingComponent","notFoundComponent"];function ev(s){var e;for(const t of ay)if((e=s.options[t])!=null&&e.preload)return!0;return!1}const CS="Error preloading route! ☝️";class ly{constructor(e){if(this.init=t=>{var r,o;this.originalIndex=t.originalIndex;const l=this.options,c=!(l!=null&&l.path)&&!(l!=null&&l.id);if(this.parentRoute=(o=(r=this.options).getParentRoute)==null?void 0:o.call(r),c)this._path=Cn;else if(!this.parentRoute)throw new Error("Child Route instances must pass a 'getParentRoute: () => ParentRoute' option that returns a Route instance.");let u=c?Cn:l==null?void 0:l.path;u&&u!=="/"&&(u=Yh(u));const h=(l==null?void 0:l.id)||u;let f=c?Cn:fr([this.parentRoute.id===Cn?"":this.parentRoute.id,h]);u===Cn&&(u="/"),f!==Cn&&(f=fr(["/",f]));const m=f===Cn?"/":fr([this.parentRoute.fullPath,u]);this._path=u,this._id=f,this._fullPath=m,this._to=m,this._ssr=(l==null?void 0:l.ssr)??t.defaultSsr??!0},this.clone=t=>{this._path=t._path,this._id=t._id,this._fullPath=t._fullPath,this._to=t._to,this._ssr=t._ssr,this.options.getParentRoute=t.options.getParentRoute,this.children=t.children},this.addChildren=t=>this._addFileChildren(t),this._addFileChildren=t=>(Array.isArray(t)&&(this.children=t),typeof t=="object"&&t!==null&&(this.children=Object.values(t)),this),this._addFileTypes=()=>this,this.updateLoader=t=>(Object.assign(this.options,t),this),this.update=t=>(Object.assign(this.options,t),this),this.lazy=t=>(this.lazyFn=t,this),this.options=e||{},this.isRoot=!(e!=null&&e.getParentRoute),e!=null&&e.id&&(e!=null&&e.path))throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}}class kS extends ly{constructor(e){super(e)}}function Xh(s){const e=s.errorComponent??wc;return I.jsx(ES,{getResetKey:s.getResetKey,onCatch:s.onCatch,children:({error:t,reset:r})=>t?k.createElement(e,{error:t,reset:r}):s.children})}class ES extends k.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,t){t.error&&t.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,t){this.props.onCatch&&this.props.onCatch(e,t)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function wc({error:s}){const[e,t]=k.useState(!1);return I.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[I.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[I.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),I.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>t(r=>!r),children:e?"Hide Error":"Show Error"})]}),I.jsx("div",{style:{height:".25rem"}}),e?I.jsx("div",{children:I.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:s.message?I.jsx("code",{children:s.message}):null})}):null]})}var Xd={exports:{}},Kd={},Zd={exports:{}},Qd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv;function PS(){if(tv)return Qd;tv=1;var s=ea();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var t=typeof Object.is=="function"?Object.is:e,r=s.useState,o=s.useEffect,l=s.useLayoutEffect,c=s.useDebugValue;function u(g,y){var x=y(),w=r({inst:{value:x,getSnapshot:y}}),_=w[0].inst,b=w[1];return l(function(){_.value=x,_.getSnapshot=y,h(_)&&b({inst:_})},[g,x,y]),o(function(){return h(_)&&b({inst:_}),g(function(){h(_)&&b({inst:_})})},[g]),c(x),x}function h(g){var y=g.getSnapshot;g=g.value;try{var x=y();return!t(g,x)}catch{return!0}}function f(g,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Qd.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:m,Qd}var nv;function AS(){return nv||(nv=1,Zd.exports=PS()),Zd.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv;function NS(){if(rv)return Kd;rv=1;var s=ea(),e=AS();function t(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var r=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,l=s.useRef,c=s.useEffect,u=s.useMemo,h=s.useDebugValue;return Kd.useSyncExternalStoreWithSelector=function(f,m,g,y,x){var w=l(null);if(w.current===null){var _={hasValue:!1,value:null};w.current=_}else _=w.current;w=u(function(){function T(N){if(!R){if(R=!0,L=N,N=y(N),x!==void 0&&_.hasValue){var M=_.value;if(x(M,N))return V=M}return V=N}if(M=V,r(L,N))return M;var C=y(N);return x!==void 0&&x(M,C)?(L=N,M):(L=N,V=C)}var R=!1,L,V,E=g===void 0?null:g;return[function(){return T(m())},E===null?void 0:function(){return T(E())}]},[m,g,y,x]);var b=o(f,w[0],w[1]);return c(function(){_.hasValue=!0,_.value=b},[b]),h(b),b},Kd}var sv;function RS(){return sv||(sv=1,Xd.exports=NS()),Xd.exports}var MS=RS();function OS(s,e=t=>t){return MS.useSyncExternalStoreWithSelector(s.subscribe,()=>s.state,()=>s.state,e,IS)}function IS(s,e){if(Object.is(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;if(s instanceof Map&&e instanceof Map){if(s.size!==e.size)return!1;for(const[r,o]of s)if(!e.has(r)||!Object.is(o,e.get(r)))return!1;return!0}if(s instanceof Set&&e instanceof Set){if(s.size!==e.size)return!1;for(const r of s)if(!e.has(r))return!1;return!0}const t=Object.keys(s);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(s[t[r]],e[t[r]]))return!1;return!0}const Jd=k.createContext(null);function cy(){return typeof document>"u"?Jd:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Jd,Jd)}function Mn(s){const e=k.useContext(cy());return s==null||s.warn,e}function Rt(s){const e=Mn({warn:(s==null?void 0:s.router)===void 0}),t=(s==null?void 0:s.router)||e,r=k.useRef(void 0);return OS(t.__store,o=>{if(s!=null&&s.select){if(s.structuralSharing??t.options.defaultStructuralSharing){const l=hn(r.current,s.select(o));return r.current=l,l}return s.select(o)}return o})}const xc=k.createContext(void 0),DS=k.createContext(void 0);function Xr(s){const e=k.useContext(s.from?DS:xc);return Rt({select:r=>{const o=r.matches.find(l=>s.from?s.from===l.routeId:l.id===e);if(dr(!((s.shouldThrow??!0)&&!o),`Could not find ${s.from?`an active match from "${s.from}"`:"a nearest match!"}`),o!==void 0)return s.select?s.select(o):o},structuralSharing:s.structuralSharing})}function uy(s){return Xr({from:s.from,strict:s.strict,structuralSharing:s.structuralSharing,select:e=>s.select?s.select(e.loaderData):e.loaderData})}function dy(s){const{select:e,...t}=s;return Xr({...t,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function Kh(s){return Xr({from:s.from,strict:s.strict,shouldThrow:s.shouldThrow,structuralSharing:s.structuralSharing,select:e=>s.select?s.select(e.params):e.params})}function hy(s){return Xr({from:s.from,strict:s.strict,shouldThrow:s.shouldThrow,structuralSharing:s.structuralSharing,select:e=>s.select?s.select(e.search):e.search})}function fy(s){const{navigate:e}=Mn();return k.useCallback(t=>e({from:s==null?void 0:s.from,...t}),[s==null?void 0:s.from,e])}var Zh=ny();const LS=ey(Zh),Bo=typeof window<"u"?k.useLayoutEffect:k.useEffect;function eh(s){const e=k.useRef({value:s,prev:null}),t=e.current.value;return s!==t&&(e.current={value:s,prev:t}),e.current.prev}function FS(s,e,t={},r={}){const o=k.useRef(typeof IntersectionObserver=="function"),l=k.useRef(null);return k.useEffect(()=>{if(!(!s.current||!o.current||r.disabled))return l.current=new IntersectionObserver(([c])=>{e(c)},t),l.current.observe(s.current),()=>{var c;(c=l.current)==null||c.disconnect()}},[e,t,r.disabled,s]),l.current}function VS(s){const e=k.useRef(null);return k.useImperativeHandle(s,()=>e.current,[]),e}function BS(){const s=Mn(),e=k.useRef({router:s,mounted:!1}),t=Rt({select:({isLoading:g})=>g}),[r,o]=k.useState(!1),l=Rt({select:g=>g.matches.some(y=>y.status==="pending"),structuralSharing:!0}),c=eh(t),u=t||r||l,h=eh(u),f=t||l,m=eh(f);return s.isServer||(s.startTransition=g=>{o(!0),k.startTransition(()=>{g(),o(!1)})}),k.useEffect(()=>{const g=s.history.subscribe(s.load),y=s.buildLocation({to:s.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return ws(s.latestLocation.href)!==ws(y.href)&&s.commitLocation({...y,replace:!0}),()=>{g()}},[s,s.history]),Bo(()=>{if(typeof window<"u"&&s.clientSsr||e.current.router===s&&e.current.mounted)return;e.current={router:s,mounted:!0},(async()=>{try{await s.load()}catch(y){console.error(y)}})()},[s]),Bo(()=>{c&&!t&&s.emit({type:"onLoad",...bs(s.state)})},[c,s,t]),Bo(()=>{m&&!f&&s.emit({type:"onBeforeRouteMount",...bs(s.state)})},[f,m,s]),Bo(()=>{h&&!u&&(s.emit({type:"onResolved",...bs(s.state)}),s.__store.setState(g=>({...g,status:"idle",resolvedLocation:g.location})),mS(s))},[u,h,s]),null}function zS(s){const e=Rt({select:t=>`not-found-${t.location.pathname}-${t.status}`});return I.jsx(Xh,{getResetKey:()=>e,onCatch:(t,r)=>{var o;if(fn(t))(o=s.onCatch)==null||o.call(s,t,r);else throw t},errorComponent:({error:t})=>{var r;if(fn(t))return(r=s.fallback)==null?void 0:r.call(s,t);throw t},children:s.children})}function US(){return I.jsx("p",{children:"Not Found"})}function jl(s){return I.jsx(I.Fragment,{children:s.children})}function py(s,e,t){return e.options.notFoundComponent?I.jsx(e.options.notFoundComponent,{data:t}):s.options.defaultNotFoundComponent?I.jsx(s.options.defaultNotFoundComponent,{data:t}):I.jsx(US,{})}var th,iv;function jS(){if(iv)return th;iv=1;const s={},e=s.hasOwnProperty,t=(C,O)=>{for(const U in C)e.call(C,U)&&O(U,C[U])},r=(C,O)=>(O&&t(O,(U,j)=>{C[U]=j}),C),o=(C,O)=>{const U=C.length;let j=-1;for(;++j<U;)O(C[j])},l=C=>"\\u"+("0000"+C).slice(-4),c=(C,O)=>{let U=C.toString(16);return O?U:U.toUpperCase()},u=s.toString,h=Array.isArray,f=C=>typeof Buffer=="function"&&Buffer.isBuffer(C),m=C=>u.call(C)=="[object Object]",g=C=>typeof C=="string"||u.call(C)=="[object String]",y=C=>typeof C=="number"||u.call(C)=="[object Number]",x=C=>typeof C=="bigint",w=C=>typeof C=="function",_=C=>u.call(C)=="[object Map]",b=C=>u.call(C)=="[object Set]",T={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},R=/[\\\b\f\n\r\t]/,L=/[0-9]/,V=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,E=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,N=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,M=(C,O)=>{const U=()=>{J=K,++O.indentLevel,K=O.indent.repeat(O.indentLevel)},j={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},B=O&&O.json;B&&(j.quotes="double",j.wrap=!0),O=r(j,O),O.quotes!="single"&&O.quotes!="double"&&O.quotes!="backtick"&&(O.quotes="single");const q=O.quotes=="double"?'"':O.quotes=="backtick"?"`":"'",ee=O.compact,te=O.lowercaseHex;let K=O.indent.repeat(O.indentLevel),J="";const z=O.__inline1__,Z=O.__inline2__,Y=ee?"":`
`;let P,$=!0;const ce=O.numbers=="binary",ie=O.numbers=="octal",ne=O.numbers=="decimal",ae=O.numbers=="hexadecimal";if(B&&C&&w(C.toJSON)&&(C=C.toJSON()),!g(C)){if(_(C))return C.size==0?"new Map()":(ee||(O.__inline1__=!0,O.__inline2__=!1),"new Map("+M(Array.from(C),O)+")");if(b(C))return C.size==0?"new Set()":"new Set("+M(Array.from(C),O)+")";if(f(C))return C.length==0?"Buffer.from([])":"Buffer.from("+M(Array.from(C),O)+")";if(h(C))return P=[],O.wrap=!0,z&&(O.__inline1__=!1,O.__inline2__=!0),Z||U(),o(C,Q=>{$=!1,Z&&(O.__inline2__=!1),P.push((ee||Z?"":K)+M(Q,O))}),$?"[]":Z?"["+P.join(", ")+"]":"["+Y+P.join(","+Y)+Y+(ee?"":J)+"]";if(y(C)||x(C)){if(B)return JSON.stringify(Number(C));let Q;if(ne)Q=String(C);else if(ae){let pe=C.toString(16);te||(pe=pe.toUpperCase()),Q="0x"+pe}else ce?Q="0b"+C.toString(2):ie&&(Q="0o"+C.toString(8));return x(C)?Q+"n":Q}else return x(C)?B?JSON.stringify(Number(C)):C+"n":m(C)?(P=[],O.wrap=!0,U(),t(C,(Q,pe)=>{$=!1,P.push((ee?"":K)+M(Q,O)+":"+(ee?"":" ")+M(pe,O))}),$?"{}":"{"+Y+P.join(","+Y)+Y+(ee?"":J)+"}"):B?JSON.stringify(C)||"null":String(C)}const ue=O.escapeEverything?E:N;return P=C.replace(ue,(Q,pe,Te,he,Se,Be)=>{if(pe){if(O.minimal)return pe;const de=pe.charCodeAt(0),fe=pe.charCodeAt(1);if(O.es6){const Re=(de-55296)*1024+fe-56320+65536;return"\\u{"+c(Re,te)+"}"}return l(c(de,te))+l(c(fe,te))}if(Te)return l(c(Te.charCodeAt(0),te));if(Q=="\0"&&!B&&!L.test(Be.charAt(Se+1)))return"\\0";if(he)return he==q||O.escapeEverything?"\\"+he:he;if(R.test(Q))return T[Q];if(O.minimal&&!V.test(Q))return Q;const nt=c(Q.charCodeAt(0),te);return B||nt.length>2?l(nt):"\\x"+("00"+nt).slice(-2)}),q=="`"&&(P=P.replace(/\$\{/g,"\\${")),O.isScriptContext&&(P=P.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,B?"\\u003C!--":"\\x3C!--")),O.wrap&&(P=q+P+q),P};return M.version="3.0.2",th=M,th}jS();function GS({children:s,log:e}){return typeof document<"u"?null:I.jsx("script",{className:"tsr-once",dangerouslySetInnerHTML:{__html:[s,"",'if (typeof __TSR_SSR__ !== "undefined") __TSR_SSR__.cleanScripts()'].filter(Boolean).join(`
`)}})}function WS(){const s=Mn(),t=(s.options.getScrollRestorationKey||_h)(s.latestLocation),r=t!==_h(s.latestLocation)?t:null;return!s.isScrollRestoring||!s.isServer?null:I.jsx(GS,{children:`(${oy.toString()})(${JSON.stringify(Ql)},${JSON.stringify(r)}, undefined, true)`,log:!1})}const my=k.memo(function({matchId:e}){var t,r;const o=Mn(),l=Rt({select:T=>{var R;return(R=T.matches.find(L=>L.id===e))==null?void 0:R.routeId}});dr(l);const c=o.routesById[l],u=c.options.pendingComponent??o.options.defaultPendingComponent,h=u?I.jsx(u,{}):null,f=c.options.errorComponent??o.options.defaultErrorComponent,m=c.options.onCatch??o.options.defaultOnCatch,g=c.isRoot?c.options.notFoundComponent??((t=o.options.notFoundRoute)==null?void 0:t.options.component):c.options.notFoundComponent,y=(!c.isRoot||c.options.wrapInSuspense)&&(c.options.wrapInSuspense??u??((r=c.options.errorComponent)==null?void 0:r.preload))?k.Suspense:jl,x=f?Xh:jl,w=g?zS:jl,_=Rt({select:T=>T.loadedAt}),b=Rt({select:T=>{var R;const L=T.matches.findIndex(V=>V.id===e);return(R=T.matches[L-1])==null?void 0:R.routeId}});return I.jsxs(I.Fragment,{children:[I.jsx(xc.Provider,{value:e,children:I.jsx(y,{fallback:h,children:I.jsx(x,{getResetKey:()=>_,errorComponent:f||wc,onCatch:(T,R)=>{if(fn(T))throw T;m==null||m(T,R)},children:I.jsx(w,{fallback:T=>{if(!g||T.routeId&&T.routeId!==l||!T.routeId&&!c.isRoot)throw T;return k.createElement(g,T)},children:I.jsx(qS,{matchId:e})})})})}),b===Cn&&o.options.scrollRestoration?I.jsxs(I.Fragment,{children:[I.jsx($S,{}),I.jsx(WS,{})]}):null]})});function $S(){const s=Mn(),e=k.useRef(void 0);return I.jsx("script",{suppressHydrationWarning:!0,ref:t=>{t&&(e.current===void 0||e.current.href!==s.latestLocation.href)&&(s.emit({type:"onRendered",...bs(s.state)}),e.current=s.latestLocation)}},s.latestLocation.state.key)}const qS=k.memo(function({matchId:e}){var t,r,o;const l=Mn(),{match:c,key:u,routeId:h}=Rt({select:y=>{const x=y.matches.findIndex(L=>L.id===e),w=y.matches[x],_=w.routeId,b=l.routesById[_].options.remountDeps??l.options.defaultRemountDeps,T=b==null?void 0:b({routeId:_,loaderDeps:w.loaderDeps,params:w._strictParams,search:w._strictSearch});return{key:T?JSON.stringify(T):void 0,routeId:_,match:vh(w,["id","status","error"])}},structuralSharing:!0}),f=l.routesById[h],m=k.useMemo(()=>{const y=f.options.component??l.options.defaultComponent;return y?I.jsx(y,{},u):I.jsx(gy,{})},[u,f.options.component,l.options.defaultComponent]),g=(f.options.errorComponent??l.options.defaultErrorComponent)||wc;if(c.status==="notFound")return dr(fn(c.error)),py(l,f,c.error);if(c.status==="redirected")throw dr(gs(c.error)),(t=l.getMatch(c.id))==null?void 0:t.loadPromise;if(c.status==="error"){if(l.isServer)return I.jsx(g,{error:c.error,reset:void 0,info:{componentStack:""}});throw c.error}if(c.status==="pending"){const y=f.options.pendingMinMs??l.options.defaultPendingMinMs;if(y&&!((r=l.getMatch(c.id))!=null&&r.minPendingPromise)&&!l.isServer){const x=pi();Promise.resolve().then(()=>{l.updateMatch(c.id,w=>({...w,minPendingPromise:x}))}),setTimeout(()=>{x.resolve(),l.updateMatch(c.id,w=>({...w,minPendingPromise:void 0}))},y)}throw(o=l.getMatch(c.id))==null?void 0:o.loadPromise}return m}),gy=k.memo(function(){const e=Mn(),t=k.useContext(xc),r=Rt({select:f=>{var m;return(m=f.matches.find(g=>g.id===t))==null?void 0:m.routeId}}),o=e.routesById[r],l=Rt({select:f=>{const g=f.matches.find(y=>y.id===t);return dr(g),g.globalNotFound}}),c=Rt({select:f=>{var m;const g=f.matches,y=g.findIndex(x=>x.id===t);return(m=g[y+1])==null?void 0:m.id}});if(l)return py(e,o,void 0);if(!c)return null;const u=I.jsx(my,{matchId:c}),h=e.options.defaultPendingComponent?I.jsx(e.options.defaultPendingComponent,{}):null;return t===Cn?I.jsx(k.Suspense,{fallback:h,children:u}):u});function HS(){const s=Mn(),e=s.options.defaultPendingComponent?I.jsx(s.options.defaultPendingComponent,{}):null,t=s.isServer||typeof document<"u"&&s.clientSsr?jl:k.Suspense,r=I.jsxs(t,{fallback:e,children:[I.jsx(BS,{}),I.jsx(YS,{})]});return s.options.InnerWrap?I.jsx(s.options.InnerWrap,{children:r}):r}function YS(){const s=Rt({select:t=>{var r;return(r=t.matches[0])==null?void 0:r.id}}),e=Rt({select:t=>t.loadedAt});return I.jsx(xc.Provider,{value:s,children:I.jsx(Xh,{getResetKey:()=>e,errorComponent:wc,onCatch:t=>{t.message||t.toString()},children:s?I.jsx(my,{matchId:s}):null})})}function XS(s){return Rt({select:e=>{const t=e.matches;return s!=null&&s.select?s.select(t):t},structuralSharing:s==null?void 0:s.structuralSharing})}function KS(s,e){const t=Mn(),[r,o]=k.useState(!1),l=k.useRef(!1),c=VS(e),{activeProps:u=()=>({className:"active"}),inactiveProps:h=()=>({}),activeOptions:f,to:m,preload:g,preloadDelay:y,hashScrollIntoView:x,replace:w,startTransition:_,resetScroll:b,viewTransition:T,children:R,target:L,disabled:V,style:E,className:N,onClick:M,onFocus:C,onMouseEnter:O,onMouseLeave:U,onTouchStart:j,ignoreBlocker:B,...q}=s,{params:ee,search:te,hash:K,state:J,mask:z,reloadDocument:Z,...Y}=q,P=k.useMemo(()=>{try{return new URL(`${m}`),"external"}catch{}return"internal"},[m]),$=Rt({select:Pe=>Pe.location.search,structuralSharing:!0}),ce=XS({select:Pe=>{var De;return s.from??((De=Pe[Pe.length-1])==null?void 0:De.fullPath)}}),ie=k.useMemo(()=>({...s,from:ce}),[s,ce]),ne=k.useMemo(()=>t.buildLocation(ie),[t,ie,$]),ae=k.useMemo(()=>ie.reloadDocument?!1:g??t.options.defaultPreload,[t.options.defaultPreload,g,ie.reloadDocument]),ue=y??t.options.defaultPreloadDelay??0,Q=Rt({select:Pe=>{if(f!=null&&f.exact){if(!oS(Pe.location.pathname,ne.pathname,t.basepath))return!1}else{const De=Kl(Pe.location.pathname,t.basepath).split("/");if(!Kl(ne.pathname,t.basepath).split("/").every((Ls,Fs)=>Ls===De[Fs]))return!1}return((f==null?void 0:f.includeSearch)??!0)&&!ki(Pe.location.search,ne.search,{partial:!(f!=null&&f.exact),ignoreUndefined:!(f!=null&&f.explicitUndefined)})?!1:f!=null&&f.includeHash?Pe.location.hash===ne.hash:!0}}),pe=k.useCallback(()=>{t.preloadRoute(ie).catch(Pe=>{console.warn(Pe),console.warn(CS)})},[ie,t]),Te=k.useCallback(Pe=>{Pe!=null&&Pe.isIntersecting&&pe()},[pe]);if(FS(c,Te,{rootMargin:"100px"},{disabled:!!V||ae!=="viewport"}),Bo(()=>{l.current||!V&&ae==="render"&&(pe(),l.current=!0)},[V,pe,ae]),P==="external")return{...Y,ref:c,type:P,href:m,...R&&{children:R},...L&&{target:L},...V&&{disabled:V},...E&&{style:E},...N&&{className:N},...M&&{onClick:M},...C&&{onFocus:C},...O&&{onMouseEnter:O},...U&&{onMouseLeave:U},...j&&{onTouchStart:j}};const he=Pe=>{if(!V&&!ZS(Pe)&&!Pe.defaultPrevented&&(!L||L==="_self")&&Pe.button===0){Pe.preventDefault(),Zh.flushSync(()=>{o(!0)});const De=t.subscribe("onResolved",()=>{De(),o(!1)});return t.navigate({...ie,replace:w,resetScroll:b,hashScrollIntoView:x,startTransition:_,viewTransition:T,ignoreBlocker:B})}},Se=Pe=>{V||ae&&pe()},Be=Se,nt=Pe=>{if(V)return;const De=Pe.target||{};if(ae){if(De.preloadTimeout)return;De.preloadTimeout=setTimeout(()=>{De.preloadTimeout=null,pe()},ue)}},de=Pe=>{if(V)return;const De=Pe.target||{};De.preloadTimeout&&(clearTimeout(De.preloadTimeout),De.preloadTimeout=null)},fe=Pe=>De=>{var sn;(sn=De.persist)==null||sn.call(De),Pe.filter(Boolean).forEach(Jn=>{De.defaultPrevented||Jn(De)})},Re=Q?_s(u,{})??{}:{},Le=Q?{}:_s(h,{}),Me=[N,Re.className,Le.className].filter(Boolean).join(" "),Fe={...E,...Re.style,...Le.style};return{...Y,...Re,...Le,href:V?void 0:ne.maskedLocation?t.history.createHref(ne.maskedLocation.href):t.history.createHref(ne.href),ref:c,onClick:fe([M,he]),onFocus:fe([C,Se]),onMouseEnter:fe([O,nt]),onMouseLeave:fe([U,de]),onTouchStart:fe([j,Be]),disabled:!!V,target:L,...Object.keys(Fe).length&&{style:Fe},...Me&&{className:Me},...V&&{role:"link","aria-disabled":!0},...Q&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}const Xo=k.forwardRef((s,e)=>{const{_asChild:t,...r}=s,{type:o,ref:l,...c}=KS(r,e),u=typeof r.children=="function"?r.children({isActive:c["data-status"]==="active"}):r.children;return typeof t>"u"&&delete c.disabled,k.createElement(t||"a",{...c,ref:l},u)});function ZS(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}class QS extends ly{constructor(e){super(e),this.useMatch=t=>Xr({select:t==null?void 0:t.select,from:this.id,structuralSharing:t==null?void 0:t.structuralSharing}),this.useRouteContext=t=>Xr({...t,from:this.id,select:r=>t!=null&&t.select?t.select(r.context):r.context}),this.useSearch=t=>hy({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useParams=t=>Kh({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useLoaderDeps=t=>dy({...t,from:this.id}),this.useLoaderData=t=>uy({...t,from:this.id}),this.useNavigate=()=>fy({from:this.fullPath}),this.Link=ta.forwardRef((t,r)=>I.jsx(Xo,{ref:r,from:this.fullPath,...t})),this.$$typeof=Symbol.for("react.memo")}}function Qh(s){return new QS(s)}class JS extends kS{constructor(e){super(e),this.useMatch=t=>Xr({select:t==null?void 0:t.select,from:this.id,structuralSharing:t==null?void 0:t.structuralSharing}),this.useRouteContext=t=>Xr({...t,from:this.id,select:r=>t!=null&&t.select?t.select(r.context):r.context}),this.useSearch=t=>hy({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useParams=t=>Kh({select:t==null?void 0:t.select,structuralSharing:t==null?void 0:t.structuralSharing,from:this.id}),this.useLoaderDeps=t=>dy({...t,from:this.id}),this.useLoaderData=t=>uy({...t,from:this.id}),this.useNavigate=()=>fy({from:this.fullPath}),this.Link=ta.forwardRef((t,r)=>I.jsx(Xo,{ref:r,from:this.fullPath,...t})),this.$$typeof=Symbol.for("react.memo")}}function eb(s){return new JS(s)}const tb=s=>new nb(s);class nb extends SS{constructor(e){super(e)}}function rb({router:s,children:e,...t}){s.update({...s.options,...t,context:{...s.options.context,...t.context}});const r=cy(),o=I.jsx(r.Provider,{value:s,children:e});return s.options.Wrap?I.jsx(s.options.Wrap,{children:o}):o}function sb({router:s,...e}){return I.jsx(rb,{router:s,...e,children:I.jsx(HS,{})})}function vy(s){var e,t,r="";if(typeof s=="string"||typeof s=="number")r+=s;else if(typeof s=="object")if(Array.isArray(s)){var o=s.length;for(e=0;e<o;e++)s[e]&&(t=vy(s[e]))&&(r&&(r+=" "),r+=t)}else for(t in s)s[t]&&(r&&(r+=" "),r+=t);return r}function yy(){for(var s,e,t=0,r="",o=arguments.length;t<o;t++)(s=arguments[t])&&(e=vy(s))&&(r&&(r+=" "),r+=e);return r}const Jh="-",ib=s=>{const e=ab(s),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=s;return{getClassGroupId:c=>{const u=c.split(Jh);return u[0]===""&&u.length!==1&&u.shift(),_y(u,e)||ob(c)},getConflictingClassGroupIds:(c,u)=>{const h=t[c]||[];return u&&r[c]?[...h,...r[c]]:h}}},_y=(s,e)=>{var c;if(s.length===0)return e.classGroupId;const t=s[0],r=e.nextPart.get(t),o=r?_y(s.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const l=s.join(Jh);return(c=e.validators.find(({validator:u})=>u(l)))==null?void 0:c.classGroupId},ov=/^\[(.+)\]$/,ob=s=>{if(ov.test(s)){const e=ov.exec(s)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},ab=s=>{const{theme:e,classGroups:t}=s,r={nextPart:new Map,validators:[]};for(const o in t)wh(t[o],r,o,e);return r},wh=(s,e,t,r)=>{s.forEach(o=>{if(typeof o=="string"){const l=o===""?e:av(e,o);l.classGroupId=t;return}if(typeof o=="function"){if(lb(o)){wh(o(r),e,t,r);return}e.validators.push({validator:o,classGroupId:t});return}Object.entries(o).forEach(([l,c])=>{wh(c,av(e,l),t,r)})})},av=(s,e)=>{let t=s;return e.split(Jh).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},lb=s=>s.isThemeGetter,cb=s=>{if(s<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const o=(l,c)=>{t.set(l,c),e++,e>s&&(e=0,r=t,t=new Map)};return{get(l){let c=t.get(l);if(c!==void 0)return c;if((c=r.get(l))!==void 0)return o(l,c),c},set(l,c){t.has(l)?t.set(l,c):o(l,c)}}},xh="!",Sh=":",ub=Sh.length,db=s=>{const{prefix:e,experimentalParseClassName:t}=s;let r=o=>{const l=[];let c=0,u=0,h=0,f;for(let w=0;w<o.length;w++){let _=o[w];if(c===0&&u===0){if(_===Sh){l.push(o.slice(h,w)),h=w+ub;continue}if(_==="/"){f=w;continue}}_==="["?c++:_==="]"?c--:_==="("?u++:_===")"&&u--}const m=l.length===0?o:o.substring(h),g=hb(m),y=g!==m,x=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:x}};if(e){const o=e+Sh,l=r;r=c=>c.startsWith(o)?l(c.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const o=r;r=l=>t({className:l,parseClassName:o})}return r},hb=s=>s.endsWith(xh)?s.substring(0,s.length-1):s.startsWith(xh)?s.substring(1):s,fb=s=>{const e=Object.fromEntries(s.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let l=[];return r.forEach(c=>{c[0]==="["||e[c]?(o.push(...l.sort(),c),l=[]):l.push(c)}),o.push(...l.sort()),o}},pb=s=>({cache:cb(s.cacheSize),parseClassName:db(s),sortModifiers:fb(s),...ib(s)}),mb=/\s+/,gb=(s,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:l}=e,c=[],u=s.trim().split(mb);let h="";for(let f=u.length-1;f>=0;f-=1){const m=u[f],{isExternal:g,modifiers:y,hasImportantModifier:x,baseClassName:w,maybePostfixModifierPosition:_}=t(m);if(g){h=m+(h.length>0?" "+h:h);continue}let b=!!_,T=r(b?w.substring(0,_):w);if(!T){if(!b){h=m+(h.length>0?" "+h:h);continue}if(T=r(w),!T){h=m+(h.length>0?" "+h:h);continue}b=!1}const R=l(y).join(":"),L=x?R+xh:R,V=L+T;if(c.includes(V))continue;c.push(V);const E=o(T,b);for(let N=0;N<E.length;++N){const M=E[N];c.push(L+M)}h=m+(h.length>0?" "+h:h)}return h};function vb(){let s=0,e,t,r="";for(;s<arguments.length;)(e=arguments[s++])&&(t=wy(e))&&(r&&(r+=" "),r+=t);return r}const wy=s=>{if(typeof s=="string")return s;let e,t="";for(let r=0;r<s.length;r++)s[r]&&(e=wy(s[r]))&&(t&&(t+=" "),t+=e);return t};function yb(s,...e){let t,r,o,l=c;function c(h){const f=e.reduce((m,g)=>g(m),s());return t=pb(f),r=t.cache.get,o=t.cache.set,l=u,u(h)}function u(h){const f=r(h);if(f)return f;const m=gb(h,t);return o(h,m),m}return function(){return l(vb.apply(null,arguments))}}const yt=s=>{const e=t=>t[s]||[];return e.isThemeGetter=!0,e},xy=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Sy=/^\((?:(\w[\w-]*):)?(.+)\)$/i,_b=/^\d+\/\d+$/,wb=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xb=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Sb=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,bb=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Tb=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ci=s=>_b.test(s),Oe=s=>!!s&&!Number.isNaN(Number(s)),zr=s=>!!s&&Number.isInteger(Number(s)),nh=s=>s.endsWith("%")&&Oe(s.slice(0,-1)),lr=s=>wb.test(s),Cb=()=>!0,kb=s=>xb.test(s)&&!Sb.test(s),by=()=>!1,Eb=s=>bb.test(s),Pb=s=>Tb.test(s),Ab=s=>!ye(s)&&!_e(s),Nb=s=>Ui(s,ky,by),ye=s=>xy.test(s),ms=s=>Ui(s,Ey,kb),rh=s=>Ui(s,Db,Oe),lv=s=>Ui(s,Ty,by),Rb=s=>Ui(s,Cy,Pb),Pl=s=>Ui(s,Py,Eb),_e=s=>Sy.test(s),Fo=s=>ji(s,Ey),Mb=s=>ji(s,Lb),cv=s=>ji(s,Ty),Ob=s=>ji(s,ky),Ib=s=>ji(s,Cy),Al=s=>ji(s,Py,!0),Ui=(s,e,t)=>{const r=xy.exec(s);return r?r[1]?e(r[1]):t(r[2]):!1},ji=(s,e,t=!1)=>{const r=Sy.exec(s);return r?r[1]?e(r[1]):t:!1},Ty=s=>s==="position"||s==="percentage",Cy=s=>s==="image"||s==="url",ky=s=>s==="length"||s==="size"||s==="bg-size",Ey=s=>s==="length",Db=s=>s==="number",Lb=s=>s==="family-name",Py=s=>s==="shadow",Fb=()=>{const s=yt("color"),e=yt("font"),t=yt("text"),r=yt("font-weight"),o=yt("tracking"),l=yt("leading"),c=yt("breakpoint"),u=yt("container"),h=yt("spacing"),f=yt("radius"),m=yt("shadow"),g=yt("inset-shadow"),y=yt("text-shadow"),x=yt("drop-shadow"),w=yt("blur"),_=yt("perspective"),b=yt("aspect"),T=yt("ease"),R=yt("animate"),L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...V(),_e,ye],N=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],C=()=>[_e,ye,h],O=()=>[ci,"full","auto",...C()],U=()=>[zr,"none","subgrid",_e,ye],j=()=>["auto",{span:["full",zr,_e,ye]},zr,_e,ye],B=()=>[zr,"auto",_e,ye],q=()=>["auto","min","max","fr",_e,ye],ee=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],te=()=>["start","end","center","stretch","center-safe","end-safe"],K=()=>["auto",...C()],J=()=>[ci,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],z=()=>[s,_e,ye],Z=()=>[...V(),cv,lv,{position:[_e,ye]}],Y=()=>["no-repeat",{repeat:["","x","y","space","round"]}],P=()=>["auto","cover","contain",Ob,Nb,{size:[_e,ye]}],$=()=>[nh,Fo,ms],ce=()=>["","none","full",f,_e,ye],ie=()=>["",Oe,Fo,ms],ne=()=>["solid","dashed","dotted","double"],ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ue=()=>[Oe,nh,cv,lv],Q=()=>["","none",w,_e,ye],pe=()=>["none",Oe,_e,ye],Te=()=>["none",Oe,_e,ye],he=()=>[Oe,_e,ye],Se=()=>[ci,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[lr],breakpoint:[lr],color:[Cb],container:[lr],"drop-shadow":[lr],ease:["in","out","in-out"],font:[Ab],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[lr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[lr],shadow:[lr],spacing:["px",Oe],text:[lr],"text-shadow":[lr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ci,ye,_e,b]}],container:["container"],columns:[{columns:[Oe,ye,_e,u]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[zr,"auto",_e,ye]}],basis:[{basis:[ci,"full","auto",u,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Oe,ci,"auto","initial","none",ye]}],grow:[{grow:["",Oe,_e,ye]}],shrink:[{shrink:["",Oe,_e,ye]}],order:[{order:[zr,"first","last","none",_e,ye]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:j()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:j()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":q()}],"auto-rows":[{"auto-rows":q()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...ee(),"normal"]}],"justify-items":[{"justify-items":[...te(),"normal"]}],"justify-self":[{"justify-self":["auto",...te()]}],"align-content":[{content:["normal",...ee()]}],"align-items":[{items:[...te(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...te(),{baseline:["","last"]}]}],"place-content":[{"place-content":ee()}],"place-items":[{"place-items":[...te(),"baseline"]}],"place-self":[{"place-self":["auto",...te()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:K()}],mx:[{mx:K()}],my:[{my:K()}],ms:[{ms:K()}],me:[{me:K()}],mt:[{mt:K()}],mr:[{mr:K()}],mb:[{mb:K()}],ml:[{ml:K()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:J()}],w:[{w:[u,"screen",...J()]}],"min-w":[{"min-w":[u,"screen","none",...J()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[c]},...J()]}],h:[{h:["screen","lh",...J()]}],"min-h":[{"min-h":["screen","lh","none",...J()]}],"max-h":[{"max-h":["screen","lh",...J()]}],"font-size":[{text:["base",t,Fo,ms]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,_e,rh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",nh,ye]}],"font-family":[{font:[Mb,ye,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,_e,ye]}],"line-clamp":[{"line-clamp":[Oe,"none",_e,rh]}],leading:[{leading:[l,...C()]}],"list-image":[{"list-image":["none",_e,ye]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",_e,ye]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ne(),"wavy"]}],"text-decoration-thickness":[{decoration:[Oe,"from-font","auto",_e,ms]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[Oe,"auto",_e,ye]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e,ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e,ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Z()}],"bg-repeat":[{bg:Y()}],"bg-size":[{bg:P()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},zr,_e,ye],radial:["",_e,ye],conic:[zr,_e,ye]},Ib,Rb]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:$()}],"gradient-via-pos":[{via:$()}],"gradient-to-pos":[{to:$()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:ce()}],"rounded-s":[{"rounded-s":ce()}],"rounded-e":[{"rounded-e":ce()}],"rounded-t":[{"rounded-t":ce()}],"rounded-r":[{"rounded-r":ce()}],"rounded-b":[{"rounded-b":ce()}],"rounded-l":[{"rounded-l":ce()}],"rounded-ss":[{"rounded-ss":ce()}],"rounded-se":[{"rounded-se":ce()}],"rounded-ee":[{"rounded-ee":ce()}],"rounded-es":[{"rounded-es":ce()}],"rounded-tl":[{"rounded-tl":ce()}],"rounded-tr":[{"rounded-tr":ce()}],"rounded-br":[{"rounded-br":ce()}],"rounded-bl":[{"rounded-bl":ce()}],"border-w":[{border:ie()}],"border-w-x":[{"border-x":ie()}],"border-w-y":[{"border-y":ie()}],"border-w-s":[{"border-s":ie()}],"border-w-e":[{"border-e":ie()}],"border-w-t":[{"border-t":ie()}],"border-w-r":[{"border-r":ie()}],"border-w-b":[{"border-b":ie()}],"border-w-l":[{"border-l":ie()}],"divide-x":[{"divide-x":ie()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ie()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ne(),"hidden","none"]}],"divide-style":[{divide:[...ne(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...ne(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Oe,_e,ye]}],"outline-w":[{outline:["",Oe,Fo,ms]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",m,Al,Pl]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",g,Al,Pl]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[Oe,ms]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":ie()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",y,Al,Pl]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[Oe,_e,ye]}],"mix-blend":[{"mix-blend":[...ae(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ae()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Oe]}],"mask-image-linear-from-pos":[{"mask-linear-from":ue()}],"mask-image-linear-to-pos":[{"mask-linear-to":ue()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":ue()}],"mask-image-t-to-pos":[{"mask-t-to":ue()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":ue()}],"mask-image-r-to-pos":[{"mask-r-to":ue()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":ue()}],"mask-image-b-to-pos":[{"mask-b-to":ue()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":ue()}],"mask-image-l-to-pos":[{"mask-l-to":ue()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":ue()}],"mask-image-x-to-pos":[{"mask-x-to":ue()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":ue()}],"mask-image-y-to-pos":[{"mask-y-to":ue()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[_e,ye]}],"mask-image-radial-from-pos":[{"mask-radial-from":ue()}],"mask-image-radial-to-pos":[{"mask-radial-to":ue()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":V()}],"mask-image-conic-pos":[{"mask-conic":[Oe]}],"mask-image-conic-from-pos":[{"mask-conic-from":ue()}],"mask-image-conic-to-pos":[{"mask-conic-to":ue()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Z()}],"mask-repeat":[{mask:Y()}],"mask-size":[{mask:P()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",_e,ye]}],filter:[{filter:["","none",_e,ye]}],blur:[{blur:Q()}],brightness:[{brightness:[Oe,_e,ye]}],contrast:[{contrast:[Oe,_e,ye]}],"drop-shadow":[{"drop-shadow":["","none",x,Al,Pl]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",Oe,_e,ye]}],"hue-rotate":[{"hue-rotate":[Oe,_e,ye]}],invert:[{invert:["",Oe,_e,ye]}],saturate:[{saturate:[Oe,_e,ye]}],sepia:[{sepia:["",Oe,_e,ye]}],"backdrop-filter":[{"backdrop-filter":["","none",_e,ye]}],"backdrop-blur":[{"backdrop-blur":Q()}],"backdrop-brightness":[{"backdrop-brightness":[Oe,_e,ye]}],"backdrop-contrast":[{"backdrop-contrast":[Oe,_e,ye]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Oe,_e,ye]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Oe,_e,ye]}],"backdrop-invert":[{"backdrop-invert":["",Oe,_e,ye]}],"backdrop-opacity":[{"backdrop-opacity":[Oe,_e,ye]}],"backdrop-saturate":[{"backdrop-saturate":[Oe,_e,ye]}],"backdrop-sepia":[{"backdrop-sepia":["",Oe,_e,ye]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",_e,ye]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Oe,"initial",_e,ye]}],ease:[{ease:["linear","initial",T,_e,ye]}],delay:[{delay:[Oe,_e,ye]}],animate:[{animate:["none",R,_e,ye]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[_,_e,ye]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:pe()}],"rotate-x":[{"rotate-x":pe()}],"rotate-y":[{"rotate-y":pe()}],"rotate-z":[{"rotate-z":pe()}],scale:[{scale:Te()}],"scale-x":[{"scale-x":Te()}],"scale-y":[{"scale-y":Te()}],"scale-z":[{"scale-z":Te()}],"scale-3d":["scale-3d"],skew:[{skew:he()}],"skew-x":[{"skew-x":he()}],"skew-y":[{"skew-y":he()}],transform:[{transform:[_e,ye,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Se()}],"translate-x":[{"translate-x":Se()}],"translate-y":[{"translate-y":Se()}],"translate-z":[{"translate-z":Se()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e,ye]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e,ye]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[Oe,Fo,ms,rh]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Vb=yb(Fb);function Mt(...s){return Vb(yy(s))}function Ay({className:s,...e}){return I.jsx("div",{"data-slot":"card",className:Mt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...e})}function Bb({className:s,...e}){return I.jsx("div",{"data-slot":"card-header",className:Mt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...e})}function zb({className:s,...e}){return I.jsx("div",{"data-slot":"card-title",className:Mt("leading-none font-semibold",s),...e})}function Ub({className:s,...e}){return I.jsx("div",{"data-slot":"card-description",className:Mt("text-muted-foreground text-sm",s),...e})}function jb({className:s,...e}){return I.jsx("div",{"data-slot":"card-action",className:Mt("col-start-2 row-span-2 row-start-1 self-start justify-self-end",s),...e})}function Ny({className:s,...e}){return I.jsx("div",{"data-slot":"card-content",className:Mt("px-6",s),...e})}function uv(s,e){if(typeof s=="function")return s(e);s!=null&&(s.current=e)}function Ry(...s){return e=>{let t=!1;const r=s.map(o=>{const l=uv(o,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let o=0;o<r.length;o++){const l=r[o];typeof l=="function"?l():uv(s[o],null)}}}}function gr(...s){return k.useCallback(Ry(...s),s)}function ef(s){const e=Wb(s),t=k.forwardRef((r,o)=>{const{children:l,...c}=r,u=k.Children.toArray(l),h=u.find(qb);if(h){const f=h.props.children,m=u.map(g=>g===h?k.Children.count(f)>1?k.Children.only(null):k.isValidElement(f)?f.props.children:null:g);return I.jsx(e,{...c,ref:o,children:k.isValidElement(f)?k.cloneElement(f,void 0,m):null})}return I.jsx(e,{...c,ref:o,children:l})});return t.displayName=`${s}.Slot`,t}var Gb=ef("Slot");function Wb(s){const e=k.forwardRef((t,r)=>{const{children:o,...l}=t;if(k.isValidElement(o)){const c=Yb(o),u=Hb(l,o.props);return o.type!==k.Fragment&&(u.ref=r?Ry(r,c):c),k.cloneElement(o,u)}return k.Children.count(o)>1?k.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var $b=Symbol("radix.slottable");function qb(s){return k.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===$b}function Hb(s,e){const t={...e};for(const r in e){const o=s[r],l=e[r];/^on[A-Z]/.test(r)?o&&l?t[r]=(...u)=>{const h=l(...u);return o(...u),h}:o&&(t[r]=o):r==="style"?t[r]={...o,...l}:r==="className"&&(t[r]=[o,l].filter(Boolean).join(" "))}return{...s,...t}}function Yb(s){var r,o;let e=(r=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=(o=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:o.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}const dv=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,hv=yy,Xb=(s,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return hv(s,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:o,defaultVariants:l}=e,c=Object.keys(o).map(f=>{const m=t==null?void 0:t[f],g=l==null?void 0:l[f];if(m===null)return null;const y=dv(m)||dv(g);return o[f][y]}),u=t&&Object.entries(t).reduce((f,m)=>{let[g,y]=m;return y===void 0||(f[g]=y),f},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,m)=>{let{class:g,className:y,...x}=m;return Object.entries(x).every(w=>{let[_,b]=w;return Array.isArray(b)?b.includes({...l,...u}[_]):{...l,...u}[_]===b})?[...f,g,y]:f},[]);return hv(s,c,h,t==null?void 0:t.class,t==null?void 0:t.className)},Kb=Xb("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function qn({className:s,variant:e,size:t,asChild:r=!1,...o}){const l=r?Gb:"button";return I.jsx(l,{"data-slot":"button",className:Mt(Kb({variant:e,size:t,className:s})),...o})}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Qb=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),fv=s=>{const e=Qb(s);return e.charAt(0).toUpperCase()+e.slice(1)},My=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),Jb=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=k.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:l,iconNode:c,...u},h)=>k.createElement("svg",{ref:h,...eT,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:My("lucide",o),...!l&&!Jb(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,m])=>k.createElement(f,m)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=(s,e)=>{const t=k.forwardRef(({className:r,...o},l)=>k.createElement(tT,{ref:l,iconNode:e,className:My(`lucide-${Zb(fv(s))}`,`lucide-${s}`,r),...o}));return t.displayName=fv(s),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],bh=tf("arrow-left",nT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],sT=tf("check",rT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],oT=tf("x",iT),aT=[{id:"advection",title:"Advection Test",description:"Tests fluid velocity advection with manual bilinear interpolation and rg32float textures.",status:"stable"},{id:"diffusion",title:"Diffusion Test",description:"Tests fluid property diffusion using compute shaders with texture ping-ponging.",status:"stable"}];function lT(){const s=Mn(),e=o=>{switch(o){case"stable":return"bg-green-100 text-green-800 border-green-200";case"experimental":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"planned":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},t=o=>{s.navigate({to:"/tests/$testId",params:{testId:o}})},r=()=>I.jsx("div",{className:"border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60",children:I.jsx("div",{className:"container mx-auto px-4 py-4",children:I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx(qn,{variant:"ghost",size:"sm",asChild:!0,children:I.jsxs(Xo,{to:"/",className:"flex items-center gap-2",children:[I.jsx(bh,{className:"h-4 w-4"}),"Back to Home"]})}),I.jsx("div",{className:"h-6 w-px bg-border"}),I.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Fluid Simulation Tests"})]})})});return I.jsxs("div",{className:"min-h-screen bg-gray-50",children:[I.jsx(r,{}),I.jsx("div",{className:"container mx-auto py-8",children:I.jsx("div",{className:"max-w-4xl mx-auto px-6",children:I.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:aT.map(o=>I.jsxs(Ay,{children:[I.jsxs(Bb,{children:[I.jsx(zb,{children:o.title}),I.jsx(jb,{children:I.jsx("span",{className:Mt("px-3 py-1 rounded-full text-xs font-medium border",e(o.status)),children:o.status})})]}),I.jsxs(Ny,{children:[I.jsx(Ub,{className:"mb-6",children:o.description}),o.status==="stable"?I.jsx(qn,{onClick:()=>t(o.id),className:"w-full",children:"Launch Test"}):I.jsx(qn,{disabled:!0,variant:"secondary",className:"w-full",children:o.status==="experimental"?"In Progress":"Planned"})]})]},o.id))})})})]})}const cT=ta.memo(function({isInitialized:e,isPlaying:t,setIsPlaying:r,onStep:o,onRestart:l,title:c,customControls:u}){const h=()=>e?t?{text:"Playing",type:"playing"}:{text:"Ready",type:"ready"}:{text:"Initializing...",type:"loading"},f=T=>{switch(T){case"playing":return"bg-green-100 text-green-800 border-green-200";case"ready":return"bg-blue-100 text-blue-800 border-blue-200";case"loading":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=k.useCallback(()=>{if(e&&o)try{o()}catch(T){console.error(`Failed to step ${c}:`,T)}},[e,o,c]),g=k.useCallback(()=>{e&&o&&r(!0)},[e,o,r]),y=k.useCallback(()=>{r(!1)},[r]),x=k.useCallback(()=>{t?y():g()},[t,g,y]),w=k.useCallback(async()=>{if(!(!e||!l))try{await l()}catch(T){console.error(`Failed to restart ${c}:`,T)}},[e,l,c]);k.useEffect(()=>{const T=R=>{if(!(R.target instanceof HTMLInputElement||R.target instanceof HTMLTextAreaElement||R.target instanceof HTMLSelectElement))switch(R.code){case"Space":R.preventDefault(),e&&o&&x();break;case"KeyR":!R.ctrlKey&&!R.metaKey&&!R.altKey&&!R.shiftKey&&(R.preventDefault(),e&&l&&w());break;case"KeyS":R.preventDefault(),e&&o&&!t&&m();break}};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[e,t,o,l,x,w,m]);const _=o||l,b=h();return I.jsxs("div",{className:"flex flex-col items-center gap-4 md:min-w-[200px]",children:[u&&I.jsxs("div",{className:"w-full flex flex-col items-center gap-2",children:[I.jsx("h3",{className:"text-sm font-semibold text-gray-700 text-center mb-1",children:"Settings"}),u]}),_&&I.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[I.jsx("h3",{className:"text-sm font-semibold text-gray-700 text-center mb-1",children:"Controls"}),o&&I.jsxs(I.Fragment,{children:[I.jsx(qn,{onClick:g,disabled:!e||t,variant:"default",size:"lg",title:"Play simulation (Spacebar)",className:"w-full",children:"Play"}),I.jsx(qn,{onClick:y,disabled:!e||!t,variant:"default",size:"lg",title:"Pause simulation (Spacebar)",className:"w-full",children:"Pause"}),I.jsx(qn,{onClick:m,disabled:!e||t,variant:"default",size:"lg",title:"Step simulation once (S key)",className:"w-full",children:"Step"})]}),l&&I.jsx(qn,{onClick:w,disabled:!e,variant:"destructive",size:"lg",title:"Restart simulation (R key)",className:"w-full",children:"Restart"})]}),I.jsxs("div",{className:"flex flex-row items-center gap-2",children:[I.jsx("h3",{className:"text-sm font-semibold text-gray-700 inline-block",children:"Status"}),I.jsx("span",{className:Mt("px-3 py-1 rounded-full text-xs font-medium border",f(b.type)),children:b.text})]})]})}),pv=512;function Oy({title:s,onInitialize:e,onStep:t,onRestart:r,canvasHeight:o=pv,canvasWidth:l=pv,customControls:c}){const u=k.useRef(null),h=k.useRef(null),[f,m]=k.useState(!1),[g,y]=k.useState(!1),[x,w]=k.useState(null);k.useEffect(()=>{(async()=>{if(!(!u.current||f)){console.log(`Initializing ${s}`);try{e&&await e(u),m(!0),w(null)}catch(R){console.error(`Failed to initialize ${s}:`,R),m(!1),w(R instanceof Error?R.message:"Unknown error")}}})()},[s,e,f]),k.useEffect(()=>{if(!g||!f||!t)return;const T=()=>{if(g&&f&&t)try{t(),h.current=requestAnimationFrame(T)}catch(R){console.error(`Failed to step ${s}:`,R),y(!1)}};return h.current=requestAnimationFrame(T),()=>{h.current!==null&&(cancelAnimationFrame(h.current),h.current=null)}},[g,f,t,s]);const _=k.useCallback(()=>{if(f&&t)try{t()}catch(T){console.error(`Failed to step ${s}:`,T)}},[f,t,s]),b=k.useCallback(async()=>{if(!(!f||!r))try{await r(u)}catch(T){console.error(`Failed to restart ${s}:`,T)}},[f,r,s]);return I.jsx("div",{className:"p-5",children:I.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col items-center gap-6",children:[x&&I.jsxs("div",{className:"text-red-500 text-sm max-w-md text-center bg-red-50 p-3 rounded-lg border border-red-200",children:[I.jsx("strong",{children:"Error:"})," ",x]}),I.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6 w-full justify-center",children:[I.jsx("div",{className:"flex-shrink-0",children:I.jsx("canvas",{width:l,height:o,ref:u,className:"border border-gray-300 rounded-lg shadow-lg"})}),I.jsx(cT,{isInitialized:f,isPlaying:g,setIsPlaying:y,onStep:_,onRestart:b,title:s,customControls:c&&c(u)})]})]})})}class nf{constructor(e){X(this,"textures",new Map);this.device=e}createTexture(e,t){if(this.textures.has(e))throw new Error(`Texture ${e} already exists inside TextureManager!`);this.textures.set(e,{front:this.device.createTexture(t)})}createPingPongTexture(e,t){if(this.textures.has(e))throw new Error(`Texture "${e}" already exists inside TextureManager!`);const r=this.device.createTexture(t),o=this.device.createTexture(t);this.textures.set(e,{front:r,back:o})}swap(e){const t=this.textures.get(e);if(!t)throw new Error(`Texture '${e}' not found`);if(!("back"in t))throw new Error(`Cannot swap static single texture ${e}`);const{front:r,back:o}=t;this.textures.set(e,{front:o,back:r})}getCurrentTexture(e){const t=this.textures.get(e);if(!t)throw new Error(`Texture "${e}" does not exist`);return t.front}getBackTexture(e){const t=this.textures.get(e);if(!t)throw new Error(`Texture ${e} does not exist`);if(!("back"in t))throw new Error(`Texture ${e} is not a ping-pong texture-- it has no back buffer, only a front`);return t.back}destroy(){for(const[e,t]of this.textures.entries())t.front.destroy(),"back"in t&&t.back.destroy();this.textures.clear()}}class uT{constructor(e,t){X(this,"querySet",null);X(this,"resolveBuffer",null);X(this,"resultBuffer",null);X(this,"canTimestamp");X(this,"lastGpuTime",0);this.canTimestamp=t,t&&(this.querySet=e.createQuerySet({type:"timestamp",count:2}),this.resolveBuffer=e.createBuffer({size:this.querySet.count*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.resultBuffer=e.createBuffer({size:this.resolveBuffer.size,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}))}getTimestampWrites(){if(!(!this.canTimestamp||!this.querySet))return{querySet:this.querySet,beginningOfPassWriteIndex:0,endOfPassWriteIndex:1}}resolveTimestamps(e){!this.canTimestamp||!this.querySet||!this.resolveBuffer||!this.resultBuffer||(e.resolveQuerySet(this.querySet,0,this.querySet.count,this.resolveBuffer,0),this.resultBuffer.mapState==="unmapped"&&e.copyBufferToBuffer(this.resolveBuffer,0,this.resultBuffer,0,this.resultBuffer.size))}async readResults(){if(!(!this.canTimestamp||!this.resultBuffer)&&this.resultBuffer.mapState==="unmapped")try{await this.resultBuffer.mapAsync(GPUMapMode.READ);const e=new BigInt64Array(this.resultBuffer.getMappedRange());this.lastGpuTime=Number(e[1]-e[0])/1e3,this.resultBuffer.unmap()}catch(e){console.warn("Failed to read GPU timing results:",e)}}getLastGpuTime(){return this.lastGpuTime}isSupported(){return this.canTimestamp}destroy(){var e,t,r;(e=this.querySet)==null||e.destroy(),(t=this.resolveBuffer)==null||t.destroy(),(r=this.resultBuffer)==null||r.destroy(),this.querySet=null,this.resolveBuffer=null,this.resultBuffer=null}}var hr=(s=>(s[s.WEBGPU_NOT_SUPPORTED=0]="WEBGPU_NOT_SUPPORTED",s[s.NO_ADAPTER=1]="NO_ADAPTER",s[s.NO_DEVICE=2]="NO_DEVICE",s[s.NO_CONTEXT=3]="NO_CONTEXT",s[s.NO_CANVAS=4]="NO_CANVAS",s[s.NO_RESOURCES=5]="NO_RESOURCES",s))(hr||{});class tn extends Error{constructor(e,t){super(e),this.code=t,this.name="WebGPUError"}}async function rf(s){if(!navigator.gpu)throw new tn("WebGPU is not supported on this browser. Please use Google Chrome or Microsoft Edge to run this application",0);const e=await navigator.gpu.requestAdapter();if(!e)throw new tn("No GPU Adapter found",1);const t=e.features.has("timestamp-query");if(!t)throw new tn("Timestamp query is not supported on this GPU");const r=await e.requestDevice({requiredFeatures:[...t?["timestamp-query"]:[]]});if(!r)throw new tn("No GPU Device Found",2);const o=s.getContext("webgpu");if(!o)throw new tn("Could not get Canvas Context",3);const l=navigator.gpu.getPreferredCanvasFormat();return o.configure({device:r,format:l}),{device:r,context:o,canvasFormat:l,canTimestamp:t}}const dT={enableAdvection:!0,enableDiffusion:!0,enableDivergence:!0,enablePressureProjection:!0,enablePressureBoundaryConditions:!0,enableGradientSubtraction:!0,enableVelocityBoundaryConditions:!0,enableDissipation:!0},hT={enableAdvection:!0,enableBoundaryConditions:!0,enableDiffusion:!0,enableDissipation:!0,enableAdvectParticles:!0};class sf{constructor(e,t){X(this,"pipeline");X(this,"bindGroupLayout");X(this,"initialized",!1);this.config=e,this.device=t,this.initializePipeline()}initializePipeline(){const{pipeline:e,bindGroupLayout:t}=this.setupPipeline();this.pipeline=e,this.bindGroupLayout=t,this.initialized=!0}setupPipeline(){const e=this.createBindGroupLayout();return{pipeline:this.device.createComputePipeline({label:`${this.config.name} Pipeline`,layout:this.device.createPipelineLayout({bindGroupLayouts:[e]}),compute:{module:this.config.shader,entryPoint:this.config.entryPoint}}),bindGroupLayout:e}}validateArgs(e,t){for(const r of t)if(!e[r])throw new Error(`${r} is required for ${this.config.name}`)}execute(e,t,r){if(!this.initialized)throw new Error(`Compute Pass "${this.config.name} is not intialized yet"`);const o=this.createBindGroup(t);e.setPipeline(this.pipeline),e.setBindGroup(0,o),e.dispatchWorkgroups(r,r)}}class fT{constructor(e){X(this,"view");X(this,"offset",0);this.view=new DataView(e)}alignTo(e){this.offset=Math.ceil(this.offset/e)*e}writeFloat32(e){this.alignTo(4),this.view.setFloat32(this.offset,e,!0),this.offset+=4}writeInt32(e){this.alignTo(4),this.view.setInt32(this.offset,e,!0),this.offset+=4}writeUint32(e){this.alignTo(4),this.view.setUint32(this.offset,e,!0),this.offset+=4}writeVec2f(e,t){this.alignTo(8),this.writeFloat32(e),this.writeFloat32(t)}writeVec3f(e,t,r){this.alignTo(16),this.writeFloat32(e),this.writeFloat32(t),this.writeFloat32(r),this.offset+=4}writeVec4f(e,t,r,o){this.alignTo(16),this.writeFloat32(e),this.writeFloat32(t),this.writeFloat32(r),this.writeFloat32(o)}writeMat4x4f(e){if(this.alignTo(16),e.length!==16)throw new Error("Matrix must have 16 elements");for(let t=0;t<16;t++)this.writeFloat32(e[t])}writeFloat32Array(e){for(const t of e)this.writeFloat32(t)}writeInt32Array(e){for(const t of e)this.writeInt32(t)}writeUint32Array(e){for(const t of e)this.writeUint32(t)}getCurrentOffset(){return this.offset}skip(e){this.offset+=e}padTo(e){this.alignTo(e)}}class pT{constructor(e,t,r=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST){X(this,"buffer",null);X(this,"lastDataHash",null);this.device=e,this.label=t,this.usage=r}updateBuffer(e){var r;const t=this.getDataHash(e);return this.buffer&&this.buffer.size>=e.byteLength&&this.lastDataHash===t?this.buffer:((!this.buffer||this.buffer.size<e.byteLength)&&((r=this.buffer)==null||r.destroy(),this.buffer=this.device.createBuffer({label:`${this.label} Uniform Buffer`,size:Math.max(e.byteLength,256),usage:this.usage})),this.writeDataToBuffer(e),this.lastDataHash=t,this.buffer)}destroy(){var e;(e=this.buffer)==null||e.destroy(),this.buffer=null,this.lastDataHash=null}writeDataToBuffer(e){if(!this.buffer)throw new Error("Buffer not initialized");if("writeToBuffer"in e)e.writeToBuffer(this.device,this.buffer,0);else if("toFloat32Array"in e){const t=e.toFloat32Array();this.device.queue.writeBuffer(this.buffer,0,t)}else throw new Error(`UniformData must implement either writeToBuffer() or toFloat32Array(). Got: ${Object.getOwnPropertyNames(e)}`)}getDataHash(e){const t=e.getHashData();if(typeof t=="string")return t;const r=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);let o=0;for(let l=0;l<r.length;l++)o=(o<<5)-o+r[l]&4294967295;return o.toString()}}const wi=class wi{constructor(e,t){X(this,"byteLength",2*4);this.timestep=e,this.advectionFactor=t}toFloat32Array(){return wi.reusableArray[0]=this.timestep,wi.reusableArray[1]=this.advectionFactor,wi.reusableArray}getHashData(){return this.toFloat32Array()}};X(wi,"reusableArray",new Float32Array(2));let tc=wi;const xi=class xi{constructor(e,t){X(this,"byteLength",2*4);this.timestep=e,this.diffusionFactor=t}toFloat32Array(){const e=1/this.diffusionFactor/this.timestep,t=1/(4+e);return xi.reusableArray[0]=e,xi.reusableArray[1]=t,xi.reusableArray}getHashData(){return this.toFloat32Array()}};X(xi,"reusableArray",new Float32Array(2));let nc=xi;const Go=class Go{constructor(e){X(this,"byteLength",1*4);this.gridScale=e}toFloat32Array(){const e=.5/this.gridScale;return Go.reusableArray[0]=e,Go.reusableArray}getHashData(){return this.toFloat32Array()}};X(Go,"reusableArray",new Float32Array(1));let Th=Go;const Si=class Si{constructor(e){X(this,"byteLength",2*4);this.gridScale=e}toFloat32Array(){const e=1/this.gridScale,t=-(e*e),r=.25;return Si.reusableArray[0]=t,Si.reusableArray[1]=r,Si.reusableArray}getHashData(){return this.toFloat32Array()}};X(Si,"reusableArray",new Float32Array(2));let Ch=Si;const Wo=class Wo{constructor(e){X(this,"byteLength",1*4);this.gridScale=e}toFloat32Array(){const e=.5/this.gridScale;return Wo.reusableArray[0]=e,Wo.reusableArray}getHashData(){return this.toFloat32Array()}};X(Wo,"reusableArray",new Float32Array(1));let kh=Wo;const bi=class bi{constructor(e,t=1){X(this,"byteLength",2*4);this.boundaryType=e,this.scale=t}toFloat32Array(){return bi.reusableArray[0]=this.boundaryType,bi.reusableArray[1]=this.scale,bi.reusableArray}getHashData(){return this.toFloat32Array()}};X(bi,"reusableArray",new Float32Array(2));let Uo=bi;const $r=class $r{constructor(e,t,r,o){X(this,"byteLength",4*4);this.positionX=e,this.positionY=t,this.radius=r,this.intensity=o}toFloat32Array(){return $r.reusableArray[0]=this.positionX,$r.reusableArray[1]=this.positionY,$r.reusableArray[2]=this.radius,$r.reusableArray[3]=this.intensity,$r.reusableArray}getHashData(){return this.toFloat32Array()}};X($r,"reusableArray",new Float32Array(4));let Eh=$r;const Wn=class Wn{constructor(e,t,r,o,l,c){X(this,"byteLength",6*4);this.positionX=e,this.positionY=t,this.velocityX=r,this.velocityY=o,this.radius=l,this.intensity=c}toFloat32Array(){return Wn.reusableArray[0]=this.positionX,Wn.reusableArray[1]=this.positionY,Wn.reusableArray[2]=this.velocityX,Wn.reusableArray[3]=this.velocityY,Wn.reusableArray[4]=this.radius,Wn.reusableArray[5]=this.intensity,Wn.reusableArray}getHashData(){return this.toFloat32Array()}};X(Wn,"reusableArray",new Float32Array(6));let Ph=Wn;const $o=class $o{constructor(e){X(this,"byteLength",1*4);this.dissipationFactor=e}toFloat32Array(){return $o.reusableArray[0]=this.dissipationFactor,$o.reusableArray}getHashData(){return this.toFloat32Array()}};X($o,"reusableArray",new Float32Array(1));let rc=$o;const qo=class qo{constructor(e){X(this,"byteLength",1*4);this.timestep=e}toFloat32Array(){return qo.reusableArray[0]=this.timestep,qo.reusableArray}getHashData(){return this.toFloat32Array()}};X(qo,"reusableArray",new Float32Array(1));let Ah=qo;var Oi=(s=>(s[s.VELOCITY=0]="VELOCITY",s[s.PRESSURE=1]="PRESSURE",s[s.DENSITY=2]="DENSITY",s[s.PARTICLES=3]="PARTICLES",s))(Oi||{});class of{constructor(e,t){X(this,"pipeline");X(this,"bindGroupLayout");X(this,"uniformBuffer");this.config=e,this.device=t,this.bindGroupLayout=this.createBindGroupLayout(),this.pipeline=this.device.createRenderPipeline({label:`${this.config.name} Pipeline`,layout:this.device.createPipelineLayout({label:`${this.config.name} Pipeline Layout`,bindGroupLayouts:[this.bindGroupLayout]}),vertex:this.config.vertex,fragment:this.config.fragment}),this.uniformBuffer=this.device.createBuffer({label:`${this.config.name} Uniform Buffer`,size:12*4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST})}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Texture Rendering Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"unfilterable-float",viewDimension:"2d",multisampled:!1}},{binding:1,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"non-filtering"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}}]})}createBindGroup({textureManager:e,sampler:t,texture:r}){return this.device.createBindGroup({label:"Smoke Texture Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.getCurrentTexture(r).createView()},{binding:1,resource:t},{binding:2,resource:{buffer:this.uniformBuffer}}]})}writeToUniformBuffer({noise:e,shaderMode:t,smokeColor:r}){const o=new ArrayBuffer(48),l=new fT(o);l.writeUint32(t),l.writeFloat32(e.stddev),l.writeFloat32(e.mean),l.writeVec3f(e.offsets[0],e.offsets[1],e.offsets[2]),l.writeVec3f(r[0],r[1],r[2]),this.device.queue.writeBuffer(this.uniformBuffer,0,o)}execute(e,t,r){const o=this.createBindGroup(r);e.setPipeline(this.pipeline),e.setBindGroup(0,o),e.draw(t.vertexCount,t.instanceCount)}destroy(){this.uniformBuffer.destroy()}}class On extends Error{constructor(t,r){super(t);X(this,"baseMessage");this.context=r,this.baseMessage=t;let o=t;if(r&&Object.keys(r).length>0){o+=`

Context:`;for(const[c,u]of Object.entries(r))o+=`
  ${c}: ${String(u)}`}const l=this.getSuggestion();l&&(o+=`

Suggestion: ${l}`),this.message=o,this.name=this.constructor.name}}class mv extends On{constructor(t,r){super(`Shader "${t}" not found in registry`,{requestedShader:t,availableShaders:r.length>0?r.join(", "):"none",registrySize:r.length});X(this,"code","SHADER_NOT_FOUND");X(this,"category","REGISTRY")}getSuggestion(){const{requestedShader:t,availableShaders:r}=this.context;if(typeof r=="string"&&r!=="none"){const l=r.split(", ").find(c=>c.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(c.toLowerCase()));if(l)return`Did you mean "${l}"? Register the shader first: shaderRegistry.register("${t}", shaderContent)`}return`Register the shader first: shaderRegistry.register("${t}", shaderContent)`}}class mT extends On{constructor(t){super("Circular import detected",{importChain:t.join(" → "),circularFile:t[t.length-1],chainLength:t.length});X(this,"code","CIRCULAR_IMPORT");X(this,"category","IMPORT")}getSuggestion(){return`Review your @include statements to remove the circular dependency. The file "${this.context.circularFile}" is being imported in a cycle.`}}class gT extends On{constructor(t,r){super(`Maximum import depth of ${t} exceeded`,{maxDepth:t,currentDepth:r.length,importStack:r.join(" → "),deepestFile:r[r.length-1]});X(this,"code","MAX_IMPORT_DEPTH");X(this,"category","IMPORT")}getSuggestion(){return"Reduce nesting depth of @include statements or check for circular imports. This might indicate an infinite recursion in your includes."}}class vT extends On{constructor(t,r){super("Invalid @include directive syntax",{invalidDirective:t,lineContext:r||"unknown",expectedFormat:'@include "filename.wgsl"'});X(this,"code","INVALID_INCLUDE_SYNTAX");X(this,"category","SYNTAX")}getSuggestion(){return'Use the correct syntax: @include "filename.wgsl". Make sure the filename is enclosed in double quotes.'}}class yT extends On{constructor(t,r,o){super(`Variable '${t}' not found in template`,{missingVariable:t,availableVariables:r.length>0?r.join(", "):"none",variableCount:r.length,templateContext:o||"unknown"});X(this,"code","VARIABLE_NOT_FOUND");X(this,"category","VARIABLE")}getSuggestion(){const{missingVariable:t,availableVariables:r}=this.context;if(typeof r=="string"&&r!=="none"){const l=r.split(", ").find(c=>c.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(c.toLowerCase()));if(l)return`Did you mean "${l}"? Add the variable to your options: { variables: { "${t}": value } }`}return`Add the variable to your options: { variables: { "${t}": value } }`}}class sh extends On{constructor(t,r){super(t,r);X(this,"code","REGISTRY_ERROR");X(this,"category","REGISTRY")}getSuggestion(){return"Check your shader registration and ensure all required shaders are properly registered."}}class _T extends On{constructor(t,r){super(t,r);X(this,"code","VARIABLE_ERROR");X(this,"category","VARIABLE")}getSuggestion(){return"Check your variable definitions and ensure all required variables are provided with correct types."}}class wT extends On{constructor(t,r){super("Invalid @define directive syntax",{invalidDirective:t,lineContext:r||"unknown",expectedFormat:"@define IDENTIFIER value"});X(this,"code","INVALID_DEFINE_SYNTAX");X(this,"category","SYNTAX")}getSuggestion(){return"Use the correct syntax: @define IDENTIFIER value. Example: @define PI 3.14159"}}class xT extends On{constructor(t,r,o,l){super(`Identifier '${t}' is already defined`,{identifier:t,previousValue:r,newValue:o,lineContext:l||"unknown"});X(this,"code","DUPLICATE_DEFINE");X(this,"category","SYNTAX")}getSuggestion(){const{identifier:t,previousValue:r}=this.context;return`'${t}' was previously defined as '${r}'. Use a different identifier name or remove the duplicate definition.`}}class ST extends On{constructor(t,r){super(`Invalid @define identifier '${t}'`,{identifier:t,lineContext:r||"unknown",validPattern:"Must start with letter or underscore, followed by letters, digits, or underscores"});X(this,"code","INVALID_DEFINE_IDENTIFIER");X(this,"category","SYNTAX")}getSuggestion(){const{identifier:t}=this.context;return`'${t}' is not a valid identifier. Use only letters, digits, and underscores, starting with a letter or underscore.`}}const Ur={maximumImportDepth:10,importRegex:/@include\s*"([^"]+)"/g,importMatchRegex:/@include\s*"([^"]+)"/,variableRegex:/\$\{(\w+)\}/g,identifierRegex:/^[A-Za-z_][A-Za-z0-9_]*$/,defineMatchRegex:/@define\s+([A-Za-z_][A-Za-z0-9_]*)\s+(.+)$/,defineKeyword:"@define"},vs=class vs{constructor(){X(this,"registry",new Map)}static getInstance(){return vs.instance||(vs.instance=new vs),vs.instance}register(e,t){if(!e.trim())throw new sh("Shader name cannot be empty",{name:e});if(!t.trim())throw new sh("Shader content cannot be empty",{name:e,contentLength:t.length});return this.registry.set(e,t),this}registerMultiple(e){const t=[];if(Object.entries(e).forEach(([r,o])=>{try{this.register(r,o)}catch(l){l instanceof On?t.push(`${r}: ${l.message}`):t.push(`${r}: ${l instanceof Error?l.message:String(l)}`)}}),t.length>0)throw new sh(`Failed to register ${t.length} shader(s)`,{failedShaders:t,successfulCount:Object.keys(e).length-t.length,totalCount:Object.keys(e).length});return this}get(e){return this.registry.get(e)}getAvailable(){return Array.from(this.registry.keys())}process(e,t){const r=this.get(e);if(!r)throw new mv(e,this.getAvailable());return this.processContent(r,t,0,[])}processContent(e,t,r=0,o=[]){if(r>Ur.maximumImportDepth)throw new gT(Ur.maximumImportDepth,o);const{processedShader:l,defines:c}=this.processDefines(e);return e=l,e=this.includeImports(e,t,r,o),e=this.applyDefines(e,c),t!=null&&t.variables&&(e=this.injectShaderVariables(e,t.variables)),e}processDefines(e){const t=new Map,r=e.split(`
`),o=[];for(let l=0;l<r.length;l++){const c=r[l],u=c.match(Ur.defineMatchRegex);if(u){const[h,f,m]=u,g=`line ${l+1}: "${c.trim()}"`;if(!Ur.identifierRegex.test(f))throw new ST(f,g);if(t.has(f))throw new xT(f,t.get(f),m.trim(),g);t.set(f,m.trim()),o.push("")}else if(c.includes(Ur.defineKeyword)){const h=`line ${l+1}: "${c.trim()}"`;throw new wT(c.trim(),h)}else o.push(c)}return{processedShader:o.join(`
`),defines:t}}applyDefines(e,t){if(t.size===0)return e;const r=Array.from(t.entries()).sort((o,l)=>l[0].length-o[0].length);for(const[o,l]of r){const c=new RegExp(`\\b${o}\\b`,"g");e=e.replace(c,l)}return e}includeImports(e,t,r=0,o=[]){const l=e.match(Ur.importRegex);return l&&l.forEach(c=>{const u=c.match(Ur.importMatchRegex);if(!u)throw new vT(c,this.getLineContext(e,c));const h=u[1];if(o.includes(h))throw new mT([...o,h]);const f=this.get(h);if(!f)throw new mv(h,this.getAvailable());const m=this.processContent(f,t,r+1,[...o,h]);e=e.replace(c,m)}),e}getLineContext(e,t){const r=e.split(`
`),o=r.findIndex(u=>u.includes(t));if(o===-1)return"unknown line";const l=o+1,c=r[o].trim();return`line ${l}: "${c}"`}injectShaderVariables(e,t){const r=Object.keys(t);return e.replace(Ur.variableRegex,(o,l)=>{if(l in t){const c=t[l];if(typeof c!="string"&&typeof c!="number")throw new _T(`Invalid variable type for '${l}'`,{variableName:l,actualType:typeof c,expectedTypes:"string | number",value:String(c)});return String(c)}throw new yT(l,r,this.getLineContext(e,o))})}};X(vs,"instance");let Nh=vs;const Iy=Nh.getInstance();function Gi(s,e){return Iy.process(s,e)}const bT=`// Advect the velocities in the texture

@include "bilinearInterpolate.wgsl"

struct AdvectionInput {
    timestep: f32,   // delta time
    rdx: f32,        // 1 / the grid scale
};

@group(0) @binding(0) var velocity: texture_2d<f32>;
@group(0) @binding(1) var advection_in: texture_2d<f32>;
@group(0) @binding(2) var advection_out: texture_storage_2d<\${OUT_FORMAT}, write>;
@group(0) @binding(3) var<uniform> input: AdvectionInput;


@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) texture_coord: vec3<u32>,
) {
    let coord = vec2<i32>(texture_coord.xy);
    let texture_size = vec2<i32>(textureDimensions(velocity));
    let current_velocity = textureLoad(velocity, coord, 0).xy;
    let prev_coord = vec2f(coord) - input.timestep * input.rdx * current_velocity;

    // Clamp to valid texture bounds
    let clamped_prev_coord = clamp(prev_coord, vec2f(0.0), vec2f(f32(texture_size.x) - 1.0, f32(texture_size.y) - 1.0));
    
    // Use manual bilinear interpolation instead of sampler
    let advected_quantity = bilinear_interpolate(advection_in, clamped_prev_coord);
    
    textureStore(advection_out, coord, vec4<f32>(advected_quantity.x, advected_quantity.y, 0.0, 0.0));
}`,TT=`// Jacobi iteration solver for Poisson equation Ax = b (A = Laplacian)
// Diffusion: x=velocity, b=velocity
// Pressure: x=pressure, b=velocity divergence

struct JacobiInput {
    alpha: f32,
    rBeta: f32,
};

@group(0) @binding(0) var x_in: texture_2d<f32>;
@group(0) @binding(1) var b_in: texture_2d<f32>;
@group(0) @binding(2) var texture_out: texture_storage_2d<\${FORMAT}, write>;
@group(0) @binding(3) var<uniform> input: JacobiInput;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) u_coords: vec3<u32>
) {
    let coords = u_coords.xy;
    let texture_size = textureDimensions(x_in);
    let i_coords = vec2i(coords);
    
    // Imposes Neumann boundaries (reflecting)
    
    let left_x = max(i_coords.x - 1, 1 - i_coords.x);
    let xl = textureLoad(x_in, vec2u(u32(left_x), coords.y), 0);
    
    let right_x = min(i_coords.x + 1, 2 * i32(texture_size.x) - 3 - i_coords.x);
    let xr = textureLoad(x_in, vec2u(u32(right_x), coords.y), 0);
    
    let top_y = max(i_coords.y - 1, 1 - i_coords.y);
    let xt = textureLoad(x_in, vec2u(coords.x, u32(top_y)), 0);
    
    let bottom_y = min(i_coords.y + 1, 2 * i32(texture_size.y) - 3 - i_coords.y);
    let xb = textureLoad(x_in, vec2u(coords.x, u32(bottom_y)), 0);

    let bc = textureLoad(b_in, coords, 0);

    let result = (xl + xr + xt + xb + input.alpha * bc) * input.rBeta;
    textureStore(texture_out, coords, result);
}`,CT=`// Calculate divergence of velocity field

struct DivergenceInput {
    half_rdx: f32, // Half the grid scale
}

@group(0) @binding(0) var velocity_in: texture_2d<f32>;
@group(0) @binding(1) var divergence_out: texture_storage_2d<r32float, write>;
@group(0) @binding(2) var<uniform> input: DivergenceInput;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) global_id: vec3<u32>,
) {
    let coord = vec2<i32>(global_id.xy);
    let texture_size = vec2<i32>(textureDimensions(velocity_in));

    // Edge case: Simply write 0
    if (coord.x == 0 || coord.x == texture_size.x - 1 || coord.y == 0 || coord.y == texture_size.y - 1) {
        textureStore(divergence_out, coord, vec4f(0.0));
        return;
    }

    let center = textureLoad(velocity_in, coord, 0);
    let left = textureLoad(velocity_in, coord + vec2<i32>(-1, 0), 0);
    let right = textureLoad(velocity_in, coord + vec2<i32>(1, 0), 0);
    let down = textureLoad(velocity_in, coord + vec2<i32>(0, 1), 0);
    let up = textureLoad(velocity_in, coord + vec2<i32>(0, -1), 0);

    let divergence = (right.x - left.x + down.y - up.y) * input.half_rdx;
    textureStore(divergence_out, coord, vec4f(divergence, 0.0, 0.0, 0.0));
}`,kT=`// Calculates the gradient of the pressure, and subtracts it from the velocity field

struct GradientSubtractionInput {
    half_rdx: f32, // Half the grid scale
};

@group(0) @binding(0) var pressure_in: texture_2d<f32>;
@group(0) @binding(1) var velocity_in: texture_2d<f32>;
@group(0) @binding(2) var subtraction_out: texture_storage_2d<rg32float, write>;
@group(0) @binding(3) var<uniform> input: GradientSubtractionInput;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) u_coords: vec3<u32>
) {
    let coord = vec2<i32>(u_coords.xy);
    let texture_size = vec2<i32>(textureDimensions(pressure_in));

    // Edge case, just write 0
    if (coord.x == 0 || coord.x == texture_size.x - 1 || coord.y == 0 || coord.y == texture_size.y - 1) {
        textureStore(subtraction_out, coord, vec4<f32>(0.0, 0.0, 0.0, 0.0));
        return;
    }

    let left    = textureLoad(pressure_in, coord - vec2<i32>(1, 0), 0);
    let right   = textureLoad(pressure_in, coord + vec2<i32>(1, 0), 0);
    let up      = textureLoad(pressure_in, coord - vec2<i32>(0, 1), 0);
    let down    = textureLoad(pressure_in, coord + vec2<i32>(0, 1), 0);

    let pressure_gradient = vec2<f32>(right.x - left.x, down.x - up.x) * input.half_rdx;
    let velocity = textureLoad(velocity_in, coord, 0);
    let result = velocity.xy - pressure_gradient;
    textureStore(subtraction_out, coord, vec4<f32>(result.x, result.y, 0.0, 0.0));
}`,ET=`// Boundary conditions shader
// Enforces different boundary conditions on vector and scalar fields

struct BoundaryInput {
    boundary_type: u32, // BoundaryType: NO_SLIP_VELOCITY = 0, FREE_SLIP_VELOCITY = 1, SCALAR_NEUMANN = 2
    scale: f32,         // For scaling boundary values
};

@group(0) @binding(0) var field_in: texture_2d<f32>;
@group(0) @binding(1) var field_out: texture_storage_2d<\${FORMAT}, write>;
@group(0) @binding(2) var<uniform> input: BoundaryInput;

fn enforce_no_slip_velocity(coord: vec2<i32>, texture_size: vec2<i32>) -> vec4<f32> {
    // No-slip: velocity = 0 at boundaries
    // For velocity field (2 components)
    
    // Corners: zero velocity
    if ((coord.x == 0 || coord.x == texture_size.x - 1) && 
        (coord.y == 0 || coord.y == texture_size.y - 1)) {
        return vec4<f32>(0.0, 0.0, 0.0, 0.0);
    }
    
    // Left and right boundaries
    if (coord.x == 0) {
        let interior = textureLoad(field_in, vec2<i32>(1, coord.y), 0);
        return vec4<f32>(-interior.x, 0.0, 0.0, 0.0); // Reflect x-component, zero y-component
    }
    if (coord.x == texture_size.x - 1) {
        let interior = textureLoad(field_in, vec2<i32>(texture_size.x - 2, coord.y), 0);
        return vec4<f32>(-interior.x, 0.0, 0.0, 0.0); // Reflect x-component, zero y-component
    }
    
    // Top and bottom boundaries
    if (coord.y == 0) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, 1), 0);
        return vec4<f32>(0.0, -interior.y, 0.0, 0.0); // Zero x-component, reflect y-component
    }
    if (coord.y == texture_size.y - 1) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, texture_size.y - 2), 0);
        return vec4<f32>(0.0, -interior.y, 0.0, 0.0); // Zero x-component, reflect y-component
    }
    
    // Interior points: copy unchanged
    return textureLoad(field_in, coord, 0);
}

fn enforce_free_slip_velocity(coord: vec2<i32>, texture_size: vec2<i32>) -> vec4<f32> {
    // Free-slip: normal component = 0, tangential component unchanged
    
    // Corners: zero velocity
    if ((coord.x == 0 || coord.x == texture_size.x - 1) && 
        (coord.y == 0 || coord.y == texture_size.y - 1)) {
        return vec4<f32>(0.0, 0.0, 0.0, 0.0);
    }
    
    // Left and right boundaries (normal is x-direction)
    if (coord.x == 0) {
        let interior = textureLoad(field_in, vec2<i32>(1, coord.y), 0);
        return vec4<f32>(0.0, interior.y, 0.0, 0.0); // Zero normal (x), preserve tangential (y)
    }
    if (coord.x == texture_size.x - 1) {
        let interior = textureLoad(field_in, vec2<i32>(texture_size.x - 2, coord.y), 0);
        return vec4<f32>(0.0, interior.y, 0.0, 0.0); // Zero normal (x), preserve tangential (y)
    }
    
    // Top and bottom boundaries (normal is y-direction)
    if (coord.y == 0) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, 1), 0);
        return vec4<f32>(interior.x, 0.0, 0.0, 0.0); // Preserve tangential (x), zero normal (y)
    }
    if (coord.y == texture_size.y - 1) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, texture_size.y - 2), 0);
        return vec4<f32>(interior.x, 0.0, 0.0, 0.0); // Preserve tangential (x), zero normal (y)
    }
    
    // Interior points: copy unchanged
    return textureLoad(field_in, coord, 0);
}

fn enforce_scalar_boundary(coord: vec2<i32>, texture_size: vec2<i32>) -> vec4<f32> {
    // Neumann boundary conditions for scalar fields (pressure, density, etc.)
    // Zero-gradient: boundary value = adjacent interior value
    
    // Corners: copy from diagonal interior
    if (coord.x == 0 && coord.y == 0) {
        let interior = textureLoad(field_in, vec2<i32>(1, 1), 0);
        return interior;
    }
    if (coord.x == texture_size.x - 1 && coord.y == 0) {
        let interior = textureLoad(field_in, vec2<i32>(texture_size.x - 2, 1), 0);
        return interior;
    }
    if (coord.x == 0 && coord.y == texture_size.y - 1) {
        let interior = textureLoad(field_in, vec2<i32>(1, texture_size.y - 2), 0);
        return interior;
    }
    if (coord.x == texture_size.x - 1 && coord.y == texture_size.y - 1) {
        let interior = textureLoad(field_in, vec2<i32>(texture_size.x - 2, texture_size.y - 2), 0);
        return interior;
    }
    
    // Edge boundaries: copy from adjacent interior
    if (coord.x == 0) {
        let interior = textureLoad(field_in, vec2<i32>(1, coord.y), 0);
        return interior;
    }
    if (coord.x == texture_size.x - 1) {
        let interior = textureLoad(field_in, vec2<i32>(texture_size.x - 2, coord.y), 0);
        return interior;
    }
    if (coord.y == 0) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, 1), 0);
        return interior;
    }
    if (coord.y == texture_size.y - 1) {
        let interior = textureLoad(field_in, vec2<i32>(coord.x, texture_size.y - 2), 0);
        return interior;
    }
    
    // Interior points: copy unchanged
    return textureLoad(field_in, coord, 0);
}

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) global_id: vec3<u32>,
) {
    let coord = vec2<i32>(global_id.xy);
    let texture_size = vec2<i32>(textureDimensions(field_in));
    
    // Check if we're at a boundary
    let is_boundary = coord.x == 0 || coord.x == texture_size.x - 1 || 
                     coord.y == 0 || coord.y == texture_size.y - 1;
    
    var result: vec4<f32>;
    
    if (!is_boundary) {
        // Interior points: copy unchanged
        result = textureLoad(field_in, coord, 0);
    } else {
        // Apply boundary conditions based on type
        switch (input.boundary_type) {
            case 0u: { // No-slip velocity
                result = enforce_no_slip_velocity(coord, texture_size);
            }
            case 1u: { // Free-slip velocity
                result = enforce_free_slip_velocity(coord, texture_size);
            }
            case 2u: { // Scalar (Neumann)
                result = enforce_scalar_boundary(coord, texture_size);
            }
            default: {
                result = textureLoad(field_in, coord, 0);
            }
        }
    }
    
    textureStore(field_out, coord, result);
} `,PT=`// Add smoke density at a specific position

struct AddSmokeInput {
    position_x: f32,
    position_y: f32,
    radius: f32,
    intensity: f32,
};

@group(0) @binding(0) var smoke_in: texture_2d<f32>;
@group(0) @binding(1) var smoke_out: texture_storage_2d<r32float, write>;
@group(0) @binding(2) var<uniform> input: AddSmokeInput;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) texture_coord: vec3<u32>,
) {
    let coord = vec2<i32>(texture_coord.xy);
    let texture_size = vec2<i32>(textureDimensions(smoke_in));
    
    if (coord.x >= texture_size.x || coord.y >= texture_size.y) {
        return;
    }
    
    // Get current smoke density
    let current_smoke = textureLoad(smoke_in, coord, 0).r;
    
    // Calculate distance from click position
    let pixel_pos = vec2<f32>(f32(coord.x), f32(coord.y));
    let click_pos = vec2<f32>(input.position_x, input.position_y);
    let distance = length(pixel_pos - click_pos);
    
    // Add smoke with smooth falloff
    var added_smoke = 0.0;
    if (distance <= input.radius) {
        let falloff = 1.0 - (distance / input.radius);
        let smooth_falloff = falloff * falloff * (3.0 - 2.0 * falloff); // Smoothstep
        added_smoke = input.intensity * smooth_falloff;
    }
    
    let new_smoke = min(current_smoke + added_smoke, 1.0); // Clamp to [0,1]
    textureStore(smoke_out, coord, vec4<f32>(new_smoke, 0.0, 0.0, 0.0));
} `,AT=`// Add velocity at a specific position based on mouse movement

struct AddVelocityInput {
    position_x: f32,
    position_y: f32,
    velocity_x: f32,
    velocity_y: f32,
    radius: f32,
    intensity: f32,
};

@group(0) @binding(0) var velocity_in: texture_2d<f32>;
@group(0) @binding(1) var velocity_out: texture_storage_2d<rg32float, write>;
@group(0) @binding(2) var<uniform> input: AddVelocityInput;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(
    @builtin(global_invocation_id) texture_coord: vec3<u32>,
) {
    let coord = vec2<i32>(texture_coord.xy);
    let texture_size = vec2<i32>(textureDimensions(velocity_in));
    
    if (coord.x >= texture_size.x || coord.y >= texture_size.y) {
        return;
    }
    
    // Get current velocity
    let current_velocity = textureLoad(velocity_in, coord, 0).xy;
    
    // Calculate distance from mouse position
    let pixel_pos = vec2<f32>(f32(coord.x), f32(coord.y));
    let mouse_pos = vec2<f32>(input.position_x, input.position_y);
    let distance = length(pixel_pos - mouse_pos);
    
    // Add velocity with smooth falloff
    var added_velocity = vec2<f32>(0.0, 0.0);
    if (distance <= input.radius) {
        let falloff = 1.0 - (distance / input.radius);
        let smooth_falloff = falloff * falloff * (3.0 - 2.0 * falloff); // Smoothstep
        let velocity_delta = vec2<f32>(input.velocity_x, input.velocity_y);
        added_velocity = velocity_delta * input.intensity * smooth_falloff;
    }
    
    let new_velocity = current_velocity + added_velocity;
    textureStore(velocity_out, coord, vec4<f32>(new_velocity.x, new_velocity.y, 0.0, 0.0));
} `,NT=`struct DissipationUniforms {
  dissipation_factor: f32,
}

@group(0) @binding(0) var input_texture: texture_2d<f32>;
@group(0) @binding(1) var output_texture: texture_storage_2d<\${FORMAT}, write>;
@group(0) @binding(2) var<uniform> uniforms: DissipationUniforms;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(@builtin(global_invocation_id) global_id: vec3<u32>) {
  let coord = vec2<i32>(global_id.xy);
  let dimensions = textureDimensions(input_texture);
  
  // Check bounds
  if (coord.x >= i32(dimensions.x) || coord.y >= i32(dimensions.y)) {
    return;
  }
  
  let current_value = textureLoad(input_texture, coord, 0);
  let dissipated_value = current_value * uniforms.dissipation_factor;
  
  textureStore(output_texture, coord, vec4<f32>(dissipated_value));
} `,RT=`// Manual bilinear interpolation function
fn bilinear_interpolate(texture: texture_2d<f32>, coord: vec2<f32>) -> vec2<f32> {
    let texture_size = vec2<f32>(textureDimensions(texture));
    
    // Get the four surrounding pixel coordinates
    let coord_floor = floor(coord);
    let coord_fract = coord - coord_floor;
    
    let coord_i = vec2<i32>(coord_floor);
    let coord_i_plus1 = coord_i + vec2<i32>(1, 1);
    
    // Clamp coordinates to texture bounds
    let max_coord = vec2<i32>(texture_size) - vec2<i32>(1, 1);
    let tl = clamp(coord_i, vec2<i32>(0, 0), max_coord);
    let tr = clamp(vec2<i32>(coord_i.x + 1, coord_i.y), vec2<i32>(0, 0), max_coord);
    let bl = clamp(vec2<i32>(coord_i.x, coord_i.y + 1), vec2<i32>(0, 0), max_coord);
    let br = clamp(coord_i_plus1, vec2<i32>(0, 0), max_coord);
    
    // Sample the four surrounding texels
    let val_tl = textureLoad(texture, tl, 0).xy;
    let val_tr = textureLoad(texture, tr, 0).xy;
    let val_bl = textureLoad(texture, bl, 0).xy;
    let val_br = textureLoad(texture, br, 0).xy;
    
    // Perform bilinear interpolation
    let top = mix(val_tl, val_tr, coord_fract.x);
    let bottom = mix(val_bl, val_br, coord_fract.x);
    let result = mix(top, bottom, coord_fract.y);
    
    return result;
}`,MT=`// --- VERTEX --- //

struct VertexOutput {
    @builtin(position) position: vec4f,
    @location(0) texCoord: vec2f,
}

@vertex
fn vertex_main(
    @builtin(vertex_index) vertexIndex: u32,
) -> VertexOutput {
    let squareVertices: array<vec2f, 6> = array<vec2f, 6>(
        vec2f(-1.0, -1.0),
        vec2f(1.0, -1.0),
        vec2f(-1.0, 1.0),
        vec2f(-1.0, 1.0),
        vec2f(1.0, -1.0),
        vec2f(1.0, 1.0),
    );
    var output: VertexOutput;
    let xy = squareVertices[vertexIndex];
    output.position = vec4f(xy, 0.0, 1.0);
    // Normalize to 0-1, and flip y
    let normalized = xy * 0.5 + 0.5;
    output.texCoord = vec2f(normalized.x, 1.0 - normalized.y);
    return output;
}

// --- FRAGMENT --- //

@define PI 3.141592653589793238462
@define VELOCITY_MODE 0
@define PRESSURE_MODE 1
@define DENSITY_MODE 2
@define PARTICLES_MODE 3

struct FragmentInput {
    shaderMode: u32,
    // mean and std of gaussian noise sampling
    stddev: f32,
    mean: f32,
    // 3 pseudo random sampled values from the GPU
    offsets: vec3f,
    // RGB color for smoke shading
    smokeColor: vec3f,
}

@group(0) @binding(0) var texture: texture_2d<f32>;
@group(0) @binding(1) var textureSampler: sampler;
@group(0) @binding(2) var<uniform> uniformInput: FragmentInput;

// All components are in the range [0…1], including hue.
fn hsv2rgb(c: vec3f) -> vec3f
{
    let K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
    let p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
    return c.z * mix(K.xxx, clamp(p - K.xxx, vec3f(0.0), vec3f(1.0)), c.y);
}

fn shadeVelocity(value: vec2f, input: VertexOutput) -> vec4f {
    let DAMP = 30.0;
    let angle = acos((value.y * value.y) / (dot(value.xy, value.xy)));
    let magnitude = sqrt(dot(value.xy, value.xy)) / DAMP;
    let color = hsv2rgb(vec3f(angle / 8 + PI / 2, 1, 1));
    return vec4f(color * magnitude, 0);
}

fn shadePressure(value: f32, input: VertexOutput) -> vec4f {
    // Pressure
    let DAMP = 30.0;
    if (value < 0) {
        return vec4f(-value, 0, 0, 1) / DAMP;
    } else {
        return vec4f(0, 0, value, 1) / DAMP;
    }
}

fn shadeDensity(value: f32, input: VertexOutput) -> vec4f {
    let density = clamp(value, 0.0, 1.0);
    
    // Get base color from uniform
    let baseColor = uniformInput.smokeColor;
    
    // Add complementary tinting to shadows for more visual interest
    let shadowTint = vec3f(0.1, 0.05, 0.2); // Cool blue tint for shadows
    let highlightBoost = vec3f(1.3, 1.2, 1.4); // Warm boost for highlights
    
    // Enhanced gradient stops with better contrast and vibrancy
    let color1 = (baseColor * 0.05) + shadowTint;
    let color2 = (baseColor * 0.2) + shadowTint * 0.5;
    let color3 = baseColor * 0.4;
    let color4 = baseColor * 0.7;
    let color5 = baseColor * 1.0 + vec3f(0.1, 0.1, 0.1);
    let color6 = baseColor * highlightBoost;
    let color7 = mix(baseColor * 1.5, vec3f(1.0, 1.0, 1.0), 0.3);
    let color8 = vec3f(1.2, 1.2, 1.2);
    
    var finalColor: vec3f;
    
    // multi-stop gradient
    if (density < 0.15) {
        let t = density / 0.15;
        finalColor = mix(color1, color2, smoothstep(0.0, 1.0, t));
    } else if (density < 0.3) {
        let t = (density - 0.15) / 0.15;
        finalColor = mix(color2, color3, smoothstep(0.0, 1.0, t));
    } else if (density < 0.45) {
        let t = (density - 0.3) / 0.15;
        finalColor = mix(color3, color4, smoothstep(0.0, 1.0, t));
    } else if (density < 0.6) {
        let t = (density - 0.45) / 0.15;
        finalColor = mix(color4, color5, smoothstep(0.0, 1.0, t));
    } else if (density < 0.75) {
        let t = (density - 0.6) / 0.15;
        finalColor = mix(color5, color6, smoothstep(0.0, 1.0, t));
    } else if (density < 0.9) {
        let t = (density - 0.75) / 0.15;
        finalColor = mix(color6, color7, smoothstep(0.0, 1.0, t));
    } else {
        let t = (density - 0.9) / 0.1;
        finalColor = mix(color7, color8, smoothstep(0.0, 1.0, t));
    }
    
    // Add subtle saturation boost for mid-tones
    let luminance = dot(finalColor, vec3f(0.299, 0.587, 0.114));
    let saturationBoost = 1.0 + (1.0 - abs(luminance - 0.5) * 2.0) * 0.2;
    finalColor = mix(vec3f(luminance), finalColor, saturationBoost);
    
    let alpha = density * density * (3.0 - 2.0 * density); // Smoothstep for better falloff
    
    return vec4f(finalColor, alpha);
}

fn rand(co: vec2f) -> f32 {
    let r = fract(sin(dot(co.xy, vec2f(12.9898,78.233))) * 43758.5453);
    if (r == 0.0) {
        return 0.000000000001;
    }
    else {
        return r;
    }
}

fn gaussrand(co: vec2f) -> vec4f {
    let offsets = uniformInput.offsets;
    let U = rand(co + vec2(offsets.x, offsets.x));
    let V = rand(co + vec2(offsets.y, offsets.y));
    let R = rand(co + vec2(offsets.z, offsets.z));
    var Z = sqrt(-2.0 * log(U)) * sin(2.0 * PI * V);
    Z = Z * uniformInput.stddev + uniformInput.mean;
    return vec4f(Z, Z, Z, 0.0);
}

fn addNoise(color: vec4f, texCoord: vec2f) -> vec4f {
    let magnitude = sqrt(dot(color.xy, color.xy));
    let noise = gaussrand(texCoord) ;
    let baseNoise = gaussrand(texCoord) * 0.2;
    return color + noise * magnitude + baseNoise;
}

@fragment
fn fragment_main(input: VertexOutput) -> @location(0)vec4f {
    let value = textureSample(texture, textureSampler, input.texCoord);

    var output: vec4f;

    switch uniformInput.shaderMode {
        case VELOCITY_MODE: {
            output = shadeVelocity(value.xy, input);
        }
        case PRESSURE_MODE: {
            output = shadePressure(value.x, input);
        }
        case DENSITY_MODE: {
            output = shadeDensity(value.x, input);
        }
        default: {
            output = vec4(1, 1, 1, 1);
        }
    }

    return addNoise(output, input.texCoord);
}`,OT=`@include "bilinearInterpolate.wgsl"

struct AdvectParticlesUniforms {
    timestep: f32,
}

@group(0) @binding(0) var velocity: texture_2d<f32>;
@group(0) @binding(1) var particle_position: texture_2d<f32>;
@group(0) @binding(2) var particle_position_out: texture_storage_2d<rg32float, write>;
@group(0) @binding(3) var<uniform> uniforms: AdvectParticlesUniforms;

@compute @workgroup_size(\${WORKGROUP_SIZE}, \${WORKGROUP_SIZE})
fn compute_main(@builtin(global_invocation_id) global_id: vec3<u32>) {
   let grid_size = vec2f(textureDimensions(velocity));
   let current_position = textureLoad(particle_position, global_id.xy, 0).xy;
   let velocity_at_position = bilinear_interpolate(velocity, current_position);
   let new_position = current_position + velocity_at_position * uniforms.timestep;
   textureStore(particle_position_out, global_id.xy, vec4f(new_position, 0.0, 0.0));
}`,We={ADVECTION:"advectionShader.wgsl",JACOBI_ITERATION:"jacobiIteration.wgsl",DIVERGENCE:"divergenceShader.wgsl",GRADIENT_SUBTRACTION:"gradientSubtractionShader.wgsl",BOUNDARY_CONDITIONS:"boundaryConditionsShader.wgsl",ADD_SMOKE:"addSmokeShader.wgsl",ADD_VELOCITY:"addVelocityShader.wgsl",DISSIPATION:"dissipationShader.wgsl",BILINEAR_INTERPOLATE:"bilinearInterpolate.wgsl",TEXTURE:"textureShader.wgsl",ADVECT_PARTICLES:"advectParticlesShader.wgsl"};Iy.registerMultiple({[We.ADVECTION]:bT,[We.JACOBI_ITERATION]:TT,[We.DIVERGENCE]:CT,[We.GRADIENT_SUBTRACTION]:kT,[We.BOUNDARY_CONDITIONS]:ET,[We.ADD_SMOKE]:PT,[We.ADD_VELOCITY]:AT,[We.DISSIPATION]:NT,[We.BILINEAR_INTERPOLATE]:RT,[We.TEXTURE]:MT,[We.ADVECT_PARTICLES]:OT});function Ht(s,e){return Gi(s,e)}const Ei=16,Dy=8,IT=Math.ceil(Ei/Dy),DT=.5;var Ly=(s=>(s.NORTH="N",s.NORTHEAST="NE",s.EAST="E",s.SOUTHEAST="SE",s.SOUTH="S",s.SOUTHWEST="SW",s.WEST="W",s.NORTHWEST="NW",s))(Ly||{});const Fy={N:[0,-1],NE:[1,-1],E:[1,0],SE:[1,1],S:[0,1],SW:[-1,1],W:[-1,0],NW:[-1,-1]};function LT(s,e,t="E"){const r=[0,0],o=Fy[t],l=[o[0],o[1]],c=new Float32Array([r,r,r,r,r,r,l,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,l,l,l,r,r,r,r,r,r,r,r,l,r,r,r,r,r,l,l,l,r,r,r,r,r,r,r,r,r,r,r,r,r,r,l,l,l,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r].flat());e.queue.writeTexture({texture:s},c,{bytesPerRow:Ei*2*4},{width:Ei,height:Ei})}class FT extends sf{constructor(e){super({name:"Advection Pass",entryPoint:"compute_main",shader:e.createShaderModule({label:"Advection Shader",code:Gi(We.ADVECTION,{variables:{WORKGROUP_SIZE:Dy,OUT_FORMAT:"rg32float"}})})},e)}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Advection Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){if(!e.textureManager)throw new Error("No texture manager supplied");if(!e.uniformBuffer)throw new Error("No uniform buffer supplied");return this.device.createBindGroup({label:"Advection Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:2,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class VT{constructor(){X(this,"resources",null);X(this,"sampler",null);X(this,"textureManager",null);X(this,"advectionPass",null);X(this,"renderingPass",null)}async initialize(e,t="E"){if(!e.current)throw new tn("Could not initialize WebGPU: Canvas not found",hr.NO_CANVAS);this.resources=await rf(e.current),this.textureManager=new nf(this.resources.device),this.textureManager.createPingPongTexture("velocity",{label:"Velocity Texture",size:[Ei,Ei],format:"rg32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST}),this.sampler=this.resources.device.createSampler({label:"Texture Sampler"}),LT(this.textureManager.getCurrentTexture("velocity"),this.resources.device,t),this.advectionPass=new FT(this.resources.device);const r=this.resources.device.createShaderModule({label:"Texture Shader",code:Gi(We.TEXTURE)});this.renderingPass=new of({name:"Advection Test Rendering",vertex:{module:r,entryPoint:"vertex_main"},fragment:{module:r,entryPoint:"fragment_main",targets:[{format:this.resources.canvasFormat}]}},this.resources.device),this.step({renderOnly:!0})}step({renderOnly:e}={renderOnly:!1}){if(!this.resources||!this.textureManager||!this.advectionPass||!this.renderingPass)throw new tn("Could not step advection test: Resources not initialized. Run initialize() first.",hr.NO_RESOURCES);const t=this.resources.device.createCommandEncoder();if(!e){const o=new Float32Array([.03333333333333333,DT]),l=this.resources.device.createBuffer({label:"Advection UBO",size:o.byteLength,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});this.resources.device.queue.writeBuffer(l,0,o);const c=t.beginComputePass({label:"Advection Test Compute Pass"});this.advectionPass.execute(c,{uniformBuffer:l,textureManager:this.textureManager},IT),c.end(),this.textureManager.swap("velocity")}const r=t.beginRenderPass({label:"Advection Test Render Pass",colorAttachments:[{view:this.resources.context.getCurrentTexture().createView(),loadOp:"clear",storeOp:"store",clearValue:{r:0,g:0,b:0,a:0}}]});this.renderingPass.writeToUniformBuffer({shaderMode:Oi.VELOCITY,noise:{mean:0,stddev:.05,offsets:[Math.random(),Math.random(),Math.random()]},smokeColor:[0,1,0]}),this.renderingPass.execute(r,{vertexCount:6},{sampler:this.sampler,textureManager:this.textureManager,texture:"velocity"}),r.end(),this.resources.device.queue.submit([t.finish()])}}function BT(){const s=k.useRef(null),[e,t]=k.useState("E"),r=async h=>{!h.current||s.current||(s.current=new VT,await s.current.initialize(h,e))},o=()=>{s.current&&s.current.step()},l=async h=>{s.current&&h.current&&await s.current.initialize(h,e)},c=async(h,f)=>{t(h),s.current&&f.current&&await s.current.initialize(f,h)},u=({canvasRef:h})=>I.jsxs("div",{className:"flex flex-col items-center gap-2 mb-4",children:[I.jsx("label",{htmlFor:"direction-select",className:"text-sm font-medium text-gray-700",children:"Advection Direction:"}),I.jsx("select",{id:"direction-select",value:e,onChange:f=>c(f.target.value,h),className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Object.values(Ly).map(f=>I.jsxs("option",{value:f,children:[f," (",Fy[f].join(", "),")"]},f))})]});return I.jsx(Oy,{title:"Advection Test",onInitialize:r,onStep:o,onRestart:l,customControls:h=>I.jsx(u,{canvasRef:h})})}const Pi=16,Vy=8,zT=Math.ceil(Pi/Vy),UT=20;function jT(s,e){const t=[0,0],r=[1,1],o=new Float32Array([t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t].flat());e.queue.writeTexture({texture:s},o,{bytesPerRow:Pi*2*4},{width:Pi,height:Pi})}let GT=class extends sf{constructor(e){super({entryPoint:"compute_main",name:"Diffusion",shader:e.createShaderModule({code:Gi(We.JACOBI_ITERATION,{variables:{WORKGROUP_SIZE:Vy,FORMAT:"rg32float"}}),label:"Diffusion Shader"})},e)}createBindGroupLayout(){return this.device.createBindGroupLayout({label:`${this.config.name} Bind Group Layout`,entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{viewDimension:"2d",sampleType:"unfilterable-float"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{viewDimension:"2d",sampleType:"unfilterable-float"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",viewDimension:"2d",access:"write-only"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup({textureManager:e,uniformBuffer:t}){if(!e)throw new Error("Supply texture manager to diffusion pass");if(!t)throw new Error("Supply uniform buffer to diffusion pass");return this.device.createBindGroup({label:"Diffusion Bind Layout",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.getCurrentTexture("velocity").createView()},{binding:1,resource:e.getCurrentTexture("velocity").createView()},{binding:2,resource:e.getBackTexture("velocity").createView()},{binding:3,resource:{label:"",buffer:t}}]})}async execute(e,t,r){var o;for(let l=0;l<UT;l++){const c=this.createBindGroup(t);e.setPipeline(this.pipeline),e.setBindGroup(0,c),e.dispatchWorkgroups(r,r),(o=t.textureManager)==null||o.swap("velocity")}}};class WT{constructor(){X(this,"resources",null);X(this,"textureManager",null);X(this,"sampler",null);X(this,"diffusionPass",null);X(this,"renderingPass",null)}async initialize(e){if(!e.current)throw new tn("Could not initialize WebGPU: Canvas not found",hr.NO_CANVAS);this.resources=await rf(e.current),this.textureManager=new nf(this.resources.device),this.sampler=this.resources.device.createSampler({label:"Diffusion Rendering Sampler "}),this.textureManager.createPingPongTexture("velocity",{label:"Velocity Texture",size:[Pi,Pi],format:"rg32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST}),jT(this.textureManager.getCurrentTexture("velocity"),this.resources.device),this.diffusionPass=new GT(this.resources.device);const t=this.resources.device.createShaderModule({label:"Texture Shader",code:Gi(We.TEXTURE)});this.renderingPass=new of({name:"Diffusion Test Rendering",vertex:{module:t,entryPoint:"vertex_main"},fragment:{module:t,entryPoint:"fragment_main",targets:[{format:this.resources.canvasFormat}]}},this.resources.device),this.step({renderOnly:!0})}step({renderOnly:e}={renderOnly:!1}){if(!this.resources||!this.textureManager||!this.diffusionPass||!this.renderingPass)throw new tn("Could not step diffusion test: Resources not initialized. Run initialize() first.",hr.NO_RESOURCES);const t=this.resources.device.createCommandEncoder();if(!e){const c=1/.01/.03333333333333333,u=new Float32Array([c,1/(4+c)]),h=this.resources.device.createBuffer({label:"Diffusion UBO",size:u.byteLength,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM});this.resources.device.queue.writeBuffer(h,0,u);const f=t.beginComputePass({label:"Diffusion Test Compute Pass"});this.diffusionPass.execute(f,{uniformBuffer:h,textureManager:this.textureManager},zT),f.end(),this.textureManager.swap("velocity")}const r=t.beginRenderPass({label:"Diffusion Test Render Pass",colorAttachments:[{view:this.resources.context.getCurrentTexture().createView(),loadOp:"clear",storeOp:"store",clearValue:{r:0,g:0,b:0,a:0}}]});this.renderingPass.writeToUniformBuffer({shaderMode:Oi.VELOCITY,noise:{mean:0,stddev:.05,offsets:[Math.random(),Math.random(),Math.random()]},smokeColor:[0,1,0]}),this.renderingPass.execute(r,{vertexCount:6},{sampler:this.sampler,textureManager:this.textureManager,texture:"velocity"}),r.end(),this.resources.device.queue.submit([t.finish()])}}function $T(){const s=k.useRef(null),e=async o=>{!o.current||s.current||(s.current=new WT,await s.current.initialize(o))},t=()=>{s.current&&s.current.step()},r=async o=>{s.current&&o.current&&await s.current.initialize(o)};return I.jsx(Oy,{title:"Diffusion Test",onInitialize:e,onStep:t,onRestart:r})}function qT(){const{testId:s}=Kh({from:"/tests/$testId"}),e=()=>I.jsx("div",{className:"border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60",children:I.jsx("div",{className:"container mx-auto px-4 py-4",children:I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx(qn,{variant:"ghost",size:"sm",asChild:!0,children:I.jsxs(Xo,{to:"/tests",className:"flex items-center gap-2",children:[I.jsx(bh,{className:"h-4 w-4"}),"Back to Tests"]})}),I.jsx("div",{className:"h-6 w-px bg-border"}),I.jsxs("h1",{className:"text-lg font-semibold text-gray-900 capitalize",children:[s," Test"]})]})})}),t=()=>{switch(s){case"advection":return I.jsx(BT,{});case"diffusion":return I.jsx($T,{});default:return I.jsxs("div",{className:"p-8 text-center",children:[I.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Test Not Found"}),I.jsxs("p",{className:"text-gray-600 mb-6",children:['The test "',s,'" could not be found.']}),I.jsx(qn,{variant:"outline",asChild:!0,children:I.jsxs(Xo,{to:"/tests",children:[I.jsx(bh,{className:"h-4 w-4 mr-2"}),"Back to Tests"]})})]})}};return I.jsxs("div",{className:"min-h-screen bg-gray-50",children:[I.jsx(e,{}),I.jsx("div",{className:"container mx-auto",children:t()})]})}class Nl{constructor(e=60){X(this,"samples",[]);X(this,"maxSamples");this.maxSamples=e}addSample(e){e<0||(this.samples.push(e),this.samples.length>this.maxSamples&&this.samples.shift())}get(){return this.samples.length===0?0:this.samples.reduce((t,r)=>t+r,0)/this.samples.length}clear(){this.samples=[]}}class HT{constructor(e=!1){X(this,"jsAverage",new Nl);X(this,"fpsAverage",new Nl);X(this,"timestepAverage",new Nl);X(this,"gpuAverage",new Nl);X(this,"timers",new Map);X(this,"lastFrameTime",performance.now());X(this,"gpuSupported",!1);this.gpuSupported=e}setGpuSupported(e){this.gpuSupported=e}startTimer(e){this.timers.set(e,performance.now())}endTimer(e){const t=this.timers.get(e);if(!t)return 0;const r=performance.now()-t;return this.timers.delete(e),r}recordJS(e){this.jsAverage.addSample(e)}recordGPU(e){this.gpuAverage.addSample(e)}recordTimestep(e){this.timestepAverage.addSample(e*1e3)}recordFrame(){const e=performance.now(),t=(e-this.lastFrameTime)/1e3;t>0&&this.fpsAverage.addSample(1/t),this.lastFrameTime=e}getMetrics(){return{js:this.jsAverage.get(),fps:this.fpsAverage.get(),timestep:this.timestepAverage.get(),gpu:this.gpuAverage.get(),gpuSupported:this.gpuSupported}}clear(){this.jsAverage.clear(),this.fpsAverage.clear(),this.timestepAverage.clear(),this.gpuAverage.clear(),this.timers.clear()}}const YT=[{key:"fps",label:"fps:",format:s=>`${s.toFixed(0)}`,className:s=>{const e=s;return e>=55?"text-green-400":e>=30?"text-yellow-400":"text-red-400"}},{key:"js",label:"js:",format:s=>`${s.toFixed(1)}ms`},{key:"gpu",label:"gpu:",format:(s,e)=>e.gpuSupported?`${s.toFixed(1)}µs`:"N/A",condition:s=>s.gpuSupported||!0},{key:"timestep",label:"dt:",format:s=>`${s.toFixed(1)}ms`}],XT=[{key:"mouseMoveCallsPerSecond",label:"mouse:",format:s=>`${s.toFixed(1)}/s`,className:s=>s>100?"text-red-400":s>60?"text-yellow-400":"text-green-400"},{key:"mouseDownCallsPerSecond",label:"click:",format:s=>`${s.toFixed(1)}/s`}],KT=ta.memo(({metrics:s,eventMetrics:e,isVisible:t})=>{if(!t)return null;const r=e&&Object.values(e).some(o=>o>0);return I.jsx(Ay,{className:"fixed top-4 left-4 z-50 w-32 bg-black/80 text-white border-gray-600",children:I.jsxs(Ny,{className:"p-3 space-y-1",children:[YT.map(o=>{if(o.condition&&!o.condition(s))return null;const l=s[o.key],c=o.format(l,s),u=typeof o.className=="function"?o.className(l,s):o.className;return I.jsxs("div",{className:"flex justify-between text-xs font-mono",children:[I.jsx("span",{children:o.label}),I.jsx("span",{className:u,children:c})]},o.key)}),r&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"border-t border-gray-600 my-2"}),I.jsx("div",{className:"text-xs font-mono text-gray-300 mb-1",children:"events"}),XT.map(o=>{if(!e||e[o.key]===void 0)return null;const l=e[o.key],c=o.format(l),u=typeof o.className=="function"?o.className(l):o.className;return I.jsxs("div",{className:"flex justify-between text-xs font-mono",children:[I.jsx("span",{children:o.label}),I.jsx("span",{className:u,children:c})]},o.key)})]})]})})}),ZT=()=>{const[s,e]=k.useState(!1);return k.useEffect(()=>{const t=r=>{r.key.toLowerCase()==="p"&&e(o=>!o)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),s};class QT{constructor(e,t=1e3){X(this,"callTimes",[]);X(this,"lastCleanupTime",performance.now());X(this,"maxAge");X(this,"name");this.name=e,this.maxAge=t}recordCall(){const e=performance.now();this.callTimes.push(e),e-this.lastCleanupTime>this.maxAge&&(this.cleanup(e),this.lastCleanupTime=e)}getCallsPerSecond(){const e=performance.now();if(this.cleanup(e),this.callTimes.length===0)return 0;const t=e-this.maxAge;return this.callTimes.filter(o=>o>t).length*(1e3/this.maxAge)}getStats(){return{name:this.name,callsPerSecond:this.getCallsPerSecond(),totalCalls:this.callTimes.length}}reset(){this.callTimes=[],this.lastCleanupTime=performance.now()}cleanup(e){const t=e-this.maxAge;this.callTimes=this.callTimes.filter(r=>r>t)}}class JT{constructor(e,t){X(this,"pendingEvents",[]);X(this,"rafId",null);X(this,"isProcessing",!1);X(this,"callback");X(this,"onEventBatch");this.callback=e,this.onEventBatch=t}addEvent(e){this.pendingEvents.push(e),this.rafId===null&&!this.isProcessing&&(this.rafId=requestAnimationFrame(()=>{this.processBatch()}))}destroy(){this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.pendingEvents=[]}processBatch(){if(this.pendingEvents.length===0)return;this.isProcessing=!0;const e=[...this.pendingEvents];this.pendingEvents=[],this.rafId=null,this.onEventBatch&&this.onEventBatch(e.length);try{this.callback(e)}finally{this.isProcessing=!1}}}var Gl=(s=>(s[s.NO_SLIP_VELOCITY=0]="NO_SLIP_VELOCITY",s[s.FREE_SLIP_VELOCITY=1]="FREE_SLIP_VELOCITY",s[s.SCALAR_NEUMANN=2]="SCALAR_NEUMANN",s))(Gl||{});const eC={read_read_write_uniform:{label:"Read-Read-Write-Uniform Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]},read_write_uniform:{label:"Read-Write-Uniform Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"r32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]},pressure:{label:"Pressure Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"r32float",access:"write-only",viewDimension:"2d"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]},gradient:{label:"Gradient Subtraction Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]},boundary:{label:"Boundary Conditions Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}};class vr{static getBindGroupLayout(e,t){let r=this.layoutMap.get(e);if(r||(r=new Map,this.layoutMap.set(e,r)),r.has(t))return r.get(t);const o=eC[t];if(!o)throw new Error(`Unknown layout type: ${t}`);const l=e.createBindGroupLayout(o);return r.set(t,l),l}static destroyDevice(e){const t=this.layoutMap.get(e);t&&(t.clear(),this.layoutMap.delete(e))}static destroyAll(){for(const[e,t]of this.layoutMap.entries())t.clear();this.layoutMap.clear()}}X(vr,"layoutMap",new Map);class In extends sf{constructor(t,r,o){super(t,r);X(this,"uniformManager");this.uniformManager=new pT(r,o)}executeWithUniforms(t,r,o,l){const c=this.uniformManager.updateBuffer(r),u=this.createBindGroup({textureManager:o,uniformBuffer:c});t.setPipeline(this.pipeline),t.setBindGroup(0,u),t.dispatchWorkgroups(l,l)}destroy(){this.uniformManager.destroy()}}class af extends In{constructor(){super(...arguments);X(this,"cachedBindGroupSwaps",null)}getCachedBindGroups(t,r){if(this.cachedBindGroupSwaps)return this.cachedBindGroupSwaps;const o=this.uniformManager.updateBuffer(t),l=this.createBindGroup({textureManager:r,uniformBuffer:o});r.swap(this.getSwapTextureId());const c=this.createBindGroup({textureManager:r,uniformBuffer:o});return r.swap(this.getSwapTextureId()),this.cachedBindGroupSwaps=[l,c],this.cachedBindGroupSwaps}executeIterations(t,r,o,l,c){const u=this.getCachedBindGroups(r,o);t.setPipeline(this.pipeline);for(let h=0;h<c;h++)t.setBindGroup(0,u[h%2]),t.dispatchWorkgroups(l,l)}}class tC extends In{constructor(e,t){super({name:"Smoke Density Advection",entryPoint:"compute_main",shader:e.createShaderModule({label:"Advection Shader",code:Ht(We.ADVECTION,{variables:{WORKGROUP_SIZE:t,OUT_FORMAT:"r32float"}})})},e,"Smoke Advection Uniforms")}createBindGroupLayout(){return vr.getBindGroupLayout(this.device,"pressure")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Advection Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("smokeDensity").createView()},{binding:2,resource:e.textureManager.getBackTexture("smokeDensity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class nC extends af{constructor(e,t){super({name:"Diffusion",entryPoint:"compute_main",shader:e.createShaderModule({label:"Diffusion Shader",code:Ht(We.JACOBI_ITERATION,{variables:{WORKGROUP_SIZE:t,FORMAT:"r32float"}})})},e,"Smoke Diffusion Uniforms")}getSwapTextureId(){return"smokeDensity"}createBindGroupLayout(){return vr.getBindGroupLayout(this.device,"pressure")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Diffusion Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("smokeDensity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("smokeDensity").createView()},{binding:2,resource:e.textureManager.getBackTexture("smokeDensity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class rC extends In{constructor(e,t){super({name:"Advection",entryPoint:"compute_main",shader:e.createShaderModule({label:"Advection Shader",code:Ht(We.ADVECTION,{variables:{WORKGROUP_SIZE:t,OUT_FORMAT:"rg32float"}})})},e,"Velocity Advection Uniforms")}createBindGroupLayout(){return vr.getBindGroupLayout(this.device,"read_read_write_uniform")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Advection Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:2,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class sC extends af{constructor(e,t){super({name:"Diffusion",entryPoint:"compute_main",shader:e.createShaderModule({label:"Diffusion Shader",code:Ht(We.JACOBI_ITERATION,{variables:{WORKGROUP_SIZE:t,FORMAT:"rg32float"}})})},e,"Velocity Diffusion Uniforms")}getSwapTextureId(){return"velocity"}createBindGroupLayout(){return vr.getBindGroupLayout(this.device,"read_read_write_uniform")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Diffusion Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:2,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class iC extends In{constructor(e,t){super({name:"Divergence",entryPoint:"compute_main",shader:e.createShaderModule({label:"Divergence Shader",code:Ht(We.DIVERGENCE,{variables:{WORKGROUP_SIZE:t}})})},e,"Divergence Uniforms")}createBindGroupLayout(){return vr.getBindGroupLayout(this.device,"read_write_uniform")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Divergence Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("divergence").createView()},{binding:2,resource:{buffer:e.uniformBuffer}}]})}}class oC extends af{constructor(e,t){super({name:"Pressure",entryPoint:"compute_main",shader:e.createShaderModule({label:"Pressure Shader",code:Ht(We.JACOBI_ITERATION,{variables:{WORKGROUP_SIZE:t,FORMAT:"r32float"}})})},e,"Pressure Uniforms")}getSwapTextureId(){return"pressure"}createBindGroupLayout(){return vr.getBindGroupLayout(this.device,"pressure")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Pressure Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("pressure").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("divergence").createView()},{binding:2,resource:e.textureManager.getBackTexture("pressure").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class aC extends In{constructor(e,t){super({name:"Gradient Subtraction",entryPoint:"compute_main",shader:e.createShaderModule({label:"Gradient Subtraction Shader",code:Ht(We.GRADIENT_SUBTRACTION,{variables:{WORKGROUP_SIZE:t}})})},e,"Gradient Subtraction Uniforms")}createBindGroupLayout(){return vr.getBindGroupLayout(this.device,"gradient")}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Gradient Subtraction Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("pressure").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:2,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class lC extends In{constructor(t,r){const o=Ht(We.BOUNDARY_CONDITIONS,{variables:{WORKGROUP_SIZE:r,FORMAT:"rg32float"}}),l=Ht(We.BOUNDARY_CONDITIONS,{variables:{WORKGROUP_SIZE:r,FORMAT:"r32float"}}),c=t.createShaderModule({label:"Boundary Conditions Velocity Shader",code:o}),u=t.createShaderModule({label:"Boundary Conditions Scalar Shader",code:l});super({name:"Boundary Conditions",entryPoint:"compute_main",shader:c},t,"Boundary Conditions Uniforms");X(this,"velocityShader");X(this,"scalarShader");X(this,"velocityPipeline",null);X(this,"scalarPipeline",null);this.velocityShader=c,this.scalarShader=u}getVelocityBindGroupLayout(){return this.device.createBindGroupLayout({label:"Boundary Velocity Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}getScalarBindGroupLayout(){return this.device.createBindGroupLayout({label:"Boundary Scalar Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"r32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}getVelocityPipeline(){return this.velocityPipeline||(this.velocityPipeline=this.device.createComputePipeline({label:"Boundary Conditions Velocity Pipeline",layout:this.device.createPipelineLayout({bindGroupLayouts:[this.getVelocityBindGroupLayout()]}),compute:{module:this.velocityShader,entryPoint:"compute_main"}})),this.velocityPipeline}getScalarPipeline(){return this.scalarPipeline||(this.scalarPipeline=this.device.createComputePipeline({label:"Boundary Conditions Scalar Pipeline",layout:this.device.createPipelineLayout({bindGroupLayouts:[this.getScalarBindGroupLayout()]}),compute:{module:this.scalarShader,entryPoint:"compute_main"}})),this.scalarPipeline}createBindGroupLayout(){return this.getVelocityBindGroupLayout()}createBindGroup(t){throw new Error("Use executeForTexture method instead")}executeForTexture(t,r,o,l,c){const u=r==="velocity",h=u?this.getVelocityPipeline():this.getScalarPipeline(),f=this.uniformManager.updateBuffer(o),m=this.device.createBindGroup({label:`Boundary ${r} Bind Group`,layout:u?this.getVelocityBindGroupLayout():this.getScalarBindGroupLayout(),entries:[{binding:0,resource:l.getCurrentTexture(r).createView()},{binding:1,resource:l.getBackTexture(r).createView()},{binding:2,resource:{buffer:f}}]});t.setPipeline(h),t.setBindGroup(0,m),t.dispatchWorkgroups(c,c)}destroy(){this.velocityPipeline=null,this.scalarPipeline=null,super.destroy()}}class cC extends In{constructor(e,t){super({name:"Add Smoke",entryPoint:"compute_main",shader:e.createShaderModule({label:"Add Smoke Shader",code:Ht(We.ADD_SMOKE,{variables:{WORKGROUP_SIZE:t}})})},e,"Add Smoke Uniforms")}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Add Smoke Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"r32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Add Smoke Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("smokeDensity").createView()},{binding:1,resource:e.textureManager.getBackTexture("smokeDensity").createView()},{binding:2,resource:{buffer:e.uniformBuffer}}]})}}class uC extends In{constructor(e,t){super({name:"Add Velocity",entryPoint:"compute_main",shader:e.createShaderModule({label:"Add Velocity Shader",code:Ht(We.ADD_VELOCITY,{variables:{WORKGROUP_SIZE:t}})})},e,"Add Velocity Uniforms")}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Add Velocity Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Add Velocity Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:2,resource:{buffer:e.uniformBuffer}}]})}}class dC extends In{constructor(e,t){super({name:"Smoke Dissipation",entryPoint:"compute_main",shader:e.createShaderModule({label:"Smoke Dissipation Shader",code:Ht(We.DISSIPATION,{variables:{WORKGROUP_SIZE:t,FORMAT:"r32float",CHANNELS:1}})})},e,"Smoke Dissipation Uniforms")}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Smoke Dissipation Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"r32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Smoke Dissipation Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("smokeDensity").createView()},{binding:1,resource:e.textureManager.getBackTexture("smokeDensity").createView()},{binding:2,resource:{buffer:e.uniformBuffer}}]})}}class hC extends In{constructor(e,t){super({name:"Advect Particles",entryPoint:"compute_main",shader:e.createShaderModule({label:"Advect Particles Shader",code:Ht(We.ADVECT_PARTICLES,{variables:{WORKGROUP_SIZE:t}})})},e,"Advect Particles Uniforms")}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Advect Particles Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Advect Particles Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getCurrentTexture("smokeParticlePosition").createView()},{binding:2,resource:e.textureManager.getBackTexture("smokeParticlePosition").createView()},{binding:3,resource:{buffer:e.uniformBuffer}}]})}}class fC extends In{constructor(e,t){super({name:"Velocity Dissipation",entryPoint:"compute_main",shader:e.createShaderModule({label:"Velocity Dissipation Shader",code:Ht(We.DISSIPATION,{variables:{WORKGROUP_SIZE:t,FORMAT:"rg32float",CHANNELS:2}})})},e,"Velocity Dissipation Uniforms")}createBindGroupLayout(){return this.device.createBindGroupLayout({label:"Velocity Dissipation Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rg32float",access:"write-only",viewDimension:"2d"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]})}createBindGroup(e){return this.validateArgs(e,["textureManager","uniformBuffer"]),this.device.createBindGroup({label:"Velocity Dissipation Bind Group",layout:this.bindGroupLayout,entries:[{binding:0,resource:e.textureManager.getCurrentTexture("velocity").createView()},{binding:1,resource:e.textureManager.getBackTexture("velocity").createView()},{binding:2,resource:{buffer:e.uniformBuffer}}]})}}const kn=4,Sc={grid:{size:{width:2**9,height:2**8},scale:1},compute:{workgroupSize:16,get workgroupCount(){return Math.ceil(Sc.grid.size.width/this.workgroupSize)}},physics:{maxTimestep:1/30,diffusionFactor:10,velocityAdvection:10,smokeAdvection:20,smokeDiffusion:1.1,smokeDissipationFactor:.995,velocityDissipationFactor:.995},interaction:{radius:20,smokeIntensity:.18,velocityIntensity:2},iterations:{diffusion:25,pressure:80},particles:{smokeDimensions:{width:2**7,height:2**7}},noise:{stddev:.08,mean:0},lavaLamp:{spawnAreaHeightPercent:.1,velocityRange:{horizontal:{min:-2,max:2},vertical:{min:1,max:8}},pillDuration:{min:500,max:3e3},pillInterval:50,spawnInterval:{min:1e3,max:3e3},velocityScale:40,subPills:{count:{min:4,max:8},spawnDelay:{min:50,max:100},velocityVariation:1.1,positionVariation:30}}};class Ai{constructor(e,t,r){X(this,"data");X(this,"width");X(this,"height");this.width=e,this.height=t,this.data=new Array(e*t),r!==void 0&&this.data.fill(r)}static fromArray(e,t,r,o=!1){if(e.length!==t*r)throw new Error(`Data length ${e.length} does not match dimensions ${t}x${r}`);const l=new Ai(t,r);if(o){const c=new Array(e.length);for(let u=0;u<r;u++){const h=r-1-u;for(let f=0;f<t;f++){const m=h*t+f,g=u*t+f;c[g]=e[m]}}l.data=c}else l.data=[...e];return l}get(e,t){if(e<0||e>=this.width||t<0||t>=this.height)throw new Error(`Coordinates (${e}, ${t}) out of bounds for ${this.width}x${this.height} array`);return this.data[t*this.width+e]}set(e,t,r){if(e<0||e>=this.width||t<0||t>=this.height)throw new Error(`Coordinates (${e}, ${t}) out of bounds for ${this.width}x${this.height} array`);this.data[t*this.width+e]=r}getIndex(e){if(e<0||e>=this.data.length)throw new Error(`Index ${e} out of bounds for array of length ${this.data.length}`);return this.data[e]}setIndex(e,t){if(e<0||e>=this.data.length)throw new Error(`Index ${e} out of bounds for array of length ${this.data.length}`);this.data[e]=t}get length(){return this.data.length}forEach(e){for(let t=0;t<this.height;t++)for(let r=0;r<this.width;r++){const o=t*this.width+r;e(this.data[o],r,t,o)}}map(e){const t=new Ai(this.width,this.height);return this.forEach((r,o,l,c)=>{t.setIndex(c,e(r,o,l,c))}),t}fill(e){this.data.fill(e)}clone(){return Ai.fromArray(this.data,this.width,this.height)}getAtNormalized(e,t){if(e<0||e>1||t<0||t>1)throw new Error(`Normalized coordinates (${e}, ${t}) must be in range [0, 1]`);const r=Math.floor(e*this.width),o=Math.floor(t*this.height),l=Math.min(r,this.width-1),c=Math.min(o,this.height-1);return this.get(l,c)}}function gv(s,e,t,r=1,o=!1){const l=Math.floor(e/r),c=Math.floor(t/r);if(s.length!==l*c)throw new Error(`Data length ${s.length} does not match expected downsampled dimensions ${l}x${c}`);return Ai.fromArray(Array.from(s),l,c,o)}function pC(s,e,t,r=1,o=!1){const l=Math.floor(e/r),c=Math.floor(t/r);if(s.length!==l*c)throw new Error(`Data length ${s.length} does not match expected downsampled dimensions ${l}x${c}`);return Ai.fromArray(s,l,c,o)}class mC{constructor(e=100){X(this,"bounds",null);X(this,"updateTime",0);X(this,"cacheTimeout");this.cacheTimeout=e}getBounds(e){const t=performance.now();return(!this.bounds||!e||t-this.updateTime>this.cacheTimeout)&&e&&(this.bounds=e.getBoundingClientRect(),this.updateTime=t),this.bounds}clear(){this.bounds=null}}function gC(s,e,t,r){const o=s-t.left,l=e-t.top,c=o/t.width*r.width,u=l/t.height*r.height;return{x:c,y:u}}function Wl(s,e,t,r){const o=s/r.width*t.width,l=e/r.height*t.height,c=o+t.left,u=l+t.top;return{clientX:c,clientY:u}}class vC{constructor(e=100){X(this,"boundsCache");X(this,"canvas",null);X(this,"simulation",null);this.boundsCache=new mC(e)}initialize(e,t){this.canvas=e,this.simulation=t}clearCache(){this.boundsCache.clear()}clientToGrid(e,t){if(!this.canvas||!this.simulation)return null;const r=this.boundsCache.getBounds(this.canvas),o=this.simulation.getGridSize();return!r||!o?null:gC(e,t,r,o)}gridToClient(e,t){if(!this.canvas||!this.simulation)return null;const r=this.boundsCache.getBounds(this.canvas),o=this.simulation.getGridSize();return!r||!o?null:Wl(e,t,r,o)}}function yC(s,e=150){return window.innerHeight-s<=e}function _C(s,e){const{baseX:t,baseY:r,baseVelocityX:o,baseVelocityY:l,baseDuration:c,lavaLampConfig:u,gridSize:h}=s,{simulation:f,canvasBounds:m,isLavaLampMode:g,intervalTracker:y,isWindowFocused:x}=e,w=t+(Math.random()-.5)*2*u.subPills.positionVariation,_=r+(Math.random()-.5)*2*u.subPills.positionVariation,b=u.subPills.velocityVariation,T=o+(Math.random()-.5)*2*Math.abs(o)*b,R=l+(Math.random()-.5)*2*Math.abs(l)*b,L=c+(Math.random()-.5)*c*.4,V=u.pillInterval;let E=0,N=!1;const M=setInterval(()=>{if(!f||!g||!x){if(N){const U=w+T*E/1e3*u.velocityScale,j=_+R*E/1e3*u.velocityScale;Wl(U,j,m,h)}clearInterval(M),y.delete(M);return}const C=w+T*E/1e3*u.velocityScale,O=_+R*E/1e3*u.velocityScale;if(C>=0&&C<h.width&&O>=0&&O<h.height&&(f.addSmoke(C,O),f.addVelocity(C,O,T,R),Wl(C,O,m,h)&&(N||(N=!0))),E+=V,E>=L){if(N){const U=w+T*E/1e3*u.velocityScale,j=_+R*E/1e3*u.velocityScale;Wl(U,j,m,h)}clearInterval(M),y.delete(M)}},V);y.add(M)}function wC(s){const{simulation:e,intervalTracker:t}=s;if(!e)return;const r=e.getGridSize();if(!r)return;const o=Sc.lavaLamp,l=["top","bottom","left","right"],c=l[Math.floor(Math.random()*l.length)];let u,h,f,m;switch(c){case"top":u=Math.random()*r.width,h=Math.random()*(r.height*o.spawnAreaHeightPercent),f=Math.random()*(o.velocityRange.horizontal.max-o.velocityRange.horizontal.min)+o.velocityRange.horizontal.min,m=Math.random()*(o.velocityRange.vertical.max-o.velocityRange.vertical.min)+o.velocityRange.vertical.min;break;case"bottom":u=Math.random()*r.width,h=r.height-Math.random()*(r.height*o.spawnAreaHeightPercent),f=Math.random()*(o.velocityRange.horizontal.max-o.velocityRange.horizontal.min)+o.velocityRange.horizontal.min,m=-(Math.random()*(o.velocityRange.vertical.max-o.velocityRange.vertical.min)+o.velocityRange.vertical.min);break;case"left":u=Math.random()*(r.width*o.spawnAreaHeightPercent),h=Math.random()*r.height,f=Math.random()*(o.velocityRange.vertical.max-o.velocityRange.vertical.min)+o.velocityRange.vertical.min,m=Math.random()*(o.velocityRange.horizontal.max-o.velocityRange.horizontal.min)+o.velocityRange.horizontal.min;break;case"right":u=r.width-Math.random()*(r.width*o.spawnAreaHeightPercent),h=Math.random()*r.height,f=-(Math.random()*(o.velocityRange.vertical.max-o.velocityRange.vertical.min)+o.velocityRange.vertical.min),m=Math.random()*(o.velocityRange.horizontal.max-o.velocityRange.horizontal.min)+o.velocityRange.horizontal.min;break}const g=Math.random()*(o.pillDuration.max-o.pillDuration.min)+o.pillDuration.min,y=Math.floor(Math.random()*(o.subPills.count.max-o.subPills.count.min+1))+o.subPills.count.min;for(let x=0;x<y;x++){const w=Math.random()*(o.subPills.spawnDelay.max-o.subPills.spawnDelay.min)+o.subPills.spawnDelay.min,_=setTimeout(()=>{_C({baseX:u,baseY:h,baseVelocityX:f,baseVelocityY:m,baseDuration:g,lavaLampConfig:o,gridSize:r},s),t.delete(_)},x*w);t.add(_)}}function xC(s,e){const{isLavaLampMode:t,intervalTracker:r,isWindowFocused:o}=s;if(!t||!o)return;const l=Sc.lavaLamp,c=Math.random()*(l.spawnInterval.max-l.spawnInterval.min)+l.spawnInterval.min,u=setTimeout(()=>{s.isWindowFocused&&s.isLavaLampMode?(wC(s),r.delete(u),e()):r.delete(u)},c);r.add(u)}function Rl(s){s.forEach(e=>{clearTimeout(e)}),s.clear()}function SC(s,e){const t={...s.grid,...e.grid},r={...s.compute,...e.compute},o={...r,workgroupCount:Math.ceil(t.size.width/r.workgroupSize)};return{grid:t,compute:o,physics:{...s.physics,...e.physics},interaction:{...s.interaction,...e.interaction},iterations:{...s.iterations,...e.iterations},particles:{...s.particles,...e.particles},noise:{...s.noise,...e.noise},lavaLamp:{...s.lavaLamp,...e.lavaLamp}}}class bC{constructor(e){X(this,"resources",null);X(this,"textureManager",null);X(this,"performanceTracker",new HT);X(this,"gpuTimer",null);X(this,"advectionPass",null);X(this,"smokeAdvectionPass",null);X(this,"smokeDiffusionPass",null);X(this,"smokeDissipationPass",null);X(this,"velocityDissipationPass",null);X(this,"diffusionPass",null);X(this,"divergencePass",null);X(this,"pressurePass",null);X(this,"gradientSubtractionPass",null);X(this,"boundaryConditionsPass",null);X(this,"addSmokePass",null);X(this,"addVelocityPass",null);X(this,"renderingPass",null);X(this,"advectParticlesPass",null);X(this,"isInitialized",!1);X(this,"lastFrameTime",performance.now());X(this,"config");X(this,"smokeColor",[.65,.35,.85]);this.config=SC(Sc,e||{})}setSmokeColor(e){this.smokeColor=e}async initialize(e){if(this.isInitialized){console.warn("Simulation is already initialized");return}if(!e.current)throw new tn("Could not initialize WebGPU: Canvas not found",hr.NO_CANVAS);this.resources=await rf(e.current),this.gpuTimer=new uT(this.resources.device,this.resources.canTimestamp),this.performanceTracker.setGpuSupported(this.resources.canTimestamp),this.textureManager=new nf(this.resources.device),this.textureManager.createPingPongTexture("velocity",{label:"Velocity Texture",size:this.config.grid.size,format:"rg32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC}),this.textureManager.createTexture("divergence",{label:"Divergence texture",size:this.config.grid.size,format:"r32float",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST}),this.textureManager.createPingPongTexture("pressure",{label:"Pressure Texture",size:this.config.grid.size,format:"r32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC}),this.textureManager.createPingPongTexture("smokeParticlePosition",{label:"Smoke Position Texture",size:this.config.particles.smokeDimensions,format:"rg32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST}),this.textureManager.createPingPongTexture("smokeDensity",{label:"Smoke Density Texture",size:this.config.grid.size,format:"r32float",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC}),vv(this.textureManager,this.resources.device,this.config),this.advectionPass=new rC(this.resources.device,this.config.compute.workgroupSize),this.smokeAdvectionPass=new tC(this.resources.device,this.config.compute.workgroupSize),this.smokeDiffusionPass=new nC(this.resources.device,this.config.compute.workgroupSize),this.smokeDissipationPass=new dC(this.resources.device,this.config.compute.workgroupSize),this.velocityDissipationPass=new fC(this.resources.device,this.config.compute.workgroupSize),this.diffusionPass=new sC(this.resources.device,this.config.compute.workgroupSize),this.divergencePass=new iC(this.resources.device,this.config.compute.workgroupSize),this.pressurePass=new oC(this.resources.device,this.config.compute.workgroupSize),this.gradientSubtractionPass=new aC(this.resources.device,this.config.compute.workgroupSize),this.boundaryConditionsPass=new lC(this.resources.device,this.config.compute.workgroupSize),this.advectParticlesPass=new hC(this.resources.device,this.config.compute.workgroupSize),this.addSmokePass=new cC(this.resources.device,this.config.compute.workgroupSize),this.addVelocityPass=new uC(this.resources.device,this.config.compute.workgroupSize);const t=this.resources.device.createShaderModule({label:"Texture Shader",code:Gi(We.TEXTURE)});this.renderingPass=new of({name:"Texture Rendering",vertex:{module:t,entryPoint:"vertex_main"},fragment:{module:t,entryPoint:"fragment_main",targets:[{format:this.resources.canvasFormat}]}},this.resources.device),this.isInitialized=!0,this.step({renderOnly:!0})}step(e={}){var _;const t=performance.now();this.performanceTracker.recordFrame();const r=performance.now(),o=Math.min((r-this.lastFrameTime)/1e3,this.config.physics.maxTimestep);this.lastFrameTime=r,this.performanceTracker.recordTimestep(o);const{renderOnly:l=!1,shaderMode:c=Oi.DENSITY,texture:u="smokeDensity",velocity:h={},smoke:f={}}=e,m={...dT,...h},g={...hT,...f};if(!this.resources||!this.textureManager||!this.advectionPass||!this.diffusionPass||!this.divergencePass||!this.pressurePass||!this.gradientSubtractionPass||!this.smokeAdvectionPass||!this.smokeDiffusionPass||!this.smokeDissipationPass||!this.velocityDissipationPass||!this.boundaryConditionsPass||!this.addSmokePass||!this.addVelocityPass||!this.renderingPass||!this.advectParticlesPass||!this.isInitialized)throw new tn("Could not step simulation: Resources not initialized. Run initialize() first.",hr.NO_RESOURCES);const y=this.resources.device.createCommandEncoder();l||this.executeComputePasses(y,m,g,o),this.resources.context.configure({device:this.resources.device,format:this.resources.canvasFormat});const x=y.beginRenderPass({label:"Texture Render Pass",colorAttachments:[{view:this.resources.context.getCurrentTexture().createView(),loadOp:"clear",storeOp:"store",clearValue:{r:0,g:0,b:0,a:0}}],...((_=this.gpuTimer)==null?void 0:_.getTimestampWrites())&&{timestampWrites:this.gpuTimer.getTimestampWrites()}});this.renderingPass.writeToUniformBuffer({shaderMode:c,noise:{mean:this.config.noise.mean,stddev:this.config.noise.stddev,offsets:[Math.random(),Math.random(),Math.random()]},smokeColor:this.smokeColor}),this.renderingPass.execute(x,{vertexCount:6},{textureManager:this.textureManager,sampler:this.resources.device.createSampler({label:"Render Sampler"}),texture:u}),x.end(),this.gpuTimer&&this.gpuTimer.resolveTimestamps(y),this.resources.device.queue.submit([y.finish()]),this.gpuTimer&&this.gpuTimer.readResults().then(()=>{this.performanceTracker.recordGPU(this.gpuTimer.getLastGpuTime())});const w=performance.now()-t;this.performanceTracker.recordJS(w)}executeComputePasses(e,t,r,o){const l=e.beginComputePass({label:"Compute Pass"});if(t.enableAdvection){const c=new tc(o,this.config.physics.velocityAdvection);this.advectionPass.executeWithUniforms(l,c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("velocity")}if(t.enableDiffusion){const c=new nc(o,this.config.physics.diffusionFactor);this.diffusionPass.executeIterations(l,c,this.textureManager,this.config.compute.workgroupCount,this.config.iterations.diffusion)}if(t.enableDivergence){const c=new Th(this.config.grid.scale);this.divergencePass.executeWithUniforms(l,c,this.textureManager,this.config.compute.workgroupCount)}if(t.enablePressureProjection){const c=new Ch(this.config.grid.scale);this.pressurePass.executeIterations(l,c,this.textureManager,this.config.compute.workgroupCount,this.config.iterations.pressure)}if(t.enablePressureBoundaryConditions){const c=new Uo(Gl.SCALAR_NEUMANN);this.boundaryConditionsPass.executeForTexture(l,"pressure",c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("pressure")}if(t.enableGradientSubtraction){const c=new kh(this.config.grid.scale);this.gradientSubtractionPass.executeWithUniforms(l,c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("velocity")}if(t.enableVelocityBoundaryConditions){const c=new Uo(Gl.NO_SLIP_VELOCITY);this.boundaryConditionsPass.executeForTexture(l,"velocity",c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("velocity")}if(t.enableDissipation){const c=new rc(this.config.physics.velocityDissipationFactor);this.velocityDissipationPass.executeWithUniforms(l,c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("velocity")}if(r.enableAdvection){const c=new tc(o,this.config.physics.smokeAdvection);this.smokeAdvectionPass.executeWithUniforms(l,c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("smokeDensity")}if(r.enableBoundaryConditions){const c=new Uo(Gl.SCALAR_NEUMANN);this.boundaryConditionsPass.executeForTexture(l,"smokeDensity",c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("smokeDensity")}if(r.enableDiffusion){const c=new nc(o,this.config.physics.smokeDiffusion);this.smokeDiffusionPass.executeIterations(l,c,this.textureManager,this.config.compute.workgroupCount,this.config.iterations.diffusion),this.textureManager.swap("smokeDensity")}if(r.enableDissipation){const c=new rc(this.config.physics.smokeDissipationFactor);this.smokeDissipationPass.executeWithUniforms(l,c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("smokeDensity")}if(r.enableAdvectParticles){const c=new Ah(o);this.advectParticlesPass.executeWithUniforms(l,c,this.textureManager,this.config.compute.workgroupCount),this.textureManager.swap("smokeParticlePosition")}l.end()}getPerformanceMetrics(){return this.performanceTracker.getMetrics()}getGridSize(){return this.config.grid.size}async sampleTextures(e=1){if(!this.resources||!this.textureManager||!this.isInitialized)throw new tn("Could not sample textures: Resources not initialized",hr.NO_RESOURCES);const t=this.config.grid.size,r=Math.floor(t.width/e),o=Math.floor(t.height/e),l=r*o,c=this.resources.device.createBuffer({label:"Smoke Density Staging Buffer",size:l*kn,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),u=this.resources.device.createBuffer({label:"Velocity Staging Buffer",size:l*kn*2,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),h=this.resources.device.createBuffer({label:"Pressure Staging Buffer",size:l*kn,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),f=this.resources.device.createCommandEncoder({label:"Texture Sampling Command Encoder"});f.copyTextureToBuffer({texture:this.textureManager.getCurrentTexture("smokeDensity")},{buffer:c,bytesPerRow:r*kn},{width:r,height:o}),f.copyTextureToBuffer({texture:this.textureManager.getCurrentTexture("velocity")},{buffer:u,bytesPerRow:r*kn*2},{width:r,height:o}),f.copyTextureToBuffer({texture:this.textureManager.getCurrentTexture("pressure")},{buffer:h,bytesPerRow:r*kn},{width:r,height:o}),this.resources.device.queue.submit([f.finish()]),await this.resources.device.queue.onSubmittedWorkDone(),await Promise.all([c.mapAsync(GPUMapMode.READ),u.mapAsync(GPUMapMode.READ),h.mapAsync(GPUMapMode.READ)]);const m=new Float32Array(c.getMappedRange()),g=new Float32Array(u.getMappedRange()),y=new Float32Array(h.getMappedRange()),x=[];for(let _=0;_<g.length;_+=2)x.push([g[_],g[_+1]]);const w={smokeDensity:gv(new Float32Array(m),t.width,t.height,e,!0),velocity:pC(x,t.width,t.height,e,!0),pressure:gv(new Float32Array(y),t.width,t.height,e,!0)};return c.unmap(),u.unmap(),h.unmap(),c.destroy(),u.destroy(),h.destroy(),w}reset(e=Oi.DENSITY,t="smokeDensity"){if(!this.resources||!this.textureManager||!this.isInitialized)throw new tn("Could not reset simulation: Resources not initialized",hr.NO_RESOURCES);this.lastFrameTime=performance.now(),vv(this.textureManager,this.resources.device,this.config),this.step({renderOnly:!0,shaderMode:e,texture:t})}addSmoke(e,t){if(!this.resources||!this.textureManager||!this.addSmokePass||!this.isInitialized)return;const r=this.resources.device.createCommandEncoder(),o=new Eh(e,t,this.config.interaction.radius,this.config.interaction.smokeIntensity),l=r.beginComputePass({label:"Add Smoke Compute Pass"});this.addSmokePass.executeWithUniforms(l,o,this.textureManager,this.config.compute.workgroupCount),l.end(),this.textureManager.swap("smokeDensity"),this.resources.device.queue.submit([r.finish()])}addVelocity(e,t,r,o){if(!this.resources||!this.textureManager||!this.addVelocityPass||!this.isInitialized)return;const l=this.resources.device.createCommandEncoder(),c=new Ph(e,t,r,o,this.config.interaction.radius,this.config.interaction.velocityIntensity),u=l.beginComputePass({label:"Add Velocity Compute Pass"});this.addVelocityPass.executeWithUniforms(u,c,this.textureManager,this.config.compute.workgroupCount),u.end(),this.textureManager.swap("velocity"),this.resources.device.queue.submit([l.finish()])}destroy(){var e,t,r,o,l,c,u,h,f,m,g,y,x,w,_,b;this.isInitialized&&((e=this.textureManager)==null||e.destroy(),(t=this.renderingPass)==null||t.destroy(),(r=this.gpuTimer)==null||r.destroy(),(o=this.advectionPass)==null||o.destroy(),(l=this.smokeAdvectionPass)==null||l.destroy(),(c=this.smokeDiffusionPass)==null||c.destroy(),(u=this.smokeDissipationPass)==null||u.destroy(),(h=this.velocityDissipationPass)==null||h.destroy(),(f=this.diffusionPass)==null||f.destroy(),(m=this.divergencePass)==null||m.destroy(),(g=this.pressurePass)==null||g.destroy(),(y=this.gradientSubtractionPass)==null||y.destroy(),(x=this.boundaryConditionsPass)==null||x.destroy(),(w=this.addSmokePass)==null||w.destroy(),(_=this.addVelocityPass)==null||_.destroy(),(b=this.resources)!=null&&b.device&&vr.destroyDevice(this.resources.device),this.resources=null,this.textureManager=null,this.renderingPass=null,console.log("SmokeSimulation destroyed"),this.isInitialized=!1)}}function vv(s,e,t){const r=t.grid.size,o=t.particles.smokeDimensions,l=r.width*r.height,c=o.width*o.height,u=new Float32Array(l*2),h=new Float32Array(l),f=new Float32Array(l),m=new Float32Array(c*2);for(let b=0;b<o.height;b++)for(let T=0;T<o.width;T++){const R=(T+b*o.width)*2;m[R]=T/o.width*r.width,m[R+1]=b/o.height*r.height}const g=s.getCurrentTexture("velocity");e.queue.writeTexture({texture:g},u,{bytesPerRow:r.width*2*kn},r);const y=s.getCurrentTexture("smokeDensity");e.queue.writeTexture({texture:y},h,{bytesPerRow:r.width*kn},r);const x=s.getCurrentTexture("smokeParticlePosition");e.queue.writeTexture({texture:x},m,{bytesPerRow:o.width*kn*2},o);const w=s.getCurrentTexture("pressure"),_=s.getBackTexture("pressure");e.queue.writeTexture({texture:w},f,{bytesPerRow:r.width*kn},r),e.queue.writeTexture({texture:_},f,{bytesPerRow:r.width*kn},r)}class TC extends Error{constructor(e){super(`AudioVisualizationMediator: ${e}`)}}const By="15.1.22",yv=(s,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:s}),_v=(s,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:s}),Rh=(s,e)=>({startTime:e,type:"setValue",value:s}),zy=(s,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:s}),Uy=(s,e,{startTime:t,target:r,timeConstant:o})=>r+(e-r)*Math.exp((t-s)/o),vi=s=>s.type==="exponentialRampToValue",sc=s=>s.type==="linearRampToValue",Wr=s=>vi(s)||sc(s),lf=s=>s.type==="setValue",ur=s=>s.type==="setValueCurve",ic=(s,e,t,r)=>{const o=s[e];return o===void 0?r:Wr(o)||lf(o)?o.value:ur(o)?o.values[o.values.length-1]:Uy(t,ic(s,e-1,o.startTime,r),o)},wv=(s,e,t,r,o)=>t===void 0?[r.insertTime,o]:Wr(t)?[t.endTime,t.value]:lf(t)?[t.startTime,t.value]:ur(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,ic(s,e-1,t.startTime,o)],Mh=s=>s.type==="cancelAndHold",Oh=s=>s.type==="cancelScheduledValues",jr=s=>Mh(s)||Oh(s)?s.cancelTime:vi(s)||sc(s)?s.endTime:s.startTime,xv=(s,e,t,{endTime:r,value:o})=>t===o?o:0<t&&0<o||t<0&&o<0?t*(o/t)**((s-e)/(r-e)):0,Sv=(s,e,t,{endTime:r,value:o})=>t+(s-e)/(r-e)*(o-t),CC=(s,e)=>{const t=Math.floor(e),r=Math.ceil(e);return t===r?s[t]:(1-(e-t))*s[t]+(1-(r-e))*s[r]},kC=(s,{duration:e,startTime:t,values:r})=>{const o=(s-t)/e*(r.length-1);return CC(r,o)},Ml=s=>s.type==="setTarget";class EC{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=jr(e);if(Mh(e)||Oh(e)){const r=this._automationEvents.findIndex(l=>Oh(e)&&ur(l)?l.startTime+l.duration>=t:jr(l)>=t),o=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),Mh(e)){const l=this._automationEvents[this._automationEvents.length-1];if(o!==void 0&&Wr(o)){if(l!==void 0&&Ml(l))throw new Error("The internal list is malformed.");const c=l===void 0?o.insertTime:ur(l)?l.startTime+l.duration:jr(l),u=l===void 0?this._defaultValue:ur(l)?l.values[l.values.length-1]:l.value,h=vi(o)?xv(t,c,u,o):Sv(t,c,u,o),f=vi(o)?yv(h,t,this._currenTime):_v(h,t,this._currenTime);this._automationEvents.push(f)}if(l!==void 0&&Ml(l)&&this._automationEvents.push(Rh(this.getValue(t),t)),l!==void 0&&ur(l)&&l.startTime+l.duration>t){const c=t-l.startTime,u=(l.values.length-1)/l.duration,h=Math.max(2,1+Math.ceil(c*u)),f=c/(h-1)*u,m=l.values.slice(0,h);if(f<1)for(let g=1;g<h;g+=1){const y=f*g%1;m[g]=l.values[g-1]*(1-y)+l.values[g]*y}this._automationEvents[this._automationEvents.length-1]=zy(m,l.startTime,c)}}}else{const r=this._automationEvents.findIndex(c=>jr(c)>t),o=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(o!==void 0&&ur(o)&&jr(o)+o.duration>t)return!1;const l=vi(e)?yv(e.value,e.endTime,this._currenTime):sc(e)?_v(e.value,t,this._currenTime):e;if(r===-1)this._automationEvents.push(l);else{if(ur(e)&&t+e.duration>jr(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,l)}}return!0}flush(e){const t=this._automationEvents.findIndex(r=>jr(r)>e);if(t>1){const r=this._automationEvents.slice(t-1),o=r[0];Ml(o)&&r.unshift(Rh(ic(this._automationEvents,t-2,o.startTime,this._defaultValue),o.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(c=>jr(c)>e),r=this._automationEvents[t],o=(t===-1?this._automationEvents.length:t)-1,l=this._automationEvents[o];if(l!==void 0&&Ml(l)&&(r===void 0||!Wr(r)||r.insertTime>e))return Uy(e,ic(this._automationEvents,o-1,l.startTime,this._defaultValue),l);if(l!==void 0&&lf(l)&&(r===void 0||!Wr(r)))return l.value;if(l!==void 0&&ur(l)&&(r===void 0||!Wr(r)||l.startTime+l.duration>e))return e<l.startTime+l.duration?kC(e,l):l.values[l.values.length-1];if(l!==void 0&&Wr(l)&&(r===void 0||!Wr(r)))return l.value;if(r!==void 0&&vi(r)){const[c,u]=wv(this._automationEvents,o,l,r,this._defaultValue);return xv(e,c,u,r)}if(r!==void 0&&sc(r)){const[c,u]=wv(this._automationEvents,o,l,r,this._defaultValue);return Sv(e,c,u,r)}return this._defaultValue}}const PC=s=>({cancelTime:s,type:"cancelAndHold"}),AC=s=>({cancelTime:s,type:"cancelScheduledValues"}),NC=(s,e)=>({endTime:e,type:"exponentialRampToValue",value:s}),RC=(s,e)=>({endTime:e,type:"linearRampToValue",value:s}),MC=(s,e,t)=>({startTime:e,target:s,timeConstant:t,type:"setTarget"}),OC=()=>new DOMException("","AbortError"),IC=s=>(e,t,[r,o,l],c)=>{s(e[o],[t,r,l],u=>u[0]===t&&u[1]===r,c)},DC=s=>(e,t,r)=>{const o=[];for(let l=0;l<r.numberOfInputs;l+=1)o.push(new Set);s.set(e,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},LC=s=>(e,t)=>{s.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},Ii=new WeakSet,jy=new WeakMap,cf=new WeakMap,Gy=new WeakMap,uf=new WeakMap,bc=new WeakMap,Wy=new WeakMap,Ih=new WeakMap,Dh=new WeakMap,Lh=new WeakMap,$y={construct(){return $y}},FC=s=>{try{const e=new Proxy(s,$y);new e}catch{return!1}return!0},bv=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Tv=(s,e)=>{const t=[];let r=s.replace(/^[\s]+/,""),o=r.match(bv);for(;o!==null;){const l=o[1].slice(1,-1),c=o[0].replace(/([\s]+)?;?$/,"").replace(l,new URL(l,e).toString());t.push(c),r=r.slice(o[0].length).replace(/^[\s]+/,""),o=r.match(bv)}return[t.join(";"),r]},Cv=s=>{if(s!==void 0&&!Array.isArray(s))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},kv=s=>{if(!FC(s))throw new TypeError("The given value for processorCtor should be a constructor.");if(s.prototype===null||typeof s.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},VC=(s,e,t,r,o,l,c,u,h,f,m,g,y)=>{let x=0;return(w,_,b={credentials:"omit"})=>{const T=m.get(w);if(T!==void 0&&T.has(_))return Promise.resolve();const R=f.get(w);if(R!==void 0){const E=R.get(_);if(E!==void 0)return E}const L=l(w),V=L.audioWorklet===void 0?o(_).then(([E,N])=>{const[M,C]=Tv(E,N),O=`${M};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${C}
})})(window,'_AWGS')`;return t(O)}).then(()=>{const E=y._AWGS.pop();if(E===void 0)throw new SyntaxError;r(L.currentTime,L.sampleRate,()=>E(class{},void 0,(N,M)=>{if(N.trim()==="")throw e();const C=Dh.get(L);if(C!==void 0){if(C.has(N))throw e();kv(M),Cv(M.parameterDescriptors),C.set(N,M)}else kv(M),Cv(M.parameterDescriptors),Dh.set(L,new Map([[N,M]]))},L.sampleRate,void 0,void 0))}):Promise.all([o(_),Promise.resolve(s(g,g))]).then(([[E,N],M])=>{const C=x+1;x=C;const[O,U]=Tv(E,N),ee=`${O};((AudioWorkletProcessor,registerProcessor)=>{${U}
})(${M?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${M?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${M?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${C}',class extends AudioWorkletProcessor{process(){return !1}})`,te=new Blob([ee],{type:"application/javascript; charset=utf-8"}),K=URL.createObjectURL(te);return L.audioWorklet.addModule(K,b).then(()=>{if(u(L))return L;const J=c(L);return J.audioWorklet.addModule(K,b).then(()=>J)}).then(J=>{if(h===null)throw new SyntaxError;try{new h(J,`__sac${C}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(K))});return R===void 0?f.set(w,new Map([[_,V]])):R.set(_,V),V.then(()=>{const E=m.get(w);E===void 0?m.set(w,new Set([_])):E.add(_)}).finally(()=>{const E=f.get(w);E!==void 0&&E.delete(_)}),V}},Nn=(s,e)=>{const t=s.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},Tc=(s,e)=>{const t=Array.from(s).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[r]=t;return s.delete(r),r},qy=(s,e,t,r)=>{const o=Nn(s,e),l=Tc(o,c=>c[0]===t&&c[1]===r);return o.size===0&&s.delete(e),l},na=s=>Nn(Wy,s),Di=s=>{if(Ii.has(s))throw new Error("The AudioNode is already stored.");Ii.add(s),na(s).forEach(e=>e(!0))},Hy=s=>"port"in s,ra=s=>{if(!Ii.has(s))throw new Error("The AudioNode is not stored.");Ii.delete(s),na(s).forEach(e=>e(!1))},Fh=(s,e)=>{!Hy(s)&&e.every(t=>t.size===0)&&ra(s)},BC=(s,e,t,r,o,l,c,u,h,f,m,g,y)=>{const x=new WeakMap;return(w,_,b,T,R)=>{const{activeInputs:L,passiveInputs:V}=l(_),{outputs:E}=l(w),N=u(w),M=C=>{const O=h(_),U=h(w);if(C){const j=qy(V,w,b,T);s(L,w,j,!1),!R&&!g(w)&&t(U,O,b,T),y(_)&&Di(_)}else{const j=r(L,w,b,T);e(V,T,j,!1),!R&&!g(w)&&o(U,O,b,T);const B=c(_);if(B===0)m(_)&&Fh(_,L);else{const q=x.get(_);q!==void 0&&clearTimeout(q),x.set(_,setTimeout(()=>{m(_)&&Fh(_,L)},B*1e3))}}};return f(E,[_,b,T],C=>C[0]===_&&C[1]===b&&C[2]===T,!0)?(N.add(M),m(w)?s(L,w,[b,T,M],!0):e(V,T,[w,b,M],!0),!0):!1}},zC=s=>(e,t,[r,o,l],c)=>{const u=e.get(r);u===void 0?e.set(r,new Set([[o,t,l]])):s(u,[o,t,l],h=>h[0]===o&&h[1]===t,c)},UC=s=>(e,t)=>{const r=s(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(r).connect(e.destination);const o=()=>{t.removeEventListener("ended",o),t.disconnect(r),r.disconnect()};t.addEventListener("ended",o)},jC=s=>(e,t)=>{s(e).add(t)},GC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},WC=(s,e,t,r,o,l)=>class extends s{constructor(u,h){const f=o(u),m={...GC,...h},g=r(f,m),y=l(f)?e():null;super(u,!1,g,y),this._nativeAnalyserNode=g}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(u){this._nativeAnalyserNode.fftSize=u}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(u){const h=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=u,!(u>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=h,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(u){const h=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=u,!(this._nativeAnalyserNode.maxDecibels>u))throw this._nativeAnalyserNode.minDecibels=h,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(u){this._nativeAnalyserNode.smoothingTimeConstant=u}getByteFrequencyData(u){this._nativeAnalyserNode.getByteFrequencyData(u)}getByteTimeDomainData(u){this._nativeAnalyserNode.getByteTimeDomainData(u)}getFloatFrequencyData(u){this._nativeAnalyserNode.getFloatFrequencyData(u)}getFloatTimeDomainData(u){this._nativeAnalyserNode.getFloatTimeDomainData(u)}},Ot=(s,e)=>s.context===e,$C=(s,e,t)=>()=>{const r=new WeakMap,o=async(l,c)=>{let u=e(l);if(!Ot(u,c)){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,fftSize:u.fftSize,maxDecibels:u.maxDecibels,minDecibels:u.minDecibels,smoothingTimeConstant:u.smoothingTimeConstant};u=s(c,f)}return r.set(c,u),await t(l,c,u),u};return{render(l,c){const u=r.get(c);return u!==void 0?Promise.resolve(u):o(l,c)}}},oc=s=>{try{s.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Kn=()=>new DOMException("","IndexSizeError"),df=s=>{s.getChannelData=(e=>t=>{try{return e.call(s,t)}catch(r){throw r.code===12?Kn():r}})(s.getChannelData)},qC={numberOfChannels:1},HC=(s,e,t,r,o,l,c,u)=>{let h=null;return class Yy{constructor(m){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:g,numberOfChannels:y,sampleRate:x}={...qC,...m};h===null&&(h=new o(1,1,44100));const w=r!==null&&e(l,l)?new r({length:g,numberOfChannels:y,sampleRate:x}):h.createBuffer(y,g,x);if(w.numberOfChannels===0)throw t();return typeof w.copyFromChannel!="function"?(c(w),df(w)):e(oc,()=>oc(w))||u(w),s.add(w),w}static[Symbol.hasInstance](m){return m!==null&&typeof m=="object"&&Object.getPrototypeOf(m)===Yy.prototype||s.has(m)}}},Jt=-34028234663852886e22,Lt=34028234663852886e22,pr=s=>Ii.has(s),YC={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},XC=(s,e,t,r,o,l,c,u)=>class extends s{constructor(f,m){const g=l(f),y={...YC,...m},x=o(g,y),w=c(g),_=w?e():null;super(f,!1,x,_),this._audioBufferSourceNodeRenderer=_,this._isBufferNullified=!1,this._isBufferSet=y.buffer!==null,this._nativeAudioBufferSourceNode=x,this._onended=null,this._playbackRate=t(this,w,x.playbackRate,Lt,Jt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(f){if(this._nativeAudioBufferSourceNode.buffer=f,f!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(f){this._nativeAudioBufferSourceNode.loop=f}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(f){this._nativeAudioBufferSourceNode.loopEnd=f}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(f){this._nativeAudioBufferSourceNode.loopStart=f}get onended(){return this._onended}set onended(f){const m=typeof f=="function"?u(this,f):null;this._nativeAudioBufferSourceNode.onended=m;const g=this._nativeAudioBufferSourceNode.onended;this._onended=g!==null&&g===m?f:g}get playbackRate(){return this._playbackRate}start(f=0,m=0,g){if(this._nativeAudioBufferSourceNode.start(f,m,g),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=g===void 0?[f,m]:[f,m,g]),this.context.state!=="closed"){Di(this);const y=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",y),pr(this)&&ra(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",y)}}stop(f=0){this._nativeAudioBufferSourceNode.stop(f),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=f)}},KC=(s,e,t,r,o)=>()=>{const l=new WeakMap;let c=null,u=null;const h=async(f,m)=>{let g=t(f);const y=Ot(g,m);if(!y){const x={buffer:g.buffer,channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,loop:g.loop,loopEnd:g.loopEnd,loopStart:g.loopStart,playbackRate:g.playbackRate.value};g=e(m,x),c!==null&&g.start(...c),u!==null&&g.stop(u)}return l.set(m,g),y?await s(m,f.playbackRate,g.playbackRate):await r(m,f.playbackRate,g.playbackRate),await o(f,m,g),g};return{set start(f){c=f},set stop(f){u=f},render(f,m){const g=l.get(m);return g!==void 0?Promise.resolve(g):h(f,m)}}},ZC=s=>"playbackRate"in s,QC=s=>"frequency"in s&&"gain"in s,JC=s=>"offset"in s,e1=s=>!("frequency"in s)&&"gain"in s,t1=s=>"detune"in s&&"frequency"in s&&!("gain"in s),n1=s=>"pan"in s,Ft=s=>Nn(jy,s),sa=s=>Nn(Gy,s),Vh=(s,e)=>{const{activeInputs:t}=Ft(s);t.forEach(o=>o.forEach(([l])=>{e.includes(s)||Vh(l,[...e,s])}));const r=ZC(s)?[s.playbackRate]:Hy(s)?Array.from(s.parameters.values()):QC(s)?[s.Q,s.detune,s.frequency,s.gain]:JC(s)?[s.offset]:e1(s)?[s.gain]:t1(s)?[s.detune,s.frequency]:n1(s)?[s.pan]:[];for(const o of r){const l=sa(o);l!==void 0&&l.activeInputs.forEach(([c])=>Vh(c,e))}pr(s)&&ra(s)},Xy=s=>{Vh(s.destination,[])},r1=s=>s===void 0||typeof s=="number"||typeof s=="string"&&(s==="balanced"||s==="interactive"||s==="playback"),s1=(s,e,t,r,o,l,c,u,h)=>class extends s{constructor(m={}){if(h===null)throw new Error("Missing the native AudioContext constructor.");let g;try{g=new h(m)}catch(w){throw w.code===12&&w.message==="sampleRate is not in range"?t():w}if(g===null)throw r();if(!r1(m.latencyHint))throw new TypeError(`The provided value '${m.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(m.sampleRate!==void 0&&g.sampleRate!==m.sampleRate)throw t();super(g,2);const{latencyHint:y}=m,{sampleRate:x}=g;if(this._baseLatency=typeof g.baseLatency=="number"?g.baseLatency:y==="balanced"?512/x:y==="interactive"||y===void 0?256/x:y==="playback"?1024/x:Math.max(2,Math.min(128,Math.round(y*x/128)))*128/x,this._nativeAudioContext=g,h.name==="webkitAudioContext"?(this._nativeGainNode=g.createGain(),this._nativeOscillatorNode=g.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(g.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,g.state==="running"){this._state="suspended";const w=()=>{this._state==="suspended"&&(this._state=null),g.removeEventListener("statechange",w)};g.addEventListener("statechange",w)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Xy(this)}))}createMediaElementSource(m){return new o(this,{mediaElement:m})}createMediaStreamDestination(){return new l(this)}createMediaStreamSource(m){return new c(this,{mediaStream:m})}createMediaStreamTrackSource(m){return new u(this,{mediaStreamTrack:m})}resume(){return this._state==="suspended"?new Promise((m,g)=>{const y=()=>{this._nativeAudioContext.removeEventListener("statechange",y),this._nativeAudioContext.state==="running"?m():this.resume().then(m,g)};this._nativeAudioContext.addEventListener("statechange",y)}):this._nativeAudioContext.resume().catch(m=>{throw m===void 0||m.code===15?e():m})}suspend(){return this._nativeAudioContext.suspend().catch(m=>{throw m===void 0?e():m})}},i1=(s,e,t,r,o,l,c,u)=>class extends s{constructor(f,m){const g=l(f),y=c(g),x=o(g,m,y),w=y?e(u):null;super(f,!1,x,w),this._isNodeOfNativeOfflineAudioContext=y,this._nativeAudioDestinationNode=x}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(f){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(f>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=f}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(f){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=f}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},o1=s=>{const e=new WeakMap,t=async(r,o)=>{const l=o.destination;return e.set(o,l),await s(r,o,l),l};return{render(r,o){const l=e.get(o);return l!==void 0?Promise.resolve(l):t(r,o)}}},a1=(s,e,t,r,o,l,c,u)=>(h,f)=>{const m=f.listener,g=()=>{const E=new Float32Array(1),N=e(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),M=c(f);let C=!1,O=[0,0,-1,0,1,0],U=[0,0,0];const j=()=>{if(C)return;C=!0;const te=r(f,256,9,0);te.onaudioprocess=({inputBuffer:K})=>{const J=[l(K,E,0),l(K,E,1),l(K,E,2),l(K,E,3),l(K,E,4),l(K,E,5)];J.some((Z,Y)=>Z!==O[Y])&&(m.setOrientation(...J),O=J);const z=[l(K,E,6),l(K,E,7),l(K,E,8)];z.some((Z,Y)=>Z!==U[Y])&&(m.setPosition(...z),U=z)},N.connect(te)},B=te=>K=>{K!==O[te]&&(O[te]=K,m.setOrientation(...O))},q=te=>K=>{K!==U[te]&&(U[te]=K,m.setPosition(...U))},ee=(te,K,J)=>{const z=t(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:K});z.connect(N,0,te),z.start(),Object.defineProperty(z.offset,"defaultValue",{get(){return K}});const Z=s({context:h},M,z.offset,Lt,Jt);return u(Z,"value",Y=>()=>Y.call(Z),Y=>P=>{try{Y.call(Z,P)}catch($){if($.code!==9)throw $}j(),M&&J(P)}),Z.cancelAndHoldAtTime=(Y=>M?()=>{throw o()}:(...P)=>{const $=Y.apply(Z,P);return j(),$})(Z.cancelAndHoldAtTime),Z.cancelScheduledValues=(Y=>M?()=>{throw o()}:(...P)=>{const $=Y.apply(Z,P);return j(),$})(Z.cancelScheduledValues),Z.exponentialRampToValueAtTime=(Y=>M?()=>{throw o()}:(...P)=>{const $=Y.apply(Z,P);return j(),$})(Z.exponentialRampToValueAtTime),Z.linearRampToValueAtTime=(Y=>M?()=>{throw o()}:(...P)=>{const $=Y.apply(Z,P);return j(),$})(Z.linearRampToValueAtTime),Z.setTargetAtTime=(Y=>M?()=>{throw o()}:(...P)=>{const $=Y.apply(Z,P);return j(),$})(Z.setTargetAtTime),Z.setValueAtTime=(Y=>M?()=>{throw o()}:(...P)=>{const $=Y.apply(Z,P);return j(),$})(Z.setValueAtTime),Z.setValueCurveAtTime=(Y=>M?()=>{throw o()}:(...P)=>{const $=Y.apply(Z,P);return j(),$})(Z.setValueCurveAtTime),Z};return{forwardX:ee(0,0,B(0)),forwardY:ee(1,0,B(1)),forwardZ:ee(2,-1,B(2)),positionX:ee(6,0,q(0)),positionY:ee(7,0,q(1)),positionZ:ee(8,0,q(2)),upX:ee(3,0,B(3)),upY:ee(4,1,B(4)),upZ:ee(5,0,B(5))}},{forwardX:y,forwardY:x,forwardZ:w,positionX:_,positionY:b,positionZ:T,upX:R,upY:L,upZ:V}=m.forwardX===void 0?g():m;return{get forwardX(){return y},get forwardY(){return x},get forwardZ(){return w},get positionX(){return _},get positionY(){return b},get positionZ(){return T},get upX(){return R},get upY(){return L},get upZ(){return V}}},ac=s=>"context"in s,ia=s=>ac(s[0]),Os=(s,e,t,r)=>{for(const o of s)if(t(o)){if(r)return!1;throw Error("The set contains at least one similar element.")}return s.add(e),!0},Ev=(s,e,[t,r],o)=>{Os(s,[e,t,r],l=>l[0]===e&&l[1]===t,o)},Pv=(s,[e,t,r],o)=>{const l=s.get(e);l===void 0?s.set(e,new Set([[t,r]])):Os(l,[t,r],c=>c[0]===t,o)},Wi=s=>"inputs"in s,lc=(s,e,t,r)=>{if(Wi(e)){const o=e.inputs[r];return s.connect(o,t,0),[o,t,0]}return s.connect(e,t,r),[e,t,r]},Ky=(s,e,t)=>{for(const r of s)if(r[0]===e&&r[1]===t)return s.delete(r),r;return null},l1=(s,e,t)=>Tc(s,r=>r[0]===e&&r[1]===t),Zy=(s,e)=>{if(!na(s).delete(e))throw new Error("Missing the expected event listener.")},Qy=(s,e,t)=>{const r=Nn(s,e),o=Tc(r,l=>l[0]===t);return r.size===0&&s.delete(e),o},cc=(s,e,t,r)=>{Wi(e)?s.disconnect(e.inputs[r],t,0):s.disconnect(e,t,r)},et=s=>Nn(cf,s),Ko=s=>Nn(uf,s),Ps=s=>Ih.has(s),$l=s=>!Ii.has(s),Av=(s,e)=>new Promise(t=>{if(e!==null)t(!0);else{const r=s.createScriptProcessor(256,1,1),o=s.createGain(),l=s.createBuffer(1,2,44100),c=l.getChannelData(0);c[0]=1,c[1]=1;const u=s.createBufferSource();u.buffer=l,u.loop=!0,u.connect(r).connect(s.destination),u.connect(o),u.disconnect(o),r.onaudioprocess=h=>{const f=h.inputBuffer.getChannelData(0);Array.prototype.some.call(f,m=>m===1)?t(!0):t(!1),u.stop(),r.onaudioprocess=null,u.disconnect(r),r.disconnect(s.destination)},u.start()}}),ih=(s,e)=>{const t=new Map;for(const r of s)for(const o of r){const l=t.get(o);t.set(o,l===void 0?1:l+1)}t.forEach((r,o)=>e(o,r))},uc=s=>"context"in s,c1=s=>{const e=new Map;s.connect=(t=>(r,o=0,l=0)=>{const c=uc(r)?t(r,o,l):t(r,o),u=e.get(r);return u===void 0?e.set(r,[{input:l,output:o}]):u.every(h=>h.input!==l||h.output!==o)&&u.push({input:l,output:o}),c})(s.connect.bind(s)),s.disconnect=(t=>(r,o,l)=>{if(t.apply(s),r===void 0)e.clear();else if(typeof r=="number")for(const[c,u]of e){const h=u.filter(f=>f.output!==r);h.length===0?e.delete(c):e.set(c,h)}else if(e.has(r))if(o===void 0)e.delete(r);else{const c=e.get(r);if(c!==void 0){const u=c.filter(h=>h.output!==o&&(h.input!==l||l===void 0));u.length===0?e.delete(r):e.set(r,u)}}for(const[c,u]of e)u.forEach(h=>{uc(c)?s.connect(c,h.output,h.input):s.connect(c,h.output)})})(s.disconnect)},u1=(s,e,t,r)=>{const{activeInputs:o,passiveInputs:l}=sa(e),{outputs:c}=Ft(s),u=na(s),h=f=>{const m=et(s),g=Ko(e);if(f){const y=Qy(l,s,t);Ev(o,s,y,!1),!r&&!Ps(s)&&m.connect(g,t)}else{const y=l1(o,s,t);Pv(l,y,!1),!r&&!Ps(s)&&m.disconnect(g,t)}};return Os(c,[e,t],f=>f[0]===e&&f[1]===t,!0)?(u.add(h),pr(s)?Ev(o,s,[t,h],!0):Pv(l,[s,t,h],!0),!0):!1},d1=(s,e,t,r)=>{const{activeInputs:o,passiveInputs:l}=Ft(e),c=Ky(o[r],s,t);return c===null?[qy(l,s,t,r)[2],!1]:[c[2],!0]},h1=(s,e,t)=>{const{activeInputs:r,passiveInputs:o}=sa(e),l=Ky(r,s,t);return l===null?[Qy(o,s,t)[1],!1]:[l[2],!0]},hf=(s,e,t,r,o)=>{const[l,c]=d1(s,t,r,o);if(l!==null&&(Zy(s,l),c&&!e&&!Ps(s)&&cc(et(s),et(t),r,o)),pr(t)){const{activeInputs:u}=Ft(t);Fh(t,u)}},ff=(s,e,t,r)=>{const[o,l]=h1(s,t,r);o!==null&&(Zy(s,o),l&&!e&&!Ps(s)&&et(s).disconnect(Ko(t),r))},f1=(s,e)=>{const t=Ft(s),r=[];for(const o of t.outputs)ia(o)?hf(s,e,...o):ff(s,e,...o),r.push(o[0]);return t.outputs.clear(),r},p1=(s,e,t)=>{const r=Ft(s),o=[];for(const l of r.outputs)l[1]===t&&(ia(l)?hf(s,e,...l):ff(s,e,...l),o.push(l[0]),r.outputs.delete(l));return o},m1=(s,e,t,r,o)=>{const l=Ft(s);return Array.from(l.outputs).filter(c=>c[0]===t&&(r===void 0||c[1]===r)&&(o===void 0||c[2]===o)).map(c=>(ia(c)?hf(s,e,...c):ff(s,e,...c),l.outputs.delete(c),c[0]))},g1=(s,e,t,r,o,l,c,u,h,f,m,g,y,x,w,_)=>class extends f{constructor(T,R,L,V){super(L),this._context=T,this._nativeAudioNode=L;const E=m(T);g(E)&&t(Av,()=>Av(E,_))!==!0&&c1(L),cf.set(this,L),Wy.set(this,new Set),T.state!=="closed"&&R&&Di(this),s(this,V,L)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(T){this._nativeAudioNode.channelCount=T}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(T){this._nativeAudioNode.channelCountMode=T}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(T){this._nativeAudioNode.channelInterpretation=T}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(T,R=0,L=0){if(R<0||R>=this._nativeAudioNode.numberOfOutputs)throw o();const V=m(this._context),E=w(V);if(y(T)||x(T))throw l();if(ac(T)){const C=et(T);try{const U=lc(this._nativeAudioNode,C,R,L),j=$l(this);(E||j)&&this._nativeAudioNode.disconnect(...U),this.context.state!=="closed"&&!j&&$l(T)&&Di(T)}catch(U){throw U.code===12?l():U}if(e(this,T,R,L,E)){const U=h([this],T);ih(U,r(E))}return T}const N=Ko(T);if(N.name==="playbackRate"&&N.maxValue===1024)throw c();try{this._nativeAudioNode.connect(N,R),(E||$l(this))&&this._nativeAudioNode.disconnect(N,R)}catch(C){throw C.code===12?l():C}if(u1(this,T,R,E)){const C=h([this],T);ih(C,r(E))}}disconnect(T,R,L){let V;const E=m(this._context),N=w(E);if(T===void 0)V=f1(this,N);else if(typeof T=="number"){if(T<0||T>=this.numberOfOutputs)throw o();V=p1(this,N,T)}else{if(R!==void 0&&(R<0||R>=this.numberOfOutputs)||ac(T)&&L!==void 0&&(L<0||L>=T.numberOfInputs))throw o();if(V=m1(this,N,T,R,L),V.length===0)throw l()}for(const M of V){const C=h([this],M);ih(C,u)}}},v1=(s,e,t,r,o,l,c,u,h,f,m,g,y)=>(x,w,_,b=null,T=null)=>{const R=_.value,L=new EC(R),V=w?r(L):null,E={get defaultValue(){return R},get maxValue(){return b===null?_.maxValue:b},get minValue(){return T===null?_.minValue:T},get value(){return _.value},set value(N){_.value=N,E.setValueAtTime(N,x.context.currentTime)},cancelAndHoldAtTime(N){if(typeof _.cancelAndHoldAtTime=="function")V===null&&L.flush(x.context.currentTime),L.add(o(N)),_.cancelAndHoldAtTime(N);else{const M=Array.from(L).pop();V===null&&L.flush(x.context.currentTime),L.add(o(N));const C=Array.from(L).pop();_.cancelScheduledValues(N),M!==C&&C!==void 0&&(C.type==="exponentialRampToValue"?_.exponentialRampToValueAtTime(C.value,C.endTime):C.type==="linearRampToValue"?_.linearRampToValueAtTime(C.value,C.endTime):C.type==="setValue"?_.setValueAtTime(C.value,C.startTime):C.type==="setValueCurve"&&_.setValueCurveAtTime(C.values,C.startTime,C.duration))}return E},cancelScheduledValues(N){return V===null&&L.flush(x.context.currentTime),L.add(l(N)),_.cancelScheduledValues(N),E},exponentialRampToValueAtTime(N,M){if(N===0)throw new RangeError;if(!Number.isFinite(M)||M<0)throw new RangeError;const C=x.context.currentTime;return V===null&&L.flush(C),Array.from(L).length===0&&(L.add(f(R,C)),_.setValueAtTime(R,C)),L.add(c(N,M)),_.exponentialRampToValueAtTime(N,M),E},linearRampToValueAtTime(N,M){const C=x.context.currentTime;return V===null&&L.flush(C),Array.from(L).length===0&&(L.add(f(R,C)),_.setValueAtTime(R,C)),L.add(u(N,M)),_.linearRampToValueAtTime(N,M),E},setTargetAtTime(N,M,C){return V===null&&L.flush(x.context.currentTime),L.add(h(N,M,C)),_.setTargetAtTime(N,M,C),E},setValueAtTime(N,M){return V===null&&L.flush(x.context.currentTime),L.add(f(N,M)),_.setValueAtTime(N,M),E},setValueCurveAtTime(N,M,C){const O=N instanceof Float32Array?N:new Float32Array(N);if(g!==null&&g.name==="webkitAudioContext"){const U=M+C,j=x.context.sampleRate,B=Math.ceil(M*j),q=Math.floor(U*j),ee=q-B,te=new Float32Array(ee);for(let J=0;J<ee;J+=1){const z=(O.length-1)/C*((B+J)/j-M),Z=Math.floor(z),Y=Math.ceil(z);te[J]=Z===Y?O[Z]:(1-(z-Z))*O[Z]+(1-(Y-z))*O[Y]}V===null&&L.flush(x.context.currentTime),L.add(m(te,M,C)),_.setValueCurveAtTime(te,M,C);const K=q/j;K<U&&y(E,te[te.length-1],K),y(E,O[O.length-1],U)}else V===null&&L.flush(x.context.currentTime),L.add(m(O,M,C)),_.setValueCurveAtTime(O,M,C);return E}};return t.set(E,_),e.set(E,x),s(E,V),E},y1=s=>({replay(e){for(const t of s)if(t.type==="exponentialRampToValue"){const{endTime:r,value:o}=t;e.exponentialRampToValueAtTime(o,r)}else if(t.type==="linearRampToValue"){const{endTime:r,value:o}=t;e.linearRampToValueAtTime(o,r)}else if(t.type==="setTarget"){const{startTime:r,target:o,timeConstant:l}=t;e.setTargetAtTime(o,r,l)}else if(t.type==="setValue"){const{startTime:r,value:o}=t;e.setValueAtTime(o,r)}else if(t.type==="setValueCurve"){const{duration:r,startTime:o,values:l}=t;e.setValueCurveAtTime(l,o,r)}else throw new Error("Can't apply an unknown automation.")}});class Jy{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((r,o)=>e.call(t,r,o,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const _1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},w1=(s,e,t,r,o,l,c,u,h,f,m,g,y,x)=>class extends e{constructor(_,b,T){var R;const L=u(_),V=h(L),E=m({..._1,...T});y(E);const N=Dh.get(L),M=N==null?void 0:N.get(b),C=V||L.state!=="closed"?L:(R=c(L))!==null&&R!==void 0?R:L,O=o(C,V?null:_.baseLatency,f,b,M,E),U=V?r(b,E,M):null;super(_,!0,O,U);const j=[];O.parameters.forEach((q,ee)=>{const te=t(this,V,q);j.push([ee,te])}),this._nativeAudioWorkletNode=O,this._onprocessorerror=null,this._parameters=new Jy(j),V&&s(L,this);const{activeInputs:B}=l(this);g(O,B)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(_){const b=typeof _=="function"?x(this,_):null;this._nativeAudioWorkletNode.onprocessorerror=b;const T=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=T!==null&&T===b?_:T}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function dc(s,e,t,r,o){if(typeof s.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),s.copyFromChannel(e[t],r,o);else{const l=s.getChannelData(r);if(e[t].byteLength===0)e[t]=l.slice(o,o+128);else{const c=new Float32Array(l.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(c)}}}const e_=(s,e,t,r,o)=>{typeof s.copyToChannel=="function"?e[t].byteLength!==0&&s.copyToChannel(e[t],r,o):e[t].byteLength!==0&&s.getChannelData(r).set(e[t],o)},hc=(s,e)=>{const t=[];for(let r=0;r<s;r+=1){const o=[],l=typeof e=="number"?e:e[r];for(let c=0;c<l;c+=1)o.push(new Float32Array(128));t.push(o)}return t},x1=(s,e)=>{const t=Nn(Lh,s),r=et(e);return Nn(t,r)},S1=async(s,e,t,r,o,l,c)=>{const u=e===null?Math.ceil(s.context.length/128)*128:e.length,h=r.channelCount*r.numberOfInputs,f=o.reduce((b,T)=>b+T,0),m=f===0?null:t.createBuffer(f,u,t.sampleRate);if(l===void 0)throw new Error("Missing the processor constructor.");const g=Ft(s),y=await x1(t,s),x=hc(r.numberOfInputs,r.channelCount),w=hc(r.numberOfOutputs,o),_=Array.from(s.parameters.keys()).reduce((b,T)=>({...b,[T]:new Float32Array(128)}),{});for(let b=0;b<u;b+=128){if(r.numberOfInputs>0&&e!==null)for(let T=0;T<r.numberOfInputs;T+=1)for(let R=0;R<r.channelCount;R+=1)dc(e,x[T],R,R,b);l.parameterDescriptors!==void 0&&e!==null&&l.parameterDescriptors.forEach(({name:T},R)=>{dc(e,_,T,h+R,b)});for(let T=0;T<r.numberOfInputs;T+=1)for(let R=0;R<o[T];R+=1)w[T][R].byteLength===0&&(w[T][R]=new Float32Array(128));try{const T=x.map((L,V)=>g.activeInputs[V].size===0?[]:L),R=c(b/t.sampleRate,t.sampleRate,()=>y.process(T,w,_));if(m!==null)for(let L=0,V=0;L<r.numberOfOutputs;L+=1){for(let E=0;E<o[L];E+=1)e_(m,w[L],E,V+E,b);V+=o[L]}if(!R)break}catch(T){s.dispatchEvent(new ErrorEvent("processorerror",{colno:T.colno,filename:T.filename,lineno:T.lineno,message:T.message}));break}}return m},b1=(s,e,t,r,o,l,c,u,h,f,m,g,y,x,w,_)=>(b,T,R)=>{const L=new WeakMap;let V=null;const E=async(N,M)=>{let C=m(N),O=null;const U=Ot(C,M),j=Array.isArray(T.outputChannelCount)?T.outputChannelCount:Array.from(T.outputChannelCount);if(g===null){const B=j.reduce((K,J)=>K+J,0),q=o(M,{channelCount:Math.max(1,B),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,B)}),ee=[];for(let K=0;K<N.numberOfOutputs;K+=1)ee.push(r(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:j[K]}));const te=c(M,{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1});te.connect=e.bind(null,ee),te.disconnect=h.bind(null,ee),O=[q,ee,te]}else U||(C=new g(M,b));if(L.set(M,O===null?C:O[2]),O!==null){if(V===null){if(R===void 0)throw new Error("Missing the processor constructor.");if(y===null)throw new Error("Missing the native OfflineAudioContext constructor.");const J=N.channelCount*N.numberOfInputs,z=R.parameterDescriptors===void 0?0:R.parameterDescriptors.length,Z=J+z;V=S1(N,Z===0?null:await(async()=>{const P=new y(Z,Math.ceil(N.context.length/128)*128,M.sampleRate),$=[],ce=[];for(let ae=0;ae<T.numberOfInputs;ae+=1)$.push(c(P,{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1})),ce.push(o(P,{channelCount:T.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:T.channelCount}));const ie=await Promise.all(Array.from(N.parameters.values()).map(async ae=>{const ue=l(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ae.value});return await x(P,ae,ue.offset),ue})),ne=r(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,J+z)});for(let ae=0;ae<T.numberOfInputs;ae+=1){$[ae].connect(ce[ae]);for(let ue=0;ue<T.channelCount;ue+=1)ce[ae].connect(ne,ue,ae*T.channelCount+ue)}for(const[ae,ue]of ie.entries())ue.connect(ne,0,J+ae),ue.start(0);return ne.connect(P.destination),await Promise.all($.map(ae=>w(N,P,ae))),_(P)})(),M,T,j,R,f)}const B=await V,q=t(M,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[ee,te,K]=O;B!==null&&(q.buffer=B,q.start(0)),q.connect(ee);for(let J=0,z=0;J<N.numberOfOutputs;J+=1){const Z=te[J];for(let Y=0;Y<j[J];Y+=1)ee.connect(Z,z+Y,Y);z+=j[J]}return K}if(U)for(const[B,q]of N.parameters.entries())await s(M,q,C.parameters.get(B));else for(const[B,q]of N.parameters.entries())await x(M,q,C.parameters.get(B));return await w(N,M,C),C};return{render(N,M){u(M,N);const C=L.get(M);return C!==void 0?Promise.resolve(C):E(N,M)}}},T1=(s,e,t,r,o,l,c,u,h,f,m,g,y,x,w,_,b,T,R,L)=>class extends w{constructor(E,N){super(E,N),this._nativeContext=E,this._audioWorklet=s===void 0?void 0:{addModule:(M,C)=>s(this,M,C)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new o(this)}createBuffer(E,N,M){return new t({length:N,numberOfChannels:E,sampleRate:M})}createBufferSource(){return new r(this)}createChannelMerger(E=6){return new l(this,{numberOfInputs:E})}createChannelSplitter(E=6){return new c(this,{numberOfOutputs:E})}createConstantSource(){return new u(this)}createConvolver(){return new h(this)}createDelay(E=1){return new m(this,{maxDelayTime:E})}createDynamicsCompressor(){return new g(this)}createGain(){return new y(this)}createIIRFilter(E,N){return new x(this,{feedback:N,feedforward:E})}createOscillator(){return new _(this)}createPanner(){return new b(this)}createPeriodicWave(E,N,M={disableNormalization:!1}){return new T(this,{...M,imag:N,real:E})}createStereoPanner(){return new R(this)}createWaveShaper(){return new L(this)}decodeAudioData(E,N,M){return f(this._nativeContext,E).then(C=>(typeof N=="function"&&N(C),C),C=>{throw typeof M=="function"&&M(C),C})}},C1={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},k1=(s,e,t,r,o,l,c,u)=>class extends s{constructor(f,m){const g=l(f),y={...C1,...m},x=o(g,y),w=c(g),_=w?t():null;super(f,!1,x,_),this._Q=e(this,w,x.Q,Lt,Jt),this._detune=e(this,w,x.detune,1200*Math.log2(Lt),-1200*Math.log2(Lt)),this._frequency=e(this,w,x.frequency,f.sampleRate/2,0),this._gain=e(this,w,x.gain,40*Math.log10(Lt),Jt),this._nativeBiquadFilterNode=x,u(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(f){this._nativeBiquadFilterNode.type=f}getFrequencyResponse(f,m,g){try{this._nativeBiquadFilterNode.getFrequencyResponse(f,m,g)}catch(y){throw y.code===11?r():y}if(f.length!==m.length||m.length!==g.length)throw r()}},E1=(s,e,t,r,o)=>()=>{const l=new WeakMap,c=async(u,h)=>{let f=t(u);const m=Ot(f,h);if(!m){const g={Q:f.Q.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,gain:f.gain.value,type:f.type};f=e(h,g)}return l.set(h,f),m?(await s(h,u.Q,f.Q),await s(h,u.detune,f.detune),await s(h,u.frequency,f.frequency),await s(h,u.gain,f.gain)):(await r(h,u.Q,f.Q),await r(h,u.detune,f.detune),await r(h,u.frequency,f.frequency),await r(h,u.gain,f.gain)),await o(u,h,f),f};return{render(u,h){const f=l.get(h);return f!==void 0?Promise.resolve(f):c(u,h)}}},P1=(s,e)=>(t,r)=>{const o=e.get(t);if(o!==void 0)return o;const l=s.get(t);if(l!==void 0)return l;try{const c=r();return c instanceof Promise?(s.set(t,c),c.catch(()=>!1).then(u=>(s.delete(t),e.set(t,u),u))):(e.set(t,c),c)}catch{return e.set(t,!1),!1}},A1={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},N1=(s,e,t,r,o)=>class extends s{constructor(c,u){const h=r(c),f={...A1,...u},m=t(h,f),g=o(h)?e():null;super(c,!1,m,g)}},R1=(s,e,t)=>()=>{const r=new WeakMap,o=async(l,c)=>{let u=e(l);if(!Ot(u,c)){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfInputs:u.numberOfInputs};u=s(c,f)}return r.set(c,u),await t(l,c,u),u};return{render(l,c){const u=r.get(c);return u!==void 0?Promise.resolve(u):o(l,c)}}},M1={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},O1=(s,e,t,r,o,l)=>class extends s{constructor(u,h){const f=r(u),m=l({...M1,...h}),g=t(f,m),y=o(f)?e():null;super(u,!1,g,y)}},I1=(s,e,t)=>()=>{const r=new WeakMap,o=async(l,c)=>{let u=e(l);if(!Ot(u,c)){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfOutputs:u.numberOfOutputs};u=s(c,f)}return r.set(c,u),await t(l,c,u),u};return{render(l,c){const u=r.get(c);return u!==void 0?Promise.resolve(u):o(l,c)}}},D1=s=>(e,t,r)=>s(t,e,r),L1=s=>(e,t,r=0,o=0)=>{const l=e[r];if(l===void 0)throw s();return uc(t)?l.connect(t,0,o):l.connect(t,0)},F1=s=>(e,t)=>{const r=s(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=e.createBuffer(1,2,44100);return r.buffer=o,r.loop=!0,r.connect(t),r.start(),()=>{r.stop(),r.disconnect(t)}},V1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},B1=(s,e,t,r,o,l,c)=>class extends s{constructor(h,f){const m=o(h),g={...V1,...f},y=r(m,g),x=l(m),w=x?t():null;super(h,!1,y,w),this._constantSourceNodeRenderer=w,this._nativeConstantSourceNode=y,this._offset=e(this,x,y.offset,Lt,Jt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(h){const f=typeof h=="function"?c(this,h):null;this._nativeConstantSourceNode.onended=f;const m=this._nativeConstantSourceNode.onended;this._onended=m!==null&&m===f?h:m}start(h=0){if(this._nativeConstantSourceNode.start(h),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=h),this.context.state!=="closed"){Di(this);const f=()=>{this._nativeConstantSourceNode.removeEventListener("ended",f),pr(this)&&ra(this)};this._nativeConstantSourceNode.addEventListener("ended",f)}}stop(h=0){this._nativeConstantSourceNode.stop(h),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=h)}},z1=(s,e,t,r,o)=>()=>{const l=new WeakMap;let c=null,u=null;const h=async(f,m)=>{let g=t(f);const y=Ot(g,m);if(!y){const x={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,offset:g.offset.value};g=e(m,x),c!==null&&g.start(c),u!==null&&g.stop(u)}return l.set(m,g),y?await s(m,f.offset,g.offset):await r(m,f.offset,g.offset),await o(f,m,g),g};return{set start(f){c=f},set stop(f){u=f},render(f,m){const g=l.get(m);return g!==void 0?Promise.resolve(g):h(f,m)}}},U1=s=>e=>(s[0]=e,s[0]),j1={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},G1=(s,e,t,r,o,l)=>class extends s{constructor(u,h){const f=r(u),m={...j1,...h},g=t(f,m),x=o(f)?e():null;super(u,!1,g,x),this._isBufferNullified=!1,this._nativeConvolverNode=g,m.buffer!==null&&l(this,m.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(u){if(this._nativeConvolverNode.buffer=u,u===null&&this._nativeConvolverNode.buffer!==null){const h=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=h.createBuffer(1,1,h.sampleRate),this._isBufferNullified=!0,l(this,0)}else this._isBufferNullified=!1,l(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(u){this._nativeConvolverNode.normalize=u}},W1=(s,e,t)=>()=>{const r=new WeakMap,o=async(l,c)=>{let u=e(l);if(!Ot(u,c)){const f={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,disableNormalization:!u.normalize};u=s(c,f)}return r.set(c,u),Wi(u)?await t(l,c,u.inputs[0]):await t(l,c,u),u};return{render(l,c){const u=r.get(c);return u!==void 0?Promise.resolve(u):o(l,c)}}},$1=(s,e)=>(t,r,o)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,r,o)}catch(l){throw l.name==="SyntaxError"?s():l}},q1=()=>new DOMException("","DataCloneError"),Nv=s=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(r=>{const o=()=>{t.onmessage=null,e.close(),t.close(),r()};t.onmessage=()=>o();try{e.postMessage(s,[s])}catch{}finally{o()}})},H1=(s,e,t,r,o,l,c,u,h,f,m)=>(g,y)=>{const x=c(g)?g:l(g);if(o.has(y)){const w=t();return Promise.reject(w)}try{o.add(y)}catch{}return e(h,()=>h(x))?x.decodeAudioData(y).then(w=>(Nv(y).catch(()=>{}),e(u,()=>u(w))||m(w),s.add(w),w)):new Promise((w,_)=>{const b=async()=>{try{await Nv(y)}catch{}},T=R=>{_(R),b()};try{x.decodeAudioData(y,R=>{typeof R.copyFromChannel!="function"&&(f(R),df(R)),s.add(R),b().then(()=>w(R))},R=>{T(R===null?r():R)})}catch(R){T(R)}})},Y1=(s,e,t,r,o,l,c,u)=>(h,f)=>{const m=e.get(h);if(m===void 0)throw new Error("Missing the expected cycle count.");const g=l(h.context),y=u(g);if(m===f){if(e.delete(h),!y&&c(h)){const x=r(h),{outputs:w}=t(h);for(const _ of w)if(ia(_)){const b=r(_[0]);s(x,b,_[1],_[2])}else{const b=o(_[0]);x.connect(b,_[1])}}}else e.set(h,m-f)},X1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},K1=(s,e,t,r,o,l,c)=>class extends s{constructor(h,f){const m=o(h),g={...X1,...f},y=r(m,g),x=l(m),w=x?t(g.maxDelayTime):null;super(h,!1,y,w),this._delayTime=e(this,x,y.delayTime),c(this,g.maxDelayTime)}get delayTime(){return this._delayTime}},Z1=(s,e,t,r,o)=>l=>{const c=new WeakMap,u=async(h,f)=>{let m=t(h);const g=Ot(m,f);if(!g){const y={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,delayTime:m.delayTime.value,maxDelayTime:l};m=e(f,y)}return c.set(f,m),g?await s(f,h.delayTime,m.delayTime):await r(f,h.delayTime,m.delayTime),await o(h,f,m),m};return{render(h,f){const m=c.get(f);return m!==void 0?Promise.resolve(m):u(h,f)}}},Q1=s=>(e,t,r,o)=>s(e[o],l=>l[0]===t&&l[1]===r),J1=s=>(e,t)=>{s(e).delete(t)},ek=s=>"delayTime"in s,tk=(s,e,t)=>function r(o,l){const c=ac(l)?l:t(s,l);if(ek(c))return[];if(o[0]===c)return[o];if(o.includes(c))return[];const{outputs:u}=e(c);return Array.from(u).map(h=>r([...o,c],h[0])).reduce((h,f)=>h.concat(f),[])},Ol=(s,e,t)=>{const r=e[t];if(r===void 0)throw s();return r},nk=s=>(e,t=void 0,r=void 0,o=0)=>t===void 0?e.forEach(l=>l.disconnect()):typeof t=="number"?Ol(s,e,t).disconnect():uc(t)?r===void 0?e.forEach(l=>l.disconnect(t)):o===void 0?Ol(s,e,r).disconnect(t,0):Ol(s,e,r).disconnect(t,0,o):r===void 0?e.forEach(l=>l.disconnect(t)):Ol(s,e,r).disconnect(t,0),rk={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},sk=(s,e,t,r,o,l,c,u)=>class extends s{constructor(f,m){const g=l(f),y={...rk,...m},x=r(g,y),w=c(g),_=w?t():null;super(f,!1,x,_),this._attack=e(this,w,x.attack),this._knee=e(this,w,x.knee),this._nativeDynamicsCompressorNode=x,this._ratio=e(this,w,x.ratio),this._release=e(this,w,x.release),this._threshold=e(this,w,x.threshold),u(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(f){const m=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=f,f>2)throw this._nativeDynamicsCompressorNode.channelCount=m,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(f){const m=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=f,f==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=m,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},ik=(s,e,t,r,o)=>()=>{const l=new WeakMap,c=async(u,h)=>{let f=t(u);const m=Ot(f,h);if(!m){const g={attack:f.attack.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,knee:f.knee.value,ratio:f.ratio.value,release:f.release.value,threshold:f.threshold.value};f=e(h,g)}return l.set(h,f),m?(await s(h,u.attack,f.attack),await s(h,u.knee,f.knee),await s(h,u.ratio,f.ratio),await s(h,u.release,f.release),await s(h,u.threshold,f.threshold)):(await r(h,u.attack,f.attack),await r(h,u.knee,f.knee),await r(h,u.ratio,f.ratio),await r(h,u.release,f.release),await r(h,u.threshold,f.threshold)),await o(u,h,f),f};return{render(u,h){const f=l.get(h);return f!==void 0?Promise.resolve(f):c(u,h)}}},ok=()=>new DOMException("","EncodingError"),ak=s=>e=>new Promise((t,r)=>{if(s===null){r(new SyntaxError);return}const o=s.document.head;if(o===null)r(new SyntaxError);else{const l=s.document.createElement("script"),c=new Blob([e],{type:"application/javascript"}),u=URL.createObjectURL(c),h=s.onerror,f=()=>{s.onerror=h,URL.revokeObjectURL(u)};s.onerror=(m,g,y,x,w)=>{if(g===u||g===s.location.href&&y===1&&x===1)return f(),r(w),!1;if(h!==null)return h(m,g,y,x,w)},l.onerror=()=>{f(),r(new SyntaxError)},l.onload=()=>{f(),t()},l.src=u,l.type="module",o.appendChild(l)}}),lk=s=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,r,o){if(r!==null){let l=this._listeners.get(r);l===void 0&&(l=s(this,r),typeof r=="function"&&this._listeners.set(r,l)),this._nativeEventTarget.addEventListener(t,l,o)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,r,o){const l=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(t,l===void 0?null:l,o)}},ck=s=>(e,t,r)=>{Object.defineProperties(s,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{s!==null&&(delete s.currentFrame,delete s.currentTime)}},uk=s=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw s()},dk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},hk=(s,e,t,r,o,l)=>class extends s{constructor(u,h){const f=o(u),m={...dk,...h},g=r(f,m),y=l(f),x=y?t():null;super(u,!1,g,x),this._gain=e(this,y,g.gain,Lt,Jt)}get gain(){return this._gain}},fk=(s,e,t,r,o)=>()=>{const l=new WeakMap,c=async(u,h)=>{let f=t(u);const m=Ot(f,h);if(!m){const g={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:f.gain.value};f=e(h,g)}return l.set(h,f),m?await s(h,u.gain,f.gain):await r(h,u.gain,f.gain),await o(u,h,f),f};return{render(u,h){const f=l.get(h);return f!==void 0?Promise.resolve(f):c(u,h)}}},pk=(s,e)=>t=>e(s,t),mk=s=>e=>{const t=s(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},gk=s=>e=>{var t;return(t=s.get(e))!==null&&t!==void 0?t:0},vk=s=>e=>{const t=s(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},yk=s=>e=>s.get(e),bt=()=>new DOMException("","InvalidStateError"),_k=s=>e=>{const t=s.get(e);if(t===void 0)throw bt();return t},wk=(s,e)=>t=>{let r=s.get(t);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),s.set(t,r),r},xk=s=>e=>{const t=s.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},Cc=()=>new DOMException("","InvalidAccessError"),Sk=s=>{s.getFrequencyResponse=(e=>(t,r,o)=>{if(t.length!==r.length||r.length!==o.length)throw Cc();return e.call(s,t,r,o)})(s.getFrequencyResponse)},bk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Tk=(s,e,t,r,o,l)=>class extends s{constructor(u,h){const f=r(u),m=o(f),g={...bk,...h},y=e(f,m?null:u.baseLatency,g),x=m?t(g.feedback,g.feedforward):null;super(u,!1,y,x),Sk(y),this._nativeIIRFilterNode=y,l(this,1)}getFrequencyResponse(u,h,f){return this._nativeIIRFilterNode.getFrequencyResponse(u,h,f)}},t_=(s,e,t,r,o,l,c,u,h,f,m)=>{const g=f.length;let y=u;for(let x=0;x<g;x+=1){let w=t[0]*f[x];for(let _=1;_<o;_+=1){const b=y-_&h-1;w+=t[_]*l[b],w-=s[_]*c[b]}for(let _=o;_<r;_+=1)w+=t[_]*l[y-_&h-1];for(let _=o;_<e;_+=1)w-=s[_]*c[y-_&h-1];l[y]=f[x],c[y]=w,y=y+1&h-1,m[x]=w}return y},Ck=(s,e,t,r)=>{const o=t instanceof Float64Array?t:new Float64Array(t),l=r instanceof Float64Array?r:new Float64Array(r),c=o.length,u=l.length,h=Math.min(c,u);if(o[0]!==1){for(let w=0;w<c;w+=1)l[w]/=o[0];for(let w=1;w<u;w+=1)o[w]/=o[0]}const f=32,m=new Float32Array(f),g=new Float32Array(f),y=e.createBuffer(s.numberOfChannels,s.length,s.sampleRate),x=s.numberOfChannels;for(let w=0;w<x;w+=1){const _=s.getChannelData(w),b=y.getChannelData(w);m.fill(0),g.fill(0),t_(o,c,l,u,h,m,g,0,f,_,b)}return y},kk=(s,e,t,r,o)=>(l,c)=>{const u=new WeakMap;let h=null;const f=async(m,g)=>{let y=null,x=e(m);const w=Ot(x,g);if(g.createIIRFilter===void 0?y=s(g,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):w||(x=g.createIIRFilter(c,l)),u.set(g,y===null?x:y),y!==null){if(h===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const b=new t(m.context.destination.channelCount,m.context.length,g.sampleRate);h=(async()=>{await r(m,b,b.destination);const T=await o(b);return Ck(T,g,l,c)})()}const _=await h;return y.buffer=_,y.start(0),y}return await r(m,g,x),x};return{render(m,g){const y=u.get(g);return y!==void 0?Promise.resolve(y):f(m,g)}}},Ek=(s,e,t,r,o,l)=>c=>(u,h)=>{const f=s.get(u);if(f===void 0){if(!c&&l(u)){const m=r(u),{outputs:g}=t(u);for(const y of g)if(ia(y)){const x=r(y[0]);e(m,x,y[1],y[2])}else{const x=o(y[0]);m.disconnect(x,y[1])}}s.set(u,h)}else s.set(u,f+h)},Pk=(s,e)=>t=>{const r=s.get(t);return e(r)||e(t)},Ak=(s,e)=>t=>s.has(t)||e(t),Nk=(s,e)=>t=>s.has(t)||e(t),Rk=(s,e)=>t=>{const r=s.get(t);return e(r)||e(t)},Mk=s=>e=>s!==null&&e instanceof s,Ok=s=>e=>s!==null&&typeof s.AudioNode=="function"&&e instanceof s.AudioNode,Ik=s=>e=>s!==null&&typeof s.AudioParam=="function"&&e instanceof s.AudioParam,Dk=(s,e)=>t=>s(t)||e(t),Lk=s=>e=>s!==null&&e instanceof s,Fk=s=>s!==null&&s.isSecureContext,Vk=(s,e,t,r)=>class extends s{constructor(l,c){const u=t(l),h=e(u,c);if(r(u))throw TypeError();super(l,!0,h,null),this._nativeMediaElementAudioSourceNode=h}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},Bk={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},zk=(s,e,t,r)=>class extends s{constructor(l,c){const u=t(l);if(r(u))throw new TypeError;const h={...Bk,...c},f=e(u,h);super(l,!1,f,null),this._nativeMediaStreamAudioDestinationNode=f}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},Uk=(s,e,t,r)=>class extends s{constructor(l,c){const u=t(l),h=e(u,c);if(r(u))throw new TypeError;super(l,!0,h,null),this._nativeMediaStreamAudioSourceNode=h}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},jk=(s,e,t)=>class extends s{constructor(o,l){const c=t(o),u=e(c,l);super(o,!0,u,null)}},Gk=(s,e,t,r,o,l)=>class extends t{constructor(u,h){super(u),this._nativeContext=u,bc.set(this,u),r(u)&&o.set(u,new Set),this._destination=new s(this,h),this._listener=e(this,u),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(u){const h=typeof u=="function"?l(this,u):null;this._nativeContext.onstatechange=h;const f=this._nativeContext.onstatechange;this._onstatechange=f!==null&&f===h?u:f}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Zo=s=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=s.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},Wk=(s,e)=>(t,r,o)=>{const l=new Set;return t.connect=(c=>(u,h=0,f=0)=>{const m=l.size===0;if(e(u))return c.call(t,u,h,f),s(l,[u,h,f],g=>g[0]===u&&g[1]===h&&g[2]===f,!0),m&&r(),u;c.call(t,u,h),s(l,[u,h],g=>g[0]===u&&g[1]===h,!0),m&&r()})(t.connect),t.disconnect=(c=>(u,h,f)=>{const m=l.size>0;if(u===void 0)c.apply(t),l.clear();else if(typeof u=="number"){c.call(t,u);for(const y of l)y[1]===u&&l.delete(y)}else{e(u)?c.call(t,u,h,f):c.call(t,u,h);for(const y of l)y[0]===u&&(h===void 0||y[1]===h)&&(f===void 0||y[2]===f)&&l.delete(y)}const g=l.size===0;m&&g&&o()})(t.disconnect),t},st=(s,e,t)=>{const r=e[t];r!==void 0&&r!==s[t]&&(s[t]=r)},_t=(s,e)=>{st(s,e,"channelCount"),st(s,e,"channelCountMode"),st(s,e,"channelInterpretation")},Rv=s=>typeof s.getFloatTimeDomainData=="function",$k=s=>{s.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);s.getByteTimeDomainData(t);const r=Math.max(t.length,s.fftSize);for(let o=0;o<r;o+=1)e[o]=(t[o]-128)*.0078125;return e}},qk=(s,e)=>(t,r)=>{const o=t.createAnalyser();if(_t(o,r),!(r.maxDecibels>r.minDecibels))throw e();return st(o,r,"fftSize"),st(o,r,"maxDecibels"),st(o,r,"minDecibels"),st(o,r,"smoothingTimeConstant"),s(Rv,()=>Rv(o))||$k(o),o},Hk=s=>s===null?null:s.hasOwnProperty("AudioBuffer")?s.AudioBuffer:null,lt=(s,e,t)=>{const r=e[t];r!==void 0&&r!==s[t].value&&(s[t].value=r)},Yk=s=>{s.start=(e=>{let t=!1;return(r=0,o=0,l)=>{if(t)throw bt();e.call(s,r,o,l),t=!0}})(s.start)},pf=s=>{s.start=(e=>(t=0,r=0,o)=>{if(typeof o=="number"&&o<0||r<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(s,t,r,o)})(s.start)},mf=s=>{s.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(s,t)})(s.stop)},Xk=(s,e,t,r,o,l,c,u,h,f,m)=>(g,y)=>{const x=g.createBufferSource();return _t(x,y),lt(x,y,"playbackRate"),st(x,y,"buffer"),st(x,y,"loop"),st(x,y,"loopEnd"),st(x,y,"loopStart"),e(t,()=>t(g))||Yk(x),e(r,()=>r(g))||h(x),e(o,()=>o(g))||f(x,g),e(l,()=>l(g))||pf(x),e(c,()=>c(g))||m(x,g),e(u,()=>u(g))||mf(x),s(g,x),x},Kk=s=>s===null?null:s.hasOwnProperty("AudioContext")?s.AudioContext:s.hasOwnProperty("webkitAudioContext")?s.webkitAudioContext:null,Zk=(s,e)=>(t,r,o)=>{const l=t.destination;if(l.channelCount!==r)try{l.channelCount=r}catch{}o&&l.channelCountMode!=="explicit"&&(l.channelCountMode="explicit"),l.maxChannelCount===0&&Object.defineProperty(l,"maxChannelCount",{value:r});const c=s(t,{channelCount:r,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:1});return e(c,"channelCount",u=>()=>u.call(c),u=>h=>{u.call(c,h);try{l.channelCount=h}catch(f){if(h>l.maxChannelCount)throw f}}),e(c,"channelCountMode",u=>()=>u.call(c),u=>h=>{u.call(c,h),l.channelCountMode=h}),e(c,"channelInterpretation",u=>()=>u.call(c),u=>h=>{u.call(c,h),l.channelInterpretation=h}),Object.defineProperty(c,"maxChannelCount",{get:()=>l.maxChannelCount}),c.connect(l),c},Qk=s=>s===null?null:s.hasOwnProperty("AudioWorkletNode")?s.AudioWorkletNode:null,Jk=s=>{const{port1:e}=new MessageChannel;try{e.postMessage(s)}finally{e.close()}},eE=(s,e,t,r,o)=>(l,c,u,h,f,m)=>{if(u!==null)try{const g=new u(l,h,m),y=new Map;let x=null;if(Object.defineProperties(g,{channelCount:{get:()=>m.channelCount,set:()=>{throw s()}},channelCountMode:{get:()=>"explicit",set:()=>{throw s()}},onprocessorerror:{get:()=>x,set:w=>{typeof x=="function"&&g.removeEventListener("processorerror",x),x=typeof w=="function"?w:null,typeof x=="function"&&g.addEventListener("processorerror",x)}}}),g.addEventListener=(w=>(..._)=>{if(_[0]==="processorerror"){const b=typeof _[1]=="function"?_[1]:typeof _[1]=="object"&&_[1]!==null&&typeof _[1].handleEvent=="function"?_[1].handleEvent:null;if(b!==null){const T=y.get(_[1]);T!==void 0?_[1]=T:(_[1]=R=>{R.type==="error"?(Object.defineProperties(R,{type:{value:"processorerror"}}),b(R)):b(new ErrorEvent(_[0],{...R}))},y.set(b,_[1]))}}return w.call(g,"error",_[1],_[2]),w.call(g,..._)})(g.addEventListener),g.removeEventListener=(w=>(..._)=>{if(_[0]==="processorerror"){const b=y.get(_[1]);b!==void 0&&(y.delete(_[1]),_[1]=b)}return w.call(g,"error",_[1],_[2]),w.call(g,_[0],_[1],_[2])})(g.removeEventListener),m.numberOfOutputs!==0){const w=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return g.connect(w).connect(l.destination),o(g,()=>w.disconnect(),()=>w.connect(l.destination))}return g}catch(g){throw g.code===11?r():g}if(f===void 0)throw r();return Jk(m),e(l,c,f,m)},n_=(s,e)=>s===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(s*e))))),tE=s=>new Promise((e,t)=>{const{port1:r,port2:o}=new MessageChannel;r.onmessage=({data:l})=>{r.close(),o.close(),e(l)},r.onmessageerror=({data:l})=>{r.close(),o.close(),t(l)},o.postMessage(s)}),nE=async(s,e)=>{const t=await tE(e);return new s(t)},rE=(s,e,t,r)=>{let o=Lh.get(s);o===void 0&&(o=new WeakMap,Lh.set(s,o));const l=nE(t,r);return o.set(e,l),l},sE=(s,e,t,r,o,l,c,u,h,f,m,g,y)=>(x,w,_,b)=>{if(b.numberOfInputs===0&&b.numberOfOutputs===0)throw h();const T=Array.isArray(b.outputChannelCount)?b.outputChannelCount:Array.from(b.outputChannelCount);if(T.some(de=>de<1))throw h();if(T.length!==b.numberOfOutputs)throw e();if(b.channelCountMode!=="explicit")throw h();const R=b.channelCount*b.numberOfInputs,L=T.reduce((de,fe)=>de+fe,0),V=_.parameterDescriptors===void 0?0:_.parameterDescriptors.length;if(R+V>6||L>6)throw h();const E=new MessageChannel,N=[],M=[];for(let de=0;de<b.numberOfInputs;de+=1)N.push(c(x,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1})),M.push(o(x,{channelCount:b.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:b.channelCount}));const C=[];if(_.parameterDescriptors!==void 0)for(const{defaultValue:de,maxValue:fe,minValue:Re,name:Le}of _.parameterDescriptors){const Me=l(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:b.parameterData[Le]!==void 0?b.parameterData[Le]:de===void 0?0:de});Object.defineProperties(Me.offset,{defaultValue:{get:()=>de===void 0?0:de},maxValue:{get:()=>fe===void 0?Lt:fe},minValue:{get:()=>Re===void 0?Jt:Re}}),C.push(Me)}const O=r(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,R+V)}),U=n_(w,x.sampleRate),j=u(x,U,R+V,Math.max(1,L)),B=o(x,{channelCount:Math.max(1,L),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,L)}),q=[];for(let de=0;de<b.numberOfOutputs;de+=1)q.push(r(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:T[de]}));for(let de=0;de<b.numberOfInputs;de+=1){N[de].connect(M[de]);for(let fe=0;fe<b.channelCount;fe+=1)M[de].connect(O,fe,de*b.channelCount+fe)}const ee=new Jy(_.parameterDescriptors===void 0?[]:_.parameterDescriptors.map(({name:de},fe)=>{const Re=C[fe];return Re.connect(O,0,R+fe),Re.start(0),[de,Re.offset]}));O.connect(j);let te=b.channelInterpretation,K=null;const J=b.numberOfOutputs===0?[j]:q,z={get bufferSize(){return U},get channelCount(){return b.channelCount},set channelCount(de){throw t()},get channelCountMode(){return b.channelCountMode},set channelCountMode(de){throw t()},get channelInterpretation(){return te},set channelInterpretation(de){for(const fe of N)fe.channelInterpretation=de;te=de},get context(){return j.context},get inputs(){return N},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get onprocessorerror(){return K},set onprocessorerror(de){typeof K=="function"&&z.removeEventListener("processorerror",K),K=typeof de=="function"?de:null,typeof K=="function"&&z.addEventListener("processorerror",K)},get parameters(){return ee},get port(){return E.port2},addEventListener(...de){return j.addEventListener(de[0],de[1],de[2])},connect:s.bind(null,J),disconnect:f.bind(null,J),dispatchEvent(...de){return j.dispatchEvent(de[0])},removeEventListener(...de){return j.removeEventListener(de[0],de[1],de[2])}},Z=new Map;E.port1.addEventListener=(de=>(...fe)=>{if(fe[0]==="message"){const Re=typeof fe[1]=="function"?fe[1]:typeof fe[1]=="object"&&fe[1]!==null&&typeof fe[1].handleEvent=="function"?fe[1].handleEvent:null;if(Re!==null){const Le=Z.get(fe[1]);Le!==void 0?fe[1]=Le:(fe[1]=Me=>{m(x.currentTime,x.sampleRate,()=>Re(Me))},Z.set(Re,fe[1]))}}return de.call(E.port1,fe[0],fe[1],fe[2])})(E.port1.addEventListener),E.port1.removeEventListener=(de=>(...fe)=>{if(fe[0]==="message"){const Re=Z.get(fe[1]);Re!==void 0&&(Z.delete(fe[1]),fe[1]=Re)}return de.call(E.port1,fe[0],fe[1],fe[2])})(E.port1.removeEventListener);let Y=null;Object.defineProperty(E.port1,"onmessage",{get:()=>Y,set:de=>{typeof Y=="function"&&E.port1.removeEventListener("message",Y),Y=typeof de=="function"?de:null,typeof Y=="function"&&(E.port1.addEventListener("message",Y),E.port1.start())}}),_.prototype.port=E.port1;let P=null;rE(x,z,_,b).then(de=>P=de);const ce=hc(b.numberOfInputs,b.channelCount),ie=hc(b.numberOfOutputs,T),ne=_.parameterDescriptors===void 0?[]:_.parameterDescriptors.reduce((de,{name:fe})=>({...de,[fe]:new Float32Array(128)}),{});let ae=!0;const ue=()=>{b.numberOfOutputs>0&&j.disconnect(B);for(let de=0,fe=0;de<b.numberOfOutputs;de+=1){const Re=q[de];for(let Le=0;Le<T[de];Le+=1)B.disconnect(Re,fe+Le,Le);fe+=T[de]}},Q=new Map;j.onaudioprocess=({inputBuffer:de,outputBuffer:fe})=>{if(P!==null){const Re=g(z);for(let Le=0;Le<U;Le+=128){for(let Me=0;Me<b.numberOfInputs;Me+=1)for(let Fe=0;Fe<b.channelCount;Fe+=1)dc(de,ce[Me],Fe,Fe,Le);_.parameterDescriptors!==void 0&&_.parameterDescriptors.forEach(({name:Me},Fe)=>{dc(de,ne,Me,R+Fe,Le)});for(let Me=0;Me<b.numberOfInputs;Me+=1)for(let Fe=0;Fe<T[Me];Fe+=1)ie[Me][Fe].byteLength===0&&(ie[Me][Fe]=new Float32Array(128));try{const Me=ce.map((Pe,De)=>{if(Re[De].size>0)return Q.set(De,U/128),Pe;const Jn=Q.get(De);return Jn===void 0?[]:(Pe.every(Ls=>Ls.every(Fs=>Fs===0))&&(Jn===1?Q.delete(De):Q.set(De,Jn-1)),Pe)});ae=m(x.currentTime+Le/x.sampleRate,x.sampleRate,()=>P.process(Me,ie,ne));for(let Pe=0,De=0;Pe<b.numberOfOutputs;Pe+=1){for(let sn=0;sn<T[Pe];sn+=1)e_(fe,ie[Pe],sn,De+sn,Le);De+=T[Pe]}}catch(Me){ae=!1,z.dispatchEvent(new ErrorEvent("processorerror",{colno:Me.colno,filename:Me.filename,lineno:Me.lineno,message:Me.message}))}if(!ae){for(let Me=0;Me<b.numberOfInputs;Me+=1){N[Me].disconnect(M[Me]);for(let Fe=0;Fe<b.channelCount;Fe+=1)M[Le].disconnect(O,Fe,Me*b.channelCount+Fe)}if(_.parameterDescriptors!==void 0){const Me=_.parameterDescriptors.length;for(let Fe=0;Fe<Me;Fe+=1){const Pe=C[Fe];Pe.disconnect(O,0,R+Fe),Pe.stop()}}O.disconnect(j),j.onaudioprocess=null,pe?ue():Se();break}}}};let pe=!1;const Te=c(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),he=()=>j.connect(Te).connect(x.destination),Se=()=>{j.disconnect(Te),Te.disconnect()},Be=()=>{if(ae){Se(),b.numberOfOutputs>0&&j.connect(B);for(let de=0,fe=0;de<b.numberOfOutputs;de+=1){const Re=q[de];for(let Le=0;Le<T[de];Le+=1)B.connect(Re,fe+Le,Le);fe+=T[de]}}pe=!0},nt=()=>{ae&&(he(),ue()),pe=!1};return he(),y(z,Be,nt)},r_=(s,e)=>{const t=s.createBiquadFilter();return _t(t,e),lt(t,e,"Q"),lt(t,e,"detune"),lt(t,e,"frequency"),lt(t,e,"gain"),st(t,e,"type"),t},iE=(s,e)=>(t,r)=>{const o=t.createChannelMerger(r.numberOfInputs);return s!==null&&s.name==="webkitAudioContext"&&e(t,o),_t(o,r),o},oE=s=>{const e=s.numberOfOutputs;Object.defineProperty(s,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw bt()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw bt()}}),Object.defineProperty(s,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw bt()}})},oa=(s,e)=>{const t=s.createChannelSplitter(e.numberOfOutputs);return _t(t,e),oE(t),t},aE=(s,e,t,r,o)=>(l,c)=>{if(l.createConstantSource===void 0)return t(l,c);const u=l.createConstantSource();return _t(u,c),lt(u,c,"offset"),e(r,()=>r(l))||pf(u),e(o,()=>o(l))||mf(u),s(l,u),u},$i=(s,e)=>(s.connect=e.connect.bind(e),s.disconnect=e.disconnect.bind(e),s),lE=(s,e,t,r)=>(o,{offset:l,...c})=>{const u=o.createBuffer(1,2,44100),h=e(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),f=t(o,{...c,gain:l}),m=u.getChannelData(0);m[0]=1,m[1]=1,h.buffer=u,h.loop=!0;const g={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(w){f.channelCount=w},get channelCountMode(){return f.channelCountMode},set channelCountMode(w){f.channelCountMode=w},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(w){f.channelInterpretation=w},get context(){return f.context},get inputs(){return[]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get offset(){return f.gain},get onended(){return h.onended},set onended(w){h.onended=w},addEventListener(...w){return h.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return h.dispatchEvent(w[0])},removeEventListener(...w){return h.removeEventListener(w[0],w[1],w[2])},start(w=0){h.start.call(h,w)},stop(w=0){h.stop.call(h,w)}},y=()=>h.connect(f),x=()=>h.disconnect(f);return s(o,h),r($i(g,f),y,x)},cE=(s,e)=>(t,r)=>{const o=t.createConvolver();if(_t(o,r),r.disableNormalization===o.normalize&&(o.normalize=!r.disableNormalization),st(o,r,"buffer"),r.channelCount>2||(e(o,"channelCount",l=>()=>l.call(o),l=>c=>{if(c>2)throw s();return l.call(o,c)}),r.channelCountMode==="max"))throw s();return e(o,"channelCountMode",l=>()=>l.call(o),l=>c=>{if(c==="max")throw s();return l.call(o,c)}),o},s_=(s,e)=>{const t=s.createDelay(e.maxDelayTime);return _t(t,e),lt(t,e,"delayTime"),t},uE=s=>(e,t)=>{const r=e.createDynamicsCompressor();if(_t(r,t),t.channelCount>2||t.channelCountMode==="max")throw s();return lt(r,t,"attack"),lt(r,t,"knee"),lt(r,t,"ratio"),lt(r,t,"release"),lt(r,t,"threshold"),r},Yt=(s,e)=>{const t=s.createGain();return _t(t,e),lt(t,e,"gain"),t},dE=s=>(e,t,r)=>{if(e.createIIRFilter===void 0)return s(e,t,r);const o=e.createIIRFilter(r.feedforward,r.feedback);return _t(o,r),o};function hE(s,e){const t=e[0]*e[0]+e[1]*e[1];return[(s[0]*e[0]+s[1]*e[1])/t,(s[1]*e[0]-s[0]*e[1])/t]}function fE(s,e){return[s[0]*e[0]-s[1]*e[1],s[0]*e[1]+s[1]*e[0]]}function Mv(s,e){let t=[0,0];for(let r=s.length-1;r>=0;r-=1)t=fE(t,e),t[0]+=s[r];return t}const pE=(s,e,t,r)=>(o,l,{channelCount:c,channelCountMode:u,channelInterpretation:h,feedback:f,feedforward:m})=>{const g=n_(l,o.sampleRate),y=f instanceof Float64Array?f:new Float64Array(f),x=m instanceof Float64Array?m:new Float64Array(m),w=y.length,_=x.length,b=Math.min(w,_);if(w===0||w>20)throw r();if(y[0]===0)throw e();if(_===0||_>20)throw r();if(x[0]===0)throw e();if(y[0]!==1){for(let C=0;C<_;C+=1)x[C]/=y[0];for(let C=1;C<w;C+=1)y[C]/=y[0]}const T=t(o,g,c,c);T.channelCount=c,T.channelCountMode=u,T.channelInterpretation=h;const R=32,L=[],V=[],E=[];for(let C=0;C<c;C+=1){L.push(0);const O=new Float32Array(R),U=new Float32Array(R);O.fill(0),U.fill(0),V.push(O),E.push(U)}T.onaudioprocess=C=>{const O=C.inputBuffer,U=C.outputBuffer,j=O.numberOfChannels;for(let B=0;B<j;B+=1){const q=O.getChannelData(B),ee=U.getChannelData(B);L[B]=t_(y,w,x,_,b,V[B],E[B],L[B],R,q,ee)}};const N=o.sampleRate/2;return $i({get bufferSize(){return g},get channelCount(){return T.channelCount},set channelCount(C){T.channelCount=C},get channelCountMode(){return T.channelCountMode},set channelCountMode(C){T.channelCountMode=C},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(C){T.channelInterpretation=C},get context(){return T.context},get inputs(){return[T]},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},addEventListener(...C){return T.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return T.dispatchEvent(C[0])},getFrequencyResponse(C,O,U){if(C.length!==O.length||O.length!==U.length)throw s();const j=C.length;for(let B=0;B<j;B+=1){const q=-Math.PI*(C[B]/N),ee=[Math.cos(q),Math.sin(q)],te=Mv(x,ee),K=Mv(y,ee),J=hE(te,K);O[B]=Math.sqrt(J[0]*J[0]+J[1]*J[1]),U[B]=Math.atan2(J[1],J[0])}},removeEventListener(...C){return T.removeEventListener(C[0],C[1],C[2])}},T)},mE=(s,e)=>s.createMediaElementSource(e.mediaElement),gE=(s,e)=>{const t=s.createMediaStreamDestination();return _t(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},vE=(s,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((l,c)=>l.id<c.id?-1:l.id>c.id?1:0);const r=t.slice(0,1),o=s.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(o,"mediaStream",{value:e}),o},yE=(s,e)=>(t,{mediaStreamTrack:r})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(r);const o=new MediaStream([r]),l=t.createMediaStreamSource(o);if(r.kind!=="audio")throw s();if(e(t))throw new TypeError;return l},_E=s=>s===null?null:s.hasOwnProperty("OfflineAudioContext")?s.OfflineAudioContext:s.hasOwnProperty("webkitOfflineAudioContext")?s.webkitOfflineAudioContext:null,wE=(s,e,t,r,o,l)=>(c,u)=>{const h=c.createOscillator();return _t(h,u),lt(h,u,"detune"),lt(h,u,"frequency"),u.periodicWave!==void 0?h.setPeriodicWave(u.periodicWave):st(h,u,"type"),e(t,()=>t(c))||pf(h),e(r,()=>r(c))||l(h,c),e(o,()=>o(c))||mf(h),s(c,h),h},xE=s=>(e,t)=>{const r=e.createPanner();return r.orientationX===void 0?s(e,t):(_t(r,t),lt(r,t,"orientationX"),lt(r,t,"orientationY"),lt(r,t,"orientationZ"),lt(r,t,"positionX"),lt(r,t,"positionY"),lt(r,t,"positionZ"),st(r,t,"coneInnerAngle"),st(r,t,"coneOuterAngle"),st(r,t,"coneOuterGain"),st(r,t,"distanceModel"),st(r,t,"maxDistance"),st(r,t,"panningModel"),st(r,t,"refDistance"),st(r,t,"rolloffFactor"),r)},SE=(s,e,t,r,o,l,c,u,h,f)=>(m,{coneInnerAngle:g,coneOuterAngle:y,coneOuterGain:x,distanceModel:w,maxDistance:_,orientationX:b,orientationY:T,orientationZ:R,panningModel:L,positionX:V,positionY:E,positionZ:N,refDistance:M,rolloffFactor:C,...O})=>{const U=m.createPanner();if(O.channelCount>2||O.channelCountMode==="max")throw c();_t(U,O);const j={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},B=t(m,{...j,channelInterpretation:"speakers",numberOfInputs:6}),q=r(m,{...O,gain:1}),ee=r(m,{...j,gain:1}),te=r(m,{...j,gain:0}),K=r(m,{...j,gain:0}),J=r(m,{...j,gain:0}),z=r(m,{...j,gain:0}),Z=r(m,{...j,gain:0}),Y=o(m,256,6,1),P=l(m,{...j,curve:new Float32Array([1,1]),oversample:"none"});let $=[b,T,R],ce=[V,E,N];const ie=new Float32Array(1);Y.onaudioprocess=({inputBuffer:Q})=>{const pe=[h(Q,ie,0),h(Q,ie,1),h(Q,ie,2)];pe.some((he,Se)=>he!==$[Se])&&(U.setOrientation(...pe),$=pe);const Te=[h(Q,ie,3),h(Q,ie,4),h(Q,ie,5)];Te.some((he,Se)=>he!==ce[Se])&&(U.setPosition(...Te),ce=Te)},Object.defineProperty(te.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"defaultValue",{get:()=>0}),Object.defineProperty(J.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0});const ne={get bufferSize(){},get channelCount(){return U.channelCount},set channelCount(Q){if(Q>2)throw c();q.channelCount=Q,U.channelCount=Q},get channelCountMode(){return U.channelCountMode},set channelCountMode(Q){if(Q==="max")throw c();q.channelCountMode=Q,U.channelCountMode=Q},get channelInterpretation(){return U.channelInterpretation},set channelInterpretation(Q){q.channelInterpretation=Q,U.channelInterpretation=Q},get coneInnerAngle(){return U.coneInnerAngle},set coneInnerAngle(Q){U.coneInnerAngle=Q},get coneOuterAngle(){return U.coneOuterAngle},set coneOuterAngle(Q){U.coneOuterAngle=Q},get coneOuterGain(){return U.coneOuterGain},set coneOuterGain(Q){if(Q<0||Q>1)throw e();U.coneOuterGain=Q},get context(){return U.context},get distanceModel(){return U.distanceModel},set distanceModel(Q){U.distanceModel=Q},get inputs(){return[q]},get maxDistance(){return U.maxDistance},set maxDistance(Q){if(Q<0)throw new RangeError;U.maxDistance=Q},get numberOfInputs(){return U.numberOfInputs},get numberOfOutputs(){return U.numberOfOutputs},get orientationX(){return ee.gain},get orientationY(){return te.gain},get orientationZ(){return K.gain},get panningModel(){return U.panningModel},set panningModel(Q){U.panningModel=Q},get positionX(){return J.gain},get positionY(){return z.gain},get positionZ(){return Z.gain},get refDistance(){return U.refDistance},set refDistance(Q){if(Q<0)throw new RangeError;U.refDistance=Q},get rolloffFactor(){return U.rolloffFactor},set rolloffFactor(Q){if(Q<0)throw new RangeError;U.rolloffFactor=Q},addEventListener(...Q){return q.addEventListener(Q[0],Q[1],Q[2])},dispatchEvent(...Q){return q.dispatchEvent(Q[0])},removeEventListener(...Q){return q.removeEventListener(Q[0],Q[1],Q[2])}};g!==ne.coneInnerAngle&&(ne.coneInnerAngle=g),y!==ne.coneOuterAngle&&(ne.coneOuterAngle=y),x!==ne.coneOuterGain&&(ne.coneOuterGain=x),w!==ne.distanceModel&&(ne.distanceModel=w),_!==ne.maxDistance&&(ne.maxDistance=_),b!==ne.orientationX.value&&(ne.orientationX.value=b),T!==ne.orientationY.value&&(ne.orientationY.value=T),R!==ne.orientationZ.value&&(ne.orientationZ.value=R),L!==ne.panningModel&&(ne.panningModel=L),V!==ne.positionX.value&&(ne.positionX.value=V),E!==ne.positionY.value&&(ne.positionY.value=E),N!==ne.positionZ.value&&(ne.positionZ.value=N),M!==ne.refDistance&&(ne.refDistance=M),C!==ne.rolloffFactor&&(ne.rolloffFactor=C),($[0]!==1||$[1]!==0||$[2]!==0)&&U.setOrientation(...$),(ce[0]!==0||ce[1]!==0||ce[2]!==0)&&U.setPosition(...ce);const ae=()=>{q.connect(U),s(q,P,0,0),P.connect(ee).connect(B,0,0),P.connect(te).connect(B,0,1),P.connect(K).connect(B,0,2),P.connect(J).connect(B,0,3),P.connect(z).connect(B,0,4),P.connect(Z).connect(B,0,5),B.connect(Y).connect(m.destination)},ue=()=>{q.disconnect(U),u(q,P,0,0),P.disconnect(ee),ee.disconnect(B),P.disconnect(te),te.disconnect(B),P.disconnect(K),K.disconnect(B),P.disconnect(J),J.disconnect(B),P.disconnect(z),z.disconnect(B),P.disconnect(Z),Z.disconnect(B),B.disconnect(Y),Y.disconnect(m.destination)};return f($i(ne,U),ae,ue)},bE=s=>(e,{disableNormalization:t,imag:r,real:o})=>{const l=r instanceof Float32Array?r:new Float32Array(r),c=o instanceof Float32Array?o:new Float32Array(o),u=e.createPeriodicWave(c,l,{disableNormalization:t});if(Array.from(r).length<2)throw s();return u},aa=(s,e,t,r)=>s.createScriptProcessor(e,t,r),TE=(s,e)=>(t,r)=>{const o=r.channelCountMode;if(o==="clamped-max")throw e();if(t.createStereoPanner===void 0)return s(t,r);const l=t.createStereoPanner();return _t(l,r),lt(l,r,"pan"),Object.defineProperty(l,"channelCountMode",{get:()=>o,set:c=>{if(c!==o)throw e()}}),l},CE=(s,e,t,r,o,l)=>{const u=new Float32Array([1,1]),h=Math.PI/2,f={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},m={...f,oversample:"none"},g=(w,_,b,T)=>{const R=new Float32Array(16385),L=new Float32Array(16385);for(let O=0;O<16385;O+=1){const U=O/16384*h;R[O]=Math.cos(U),L[O]=Math.sin(U)}const V=t(w,{...f,gain:0}),E=r(w,{...m,curve:R}),N=r(w,{...m,curve:u}),M=t(w,{...f,gain:0}),C=r(w,{...m,curve:L});return{connectGraph(){_.connect(V),_.connect(N.inputs===void 0?N:N.inputs[0]),_.connect(M),N.connect(b),b.connect(E.inputs===void 0?E:E.inputs[0]),b.connect(C.inputs===void 0?C:C.inputs[0]),E.connect(V.gain),C.connect(M.gain),V.connect(T,0,0),M.connect(T,0,1)},disconnectGraph(){_.disconnect(V),_.disconnect(N.inputs===void 0?N:N.inputs[0]),_.disconnect(M),N.disconnect(b),b.disconnect(E.inputs===void 0?E:E.inputs[0]),b.disconnect(C.inputs===void 0?C:C.inputs[0]),E.disconnect(V.gain),C.disconnect(M.gain),V.disconnect(T,0,0),M.disconnect(T,0,1)}}},y=(w,_,b,T)=>{const R=new Float32Array(16385),L=new Float32Array(16385),V=new Float32Array(16385),E=new Float32Array(16385),N=Math.floor(16385/2);for(let J=0;J<16385;J+=1)if(J>N){const z=(J-N)/(16384-N)*h;R[J]=Math.cos(z),L[J]=Math.sin(z),V[J]=0,E[J]=1}else{const z=J/(16384-N)*h;R[J]=1,L[J]=0,V[J]=Math.cos(z),E[J]=Math.sin(z)}const M=e(w,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),C=t(w,{...f,gain:0}),O=r(w,{...m,curve:R}),U=t(w,{...f,gain:0}),j=r(w,{...m,curve:L}),B=r(w,{...m,curve:u}),q=t(w,{...f,gain:0}),ee=r(w,{...m,curve:V}),te=t(w,{...f,gain:0}),K=r(w,{...m,curve:E});return{connectGraph(){_.connect(M),_.connect(B.inputs===void 0?B:B.inputs[0]),M.connect(C,0),M.connect(U,0),M.connect(q,1),M.connect(te,1),B.connect(b),b.connect(O.inputs===void 0?O:O.inputs[0]),b.connect(j.inputs===void 0?j:j.inputs[0]),b.connect(ee.inputs===void 0?ee:ee.inputs[0]),b.connect(K.inputs===void 0?K:K.inputs[0]),O.connect(C.gain),j.connect(U.gain),ee.connect(q.gain),K.connect(te.gain),C.connect(T,0,0),q.connect(T,0,0),U.connect(T,0,1),te.connect(T,0,1)},disconnectGraph(){_.disconnect(M),_.disconnect(B.inputs===void 0?B:B.inputs[0]),M.disconnect(C,0),M.disconnect(U,0),M.disconnect(q,1),M.disconnect(te,1),B.disconnect(b),b.disconnect(O.inputs===void 0?O:O.inputs[0]),b.disconnect(j.inputs===void 0?j:j.inputs[0]),b.disconnect(ee.inputs===void 0?ee:ee.inputs[0]),b.disconnect(K.inputs===void 0?K:K.inputs[0]),O.disconnect(C.gain),j.disconnect(U.gain),ee.disconnect(q.gain),K.disconnect(te.gain),C.disconnect(T,0,0),q.disconnect(T,0,0),U.disconnect(T,0,1),te.disconnect(T,0,1)}}},x=(w,_,b,T,R)=>{if(_===1)return g(w,b,T,R);if(_===2)return y(w,b,T,R);throw o()};return(w,{channelCount:_,channelCountMode:b,pan:T,...R})=>{if(b==="max")throw o();const L=s(w,{...R,channelCount:1,channelCountMode:b,numberOfInputs:2}),V=t(w,{...R,channelCount:_,channelCountMode:b,gain:1}),E=t(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:T});let{connectGraph:N,disconnectGraph:M}=x(w,_,V,E,L);Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(E.gain,"maxValue",{get:()=>1}),Object.defineProperty(E.gain,"minValue",{get:()=>-1});const C={get bufferSize(){},get channelCount(){return V.channelCount},set channelCount(B){V.channelCount!==B&&(O&&M(),{connectGraph:N,disconnectGraph:M}=x(w,B,V,E,L),O&&N()),V.channelCount=B},get channelCountMode(){return V.channelCountMode},set channelCountMode(B){if(B==="clamped-max"||B==="max")throw o();V.channelCountMode=B},get channelInterpretation(){return V.channelInterpretation},set channelInterpretation(B){V.channelInterpretation=B},get context(){return V.context},get inputs(){return[V]},get numberOfInputs(){return V.numberOfInputs},get numberOfOutputs(){return V.numberOfOutputs},get pan(){return E.gain},addEventListener(...B){return V.addEventListener(B[0],B[1],B[2])},dispatchEvent(...B){return V.dispatchEvent(B[0])},removeEventListener(...B){return V.removeEventListener(B[0],B[1],B[2])}};let O=!1;const U=()=>{N(),O=!0},j=()=>{M(),O=!1};return l($i(C,L),U,j)}},kE=(s,e,t,r,o,l,c)=>(u,h)=>{const f=u.createWaveShaper();if(l!==null&&l.name==="webkitAudioContext"&&u.createGain().gain.automationRate===void 0)return t(u,h);_t(f,h);const m=h.curve===null||h.curve instanceof Float32Array?h.curve:new Float32Array(h.curve);if(m!==null&&m.length<2)throw e();st(f,{curve:m},"curve"),st(f,h,"oversample");let g=null,y=!1;return c(f,"curve",_=>()=>_.call(f),_=>b=>(_.call(f,b),y&&(r(b)&&g===null?g=s(u,f):!r(b)&&g!==null&&(g(),g=null)),b)),o(f,()=>{y=!0,r(f.curve)&&(g=s(u,f))},()=>{y=!1,g!==null&&(g(),g=null)})},EE=(s,e,t,r,o)=>(l,{curve:c,oversample:u,...h})=>{const f=l.createWaveShaper(),m=l.createWaveShaper();_t(f,h),_t(m,h);const g=t(l,{...h,gain:1}),y=t(l,{...h,gain:-1}),x=t(l,{...h,gain:1}),w=t(l,{...h,gain:-1});let _=null,b=!1,T=null;const R={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(E){g.channelCount=E,y.channelCount=E,f.channelCount=E,x.channelCount=E,m.channelCount=E,w.channelCount=E},get channelCountMode(){return f.channelCountMode},set channelCountMode(E){g.channelCountMode=E,y.channelCountMode=E,f.channelCountMode=E,x.channelCountMode=E,m.channelCountMode=E,w.channelCountMode=E},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(E){g.channelInterpretation=E,y.channelInterpretation=E,f.channelInterpretation=E,x.channelInterpretation=E,m.channelInterpretation=E,w.channelInterpretation=E},get context(){return f.context},get curve(){return T},set curve(E){if(E!==null&&E.length<2)throw e();if(E===null)f.curve=E,m.curve=E;else{const N=E.length,M=new Float32Array(N+2-N%2),C=new Float32Array(N+2-N%2);M[0]=E[0],C[0]=-E[N-1];const O=Math.ceil((N+1)/2),U=(N+1)/2-1;for(let j=1;j<O;j+=1){const B=j/O*U,q=Math.floor(B),ee=Math.ceil(B);M[j]=q===ee?E[q]:(1-(B-q))*E[q]+(1-(ee-B))*E[ee],C[j]=q===ee?-E[N-1-q]:-((1-(B-q))*E[N-1-q])-(1-(ee-B))*E[N-1-ee]}M[O]=N%2===1?E[O-1]:(E[O-2]+E[O-1])/2,f.curve=M,m.curve=C}T=E,b&&(r(T)&&_===null?_=s(l,g):_!==null&&(_(),_=null))},get inputs(){return[g]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get oversample(){return f.oversample},set oversample(E){f.oversample=E,m.oversample=E},addEventListener(...E){return g.addEventListener(E[0],E[1],E[2])},dispatchEvent(...E){return g.dispatchEvent(E[0])},removeEventListener(...E){return g.removeEventListener(E[0],E[1],E[2])}};c!==null&&(R.curve=c instanceof Float32Array?c:new Float32Array(c)),u!==R.oversample&&(R.oversample=u);const L=()=>{g.connect(f).connect(x),g.connect(y).connect(m).connect(w).connect(x),b=!0,r(T)&&(_=s(l,g))},V=()=>{g.disconnect(f),f.disconnect(x),g.disconnect(y),y.disconnect(m),m.disconnect(w),w.disconnect(x),b=!1,_!==null&&(_(),_=null)};return o($i(R,x),L,V)},Bt=()=>new DOMException("","NotSupportedError"),PE={numberOfChannels:1},AE=(s,e,t,r,o)=>class extends s{constructor(c,u,h){let f;if(typeof c=="number"&&u!==void 0&&h!==void 0)f={length:u,numberOfChannels:c,sampleRate:h};else if(typeof c=="object")f=c;else throw new Error("The given parameters are not valid.");const{length:m,numberOfChannels:g,sampleRate:y}={...PE,...f},x=r(g,m,y);e(Zo,()=>Zo(x))||x.addEventListener("statechange",(()=>{let w=0;const _=b=>{this._state==="running"&&(w>0?(x.removeEventListener("statechange",_),b.stopImmediatePropagation(),this._waitForThePromiseToSettle(b)):w+=1)};return _})()),super(x,g),this._length=m,this._nativeOfflineAudioContext=x,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Xy(this)}))}_waitForThePromiseToSettle(c){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(c):setTimeout(()=>this._waitForThePromiseToSettle(c))}},NE={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},RE=(s,e,t,r,o,l,c)=>class extends s{constructor(h,f){const m=o(h),g={...NE,...f},y=t(m,g),x=l(m),w=x?r():null,_=h.sampleRate/2;super(h,!1,y,w),this._detune=e(this,x,y.detune,153600,-153600),this._frequency=e(this,x,y.frequency,_,-_),this._nativeOscillatorNode=y,this._onended=null,this._oscillatorNodeRenderer=w,this._oscillatorNodeRenderer!==null&&g.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=g.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(h){const f=typeof h=="function"?c(this,h):null;this._nativeOscillatorNode.onended=f;const m=this._nativeOscillatorNode.onended;this._onended=m!==null&&m===f?h:m}get type(){return this._nativeOscillatorNode.type}set type(h){this._nativeOscillatorNode.type=h,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(h){this._nativeOscillatorNode.setPeriodicWave(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=h)}start(h=0){if(this._nativeOscillatorNode.start(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=h),this.context.state!=="closed"){Di(this);const f=()=>{this._nativeOscillatorNode.removeEventListener("ended",f),pr(this)&&ra(this)};this._nativeOscillatorNode.addEventListener("ended",f)}}stop(h=0){this._nativeOscillatorNode.stop(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=h)}},ME=(s,e,t,r,o)=>()=>{const l=new WeakMap;let c=null,u=null,h=null;const f=async(m,g)=>{let y=t(m);const x=Ot(y,g);if(!x){const w={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,detune:y.detune.value,frequency:y.frequency.value,periodicWave:c===null?void 0:c,type:y.type};y=e(g,w),u!==null&&y.start(u),h!==null&&y.stop(h)}return l.set(g,y),x?(await s(g,m.detune,y.detune),await s(g,m.frequency,y.frequency)):(await r(g,m.detune,y.detune),await r(g,m.frequency,y.frequency)),await o(m,g,y),y};return{set periodicWave(m){c=m},set start(m){u=m},set stop(m){h=m},render(m,g){const y=l.get(g);return y!==void 0?Promise.resolve(y):f(m,g)}}},OE={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},IE=(s,e,t,r,o,l,c)=>class extends s{constructor(h,f){const m=o(h),g={...OE,...f},y=t(m,g),x=l(m),w=x?r():null;super(h,!1,y,w),this._nativePannerNode=y,this._orientationX=e(this,x,y.orientationX,Lt,Jt),this._orientationY=e(this,x,y.orientationY,Lt,Jt),this._orientationZ=e(this,x,y.orientationZ,Lt,Jt),this._positionX=e(this,x,y.positionX,Lt,Jt),this._positionY=e(this,x,y.positionY,Lt,Jt),this._positionZ=e(this,x,y.positionZ,Lt,Jt),c(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(h){this._nativePannerNode.coneInnerAngle=h}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(h){this._nativePannerNode.coneOuterAngle=h}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(h){this._nativePannerNode.coneOuterGain=h}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(h){this._nativePannerNode.distanceModel=h}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(h){this._nativePannerNode.maxDistance=h}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(h){this._nativePannerNode.panningModel=h}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(h){this._nativePannerNode.refDistance=h}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(h){this._nativePannerNode.rolloffFactor=h}},DE=(s,e,t,r,o,l,c,u,h,f)=>()=>{const m=new WeakMap;let g=null;const y=async(x,w)=>{let _=null,b=l(x);const T={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation},R={...T,coneInnerAngle:b.coneInnerAngle,coneOuterAngle:b.coneOuterAngle,coneOuterGain:b.coneOuterGain,distanceModel:b.distanceModel,maxDistance:b.maxDistance,panningModel:b.panningModel,refDistance:b.refDistance,rolloffFactor:b.rolloffFactor},L=Ot(b,w);if("bufferSize"in b)_=r(w,{...T,gain:1});else if(!L){const V={...R,orientationX:b.orientationX.value,orientationY:b.orientationY.value,orientationZ:b.orientationZ.value,positionX:b.positionX.value,positionY:b.positionY.value,positionZ:b.positionZ.value};b=o(w,V)}if(m.set(w,_===null?b:_),_!==null){if(g===null){if(c===null)throw new Error("Missing the native OfflineAudioContext constructor.");const j=new c(6,x.context.length,w.sampleRate),B=e(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});B.connect(j.destination),g=(async()=>{const q=await Promise.all([x.orientationX,x.orientationY,x.orientationZ,x.positionX,x.positionY,x.positionZ].map(async(ee,te)=>{const K=t(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:te===0?1:0});return await u(j,ee,K.offset),K}));for(let ee=0;ee<6;ee+=1)q[ee].connect(B,0,ee),q[ee].start(0);return f(j)})()}const V=await g,E=r(w,{...T,gain:1});await h(x,w,E);const N=[];for(let j=0;j<V.numberOfChannels;j+=1)N.push(V.getChannelData(j));let M=[N[0][0],N[1][0],N[2][0]],C=[N[3][0],N[4][0],N[5][0]],O=r(w,{...T,gain:1}),U=o(w,{...R,orientationX:M[0],orientationY:M[1],orientationZ:M[2],positionX:C[0],positionY:C[1],positionZ:C[2]});E.connect(O).connect(U.inputs[0]),U.connect(_);for(let j=128;j<V.length;j+=128){const B=[N[0][j],N[1][j],N[2][j]],q=[N[3][j],N[4][j],N[5][j]];if(B.some((ee,te)=>ee!==M[te])||q.some((ee,te)=>ee!==C[te])){M=B,C=q;const ee=j/w.sampleRate;O.gain.setValueAtTime(0,ee),O=r(w,{...T,gain:0}),U=o(w,{...R,orientationX:M[0],orientationY:M[1],orientationZ:M[2],positionX:C[0],positionY:C[1],positionZ:C[2]}),O.gain.setValueAtTime(1,ee),E.connect(O).connect(U.inputs[0]),U.connect(_)}}return _}return L?(await s(w,x.orientationX,b.orientationX),await s(w,x.orientationY,b.orientationY),await s(w,x.orientationZ,b.orientationZ),await s(w,x.positionX,b.positionX),await s(w,x.positionY,b.positionY),await s(w,x.positionZ,b.positionZ)):(await u(w,x.orientationX,b.orientationX),await u(w,x.orientationY,b.orientationY),await u(w,x.orientationZ,b.orientationZ),await u(w,x.positionX,b.positionX),await u(w,x.positionY,b.positionY),await u(w,x.positionZ,b.positionZ)),Wi(b)?await h(x,w,b.inputs[0]):await h(x,w,b),b};return{render(x,w){const _=m.get(w);return _!==void 0?Promise.resolve(_):y(x,w)}}},LE={disableNormalization:!1},FE=(s,e,t,r)=>class i_{constructor(l,c){const u=e(l),h=r({...LE,...c}),f=s(u,h);return t.add(f),f}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===i_.prototype||t.has(l)}},VE=(s,e)=>(t,r,o)=>(s(r).replay(o),e(r,t,o)),BE=(s,e,t)=>async(r,o,l)=>{const c=s(r);await Promise.all(c.activeInputs.map((u,h)=>Array.from(u).map(async([f,m])=>{const y=await e(f).render(f,o),x=r.context.destination;!t(f)&&(r!==x||!t(r))&&y.connect(l,m,h)})).reduce((u,h)=>[...u,...h],[]))},zE=(s,e,t)=>async(r,o,l)=>{const c=e(r);await Promise.all(Array.from(c.activeInputs).map(async([u,h])=>{const m=await s(u).render(u,o);t(u)||m.connect(l,h)}))},UE=(s,e,t,r)=>o=>s(Zo,()=>Zo(o))?Promise.resolve(s(r,r)).then(l=>{if(!l){const c=t(o,512,0,1);o.oncomplete=()=>{c.onaudioprocess=null,c.disconnect()},c.onaudioprocess=()=>o.currentTime,c.connect(o.destination)}return o.startRendering()}):new Promise(l=>{const c=e(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=u=>{c.disconnect(),l(u.renderedBuffer)},c.connect(o.destination),o.startRendering()}),jE=s=>(e,t)=>{s.set(e,t)},GE=s=>(e,t)=>s.set(e,t),WE=(s,e,t,r,o,l,c,u)=>(h,f)=>t(h).render(h,f).then(()=>Promise.all(Array.from(r(f)).map(m=>t(m).render(m,f)))).then(()=>o(f)).then(m=>(typeof m.copyFromChannel!="function"?(c(m),df(m)):e(l,()=>l(m))||u(m),s.add(m),m)),$E={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},qE=(s,e,t,r,o,l)=>class extends s{constructor(u,h){const f=o(u),m={...$E,...h},g=t(f,m),y=l(f),x=y?r():null;super(u,!1,g,x),this._pan=e(this,y,g.pan)}get pan(){return this._pan}},HE=(s,e,t,r,o)=>()=>{const l=new WeakMap,c=async(u,h)=>{let f=t(u);const m=Ot(f,h);if(!m){const g={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,pan:f.pan.value};f=e(h,g)}return l.set(h,f),m?await s(h,u.pan,f.pan):await r(h,u.pan,f.pan),Wi(f)?await o(u,h,f.inputs[0]):await o(u,h,f),f};return{render(u,h){const f=l.get(h);return f!==void 0?Promise.resolve(f):c(u,h)}}},YE=s=>()=>{if(s===null)return!1;try{new s({length:1,sampleRate:44100})}catch{return!1}return!0},XE=(s,e)=>async()=>{if(s===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),o=URL.createObjectURL(t);let l=!1,c=!1;try{await r.audioWorklet.addModule(o);const u=new s(r,"a",{numberOfOutputs:0}),h=r.createOscillator();u.port.onmessage=()=>l=!0,u.onprocessorerror=()=>c=!0,h.connect(u),h.start(0),await r.startRendering(),await new Promise(f=>setTimeout(f))}catch{}finally{URL.revokeObjectURL(o)}return l&&!c},KE=(s,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),r=s(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{t.oncomplete=()=>{r.disconnect(),o(t.currentTime!==0)},t.startRendering()})},ZE=()=>new DOMException("","UnknownError"),QE={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},JE=(s,e,t,r,o,l,c)=>class extends s{constructor(h,f){const m=o(h),g={...QE,...f},y=t(m,g),w=l(m)?r():null;super(h,!0,y,w),this._isCurveNullified=!1,this._nativeWaveShaperNode=y,c(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(h){if(h===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(h.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=h}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(h){this._nativeWaveShaperNode.oversample=h}},eP=(s,e,t)=>()=>{const r=new WeakMap,o=async(l,c)=>{let u=e(l);if(!Ot(u,c)){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,curve:u.curve,oversample:u.oversample};u=s(c,f)}return r.set(c,u),Wi(u)?await t(l,c,u.inputs[0]):await t(l,c,u),u};return{render(l,c){const u=r.get(c);return u!==void 0?Promise.resolve(u):o(l,c)}}},tP=()=>typeof window>"u"?null:window,nP=(s,e)=>t=>{t.copyFromChannel=(r,o,l=0)=>{const c=s(l),u=s(o);if(u>=t.numberOfChannels)throw e();const h=t.length,f=t.getChannelData(u),m=r.length;for(let g=c<0?-c:0;g+c<h&&g<m;g+=1)r[g]=f[g+c]},t.copyToChannel=(r,o,l=0)=>{const c=s(l),u=s(o);if(u>=t.numberOfChannels)throw e();const h=t.length,f=t.getChannelData(u),m=r.length;for(let g=c<0?-c:0;g+c<h&&g<m;g+=1)f[g+c]=r[g]}},rP=s=>e=>{e.copyFromChannel=(t=>(r,o,l=0)=>{const c=s(l),u=s(o);if(c<e.length)return t.call(e,r,u,c)})(e.copyFromChannel),e.copyToChannel=(t=>(r,o,l=0)=>{const c=s(l),u=s(o);if(c<e.length)return t.call(e,r,u,c)})(e.copyToChannel)},sP=s=>(e,t)=>{const r=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),s(e,"buffer",o=>()=>{const l=o.call(e);return l===r?null:l},o=>l=>o.call(e,l===null?r:l))},iP=(s,e)=>(t,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw s()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw s()}});const o=t.createBufferSource();e(r,()=>{const u=r.numberOfInputs;for(let h=0;h<u;h+=1)o.connect(r,0,h)},()=>o.disconnect(r))},o_=(s,e,t)=>s.copyFromChannel===void 0?s.getChannelData(t)[0]:(s.copyFromChannel(e,t),e[0]),a_=s=>{if(s===null)return!1;const e=s.length;return e%2!==0?s[Math.floor(e/2)]!==0:s[e/2-1]+s[e/2]!==0},la=(s,e,t,r)=>{let o=s;for(;!o.hasOwnProperty(e);)o=Object.getPrototypeOf(o);const{get:l,set:c}=Object.getOwnPropertyDescriptor(o,e);Object.defineProperty(s,e,{get:t(l),set:r(c)})},oP=s=>({...s,outputChannelCount:s.outputChannelCount!==void 0?s.outputChannelCount:s.numberOfInputs===1&&s.numberOfOutputs===1?[s.channelCount]:Array.from({length:s.numberOfOutputs},()=>1)}),aP=s=>({...s,channelCount:s.numberOfOutputs}),lP=s=>{const{imag:e,real:t}=s;return e===void 0?t===void 0?{...s,imag:[0,0],real:[0,0]}:{...s,imag:Array.from(t,()=>0),real:t}:t===void 0?{...s,imag:e,real:Array.from(e,()=>0)}:{...s,imag:e,real:t}},l_=(s,e,t)=>{try{s.setValueAtTime(e,t)}catch(r){if(r.code!==9)throw r;l_(s,e,t+1e-7)}},cP=s=>{const e=s.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},uP=s=>{const e=s.createBufferSource(),t=s.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},dP=s=>{const e=s.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},gf=s=>{const e=s.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},c_=s=>{const e=s.createBuffer(1,1,44100),t=s.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},vf=s=>{const e=s.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},hP=s=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(s)}finally{e.close(),t.close()}},fP=s=>{s.start=(e=>(t=0,r=0,o)=>{const l=s.buffer,c=l===null?r:Math.min(l.duration,r);l!==null&&c>l.duration-.5/s.context.sampleRate?e.call(s,t,0,0):e.call(s,t,c,o)})(s.start)},u_=(s,e)=>{const t=e.createGain();s.connect(t);const r=(o=>()=>{o.call(s,t),s.removeEventListener("ended",r)})(s.disconnect);s.addEventListener("ended",r),$i(s,t),s.stop=(o=>{let l=!1;return(c=0)=>{if(l)try{o.call(s,c)}catch{t.gain.setValueAtTime(0,c)}else o.call(s,c),l=!0}})(s.stop)},qi=(s,e)=>t=>{const r={value:s};return Object.defineProperties(t,{currentTarget:r,target:r}),typeof e=="function"?e.call(s,t):e.handleEvent.call(s,t)},pP=IC(Os),mP=zC(Os),gP=Q1(Tc),d_=new WeakMap,vP=gk(d_),Dn=P1(new Map,new WeakMap),Yn=tP(),h_=qk(Dn,Kn),yf=mk(Ft),kt=BE(Ft,yf,Ps),yP=$C(h_,et,kt),Ze=_k(bc),yr=_E(Yn),Ye=Lk(yr),f_=new WeakMap,p_=lk(qi),ca=Kk(Yn),_f=Mk(ca),wf=Ok(Yn),m_=Ik(Yn),Qo=Qk(Yn),ft=g1(DC(jy),BC(pP,mP,lc,gP,cc,Ft,vP,na,et,Os,pr,Ps,$l),Dn,Ek(Ih,cc,Ft,et,Ko,pr),Kn,Cc,Bt,Y1(lc,Ih,Ft,et,Ko,Ze,pr,Ye),tk(f_,Ft,Nn),p_,Ze,_f,wf,m_,Ye,Qo),_P=WC(ft,yP,Kn,h_,Ze,Ye),xf=new WeakSet,Ov=Hk(Yn),g_=U1(new Uint32Array(1)),Sf=nP(g_,Kn),bf=rP(g_),v_=HC(xf,Dn,Bt,Ov,yr,YE(Ov),Sf,bf),kc=UC(Yt),y_=zE(yf,sa,Ps),Zn=D1(y_),Hi=Xk(kc,Dn,cP,uP,dP,gf,c_,vf,fP,sP(la),u_),Qn=VE(vk(sa),y_),wP=KC(Zn,Hi,et,Qn,kt),Ln=v1(LC(Gy),f_,uf,y1,PC,AC,NC,RC,MC,Rh,zy,ca,l_),xP=XC(ft,wP,Ln,bt,Hi,Ze,Ye,qi),SP=i1(ft,o1,Kn,bt,Zk(Yt,la),Ze,Ye,kt),bP=E1(Zn,r_,et,Qn,kt),Is=GE(d_),TP=k1(ft,Ln,bP,Cc,r_,Ze,Ye,Is),Jr=Wk(Os,wf),CP=iP(bt,Jr),es=iE(ca,CP),kP=R1(es,et,kt),EP=N1(ft,kP,es,Ze,Ye),PP=I1(oa,et,kt),AP=O1(ft,PP,oa,Ze,Ye,aP),NP=lE(kc,Hi,Yt,Jr),Yi=aE(kc,Dn,NP,gf,vf),RP=z1(Zn,Yi,et,Qn,kt),MP=B1(ft,Ln,RP,Yi,Ze,Ye,qi),__=cE(Bt,la),OP=W1(__,et,kt),IP=G1(ft,OP,__,Ze,Ye,Is),DP=Z1(Zn,s_,et,Qn,kt),LP=K1(ft,Ln,DP,s_,Ze,Ye,Is),w_=uE(Bt),FP=ik(Zn,w_,et,Qn,kt),VP=sk(ft,Ln,FP,w_,Bt,Ze,Ye,Is),BP=fk(Zn,Yt,et,Qn,kt),zP=hk(ft,Ln,BP,Yt,Ze,Ye),UP=pE(Cc,bt,aa,Bt),Ec=UE(Dn,Yt,aa,KE(Yt,yr)),jP=kk(Hi,et,yr,kt,Ec),GP=dE(UP),WP=Tk(ft,GP,jP,Ze,Ye,Is),$P=a1(Ln,es,Yi,aa,Bt,o_,Ye,la),x_=new WeakMap,qP=Gk(SP,$P,p_,Ye,x_,qi),S_=wE(kc,Dn,gf,c_,vf,u_),HP=ME(Zn,S_,et,Qn,kt),YP=RE(ft,Ln,S_,HP,Ze,Ye,qi),b_=F1(Hi),XP=EE(b_,bt,Yt,a_,Jr),Pc=kE(b_,bt,XP,a_,Jr,ca,la),KP=SE(lc,bt,es,Yt,aa,Pc,Bt,cc,o_,Jr),T_=xE(KP),ZP=DE(Zn,es,Yi,Yt,T_,et,yr,Qn,kt,Ec),QP=IE(ft,Ln,T_,ZP,Ze,Ye,Is),JP=bE(Kn),eA=FE(JP,Ze,new WeakSet,lP),tA=CE(es,oa,Yt,Pc,Bt,Jr),C_=TE(tA,Bt),nA=HE(Zn,C_,et,Qn,kt),rA=qE(ft,Ln,C_,nA,Ze,Ye),sA=eP(Pc,et,kt),iA=JE(ft,bt,Pc,sA,Ze,Ye,Is),k_=Fk(Yn),Tf=ck(Yn),E_=new WeakMap,oA=wk(E_,yr),aA=k_?VC(Dn,Bt,ak(Yn),Tf,uk(OC),Ze,oA,Ye,Qo,new WeakMap,new WeakMap,XE(Qo,yr),Yn):void 0,lA=Dk(_f,Ye),cA=H1(xf,Dn,q1,ok,new WeakSet,Ze,lA,oc,Zo,Sf,bf),P_=T1(aA,_P,v_,xP,TP,EP,AP,MP,IP,cA,LP,VP,zP,WP,qP,YP,QP,eA,rA,iA),uA=Vk(ft,mE,Ze,Ye),dA=zk(ft,gE,Ze,Ye),hA=Uk(ft,vE,Ze,Ye),fA=yE(bt,Ye),pA=jk(ft,fA,Ze),mA=s1(P_,bt,Bt,ZE,uA,dA,hA,pA,ca),Cf=xk(x_),gA=jC(Cf),A_=L1(Kn),vA=J1(Cf),N_=nk(Kn),R_=new WeakMap,yA=pk(R_,Nn),_A=sE(A_,Kn,bt,es,oa,Yi,Yt,aa,Bt,N_,Tf,yA,Jr),wA=eE(bt,_A,Yt,Bt,Jr),xA=b1(Zn,A_,Hi,es,oa,Yi,Yt,vA,N_,Tf,et,Qo,yr,Qn,kt,Ec),SA=yk(E_),bA=jE(R_),Iv=k_?w1(gA,ft,Ln,xA,wA,Ft,SA,Ze,Ye,Qo,oP,bA,hP,qi):void 0,TA=$1(Bt,yr),CA=WE(xf,Dn,yf,Cf,Ec,oc,Sf,bf),kA=AE(P_,Dn,bt,TA,CA),EA=Pk(bc,_f),PA=Ak(cf,wf),AA=Nk(uf,m_),NA=Rk(bc,Ye);function mn(s){return s===void 0}function Ve(s){return s!==void 0}function RA(s){return typeof s=="function"}function Kr(s){return typeof s=="number"}function Ts(s){return Object.prototype.toString.call(s)==="[object Object]"&&s.constructor===Object}function MA(s){return typeof s=="boolean"}function rn(s){return Array.isArray(s)}function mr(s){return typeof s=="string"}function Il(s){return mr(s)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(s)}function Ne(s,e){if(!s)throw new Error(e)}function pn(s,e,t=1/0){if(!(e<=s&&s<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${s}`)}function M_(s){!s.isOffline&&s.state!=="running"&&Ac('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let O_=!1,Dv=!1;function Lv(s){O_=s}function OA(s){mn(s)&&O_&&!Dv&&(Dv=!0,Ac("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let I_=console;function IA(...s){I_.log(...s)}function Ac(...s){I_.warn(...s)}function DA(s){return new mA(s)}function LA(s,e,t){return new kA(s,e,t)}const en=typeof self=="object"?self:null,FA=en&&(en.hasOwnProperty("AudioContext")||en.hasOwnProperty("webkitAudioContext"));function VA(s,e,t){return Ne(Ve(Iv),"AudioWorkletNode only works in a secure context (https or localhost)"),new(s instanceof(en==null?void 0:en.BaseAudioContext)?en==null?void 0:en.AudioWorkletNode:Iv)(s,e,t)}var $n=function(){return $n=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},$n.apply(this,arguments)};function D_(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(s);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(s,r[o])&&(t[r[o]]=s[r[o]]);return t}function Fn(s,e,t,r){var o=arguments.length,l=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(s,e,t,r);else for(var u=s.length-1;u>=0;u--)(c=s[u])&&(l=(o<3?c(l):o>3?c(e,t,l):c(e,t))||l);return o>3&&l&&Object.defineProperty(e,t,l),l}function ht(s,e,t,r){function o(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function u(m){try{f(r.next(m))}catch(g){c(g)}}function h(m){try{f(r.throw(m))}catch(g){c(g)}}function f(m){m.done?l(m.value):o(m.value).then(u,h)}f((r=r.apply(s,e||[])).next())})}function BA(s,e,t){if(t||arguments.length===2)for(var r=0,o=e.length,l;r<o;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return s.concat(l||Array.prototype.slice.call(e))}class zA{constructor(e,t,r,o){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(o||44100),.001),this.updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),r=new Worker(t);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function As(s){return AA(s)}function Hr(s){return PA(s)}function ql(s){return NA(s)}function mi(s){return EA(s)}function UA(s){return s instanceof v_}function jA(s,e){return s==="value"||As(e)||Hr(e)||UA(e)}function Cs(s,...e){if(!e.length)return s;const t=e.shift();if(Ts(s)&&Ts(t))for(const r in t)jA(r,t[r])?s[r]=t[r]:Ts(t[r])?(s[r]||Object.assign(s,{[r]:{}}),Cs(s[r],t[r])):Object.assign(s,{[r]:t[r]});return Cs(s,...e)}function GA(s,e){return s.length===e.length&&s.every((t,r)=>e[r]===t)}function be(s,e,t=[],r){const o={},l=Array.from(e);if(Ts(l[0])&&r&&!Reflect.has(l[0],r)&&(Object.keys(l[0]).some(u=>Reflect.has(s,u))||(Cs(o,{[r]:l[0]}),t.splice(t.indexOf(r),1),l.shift())),l.length===1&&Ts(l[0]))Cs(o,l[0]);else for(let c=0;c<t.length;c++)Ve(l[c])&&(o[t[c]]=l[c]);return Cs(s,o)}function WA(s){return s.constructor.getDefaults()}function Ni(s,e){return mn(s)?e:s}function Bh(s,e){return e.forEach(t=>{Reflect.has(s,t)&&delete s[t]}),s}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class _r{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||en&&this.toString()===en.TONE_DEBUG_CLASS)&&IA(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}_r.version=By;const kf=1e-6;function Li(s,e){return s>e+kf}function zh(s,e){return Li(s,e)||En(s,e)}function fc(s,e){return s+kf<e}function En(s,e){return Math.abs(s-e)<kf}function $A(s,e,t){return Math.max(Math.min(s,t),e)}class gn extends _r{constructor(){super(),this.name="Timeline",this._timeline=[];const e=be(gn.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Ne(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];Ne(zh(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const r=this._search(e,t);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const r=this._search(e,t);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(En(this._timeline[t].time,e)){for(let r=t;r>=0&&En(this._timeline[r].time,e);r--)t=r;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&zh(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let r=0;const o=this._timeline.length;let l=o;if(o>0&&this._timeline[o-1][t]<=e)return o-1;for(;r<l;){let c=Math.floor(r+(l-r)/2);const u=this._timeline[c],h=this._timeline[c+1];if(En(u[t],e)){for(let f=c;f<this._timeline.length;f++){const m=this._timeline[f];if(En(m[t],e))c=f;else break}return c}else{if(fc(u[t],e)&&Li(h[t],e))return c;Li(u[t],e)?l=c:r=c+1}}return-1}_iterate(e,t=0,r=this._timeline.length-1){this._timeline.slice(t,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const r=this._search(e);return r!==-1&&this._iterate(t,0,r),this}forEachAfter(e,t){const r=this._search(e);return this._iterate(t,r+1),this}forEachBetween(e,t,r){let o=this._search(e),l=this._search(t);return o!==-1&&l!==-1?(this._timeline[o].time!==e&&(o+=1),this._timeline[l].time===t&&(l-=1),this._iterate(r,o,l)):o===-1&&this._iterate(r,0,l),this}forEachFrom(e,t){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(t,r+1),this}forEachAtTime(e,t){const r=this._search(e);if(r!==-1&&En(this._timeline[r].time,e)){let o=r;for(let l=r;l>=0&&En(this._timeline[l].time,e);l--)o=l;this._iterate(l=>{t(l)},o,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const L_=[];function Nc(s){L_.push(s)}function qA(s){L_.forEach(e=>e(s))}const F_=[];function Rc(s){F_.push(s)}function HA(s){F_.forEach(e=>e(s))}class ua extends _r{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(o=>{mn(this._events)&&(this._events={}),this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(t)}),this}once(e,t){const r=(...o)=>{t(...o),this.off(e,r)};return this.on(e,r),this}off(e,t){return e.split(/\W+/).forEach(o=>{if(mn(this._events)&&(this._events={}),this._events.hasOwnProperty(o))if(mn(t))this._events[o]=[];else{const l=this._events[o];for(let c=l.length-1;c>=0;c--)l[c]===t&&l.splice(c,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let o=0,l=r.length;o<l;o++)r[o].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const r=Object.getOwnPropertyDescriptor(ua.prototype,t);Object.defineProperty(e.prototype,t,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class V_ extends ua{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class da extends V_{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new gn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const r=be(da.getDefaults(),arguments,["context"]);r.context?(this._context=r.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=DA({latencyHint:r.latencyHint}),this._latencyHint=r.latencyHint),this._ticker=new zA(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(qA(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,r){return this._context.createBuffer(e,t,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,r){return this._context.createPeriodicWave(e,t,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Ne(mi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Ne(mi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Ne(mi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Ne(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Ne(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Ne(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Ne(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return VA(this.rawContext,e,t)}addAudioWorkletModule(e){return ht(this,void 0,void 0,function*(){Ne(Ve(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return ht(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return mi(this._context)?this._context.resume():Promise.resolve()}close(){return ht(this,void 0,void 0,function*(){mi(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&HA(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),r=t.getChannelData(0);for(let l=0;l<r.length;l++)r[l]=e;const o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=t,o.loop=!0,o.start(0),this._constants.set(e,o),o}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(e,t){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const r=++this._timeoutIds,o=()=>{const l=this.now();this._timeouts.add({callback:()=>{e(),o()},id:r,time:l+t})};return o(),r}}class YA extends V_{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return ht(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Ge(s,e){rn(e)?e.forEach(t=>Ge(s,t)):Object.defineProperty(s,e,{enumerable:!0,writable:!1})}function B_(s,e){rn(e)?e.forEach(t=>B_(s,t)):Object.defineProperty(s,e,{writable:!0})}const He=()=>{};class Xe extends _r{constructor(){super(),this.name="ToneAudioBuffer",this.onload=He;const e=be(Xe.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,mr(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:He,onload:He,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Pn().sampleRate}set(e){return e instanceof Xe?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return ht(this,void 0,void 0,function*(){const t=Xe.load(e).then(r=>{this.set(r),this.onload(this)});Xe.downloads.push(t);try{yield t}finally{const r=Xe.downloads.indexOf(t);Xe.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=rn(e)&&e[0].length>0,r=t?e.length:1,o=t?e[0].length:e.length,l=Pn(),c=l.createBuffer(r,o,l.sampleRate),u=!t&&r===1?[e]:e;for(let h=0;h<r;h++)c.copyToChannel(u[h],h);return this._buffer=c,this}toMono(e){if(Kr(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const r=this.numberOfChannels;for(let o=0;o<r;o++){const l=this.toArray(o);for(let c=0;c<l.length;c++)t[c]+=l[c]}t=t.map(o=>o/r),this.fromArray(t)}return this}toArray(e){if(Kr(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let r=0;r<this.numberOfChannels;r++)t[r]=this.getChannelData(r);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){Ne(this.loaded,"Buffer is not loaded");const r=Math.floor(e*this.sampleRate),o=Math.floor(t*this.sampleRate);Ne(r<o,"The start time must be less than the end time");const l=o-r,c=Pn().createBuffer(this.numberOfChannels,l,this.sampleRate);for(let u=0;u<this.numberOfChannels;u++)c.copyToChannel(this.getChannelData(u).subarray(r,o),u);return new Xe(c)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Xe().fromArray(e)}static fromUrl(e){return ht(this,void 0,void 0,function*(){return yield new Xe().load(e)})}static load(e){return ht(this,void 0,void 0,function*(){const t=Xe.baseUrl===""||Xe.baseUrl.endsWith("/")?Xe.baseUrl:Xe.baseUrl+"/",r=yield fetch(t+e);if(!r.ok)throw new Error(`could not load url: ${e}`);const o=yield r.arrayBuffer();return yield Pn().decodeAudioData(o)})}static supportsType(e){const t=e.split("."),r=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return ht(this,void 0,void 0,function*(){for(yield Promise.resolve();Xe.downloads.length;)yield Xe.downloads[0]})}}Xe.baseUrl="";Xe.downloads=[];class Mc extends da{constructor(){super({clockSource:"offline",context:ql(arguments[0])?arguments[0]:LA(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:ql(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=ql(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return ht(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const r=Math.floor(this.sampleRate/128);e&&t%r===0&&(yield new Promise(o=>setTimeout(o,1)))}})}render(){return ht(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Xe(t)})}close(){return Promise.resolve()}}const z_=new YA;let xs=z_;function Pn(){return xs===z_&&FA&&XA(new da),xs}function XA(s,e=!1){e&&xs.dispose(),mi(s)?xs=new da(s):ql(s)?xs=new Mc(s):xs=s}function KA(){return xs.resume()}if(en&&!en.TONE_SILENCE_LOGGING){const e=` * Tone.js v${By} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function ZA(s){return Math.pow(10,s/20)}function QA(s){return 20*(Math.log(s)/Math.LN10)}function U_(s){return Math.pow(2,s/12)}let Oc=440;function JA(){return Oc}function eN(s){Oc=s}function Ss(s){return Math.round(j_(s))}function j_(s){return 69+12*Math.log2(s/Oc)}function G_(s){return Oc*Math.pow(2,(s-69)/12)}class Ef extends _r{constructor(e,t,r){super(),this.defaultUnits="s",this._val=t,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const r=parseInt(e,10),o=t==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*o:this._beatsToUnits(4/r)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,r)=>{let o=0;return e&&e!=="0"&&(o+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(o+=this._beatsToUnits(parseFloat(t))),r&&r!=="0"&&(o+=this._beatsToUnits(parseFloat(r)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Ef&&this.fromType(this._val),mn(this._val))return this._noArg();if(mr(this._val)&&mn(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Ts(this._val)){let e=0;for(const t in this._val)if(Ve(this._val[t])){const r=this._val[t],o=new this.constructor(this.context,t).valueOf()*r;e+=o}return e}if(Ve(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return mr(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class An extends Ef{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new An(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const r=new this.constructor(this.context,e).valueOf(),o=this.valueOf(),u=Math.round(o/r)*r-o;return o+u*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let l=1;l<9;l++){const c=Math.pow(2,l);t.push(c+"n."),t.push(c+"n"),t.push(c+"t")}t.push("0");let r=t[0],o=new An(this.context,t[0]).toSeconds();return t.forEach(l=>{const c=new An(this.context,l).toSeconds();Math.abs(c-e)<Math.abs(o-e)&&(r=l,o=c)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const r=Math.floor(t/this._getTimeSignature());let o=t%1*4;t=Math.floor(t)%this._getTimeSignature();const l=o.toString();return l.length>3&&(o=parseFloat(parseFloat(l).toFixed(3))),[r,t,o].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Ss(this.toFrequency())}_now(){return this.context.now()}}class nn extends An{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return JA()}static set A4(e){eN(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:nn.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const o=tN[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?o:nn.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,r){let o=1;return e&&e!=="0"&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(o*=this._beatsToUnits(parseFloat(t))),r&&r!=="0"&&(o*=this._beatsToUnits(parseFloat(r)/4)),o}}})}transpose(e){return new nn(this.context,this.valueOf()*U_(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return Ss(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/nn.A4);let r=Math.round(12*t)+57;const o=Math.floor(r/12);return o<0&&(r+=-12*o),nN[r%12]+o.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return G_(e)}static ftom(e){return Ss(e)}}const tN={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},nN=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class jo extends An{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class qt extends _r{constructor(){super();const e=be(qt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Pn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return OA(e),new An(this.context,e).toSeconds()}toFrequency(e){return new nn(this.context,e).toFrequency()}toTicks(e){return new jo(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(r=>{mn(e[r])&&delete t[r]}),t}get(){const e=WA(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const r=this[t];Ve(r)&&Ve(r.value)&&Ve(r.setValueAtTime)?e[t]=r.value:r instanceof qt?e[t]=r._getPartialProperties(e[t]):rn(r)||Kr(r)||mr(r)||MA(r)?e[t]=r:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Ve(this[t])&&(this[t]&&Ve(this[t].value)&&Ve(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof qt?this[t].set(e[t]):this[t]=e[t])}),this}}class Pf extends gn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,r){return pn(t,0),this.add(Object.assign({},r,{state:e,time:t})),this}getLastState(e,t){const r=this._search(t);for(let o=r;o>=0;o--){const l=this._timeline[o];if(l.state===e)return l}}getNextState(e,t){const r=this._search(t);if(r!==-1)for(let o=r;o<this._timeline.length;o++){const l=this._timeline[o];if(l.state===e)return l}}}class qe extends qt{constructor(){const e=be(qe.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Ne(Ve(e.param)&&(As(e.param)||e.param instanceof qe),"param must be an AudioParam");!As(e.param);)e.param=e.param._param;this._swappable=Ve(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new gn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Ve(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(qt.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Ve(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Ve(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Ve(this.maxValue)&&Ve(this.minValue)&&pn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?ZA(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?QA(e):e}setValueAtTime(e,t){const r=this.toSeconds(t),o=this._fromType(e);return Ne(isFinite(o)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(o),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,r),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),r=this._events.getAfter(t),o=this._events.get(t);let l=this._initialValue;if(o===null)l=this._initialValue;else if(o.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const c=this._events.getBefore(o.time);let u;c===null?u=this._initialValue:u=c.value,o.type==="setTargetAtTime"&&(l=this._exponentialApproach(o.time,u,o.value,o.constant,t))}else if(r===null)l=o.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let c=o.value;if(o.type==="setTargetAtTime"){const u=this._events.getBefore(o.time);u===null?c=this._initialValue:c=u.value}r.type==="linearRampToValueAtTime"?l=this._linearInterpolate(o.time,c,r.time,r.value,t):l=this._exponentialInterpolate(o.time,c,r.time,r.value,t)}else l=o.value;return this._toType(l)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const r=this._fromType(e),o=this.toSeconds(t);return Ne(isFinite(r)&&isFinite(o),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this._events.add({time:o,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,o),this._param.linearRampToValueAtTime(r,o),this}exponentialRampToValueAtTime(e,t){let r=this._fromType(e);r=En(r,0)?this._minOutput:r,this._assertRange(r);const o=this.toSeconds(t);return Ne(isFinite(r)&&isFinite(o),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:o,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,o),this._param.exponentialRampToValueAtTime(r,o),this}exponentialRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(t)),this}linearRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(t)),this}targetRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,t),this}exponentialApproachValueAtTime(e,t,r){t=this.toSeconds(t),r=this.toSeconds(r);const o=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,t,o),this.cancelAndHoldAtTime(t+r*.9),this.linearRampToValueAtTime(e,t+r),this}setTargetAtTime(e,t,r){const o=this._fromType(e);Ne(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const l=this.toSeconds(t);return this._assertRange(o),Ne(isFinite(o)&&isFinite(l),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:r,time:l,type:"setTargetAtTime",value:o}),this.log(this.units,"setTargetAtTime",e,l,r),this._param.setTargetAtTime(o,l,r),this}setValueCurveAtTime(e,t,r,o=1){r=this.toSeconds(r),t=this.toSeconds(t);const l=this._fromType(e[0])*o;this.setValueAtTime(this._toType(l),t);const c=r/(e.length-1);for(let u=1;u<e.length;u++){const h=this._fromType(e[u])*o;this.linearRampToValueAtTime(this._toType(h),t+u*c)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return Ne(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),r=this._fromType(this.getValueAtTime(t));Ne(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+r);const o=this._events.get(t),l=this._events.getAfter(t);return o&&En(o.time,t)?l?(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):l&&(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time),l.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),t):l.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),t)),this._events.add({time:t,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,t),this}rampTo(e,t=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,r):this.linearRampTo(e,t,r),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const r=this._events.get(t);if(r&&r.type==="setTargetAtTime"){const o=this._events.getAfter(r.time),l=o?o.time:t+2,c=(l-t)/10;for(let u=t;u<l;u+=c)e.linearRampToValueAtTime(this.getValueAtTime(u),u)}return this._events.forEachAfter(this.context.currentTime,o=>{o.type==="cancelScheduledValues"?e.cancelScheduledValues(o.time):o.type==="setTargetAtTime"?e.setTargetAtTime(o.value,o.time,o.constant):e[o.type](o.value,o.time)}),this}setParam(e){Ne(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,r,o,l){return r+(t-r)*Math.exp(-(l-e)/o)}_linearInterpolate(e,t,r,o,l){return t+(o-t)*((l-e)/(r-e))}_exponentialInterpolate(e,t,r,o,l){return t*Math.pow(o/t,(l-e)/(r-e))}}class Ee extends qt{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Ve(this.input)?As(this.input)||this.input instanceof qe?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ve(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Ve(e)&&(e instanceof Ee||Hr(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Ne(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,r=0){return Rn(this,e,t,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Ac("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,r=0){return W_(this,e,t,r),this}chain(...e){return Fi(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Ve(this.input)&&(this.input instanceof Ee?this.input.dispose():Hr(this.input)&&this.input.disconnect()),Ve(this.output)&&(this.output instanceof Ee?this.output.dispose():Hr(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Fi(...s){const e=s.shift();s.reduce((t,r)=>(t instanceof Ee?t.connect(r):Hr(t)&&Rn(t,r),r),e)}function Rn(s,e,t=0,r=0){for(Ne(Ve(s),"Cannot connect from undefined node"),Ne(Ve(e),"Cannot connect to undefined node"),(e instanceof Ee||Hr(e))&&Ne(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Ne(s.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof Ee||e instanceof qe;)Ve(e.input)&&(e=e.input);for(;s instanceof Ee;)Ve(s.output)&&(s=s.output);As(e)?s.connect(e,t):s.connect(e,t,r)}function W_(s,e,t=0,r=0){if(Ve(e))for(;e instanceof Ee;)e=e.input;for(;!Hr(s);)Ve(s.output)&&(s=s.output);As(e)?s.disconnect(e,t):Hr(e)?s.disconnect(e,t,r):s.disconnect()}class je extends Ee{constructor(){const e=be(je.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new qe({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Ge(this,"gain")}static getDefaults(){return Object.assign(Ee.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Vi extends Ee{constructor(e){super(e),this.onended=He,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new je({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const r=this.toSeconds(t);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(Ee.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:He})}_startGain(e,t=1){Ne(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+r):this._gainNode.gain.exponentialApproachValueAtTime(t,e,r)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Ne(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==He&&(this.onended(this),this.onended=He,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Ne(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=He,this}}class Af extends Vi{constructor(){const e=be(Af.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Rn(this._source,this._gainNode),this.offset=new qe({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Vi.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class tt extends Ee{constructor(){const e=be(tt.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new Af({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Ee.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,r=0){return Ic(this,e,t,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,r){return this._param.exponentialRampTo(e,t,r),this}linearRampTo(e,t,r){return this._param.linearRampTo(e,t,r),this}targetRampTo(e,t,r){return this._param.targetRampTo(e,t,r),this}exponentialApproachValueAtTime(e,t,r){return this._param.exponentialApproachValueAtTime(e,t,r),this}setTargetAtTime(e,t,r){return this._param.setTargetAtTime(e,t,r),this}setValueCurveAtTime(e,t,r,o){return this._param.setValueCurveAtTime(e,t,r,o),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,r){return this._param.rampTo(e,t,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Ic(s,e,t,r){(e instanceof qe||As(e)||e instanceof tt&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof tt&&(e.overridden=!0)),Rn(s,e,t,r)}class Nf extends qe{constructor(){const e=be(Nf.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new gn(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(qe.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,r){t=this.toSeconds(t),this.setRampPoint(t);const o=this._fromType(e),l=this._events.get(t),c=Math.round(Math.max(1/r,1));for(let u=0;u<=c;u++){const h=r*u+t,f=this._exponentialApproach(l.time,l.value,o,r,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}setValueAtTime(e,t){const r=this.toSeconds(t);super.setValueAtTime(e,t);const o=this._events.get(r),l=this._events.previousEvent(o),c=this._getTicksUntilEvent(l,r);return o.ticks=Math.max(c,0),this}linearRampToValueAtTime(e,t){const r=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const o=this._events.get(r),l=this._events.previousEvent(o),c=this._getTicksUntilEvent(l,r);return o.ticks=Math.max(c,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const r=this._fromType(e),o=this._events.get(t),l=Math.round(Math.max((t-o.time)*10,1)),c=(t-o.time)/l;for(let u=0;u<=l;u++){const h=c*u+o.time,f=this._exponentialInterpolate(o.time,o.value,t,r,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(mn(e.ticks)){const c=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(c,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let o=this._fromType(this.getValueAtTime(t));const l=this._events.get(t);return l&&l.time===t&&l.type==="setValueAtTime"&&(o=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(r+o)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),r=this._events.get(t);return Math.max(this._getTicksUntilEvent(r,t),0)}getDurationOfTicks(e,t){const r=this.toSeconds(t),o=this.getTicksAtTime(t);return this.getTimeOfTick(o+e)-r}getTimeOfTick(e){const t=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&r&&r.type==="linearRampToValueAtTime"&&t.value!==r.value){const o=this._fromType(this.getValueAtTime(t.time)),c=(this._fromType(this.getValueAtTime(r.time))-o)/(r.time-t.time),u=Math.sqrt(Math.pow(o,2)-2*c*(t.ticks-e)),h=(-o+u)/c,f=(-o-u)/c;return(h>0?h:f)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const r=this.toSeconds(t),o=this.toSeconds(e),l=this.getTicksAtTime(r);return this.getTicksAtTime(r+o)-l}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class Rf extends tt{constructor(){const e=be(Rf.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new Nf({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(tt.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Mf extends qt{constructor(){const e=be(Mf.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Pf,this._tickOffset=new gn,this._ticksAtTime=new gn,this._secondsAtTime=new gn,this.frequency=new Rf({context:this.context,units:e.units,value:e.frequency}),Ge(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},qt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),Ve(t)&&this.setTicksAtTime(t,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const r=this._state.get(t);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),r=this._state.getLastState("stopped",t),o=this._ticksAtTime.get(t),l={state:"paused",time:t};this._state.add(l);let c=o||r,u=o?o.ticks:0,h=null;return this._state.forEachBetween(c.time,t+this.sampleTime,f=>{let m=c.time;const g=this._tickOffset.get(f.time);g&&g.time>=c.time&&(u=g.ticks,m=g.time),c.state==="started"&&f.state!=="started"&&(u+=this.frequency.getTicksAtTime(f.time)-this.frequency.getTicksAtTime(m),f.time!==l.time&&(h={state:f.state,time:f.time,ticks:u})),c=f}),this._state.remove(l),h&&this._ticksAtTime.add(h),u}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),r=this.frequency.timeToTicks(e,t);this.setTicksAtTime(r,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);const o=this._secondsAtTime.get(e);let l=o||t,c=o?o.seconds:0,u=null;return this._state.forEachBetween(l.time,e+this.sampleTime,h=>{let f=l.time;const m=this._tickOffset.get(h.time);m&&m.time>=l.time&&(c=m.seconds,f=m.time),l.state==="started"&&h.state!=="started"&&(c+=h.time-f,h.time!==r.time&&(u={state:h.state,time:h.time,seconds:c})),l=h}),this._state.remove(r),u&&this._secondsAtTime.add(u),c}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const r=this._tickOffset.get(t),o=this._state.get(t),l=Math.max(r.time,o.time),c=this.frequency.getTicksAtTime(l)+e-r.ticks;return this.frequency.getTimeOfTick(c)}forEachTickBetween(e,t,r){let o=this._state.get(e);this._state.forEachBetween(e,t,c=>{o&&o.state==="started"&&c.state!=="started"&&this.forEachTickBetween(Math.max(o.time,e),c.time-this.sampleTime,r),o=c});let l=null;if(o&&o.state==="started"){const c=Math.max(o.time,e),u=this.frequency.getTicksAtTime(c),h=this.frequency.getTicksAtTime(o.time),f=u-h;let m=Math.ceil(f)-f;m=En(m,1)?0:m;let g=this.frequency.getTimeOfTick(u+m);for(;g<t;){try{r(g,Math.round(this.getTicksAtTime(g)))}catch(y){l=y;break}g+=this.frequency.getDurationOfTicks(1,g)}}if(l)throw l;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Dc extends qt{constructor(){const e=be(Dc.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=He,this._lastUpdate=0,this._state=new Pf("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new Mf({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ge(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(qt.getDefaults(),{callback:He,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){M_(this.context);const r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,t),r<this._lastUpdate&&this.emit("start",r,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const r=this.toSeconds(t),o=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(o+e,r)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,r=>{switch(r.state){case"started":const o=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,o);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,t,(r,o)=>{this.callback(r,o)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}ua.mixin(Dc);class ks extends Ee{constructor(){const e=be(ks.getDefaults(),arguments,["delayTime","maxDelay"]);super(e),this.name="Delay";const t=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(t,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(t),this.delayTime=new qe({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),Ge(this,"delayTime")}static getDefaults(){return Object.assign(Ee.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Xi extends Ee{constructor(){const e=be(Xi.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new je({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Ge(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(Ee.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Of extends Ee{constructor(){const e=be(Of.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Xi({context:this.context}),this.output=new je({context:this.context}),this.volume=this.input.volume,Fi(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Ee.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Fi(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Nc(s=>{s.destination=new Of({context:s})});Rc(s=>{s.destination.dispose()});class rN extends Ee{constructor(){super(...arguments),this.name="Listener",this.positionX=new qe({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new qe({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new qe({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new qe({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new qe({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new qe({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new qe({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new qe({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new qe({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Ee.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Nc(s=>{s.listener=new rN({context:s})});Rc(s=>{s.listener.dispose()});class If extends _r{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=be(If.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const r=e.urls[t];this.add(t,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:He,onload:He,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Ne(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,r=He,o=He){return mr(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Xe(this.baseUrl+t,r,o))):this._buffers.set(e.toString(),new Xe(t,r,o)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class pc extends nn{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return Ss(super._frequencyToUnits(e))}_ticksToUnits(e){return Ss(super._ticksToUnits(e))}_beatsToUnits(e){return Ss(super._beatsToUnits(e))}_secondsToUnits(e){return Ss(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return G_(this.toMidi())}transpose(e){return new pc(this.context,this.toMidi()+e)}}class yi extends jo{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class sN extends qt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new gn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Nc(s=>{s.draw=new sN({context:s})});Rc(s=>{s.draw.dispose()});class iN extends _r{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Ne(Ve(e.time),"Events must have a time property"),Ne(Ve(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new oN(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const r of t)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let r,o=null;if(t>0)if(e.left.right===null)r=e.left,r.right=e.right,o=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,o=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,o=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,o=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),o&&this._rebalance(o)}e.dispose()}_rotateLeft(e){const t=e.parent,r=e.isLeftChild(),o=e.right;o&&(e.right=o.left,o.left=e),t!==null?r?t.left=o:t.right=o:this._setRoot(o)}_rotateRight(e){const t=e.parent,r=e.isLeftChild(),o=e.left;o&&(e.left=o.right,o.right=e),t!==null?r?t.left=o:t.right=o:this._setRoot(o)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let r=t[0];for(let o=1;o<t.length;o++)t[o].low>r.low&&(r=t[o]);return r.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(r=>t.push(r)),t.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const r=[];this._root.search(e,r),r.forEach(o=>{o.event&&t(o.event)})}return this}forEachFrom(e,t){if(this._root!==null){const r=[];this._root.searchAfter(e,r),r.forEach(o=>{o.event&&t(o.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class oN{constructor(e,t,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class aN extends _r{constructor(e){super(),this.name="TimelineValue",this._timeline=new gn({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Xn extends Ee{constructor(){super(be(Xn.getDefaults(),arguments,["context"]))}connect(e,t=0,r=0){return Ic(this,e,t,r),this}}class Ki extends Xn{constructor(){const e=be(Ki.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,rn(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):RA(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(tt.getDefaults(),{length:1024})}setMap(e,t=1024){const r=new Float32Array(t);for(let o=0,l=t;o<l;o++){const c=o/(l-1)*2-1;r[o]=e(c,o)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(r=>r.includes(e));Ne(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Df extends Xn{constructor(){const e=be(Df.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Ki({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Xn.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Zr{constructor(e,t){this.id=Zr._eventId++,this._remainderTime=0;const r=Object.assign(Zr.getDefaults(),t);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=Math.floor(r.time),this._remainderTime=r.time-this.time}static getDefaults(){return{callback:He,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Zr._eventId=0;class Lf extends Zr{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(Lf.getDefaults(),t);this.duration=r.duration,this._interval=r.interval,this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Zr.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return fc(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new yi(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){fc(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new yi(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Li(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Lc extends qt{constructor(){const e=be(Lc.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new aN(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new gn,this._repeatedEvents=new iN,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new Dc({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Ge(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(qt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const r=t%(this._swingTicks*2)/(this._swingTicks*2),o=Math.sin(r*Math.PI)*this._swingAmount;e+=new yi(this.context,this._swingTicks*2/3).toSeconds()*o}Lv(!0),this._timeline.forEachAtTime(t,r=>r.invoke(e)),Lv(!1)}schedule(e,t){const r=new Zr(this,{callback:e,time:new jo(this.context,t).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,t,r,o=1/0){const l=new Lf(this,{callback:e,duration:new An(this.context,o).toTicks(),interval:new An(this.context,t).toTicks(),time:new jo(this.context,r).toTicks()});return this._addEvent(l,this._repeatedEvents)}scheduleOnce(e,t){const r=new Zr(this,{callback:e,once:!0,time:new jo(this.context,t).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(t,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new yi(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let r;return Ve(t)&&(r=this.toTicks(t)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){rn(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new An(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new An(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new yi(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new yi(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),r=this._clock.frequency.timeToTicks(e,t);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(t),o=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,t),l=t+o;this.emit("stop",l),this._clock.setTicksAtTime(e,l),this.emit("start",l,this._clock.getSecondsAtTime(l))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),r=this.getTicksAtTime(t),o=e-r%e;return this._clock.nextTickTime(o,t)}}syncSignal(e,t){const r=this.now();let o=this.bpm,l=1/(60/o.getValueAtTime(r)/this.PPQ),c=[];if(e.units==="time"){const h=.015625/l,f=new je(h),m=new Df(-1),g=new je(h);o.chain(f,m,g),o=g,l=1/l,c=[f,m,g]}t||(e.getValueAtTime(r)!==0?t=e.getValueAtTime(r)/l:t=0);const u=new je(t);return o.connect(u),u.connect(e._param),c.push(u),this._syncedSignals.push({initial:e.value,nodes:c,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const r=this._syncedSignals[t];r.signal===e&&(r.nodes.forEach(o=>o.dispose()),r.signal.value=r.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),B_(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}ua.mixin(Lc);Nc(s=>{s.transport=new Lc({context:s})});Rc(s=>{s.transport.dispose()});class Vt extends Ee{constructor(e){super(e),this.input=void 0,this._state=new Pf("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=He,this._syncedStop=He,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Xi({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Ge(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(Ee.getDefaults(),{mute:!1,onstop:He,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,r){let o=mn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(o=this._clampToCurrentTime(o),!this._synced&&this._state.getValueAtTime(o)==="started")Ne(Li(o,this._state.get(o).time),"Start time must be strictly greater than previous start time"),this._state.cancel(o),this._state.setStateAtTime("started",o),this.log("restart",o),this.restart(o,t,r);else if(this.log("start",o),this._state.setStateAtTime("started",o),this._synced){const l=this._state.get(o);l&&(l.offset=this.toSeconds(Ni(t,0)),l.duration=r?this.toSeconds(r):void 0);const c=this.context.transport.schedule(u=>{this._start(u,t,r)},o);this._scheduled.push(c),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>o&&this._syncedStart(this.now(),this.context.transport.seconds)}else M_(this.context),this._start(o,t,r);return this}stop(e){let t=mn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Ve(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const r=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(r)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Li(t,0)){const r=this._state.get(t);if(r&&r.state==="started"&&r.time!==t){const o=t-this.toSeconds(r.time);let l;r.duration&&(l=this.toSeconds(r.duration)-o),this._start(e,this.toSeconds(r.offset)+o,l)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=He,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class ha extends Vi{constructor(){const e=be(ha.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Rn(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new qe({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Xe(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Vi.getDefaults(),{url:new Xe,loop:!1,loopEnd:0,loopStart:0,onload:He,onerror:He,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,r,o=1){Ne(this.buffer.loaded,"buffer is either not set or not loaded");const l=this.toSeconds(e);this._startGain(l,o),this.loop?t=Ni(t,this.loopStart):t=Ni(t,0);let c=Math.max(this.toSeconds(t),0);if(this.loop){const u=this.toSeconds(this.loopEnd)||this.buffer.duration,h=this.toSeconds(this.loopStart),f=u-h;zh(c,u)&&(c=(c-h)%f+h),En(c,this.buffer.duration)&&(c=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,fc(c,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(l,c)),Ve(r)){let u=this.toSeconds(r);u=Math.max(u,0),this.stop(l+u)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class mc extends Vt{constructor(){const e=be(mc.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Vt.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(Ne(e in Fv,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const t=Fv[this._type];this._source=new ha({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const ui=44100*5,oh=2,cr={brown:null,pink:null,white:null},Fv={get brown(){if(!cr.brown){const s=[];for(let e=0;e<oh;e++){const t=new Float32Array(ui);s[e]=t;let r=0;for(let o=0;o<ui;o++){const l=Math.random()*2-1;t[o]=(r+.02*l)/1.02,r=t[o],t[o]*=3.5}}cr.brown=new Xe().fromArray(s)}return cr.brown},get pink(){if(!cr.pink){const s=[];for(let e=0;e<oh;e++){const t=new Float32Array(ui);s[e]=t;let r,o,l,c,u,h,f;r=o=l=c=u=h=f=0;for(let m=0;m<ui;m++){const g=Math.random()*2-1;r=.99886*r+g*.0555179,o=.99332*o+g*.0750759,l=.969*l+g*.153852,c=.8665*c+g*.3104856,u=.55*u+g*.5329522,h=-.7616*h-g*.016898,t[m]=r+o+l+c+u+h+f+g*.5362,t[m]*=.11,f=g*.115926}}cr.pink=new Xe().fromArray(s)}return cr.pink},get white(){if(!cr.white){const s=[];for(let e=0;e<oh;e++){const t=new Float32Array(ui);s[e]=t;for(let r=0;r<ui;r++)t[r]=Math.random()*2-1}cr.white=new Xe().fromArray(s)}return cr.white}};function Ds(s,e){return ht(this,void 0,void 0,function*(){const t=e/s.context.sampleRate,r=new Mc(1,t,s.context.sampleRate);return new s.constructor(Object.assign(s.get(),{frequency:2/t,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class Ff extends Vi{constructor(){const e=be(Ff.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Rn(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new qe({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new qe({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Ge(this,["frequency","detune"])}static getDefaults(){return Object.assign(Vi.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class ct extends Vt{constructor(){const e=be(ct.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new tt({context:this.context,units:"frequency",value:e.frequency}),Ge(this,"frequency"),this.detune=new tt({context:this.context,units:"cents",value:e.detune}),Ge(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Vt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),r=new Ff({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return ct._periodicWaveCache.find(t=>t.phase===this._phase&&GA(t.partials,this._partials));{const e=ct._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const r=this._getCachedPeriodicWave();if(Ve(r)){const{partials:o,wave:l}=r;this._wave=l,this._partials=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[o,l]=this._getRealImaginary(e,this._phase),c=this.context.createPeriodicWave(o,l);this._wave=c,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),ct._periodicWaveCache.push({imag:l,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:o,type:this._type,wave:this._wave}),ct._periodicWaveCache.length>100&&ct._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){pn(e,0);let t=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(t=r[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const o=new Float32Array(e);this._partials.forEach((l,c)=>o[c]=l),this._partials=Array.from(o),this.type=this._type}}_getRealImaginary(e,t){let o=2048;const l=new Float32Array(o),c=new Float32Array(o);let u=1;if(e==="custom"){if(u=this._partials.length+1,this._partialCount=this._partials.length,o=u,this._partials.length===0)return[l,c]}else{const h=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);h?(u=parseInt(h[2],10)+1,this._partialCount=parseInt(h[2],10),e=h[1],u=Math.max(u,2),o=u):this._partialCount=0,this._partials=[]}for(let h=1;h<o;++h){const f=2/(h*Math.PI);let m;switch(e){case"sine":m=h<=u?1:0,this._partials[h-1]=m;break;case"square":m=h&1?2*f:0,this._partials[h-1]=m;break;case"sawtooth":m=f*(h&1?1:-1),this._partials[h-1]=m;break;case"triangle":h&1?m=2*(f*f)*(h-1>>1&1?-1:1):m=0,this._partials[h-1]=m;break;case"custom":m=this._partials[h-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}m!==0?(l[h]=-m*Math.sin(t*h),c[h]=m*Math.cos(t*h)):(l[h]=0,c[h]=0)}return[l,c]}_inverseFFT(e,t,r){let o=0;const l=e.length;for(let c=0;c<l;c++)o+=e[c]*Math.cos(c*r)+t[c]*Math.sin(c*r);return o}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let r=0;const o=Math.PI*2,l=32;for(let c=0;c<l;c++)r=Math.max(this._inverseFFT(e,t,c/l*o),r);return $A(-this._inverseFFT(e,t,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return ht(this,arguments,void 0,function*(e=1024){return Ds(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}ct._periodicWaveCache=[];class $_ extends Xn{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Ki({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ns extends tt{constructor(){const e=be(Ns.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new je({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(tt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Fc extends Vt{constructor(){const e=be(Fc.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new $_({context:this.context}),this._modulationNode=new je({context:this.context}),this._carrier=new ct({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new ct({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ns({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ge(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ct.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ht(this,arguments,void 0,function*(e=1024){return Ds(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Vc extends Vt{constructor(){const e=be(Vc.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new je({context:this.context,gain:0}),this._carrier=new ct({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new tt({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new ct({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ns({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Ns({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ge(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ct.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ht(this,arguments,void 0,function*(e=1024){return Ds(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class fa extends Vt{constructor(){const e=be(fa.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new je({context:this.context,gain:0}),this._thresh=new Ki({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new tt({context:this.context,units:"audioRange",value:e.width}),this._triangle=new ct({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ge(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Vt.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return ht(this,arguments,void 0,function*(e=1024){return Ds(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Bc extends Vt{constructor(){const e=be(Bc.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new tt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new tt({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Ge(this,["frequency","detune"])}static getDefaults(){return Object.assign(ct.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,r=e/(this._oscillators.length-1);this._forEach((o,l)=>o.detune.value=t+r*l)}}get count(){return this._oscillators.length}set count(e){if(pn(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const r=new ct({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):He});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[t]=r}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,r)=>t.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return ht(this,arguments,void 0,function*(e=1024){return Ds(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class zc extends Vt{constructor(){const e=be(zc.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Ns({context:this.context,value:2}),this._pulse=new fa({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new ct({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ge(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Vt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return ht(this,arguments,void 0,function*(e=1024){return Ds(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Vv={am:Fc,fat:Bc,fm:Vc,oscillator:ct,pulse:fa,pwm:zc};class gc extends Vt{constructor(){const e=be(gc.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new tt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new tt({context:this.context,units:"cents",value:e.detune}),Ge(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(ct.getDefaults(),Vc.getDefaults(),Fc.getDefaults(),Bc.getDefaults(),fa.getDefaults(),zc.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=Vv[e],r=this.now();if(this._oscillator){const o=this._oscillator;o.stop(r),this.context.setTimeout(()=>o.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof Vv[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Kr(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Kr(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&mr(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return ht(this,arguments,void 0,function*(e=1024){return Ds(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Vf extends tt{constructor(){super(be(Vf.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new je({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Fi(this._constantSource,this._sum)}static getDefaults(){return Object.assign(tt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Bf extends Xn{constructor(){const e=be(Bf.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new Ns({context:this.context,value:e.max-e.min}),this._add=this.output=new Vf({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Xn.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class zf extends Xn{constructor(){super(be(zf.getDefaults(),arguments)),this.name="Zero",this._gain=new je({context:this.context}),this.output=this._gain,this.input=void 0,Rn(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),W_(this.context.getConstant(0),this._gain),this}}class vc extends Ee{constructor(){const e=be(vc.getDefaults(),arguments,["frequency","min","max"]);super(e),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=qe.prototype._fromType,this._toType=qe.prototype._toType,this._is=qe.prototype._is,this._clampValue=qe.prototype._clampValue,this._oscillator=new ct(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new je({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new tt({context:this.context,units:"audioRange",value:0}),this._zeros=new zf({context:this.context}),this._a2g=new $_({context:this.context}),this._scaler=this.output=new Bf({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Ge(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(ct.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const t=this.min,r=this.max;this._units=e,this.min=t,this.max=r}get state(){return this._oscillator.state}connect(e,t,r){return(e instanceof qe||e instanceof tt)&&(this.convert=e.convert,this.units=e.units),Ic(this,e,t,r),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function q_(s,e=1/0){const t=new WeakMap;return function(r,o){Reflect.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(l){pn(l,s,e),t.set(this,l)}})}}function wr(s,e=1/0){const t=new WeakMap;return function(r,o){Reflect.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(l){pn(this.toSeconds(l),s,e),t.set(this,l)}})}}class Uc extends Vt{constructor(){const e=be(Uc.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Xe({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Vt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:He,onerror:He,playbackRate:1,reverse:!1})}load(e){return ht(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=He){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,r){return super.start(e,t,r),this}_start(e,t,r){this._loop?t=Ni(t,this._loopStart):t=Ni(t,0);const o=this.toSeconds(t),l=r;r=Ni(r,Math.max(this._buffer.duration-o,0));let c=this.toSeconds(r);c=c/this._playbackRate,e=this.toSeconds(e);const u=new ha({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+c),this._state.setStateAtTime("stopped",e+c,{implicitEnd:!0})),this._activeSources.add(u),this._loop&&mn(l)?u.start(e,o):u.start(e,o,c-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(t))}restart(e,t,r){return super.restart(e,t,r),this}_restart(e,t,r){var o;(o=[...this._activeSources].pop())===null||o===void 0||o.stop(e),this._start(e,t,r)}seek(e,t){const r=this.toSeconds(t);if(this._state.getValueAtTime(r)==="started"){const o=this.toSeconds(e);this._stop(r),this._start(r,o)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&pn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&pn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),r=this._state.getNextState("stopped",t);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(o=>o.cancelStop())),this._activeSources.forEach(o=>{o.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Fn([wr(0)],Uc.prototype,"fadeIn",void 0);Fn([wr(0)],Uc.prototype,"fadeOut",void 0);class lN extends Xn{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Ki({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ts extends Ee{constructor(){const e=be(ts.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new tt({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(Ee.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(mr(e))return e;{let r;for(r in Dl)if(Dl[r][t]===e)return r;return e}}_setCurve(e,t,r){if(mr(r)&&Reflect.has(Dl,r)){const o=Dl[r];Ts(o)?e!=="_decayCurve"&&(this[e]=o[t]):this[e]=o}else if(rn(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let o=this.toSeconds(this.attack);const l=this.toSeconds(this.decay),c=this.getValueAtTime(e);if(c>0){const u=1/o;o=(1-c)/u}if(o<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,o,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,o,e);else{this._sig.cancelAndHoldAtTime(e);let u=this._attackCurve;for(let h=1;h<u.length;h++)if(u[h-1]<=c&&c<=u[h]){u=this._attackCurve.slice(h),u[0]=c;break}this._sig.setValueCurveAtTime(u,e,o,t)}if(l&&this.sustain<1){const u=t*this.sustain,h=e+o;this.log("decay",h),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(u,l+h):this._sig.exponentialApproachValueAtTime(u,h,l)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(Ne(rn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,r=1){return t=this.toSeconds(t),this.triggerAttack(t,r),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,r=0){return Ic(this,e,t,r),this}asArray(){return ht(this,arguments,void 0,function*(e=1024){const t=e/this.context.sampleRate,r=new Mc(1,t,this.context.sampleRate),o=this.toSeconds(this.attack)+this.toSeconds(this.decay),l=o+this.toSeconds(this.release),c=l*.1,u=l+c,h=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/u,decay:t*this.toSeconds(this.decay)/u,release:t*this.toSeconds(this.release)/u,context:r}));return h._sig.toDestination(),h.triggerAttackRelease(t*(o+c)/u,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Fn([wr(0)],ts.prototype,"attack",void 0);Fn([wr(0)],ts.prototype,"decay",void 0);Fn([q_(0,1)],ts.prototype,"sustain",void 0);Fn([wr(0)],ts.prototype,"release",void 0);const Dl=(()=>{let e,t;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/127*(Math.PI/2));const o=[],l=6.4;for(e=0;e<127;e++){t=e/127;const y=Math.sin(t*(Math.PI*2)*l-Math.PI/2)+1;o[e]=y/10+t*.83}o[127]=1;const c=[],u=5;for(e=0;e<128;e++)c[e]=Math.ceil(e/127*u)/u;const h=[];for(e=0;e<128;e++)t=e/127,h[e]=.5*(1-Math.cos(Math.PI*t));const f=[];for(e=0;e<128;e++){t=e/127;const y=Math.pow(t,3)*4+.2,x=Math.cos(y*Math.PI*2*t);f[e]=Math.abs(x*(1-t))}function m(y){const x=new Array(y.length);for(let w=0;w<y.length;w++)x[w]=1-y[w];return x}function g(y){return y.slice(0).reverse()}return{bounce:{In:m(f),Out:f},cosine:{In:r,Out:g(r)},exponential:"exponential",linear:"linear",ripple:{In:o,Out:m(o)},sine:{In:h,Out:m(h)},step:{In:c,Out:m(c)}}})();class Qr extends Ee{constructor(){const e=be(Qr.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new Xi({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ge(this,"volume")}static getDefaults(){return Object.assign(Ee.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const r=this["_original_"+e]=this[e];this[e]=(...o)=>{const l=o[t],c=this.context.transport.schedule(u=>{o[t]=u,r.apply(this,o)},l);this._scheduledEvents.push(c)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,r,o){const l=this.toSeconds(r),c=this.toSeconds(t);return this.triggerAttack(e,l,o),this.triggerRelease(l+c),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Rs extends Qr{constructor(){const e=be(Rs.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Qr.getDefaults(),{detune:0,onsilence:He,portamento:0})}triggerAttack(e,t,r=1){this.log("triggerAttack",e,t,r);const o=this.toSeconds(t);return this._triggerEnvelopeAttack(o,r),this.setNote(e,o),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const r=this.toSeconds(t),o=e instanceof nn?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const l=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(o,l,r)}else this.frequency.setValueAtTime(o,r);return this}}Fn([wr(0)],Rs.prototype,"portamento",void 0);class Uf extends ts{constructor(){super(be(Uf.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new je({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Bi extends Rs{constructor(){const e=be(Bi.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new gc(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Uf(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Ge(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Rs.getDefaults(),{envelope:Object.assign(Bh(ts.getDefaults(),Object.keys(Ee.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Bh(gc.getDefaults(),[...Object.keys(Vt.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+o)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class jc extends Bi{constructor(){const e=be(jc.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Ge(this,["oscillator","envelope"])}static getDefaults(){return Cs(Rs.getDefaults(),Bi.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const r=this.toSeconds(t),o=this.toFrequency(e instanceof nn?e.toFrequency():e),l=o*this.octaves;return this.oscillator.frequency.setValueAtTime(l,r),this.oscillator.frequency.exponentialRampToValueAtTime(o,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Fn([q_(0)],jc.prototype,"octaves",void 0);Fn([wr(0)],jc.prototype,"pitchDecay",void 0);const H_=new Set;function jf(s){H_.add(s)}function Y_(s,e){const t=`registerProcessor("${s}", ${e})`;H_.add(t)}const cN=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;jf(cN);const uN=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;jf(uN);const dN=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;jf(dN);const hN="feedback-comb-filter",fN=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;Y_(hN,fN);class Gf extends Qr{constructor(){const e=be(Gf.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=o=>this.releaseAll(o),Ne(!Kr(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const r=this._voices.indexOf(this._dummyVoice);this._voices.splice(r,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Qr.getDefaults(),{maxPolyphony:32,options:{},voice:Bi})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(r=>r.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return Ne(e instanceof Rs,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else Ac("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,r){e.forEach(o=>{const l=new pc(this.context,o).toMidi(),c=this._getNextAvailableVoice();c&&(c.triggerAttack(o,t,r),this._activeVoices.push({midi:l,voice:c,released:!1}),this.log("triggerAttack",o,t))})}_triggerRelease(e,t){e.forEach(r=>{const o=new pc(this.context,r).toMidi(),l=this._activeVoices.find(({midi:c,released:u})=>c===o&&!u);l&&(l.voice.triggerRelease(t),l.released=!0,this.log("triggerRelease",r,t))})}_scheduleEvent(e,t,r,o){Ne(!this.disposed,"Synth was already disposed"),r<=this.now()?e==="attack"?this._triggerAttack(t,r,o):this._triggerRelease(t,r):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,r,o)},r-this.now())}triggerAttack(e,t,r){Array.isArray(e)||(e=[e]);const o=this.toSeconds(t);return this._scheduleEvent("attack",e,o,r),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const r=this.toSeconds(t);return this._scheduleEvent("release",e,r),this}triggerAttackRelease(e,t,r,o){const l=this.toSeconds(r);if(this.triggerAttack(e,l,o),rn(t)){Ne(rn(e),"If the duration is an array, the notes must also be an array"),e=e;for(let c=0;c<e.length;c++){const u=t[Math.min(c,t.length-1)],h=this.toSeconds(u);Ne(h>0,"The duration must be greater than 0"),this.triggerRelease(e[c],l+h)}}else{const c=this.toSeconds(t);Ne(c>0,"The duration must be greater than 0"),this.triggerRelease(e,l+c)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const t=Bh(e,["onsilence","context"]);return this.options=Cs(this.options,t),this._voices.forEach(r=>r.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(({voice:r})=>{r.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Gc extends Qr{constructor(){const e=be(Gc.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(r=>{const o=parseInt(r,10);if(Ne(Il(r)||Kr(o)&&isFinite(o),`url key is neither a note or midi pitch: ${r}`),Il(r)){const l=new nn(this.context,r).toMidi();t[l]=e.urls[r]}else Kr(o)&&isFinite(o)&&(t[o]=e.urls[o])}),this._buffers=new If({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Qr.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:He,onerror:He,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,r=1){return this.log("triggerAttack",e,t,r),Array.isArray(e)||(e=[e]),e.forEach(o=>{const l=j_(new nn(this.context,o).toFrequency()),c=Math.round(l),u=l-c,h=this._findClosest(c),f=c-h,m=this._buffers.get(f),g=U_(h+u),y=new ha({url:m,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:g}).connect(this.output);y.start(t,0,m.duration/g,r),rn(this._activeSources.get(c))||this._activeSources.set(c,[]),this._activeSources.get(c).push(y),y.onended=()=>{if(this._activeSources&&this._activeSources.has(c)){const x=this._activeSources.get(c),w=x.indexOf(y);w!==-1&&x.splice(w,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(r=>{const o=new nn(this.context,r).toMidi();if(this._activeSources.has(o)&&this._activeSources.get(o).length){const l=this._activeSources.get(o);t=this.toSeconds(t),l.forEach(c=>{c.stop(t)}),this._activeSources.set(o,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,r,o=1){const l=this.toSeconds(r);return this.triggerAttack(e,l,o),rn(t)?(Ne(rn(e),"notes must be an array when duration is array"),e.forEach((c,u)=>{const h=t[Math.min(u,t.length-1)];this.triggerRelease(c,l+this.toSeconds(h))})):this.triggerRelease(e,l+this.toSeconds(t)),this}add(e,t,r){if(Ne(Il(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Il(e)){const o=new nn(this.context,e).toMidi();this._buffers.add(o,t,r)}else this._buffers.add(e,t,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}Fn([wr(0)],Gc.prototype,"attack",void 0);Fn([wr(0)],Gc.prototype,"release",void 0);class Wc extends Ee{constructor(){const e=be(Wc.getDefaults(),arguments,["fade"]);super(e),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new lN({context:this.context}),this.a=new je({context:this.context,gain:0}),this.b=new je({context:this.context,gain:0}),this.output=new je({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new tt({context:this.context,units:"normalRange",value:e.fade}),Ge(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",Rn(this._split,this.a.gain,0),Rn(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(Ee.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Bv extends Ee{constructor(e){super(e),this.name="Effect",this._dryWet=new Wc({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new je({context:this.context}),this.effectReturn=new je({context:this.context}),this.input=new je({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Ge(this,"wet")}static getDefaults(){return Object.assign(Ee.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Wf extends Ee{constructor(){const e=be(Wf.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new qe({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Ge(this,"pan")}static getDefaults(){return Object.assign(Ee.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const pN="bit-crusher",mN=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;Y_(pN,mN);class $c extends Ee{constructor(){const e=be($c.getDefaults(),arguments,["channels"]);super(e),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(Ee.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class pa extends Ee{constructor(){const e=be(pa.getDefaults(),arguments,["channels"]);super(e),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(Ee.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class zv extends Ee{constructor(e){super(e),this.name="StereoEffect",this.input=new je({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new Wc({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new $c({context:this.context,channels:2}),this._merge=new pa({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Ge(this,["wet"])}connectEffectLeft(...e){this._split.connect(e[0],0,0),Fi(...e),Rn(e[e.length-1],this._merge,0,0)}connectEffectRight(...e){this._split.connect(e[0],1,0),Fi(...e),Rn(e[e.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(Ee.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class Uh extends zv{constructor(e){super(e),this.feedback=new tt({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new je({context:this.context}),this._feedbackR=new je({context:this.context}),this._feedbackSplit=new $c({context:this.context,channels:2}),this._feedbackMerge=new pa({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Ge(this,["feedback"])}static getDefaults(){return Object.assign(zv.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class $f extends Uh{constructor(){const e=be($f.getDefaults(),arguments,["frequency","delayTime","depth"]);super(e),this.name="Chorus",this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new vc({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new vc({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new ks({context:this.context}),this._delayNodeR=new ks({context:this.context}),this.frequency=this._lfoL.frequency,Ge(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=e.type,this.spread=e.spread}static getDefaults(){return Object.assign(Uh.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(e){this._depth=e;const t=this._delayTime*e;this._lfoL.min=Math.max(this._delayTime-t,0),this._lfoL.max=this._delayTime+t,this._lfoR.min=Math.max(this._delayTime-t,0),this._lfoR.max=this._delayTime+t}get delayTime(){return this._delayTime*1e3}set delayTime(e){this._delayTime=e/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Uv extends Uh{constructor(e){super(e),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),Ge(this,["feedback"])}}class qf extends Uv{constructor(){const e=be(qf.getDefaults(),arguments,["delayTime","feedback"]);super(e),this.name="PingPongDelay",this._leftDelay=new ks({context:this.context,maxDelay:e.maxDelay}),this._rightDelay=new ks({context:this.context,maxDelay:e.maxDelay}),this._rightPreDelay=new ks({context:this.context,maxDelay:e.maxDelay}),this.delayTime=new tt({context:this.context,units:"time",value:e.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),Ge(this,["delayTime"])}static getDefaults(){return Object.assign(Uv.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class Hf extends Bv{constructor(){const e=be(Hf.getDefaults(),arguments,["decay"]);super(e),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const t=this.toSeconds(e.decay);pn(t,.001),this._decay=t;const r=this.toSeconds(e.preDelay);pn(r,0),this._preDelay=r,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Bv.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),pn(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),pn(e,0),this._preDelay=e,this.generate()}generate(){return ht(this,void 0,void 0,function*(){const e=this.ready,t=new Mc(2,this._decay+this._preDelay,this.context.sampleRate),r=new mc({context:t}),o=new mc({context:t}),l=new pa({context:t});r.connect(l,0,0),o.connect(l,0,1);const c=new je({context:t}).toDestination();l.connect(c),r.start(0),o.start(0),c.gain.setValueAtTime(0,0),c.gain.setValueAtTime(1,this._preDelay),c.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const u=t.render();return this.ready=u.then(He),yield e,this._convolver.buffer=(yield u).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class mt extends Ee{constructor(){const e=be(mt.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new je({context:this.context}),mt._allSolos.has(this.context)||mt._allSolos.set(this.context,new Set),mt._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(Ee.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),mt._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){mt._soloed.has(this.context)||mt._soloed.set(this.context,new Set),mt._soloed.get(this.context).add(this)}_removeSolo(){mt._soloed.has(this.context)&&mt._soloed.get(this.context).delete(this)}_isSoloed(){return mt._soloed.has(this.context)&&mt._soloed.get(this.context).has(this)}_noSolos(){return!mt._soloed.has(this.context)||mt._soloed.has(this.context)&&mt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),mt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}mt._allSolos=new Map;mt._soloed=new Map;class Yf extends Ee{constructor(){const e=be(Yf.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new Wf({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Xi({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Ge(this,["pan","volume"])}static getDefaults(){return Object.assign(Ee.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class _i extends Ee{constructor(){const e=be(_i.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new mt({solo:e.solo,context:this.context}),this._panVol=this.output=new Yf({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ge(this,["pan","volume"])}static getDefaults(){return Object.assign(Ee.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return _i.buses.has(e)||_i.buses.set(e,new je({context:this.context})),_i.buses.get(e)}send(e,t=0){const r=this._getBus(e),o=new je({context:this.context,units:"decibels",gain:t});return this.connect(o),o.connect(r),o}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}_i.buses=new Map;Pn().transport;Pn().destination;Pn().destination;Pn().listener;Pn().draw;Pn();class gN extends Error{constructor(e){super(`ToneJS initialization error: ${e}`)}}const ys=class ys{static async initialize(){if(!ys.initialized)try{await KA(),ys.initialized=!0,console.log("ToneJS has been initialized")}catch(e){throw new gN(`Failed to start ToneJS: ${e}`)}}static isInitialized(){return ys.initialized}static reset(){ys.initialized=!1}};X(ys,"initialized",!1);let Es=ys;const Ho=class Ho{constructor(){X(this,"lastPlayedNote",null);X(this,"synth",null);this.initializeSynth()}async onMouseDown(e,t,r){Es.isInitialized()||await Es.initialize(),await this.playNoteAtPosition(e,t,r)}async onMouseMove(e,t,r){await this.playNoteAtPosition(e,t,r)}async onMouseUp(){this.reset()}reset(){this.lastPlayedNote=null}initializeSynth(){const e=new Gf(Bi,{envelope:{attack:.8,decay:0,sustain:1,release:1.2}});e.maxPolyphony=100;const t=new Hf({decay:2,wet:.9}),r=new $f(4,2.5,1),o=new qf("4n",.5).chain(new je(.7)),l=new je(1).toDestination();e.chain(r,t,l),e.chain(r,o,t,l),this.synth=e}async playNote(e){if(!this.synth){console.warn("Synth not initialized");return}this.synth.triggerAttackRelease(e.pitch,"32n",void 0,e.velocity)}async playNoteAtPosition(e,t,r){if(!r||e<0||e>1||t<0||t>1)return;const o=r.smokeDensity.getAtNormalized(e,t),l=Math.floor(t*(Ho.PENTATONIC_SCALE.length-1)),c=Ho.PENTATONIC_SCALE[l],u=Math.max(.5,Math.min(1,o*2)),h={pitch:c,velocity:u};this.areNotesEqual(this.lastPlayedNote,h)||(await this.playNote(h),this.lastPlayedNote=h)}areNotesEqual(e,t){return e?e.pitch===t.pitch&&e.velocity===t.velocity:!1}};X(Ho,"PENTATONIC_SCALE",[261.63,293.66,329.63,392,440,523.25,587.33,659.25,783.99,880,1046.5,1174.66,1318.51,1567.98,1760]);let jh=Ho;const X_={samplingIntervalMs:100,textureSampleDownscale:4};class vN{constructor(e={}){X(this,"simulation",null);X(this,"canvas",null);X(this,"canvasBounds",null);X(this,"canvasBoundsUpdateTime",0);X(this,"audioInitialized",!1);X(this,"sampledTextureData",null);X(this,"samplingInterval",null);X(this,"isMouseDown",!1);X(this,"audioPreset",null);X(this,"config");X(this,"boundHandlers",{});this.config={...X_,...e}}async initialize(e,t,r){console.log("Initializing Audio Visualization Mediator"),this.canvas=e,this.simulation=t,await Es.initialize(),this.audioPreset=r??new jh,this.setupAudioInitialization()}startSampling(){this.samplingInterval||!this.simulation||(this.sampleTextures(),this.samplingInterval=window.setInterval(()=>this.sampleTextures(),this.config.samplingIntervalMs))}stopSampling(){this.samplingInterval&&(clearInterval(this.samplingInterval),this.samplingInterval=null)}async onMouseDown(e,t){if(!this.audioPreset)return;if(!this.audioInitialized)try{await Es.initialize(),this.audioInitialized=!0,console.log("Audio engine initialized successfully"),this.removeAudioInitializationListeners()}catch(o){console.warn("Failed to initialize audio engine:",o);return}if(!this.audioInitialized)return;this.isMouseDown=!0;const r=this.getCoordinates(e,t);r&&(this.startSampling(),await this.audioPreset.onMouseDown(r.normalizedX,r.normalizedY,this.sampledTextureData))}async onMouseMove(e,t){if(!this.audioInitialized||!this.audioPreset||!this.isMouseDown)return;const r=this.getCoordinates(e,t);r&&await this.audioPreset.onMouseMove(r.normalizedX,r.normalizedY,this.sampledTextureData)}async onMouseUp(e,t){if(!this.audioInitialized||!this.audioPreset)return;this.isMouseDown=!1;const r=this.getCoordinates(e,t);r&&await this.audioPreset.onMouseUp(r.normalizedX,r.normalizedY,this.sampledTextureData)}onMouseLeave(){var e;this.isMouseDown=!1,this.stopSampling(),(e=this.audioPreset)==null||e.reset()}reset(){var e;this.stopSampling(),this.isMouseDown=!1,(e=this.audioPreset)==null||e.reset(),this.sampledTextureData=null}destroy(){this.stopSampling(),this.removeAudioInitializationListeners(),this.simulation=null,this.canvas=null,this.audioPreset=null,this.sampledTextureData=null,this.audioInitialized=!1}isAudioInitialized(){return this.audioInitialized}setAudioPreset(e){var t;(t=this.audioPreset)==null||t.reset(),this.audioPreset=e}async sampleTextures(){if(this.simulation)try{this.sampledTextureData=await this.simulation.sampleTextures(this.config.textureSampleDownscale)}catch(e){console.warn("Failed to sample textures:",e)}}getCoordinates(e,t){var g;const r=this.getCachedCanvasBounds();if(!r)return null;const o=e-r.left,l=t-r.top,c=o/r.width,u=1-l/r.height;if(c<0||c>1||u<0||u>1)return null;const h=(g=this.simulation)==null?void 0:g.getGridSize(),f=c*((h==null?void 0:h.width)??1),m=u*((h==null?void 0:h.height)??1);return{normalizedX:c,normalizedY:u,gridX:f,gridY:m}}getCachedCanvasBounds(){const e=performance.now();return(!this.canvasBounds||e-this.canvasBoundsUpdateTime>100)&&this.canvas&&(this.canvasBounds=this.canvas.getBoundingClientRect(),this.canvasBoundsUpdateTime=e),this.canvasBounds}setupAudioInitialization(){if(!this.canvas)throw new TC("Canvas not initialized");const e=async()=>{if(!this.audioInitialized)try{await Es.initialize(),this.audioInitialized=!0,console.log("Audio engine initialized successfully"),this.removeAudioInitializationListeners()}catch(r){console.warn("Failed to initialize audio engine:",r)}};this.boundHandlers={click:e,mousedown:e,keydown:e};const t=this.canvas;t.addEventListener("click",this.boundHandlers.click,{once:!0}),t.addEventListener("mousedown",this.boundHandlers.mousedown,{once:!0}),t.addEventListener("keydown",this.boundHandlers.keydown,{once:!0}),document.addEventListener("keydown",this.boundHandlers.keydown,{once:!0})}removeAudioInitializationListeners(){if(!this.canvas)return;const e=this.canvas;e.removeEventListener("click",this.boundHandlers.click),e.removeEventListener("mousedown",this.boundHandlers.mousedown),e.removeEventListener("keydown",this.boundHandlers.keydown),document.removeEventListener("keydown",this.boundHandlers.keydown)}}function yN(s=X_){const e=k.useRef(null);k.useEffect(()=>(e.current=new vN(s),()=>{var m;(m=e.current)==null||m.destroy(),e.current=null}),[s]);const t=k.useCallback(async(m,g,y)=>{e.current&&await e.current.initialize(m,g,y)},[]),r=k.useCallback(async(m,g)=>{var y;await((y=e.current)==null?void 0:y.onMouseDown(m,g))},[]),o=k.useCallback(async(m,g)=>{var y;await((y=e.current)==null?void 0:y.onMouseMove(m,g))},[]),l=k.useCallback(async(m,g)=>{var y;await((y=e.current)==null?void 0:y.onMouseUp(m,g))},[]),c=k.useCallback(()=>{var m;(m=e.current)==null||m.onMouseLeave()},[]),u=k.useCallback(()=>{var m;(m=e.current)==null||m.reset()},[]),h=k.useCallback(()=>{var m;return((m=e.current)==null?void 0:m.isAudioInitialized())??!1},[]),f=k.useCallback(m=>{var g;(g=e.current)==null||g.setAudioPreset(m)},[]);return{initialize:t,handleMouseDown:r,handleMouseMove:o,handleMouseUp:l,handleMouseLeave:c,reset:u,isAudioInitialized:h,setAudioPreset:f}}function _N(s,e,t={}){const{serialize:r=JSON.stringify,deserialize:o=JSON.parse,storage:l="localStorage"}=t,c=l==="localStorage"?localStorage:sessionStorage,[u,h]=k.useState(()=>{try{const f=c.getItem(s);return f===null?e:o(f)}catch(f){return console.warn(`Failed to load persisted state for key "${s}":`,f),e}});return k.useEffect(()=>{try{c.setItem(s,r(u))}catch(f){console.warn(`Failed to persist state for key "${s}":`,f)}},[s,u,r,c]),[u,h]}function Hn(s,e,{checkForDefaultPrevented:t=!0}={}){return function(o){if(s==null||s(o),t===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function wN(s,e){const t=k.createContext(e),r=l=>{const{children:c,...u}=l,h=k.useMemo(()=>u,Object.values(u));return I.jsx(t.Provider,{value:h,children:c})};r.displayName=s+"Provider";function o(l){const c=k.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${l}\` must be used within \`${s}\``)}return[r,o]}function K_(s,e=[]){let t=[];function r(l,c){const u=k.createContext(c),h=t.length;t=[...t,c];const f=g=>{var T;const{scope:y,children:x,...w}=g,_=((T=y==null?void 0:y[s])==null?void 0:T[h])||u,b=k.useMemo(()=>w,Object.values(w));return I.jsx(_.Provider,{value:b,children:x})};f.displayName=l+"Provider";function m(g,y){var _;const x=((_=y==null?void 0:y[s])==null?void 0:_[h])||u,w=k.useContext(x);if(w)return w;if(c!==void 0)return c;throw new Error(`\`${g}\` must be used within \`${l}\``)}return[f,m]}const o=()=>{const l=t.map(c=>k.createContext(c));return function(u){const h=(u==null?void 0:u[s])||l;return k.useMemo(()=>({[`__scope${s}`]:{...u,[s]:h}}),[u,h])}};return o.scopeName=s,[r,xN(o,...e)]}function xN(...s){const e=s[0];if(s.length===1)return e;const t=()=>{const r=s.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const c=r.reduce((u,{useScope:h,scopeName:f})=>{const g=h(l)[`__scope${f}`];return{...u,...g}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var zi=globalThis!=null&&globalThis.document?k.useLayoutEffect:()=>{},SN=ty[" useId ".trim().toString()]||(()=>{}),bN=0;function ah(s){const[e,t]=k.useState(SN());return zi(()=>{t(r=>r??String(bN++))},[s]),s||(e?`radix-${e}`:"")}var TN=ty[" useInsertionEffect ".trim().toString()]||zi;function Z_({prop:s,defaultProp:e,onChange:t=()=>{},caller:r}){const[o,l,c]=CN({defaultProp:e,onChange:t}),u=s!==void 0,h=u?s:o;{const m=k.useRef(s!==void 0);k.useEffect(()=>{const g=m.current;g!==u&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=u},[u,r])}const f=k.useCallback(m=>{var g;if(u){const y=kN(m)?m(s):m;y!==s&&((g=c.current)==null||g.call(c,y))}else l(m)},[u,s,l,c]);return[h,f]}function CN({defaultProp:s,onChange:e}){const[t,r]=k.useState(s),o=k.useRef(t),l=k.useRef(e);return TN(()=>{l.current=e},[e]),k.useEffect(()=>{var c;o.current!==t&&((c=l.current)==null||c.call(l,t),o.current=t)},[t,o]),[t,r,l]}function kN(s){return typeof s=="function"}var EN=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vn=EN.reduce((s,e)=>{const t=ef(`Primitive.${e}`),r=k.forwardRef((o,l)=>{const{asChild:c,...u}=o,h=c?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),I.jsx(h,{...u,ref:l})});return r.displayName=`Primitive.${e}`,{...s,[e]:r}},{});function PN(s,e){s&&Zh.flushSync(()=>s.dispatchEvent(e))}function Jo(s){const e=k.useRef(s);return k.useEffect(()=>{e.current=s}),k.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function AN(s,e=globalThis==null?void 0:globalThis.document){const t=Jo(s);k.useEffect(()=>{const r=o=>{o.key==="Escape"&&t(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var NN="DismissableLayer",Gh="dismissableLayer.update",RN="dismissableLayer.pointerDownOutside",MN="dismissableLayer.focusOutside",jv,Q_=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),J_=k.forwardRef((s,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:l,onInteractOutside:c,onDismiss:u,...h}=s,f=k.useContext(Q_),[m,g]=k.useState(null),y=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=k.useState({}),w=gr(e,M=>g(M)),_=Array.from(f.layers),[b]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),T=_.indexOf(b),R=m?_.indexOf(m):-1,L=f.layersWithOutsidePointerEventsDisabled.size>0,V=R>=T,E=DN(M=>{const C=M.target,O=[...f.branches].some(U=>U.contains(C));!V||O||(o==null||o(M),c==null||c(M),M.defaultPrevented||u==null||u())},y),N=LN(M=>{const C=M.target;[...f.branches].some(U=>U.contains(C))||(l==null||l(M),c==null||c(M),M.defaultPrevented||u==null||u())},y);return AN(M=>{R===f.layers.size-1&&(r==null||r(M),!M.defaultPrevented&&u&&(M.preventDefault(),u()))},y),k.useEffect(()=>{if(m)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(jv=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),Gv(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=jv)}},[m,y,t,f]),k.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),Gv())},[m,f]),k.useEffect(()=>{const M=()=>x({});return document.addEventListener(Gh,M),()=>document.removeEventListener(Gh,M)},[]),I.jsx(vn.div,{...h,ref:w,style:{pointerEvents:L?V?"auto":"none":void 0,...s.style},onFocusCapture:Hn(s.onFocusCapture,N.onFocusCapture),onBlurCapture:Hn(s.onBlurCapture,N.onBlurCapture),onPointerDownCapture:Hn(s.onPointerDownCapture,E.onPointerDownCapture)})});J_.displayName=NN;var ON="DismissableLayerBranch",IN=k.forwardRef((s,e)=>{const t=k.useContext(Q_),r=k.useRef(null),o=gr(e,r);return k.useEffect(()=>{const l=r.current;if(l)return t.branches.add(l),()=>{t.branches.delete(l)}},[t.branches]),I.jsx(vn.div,{...s,ref:o})});IN.displayName=ON;function DN(s,e=globalThis==null?void 0:globalThis.document){const t=Jo(s),r=k.useRef(!1),o=k.useRef(()=>{});return k.useEffect(()=>{const l=u=>{if(u.target&&!r.current){let h=function(){e0(RN,t,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=h,e.addEventListener("click",o.current,{once:!0})):h()}else e.removeEventListener("click",o.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",l),e.removeEventListener("click",o.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function LN(s,e=globalThis==null?void 0:globalThis.document){const t=Jo(s),r=k.useRef(!1);return k.useEffect(()=>{const o=l=>{l.target&&!r.current&&e0(MN,t,{originalEvent:l},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Gv(){const s=new CustomEvent(Gh);document.dispatchEvent(s)}function e0(s,e,t,{discrete:r}){const o=t.originalEvent.target,l=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:t});e&&o.addEventListener(s,e,{once:!0}),r?PN(o,l):o.dispatchEvent(l)}var lh="focusScope.autoFocusOnMount",ch="focusScope.autoFocusOnUnmount",Wv={bubbles:!1,cancelable:!0},FN="FocusScope",t0=k.forwardRef((s,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:l,...c}=s,[u,h]=k.useState(null),f=Jo(o),m=Jo(l),g=k.useRef(null),y=gr(e,_=>h(_)),x=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(r){let _=function(L){if(x.paused||!u)return;const V=L.target;u.contains(V)?g.current=V:Gr(g.current,{select:!0})},b=function(L){if(x.paused||!u)return;const V=L.relatedTarget;V!==null&&(u.contains(V)||Gr(g.current,{select:!0}))},T=function(L){if(document.activeElement===document.body)for(const E of L)E.removedNodes.length>0&&Gr(u)};document.addEventListener("focusin",_),document.addEventListener("focusout",b);const R=new MutationObserver(T);return u&&R.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",b),R.disconnect()}}},[r,u,x.paused]),k.useEffect(()=>{if(u){qv.add(x);const _=document.activeElement;if(!u.contains(_)){const T=new CustomEvent(lh,Wv);u.addEventListener(lh,f),u.dispatchEvent(T),T.defaultPrevented||(VN(GN(n0(u)),{select:!0}),document.activeElement===_&&Gr(u))}return()=>{u.removeEventListener(lh,f),setTimeout(()=>{const T=new CustomEvent(ch,Wv);u.addEventListener(ch,m),u.dispatchEvent(T),T.defaultPrevented||Gr(_??document.body,{select:!0}),u.removeEventListener(ch,m),qv.remove(x)},0)}}},[u,f,m,x]);const w=k.useCallback(_=>{if(!t&&!r||x.paused)return;const b=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,T=document.activeElement;if(b&&T){const R=_.currentTarget,[L,V]=BN(R);L&&V?!_.shiftKey&&T===V?(_.preventDefault(),t&&Gr(L,{select:!0})):_.shiftKey&&T===L&&(_.preventDefault(),t&&Gr(V,{select:!0})):T===R&&_.preventDefault()}},[t,r,x.paused]);return I.jsx(vn.div,{tabIndex:-1,...c,ref:y,onKeyDown:w})});t0.displayName=FN;function VN(s,{select:e=!1}={}){const t=document.activeElement;for(const r of s)if(Gr(r,{select:e}),document.activeElement!==t)return}function BN(s){const e=n0(s),t=$v(e,s),r=$v(e.reverse(),s);return[t,r]}function n0(s){const e=[],t=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function $v(s,e){for(const t of s)if(!zN(t,{upTo:e}))return t}function zN(s,{upTo:e}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(e!==void 0&&s===e)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function UN(s){return s instanceof HTMLInputElement&&"select"in s}function Gr(s,{select:e=!1}={}){if(s&&s.focus){const t=document.activeElement;s.focus({preventScroll:!0}),s!==t&&UN(s)&&e&&s.select()}}var qv=jN();function jN(){let s=[];return{add(e){const t=s[0];e!==t&&(t==null||t.pause()),s=Hv(s,e),s.unshift(e)},remove(e){var t;s=Hv(s,e),(t=s[0])==null||t.resume()}}}function Hv(s,e){const t=[...s],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function GN(s){return s.filter(e=>e.tagName!=="A")}var WN="Portal",r0=k.forwardRef((s,e)=>{var u;const{container:t,...r}=s,[o,l]=k.useState(!1);zi(()=>l(!0),[]);const c=t||o&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?LS.createPortal(I.jsx(vn.div,{...r,ref:e}),c):null});r0.displayName=WN;function $N(s,e){return k.useReducer((t,r)=>e[t][r]??t,s)}var ma=s=>{const{present:e,children:t}=s,r=qN(e),o=typeof t=="function"?t({present:r.isPresent}):k.Children.only(t),l=gr(r.ref,HN(o));return typeof t=="function"||r.isPresent?k.cloneElement(o,{ref:l}):null};ma.displayName="Presence";function qN(s){const[e,t]=k.useState(),r=k.useRef(null),o=k.useRef(s),l=k.useRef("none"),c=s?"mounted":"unmounted",[u,h]=$N(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const f=Ll(r.current);l.current=u==="mounted"?f:"none"},[u]),zi(()=>{const f=r.current,m=o.current;if(m!==s){const y=l.current,x=Ll(f);s?h("MOUNT"):x==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(m&&y!==x?"ANIMATION_OUT":"UNMOUNT"),o.current=s}},[s,h]),zi(()=>{if(e){let f;const m=e.ownerDocument.defaultView??window,g=x=>{const _=Ll(r.current).includes(x.animationName);if(x.target===e&&_&&(h("ANIMATION_END"),!o.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",f=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},y=x=>{x.target===e&&(l.current=Ll(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{m.clearTimeout(f),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:k.useCallback(f=>{r.current=f?getComputedStyle(f):null,t(f)},[])}}function Ll(s){return(s==null?void 0:s.animationName)||"none"}function HN(s){var r,o;let e=(r=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=(o=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:o.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var uh=0;function YN(){k.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??Yv()),document.body.insertAdjacentElement("beforeend",s[1]??Yv()),uh++,()=>{uh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),uh--}},[])}function Yv(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var Hl="right-scroll-bar-position",Yl="width-before-scroll-bar",XN="with-scroll-bars-hidden",KN="--removed-body-scroll-bar-size";function dh(s,e){return typeof s=="function"?s(e):s&&(s.current=e),s}function ZN(s,e){var t=k.useState(function(){return{value:s,callback:e,facade:{get current(){return t.value},set current(r){var o=t.value;o!==r&&(t.value=r,t.callback(r,o))}}}})[0];return t.callback=e,t.facade}var QN=typeof window<"u"?k.useLayoutEffect:k.useEffect,Xv=new WeakMap;function JN(s,e){var t=ZN(null,function(r){return s.forEach(function(o){return dh(o,r)})});return QN(function(){var r=Xv.get(t);if(r){var o=new Set(r),l=new Set(s),c=t.current;o.forEach(function(u){l.has(u)||dh(u,null)}),l.forEach(function(u){o.has(u)||dh(u,c)})}Xv.set(t,s)},[s]),t}function eR(s){return s}function tR(s,e){e===void 0&&(e=eR);var t=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:s},useMedium:function(l){var c=e(l,r);return t.push(c),function(){t=t.filter(function(u){return u!==c})}},assignSyncMedium:function(l){for(r=!0;t.length;){var c=t;t=[],c.forEach(l)}t={push:function(u){return l(u)},filter:function(){return t}}},assignMedium:function(l){r=!0;var c=[];if(t.length){var u=t;t=[],u.forEach(l),c=t}var h=function(){var m=c;c=[],m.forEach(l)},f=function(){return Promise.resolve().then(h)};f(),t={push:function(m){c.push(m),f()},filter:function(m){return c=c.filter(m),t}}}};return o}function nR(s){s===void 0&&(s={});var e=tR(null);return e.options=$n({async:!0,ssr:!1},s),e}var s0=function(s){var e=s.sideCar,t=D_(s,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,$n({},t))};s0.isSideCarExport=!0;function rR(s,e){return s.useMedium(e),s0}var i0=nR(),hh=function(){},qc=k.forwardRef(function(s,e){var t=k.useRef(null),r=k.useState({onScrollCapture:hh,onWheelCapture:hh,onTouchMoveCapture:hh}),o=r[0],l=r[1],c=s.forwardProps,u=s.children,h=s.className,f=s.removeScrollBar,m=s.enabled,g=s.shards,y=s.sideCar,x=s.noRelative,w=s.noIsolation,_=s.inert,b=s.allowPinchZoom,T=s.as,R=T===void 0?"div":T,L=s.gapMode,V=D_(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=y,N=JN([t,e]),M=$n($n({},V),o);return k.createElement(k.Fragment,null,m&&k.createElement(E,{sideCar:i0,removeScrollBar:f,shards:g,noRelative:x,noIsolation:w,inert:_,setCallbacks:l,allowPinchZoom:!!b,lockRef:t,gapMode:L}),c?k.cloneElement(k.Children.only(u),$n($n({},M),{ref:N})):k.createElement(R,$n({},M,{className:h,ref:N}),u))});qc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};qc.classNames={fullWidth:Yl,zeroRight:Hl};var sR=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function iR(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var e=sR();return e&&s.setAttribute("nonce",e),s}function oR(s,e){s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}function aR(s){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(s)}var lR=function(){var s=0,e=null;return{add:function(t){s==0&&(e=iR())&&(oR(e,t),aR(e)),s++},remove:function(){s--,!s&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},cR=function(){var s=lR();return function(e,t){k.useEffect(function(){return s.add(e),function(){s.remove()}},[e&&t])}},o0=function(){var s=cR(),e=function(t){var r=t.styles,o=t.dynamic;return s(r,o),null};return e},uR={left:0,top:0,right:0,gap:0},fh=function(s){return parseInt(s||"",10)||0},dR=function(s){var e=window.getComputedStyle(document.body),t=e[s==="padding"?"paddingLeft":"marginLeft"],r=e[s==="padding"?"paddingTop":"marginTop"],o=e[s==="padding"?"paddingRight":"marginRight"];return[fh(t),fh(r),fh(o)]},hR=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return uR;var e=dR(s),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},fR=o0(),Ri="data-scroll-locked",pR=function(s,e,t,r){var o=s.left,l=s.top,c=s.right,u=s.gap;return t===void 0&&(t="margin"),`
  .`.concat(XN,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Ri,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Hl,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Yl,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Hl," .").concat(Hl,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Yl," .").concat(Yl,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ri,`] {
    `).concat(KN,": ").concat(u,`px;
  }
`)},Kv=function(){var s=parseInt(document.body.getAttribute(Ri)||"0",10);return isFinite(s)?s:0},mR=function(){k.useEffect(function(){return document.body.setAttribute(Ri,(Kv()+1).toString()),function(){var s=Kv()-1;s<=0?document.body.removeAttribute(Ri):document.body.setAttribute(Ri,s.toString())}},[])},gR=function(s){var e=s.noRelative,t=s.noImportant,r=s.gapMode,o=r===void 0?"margin":r;mR();var l=k.useMemo(function(){return hR(o)},[o]);return k.createElement(fR,{styles:pR(l,!e,o,t?"":"!important")})},Wh=!1;if(typeof window<"u")try{var Fl=Object.defineProperty({},"passive",{get:function(){return Wh=!0,!0}});window.addEventListener("test",Fl,Fl),window.removeEventListener("test",Fl,Fl)}catch{Wh=!1}var di=Wh?{passive:!1}:!1,vR=function(s){return s.tagName==="TEXTAREA"},a0=function(s,e){if(!(s instanceof Element))return!1;var t=window.getComputedStyle(s);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!vR(s)&&t[e]==="visible")},yR=function(s){return a0(s,"overflowY")},_R=function(s){return a0(s,"overflowX")},Zv=function(s,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=l0(s,r);if(o){var l=c0(s,r),c=l[1],u=l[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},wR=function(s){var e=s.scrollTop,t=s.scrollHeight,r=s.clientHeight;return[e,t,r]},xR=function(s){var e=s.scrollLeft,t=s.scrollWidth,r=s.clientWidth;return[e,t,r]},l0=function(s,e){return s==="v"?yR(e):_R(e)},c0=function(s,e){return s==="v"?wR(e):xR(e)},SR=function(s,e){return s==="h"&&e==="rtl"?-1:1},bR=function(s,e,t,r,o){var l=SR(s,window.getComputedStyle(e).direction),c=l*r,u=t.target,h=e.contains(u),f=!1,m=c>0,g=0,y=0;do{var x=c0(s,u),w=x[0],_=x[1],b=x[2],T=_-b-l*w;(w||T)&&l0(s,u)&&(g+=T,y+=w),u=u.parentNode.host||u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(m&&Math.abs(g)<1||!m&&Math.abs(y)<1)&&(f=!0),f},Vl=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},Qv=function(s){return[s.deltaX,s.deltaY]},Jv=function(s){return s&&"current"in s?s.current:s},TR=function(s,e){return s[0]===e[0]&&s[1]===e[1]},CR=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},kR=0,hi=[];function ER(s){var e=k.useRef([]),t=k.useRef([0,0]),r=k.useRef(),o=k.useState(kR++)[0],l=k.useState(o0)[0],c=k.useRef(s);k.useEffect(function(){c.current=s},[s]),k.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(o));var _=BA([s.lockRef.current],(s.shards||[]).map(Jv),!0).filter(Boolean);return _.forEach(function(b){return b.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),_.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(o))})}}},[s.inert,s.lockRef.current,s.shards]);var u=k.useCallback(function(_,b){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!c.current.allowPinchZoom;var T=Vl(_),R=t.current,L="deltaX"in _?_.deltaX:R[0]-T[0],V="deltaY"in _?_.deltaY:R[1]-T[1],E,N=_.target,M=Math.abs(L)>Math.abs(V)?"h":"v";if("touches"in _&&M==="h"&&N.type==="range")return!1;var C=Zv(M,N);if(!C)return!0;if(C?E=M:(E=M==="v"?"h":"v",C=Zv(M,N)),!C)return!1;if(!r.current&&"changedTouches"in _&&(L||V)&&(r.current=E),!E)return!0;var O=r.current||E;return bR(O,b,_,O==="h"?L:V)},[]),h=k.useCallback(function(_){var b=_;if(!(!hi.length||hi[hi.length-1]!==l)){var T="deltaY"in b?Qv(b):Vl(b),R=e.current.filter(function(E){return E.name===b.type&&(E.target===b.target||b.target===E.shadowParent)&&TR(E.delta,T)})[0];if(R&&R.should){b.cancelable&&b.preventDefault();return}if(!R){var L=(c.current.shards||[]).map(Jv).filter(Boolean).filter(function(E){return E.contains(b.target)}),V=L.length>0?u(b,L[0]):!c.current.noIsolation;V&&b.cancelable&&b.preventDefault()}}},[]),f=k.useCallback(function(_,b,T,R){var L={name:_,delta:b,target:T,should:R,shadowParent:PR(T)};e.current.push(L),setTimeout(function(){e.current=e.current.filter(function(V){return V!==L})},1)},[]),m=k.useCallback(function(_){t.current=Vl(_),r.current=void 0},[]),g=k.useCallback(function(_){f(_.type,Qv(_),_.target,u(_,s.lockRef.current))},[]),y=k.useCallback(function(_){f(_.type,Vl(_),_.target,u(_,s.lockRef.current))},[]);k.useEffect(function(){return hi.push(l),s.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:y}),document.addEventListener("wheel",h,di),document.addEventListener("touchmove",h,di),document.addEventListener("touchstart",m,di),function(){hi=hi.filter(function(_){return _!==l}),document.removeEventListener("wheel",h,di),document.removeEventListener("touchmove",h,di),document.removeEventListener("touchstart",m,di)}},[]);var x=s.removeScrollBar,w=s.inert;return k.createElement(k.Fragment,null,w?k.createElement(l,{styles:CR(o)}):null,x?k.createElement(gR,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function PR(s){for(var e=null;s!==null;)s instanceof ShadowRoot&&(e=s.host,s=s.host),s=s.parentNode;return e}const AR=rR(i0,ER);var u0=k.forwardRef(function(s,e){return k.createElement(qc,$n({},s,{ref:e,sideCar:AR}))});u0.classNames=qc.classNames;var NR=function(s){if(typeof document>"u")return null;var e=Array.isArray(s)?s[0]:s;return e.ownerDocument.body},fi=new WeakMap,Bl=new WeakMap,zl={},ph=0,d0=function(s){return s&&(s.host||d0(s.parentNode))},RR=function(s,e){return e.map(function(t){if(s.contains(t))return t;var r=d0(t);return r&&s.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",s,". Doing nothing"),null)}).filter(function(t){return!!t})},MR=function(s,e,t,r){var o=RR(e,Array.isArray(s)?s:[s]);zl[t]||(zl[t]=new WeakMap);var l=zl[t],c=[],u=new Set,h=new Set(o),f=function(g){!g||u.has(g)||(u.add(g),f(g.parentNode))};o.forEach(f);var m=function(g){!g||h.has(g)||Array.prototype.forEach.call(g.children,function(y){if(u.has(y))m(y);else try{var x=y.getAttribute(r),w=x!==null&&x!=="false",_=(fi.get(y)||0)+1,b=(l.get(y)||0)+1;fi.set(y,_),l.set(y,b),c.push(y),_===1&&w&&Bl.set(y,!0),b===1&&y.setAttribute(t,"true"),w||y.setAttribute(r,"true")}catch(T){console.error("aria-hidden: cannot operate on ",y,T)}})};return m(e),u.clear(),ph++,function(){c.forEach(function(g){var y=fi.get(g)-1,x=l.get(g)-1;fi.set(g,y),l.set(g,x),y||(Bl.has(g)||g.removeAttribute(r),Bl.delete(g)),x||g.removeAttribute(t)}),ph--,ph||(fi=new WeakMap,fi=new WeakMap,Bl=new WeakMap,zl={})}},OR=function(s,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(s)?s:[s]),o=NR(s);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),MR(r,o,t,"aria-hidden")):function(){return null}},Hc="Dialog",[h0,zM]=K_(Hc),[IR,Vn]=h0(Hc),f0=s=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:o,onOpenChange:l,modal:c=!0}=s,u=k.useRef(null),h=k.useRef(null),[f,m]=Z_({prop:r,defaultProp:o??!1,onChange:l,caller:Hc});return I.jsx(IR,{scope:e,triggerRef:u,contentRef:h,contentId:ah(),titleId:ah(),descriptionId:ah(),open:f,onOpenChange:m,onOpenToggle:k.useCallback(()=>m(g=>!g),[m]),modal:c,children:t})};f0.displayName=Hc;var p0="DialogTrigger",DR=k.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,o=Vn(p0,t),l=gr(e,o.triggerRef);return I.jsx(vn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Zf(o.open),...r,ref:l,onClick:Hn(s.onClick,o.onOpenToggle)})});DR.displayName=p0;var Xf="DialogPortal",[LR,m0]=h0(Xf,{forceMount:void 0}),g0=s=>{const{__scopeDialog:e,forceMount:t,children:r,container:o}=s,l=Vn(Xf,e);return I.jsx(LR,{scope:e,forceMount:t,children:k.Children.map(r,c=>I.jsx(ma,{present:t||l.open,children:I.jsx(r0,{asChild:!0,container:o,children:c})}))})};g0.displayName=Xf;var yc="DialogOverlay",v0=k.forwardRef((s,e)=>{const t=m0(yc,s.__scopeDialog),{forceMount:r=t.forceMount,...o}=s,l=Vn(yc,s.__scopeDialog);return l.modal?I.jsx(ma,{present:r||l.open,children:I.jsx(VR,{...o,ref:e})}):null});v0.displayName=yc;var FR=ef("DialogOverlay.RemoveScroll"),VR=k.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,o=Vn(yc,t);return I.jsx(u0,{as:FR,allowPinchZoom:!0,shards:[o.contentRef],children:I.jsx(vn.div,{"data-state":Zf(o.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ms="DialogContent",y0=k.forwardRef((s,e)=>{const t=m0(Ms,s.__scopeDialog),{forceMount:r=t.forceMount,...o}=s,l=Vn(Ms,s.__scopeDialog);return I.jsx(ma,{present:r||l.open,children:l.modal?I.jsx(BR,{...o,ref:e}):I.jsx(zR,{...o,ref:e})})});y0.displayName=Ms;var BR=k.forwardRef((s,e)=>{const t=Vn(Ms,s.__scopeDialog),r=k.useRef(null),o=gr(e,t.contentRef,r);return k.useEffect(()=>{const l=r.current;if(l)return OR(l)},[]),I.jsx(_0,{...s,ref:o,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Hn(s.onCloseAutoFocus,l=>{var c;l.preventDefault(),(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Hn(s.onPointerDownOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&l.preventDefault()}),onFocusOutside:Hn(s.onFocusOutside,l=>l.preventDefault())})}),zR=k.forwardRef((s,e)=>{const t=Vn(Ms,s.__scopeDialog),r=k.useRef(!1),o=k.useRef(!1);return I.jsx(_0,{...s,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var c,u;(c=s.onCloseAutoFocus)==null||c.call(s,l),l.defaultPrevented||(r.current||(u=t.triggerRef.current)==null||u.focus(),l.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:l=>{var h,f;(h=s.onInteractOutside)==null||h.call(s,l),l.defaultPrevented||(r.current=!0,l.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const c=l.target;((f=t.triggerRef.current)==null?void 0:f.contains(c))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&o.current&&l.preventDefault()}})}),_0=k.forwardRef((s,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:l,...c}=s,u=Vn(Ms,t),h=k.useRef(null),f=gr(e,h);return YN(),I.jsxs(I.Fragment,{children:[I.jsx(t0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:l,children:I.jsx(J_,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Zf(u.open),...c,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),I.jsxs(I.Fragment,{children:[I.jsx(UR,{titleId:u.titleId}),I.jsx(GR,{contentRef:h,descriptionId:u.descriptionId})]})]})}),Kf="DialogTitle",w0=k.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,o=Vn(Kf,t);return I.jsx(vn.h2,{id:o.titleId,...r,ref:e})});w0.displayName=Kf;var x0="DialogDescription",S0=k.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,o=Vn(x0,t);return I.jsx(vn.p,{id:o.descriptionId,...r,ref:e})});S0.displayName=x0;var b0="DialogClose",T0=k.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,o=Vn(b0,t);return I.jsx(vn.button,{type:"button",...r,ref:e,onClick:Hn(s.onClick,()=>o.onOpenChange(!1))})});T0.displayName=b0;function Zf(s){return s?"open":"closed"}var C0="DialogTitleWarning",[UM,k0]=wN(C0,{contentName:Ms,titleName:Kf,docsSlug:"dialog"}),UR=({titleId:s})=>{const e=k0(C0),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return k.useEffect(()=>{s&&(document.getElementById(s)||console.error(t))},[t,s]),null},jR="DialogDescriptionWarning",GR=({contentRef:s,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${k0(jR).contentName}}.`;return k.useEffect(()=>{var l;const o=(l=s.current)==null?void 0:l.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(r))},[r,s,e]),null},WR=f0,$R=g0,E0=v0,P0=y0,A0=w0,N0=S0,qR=T0;const HR=WR,YR=$R,R0=k.forwardRef(({className:s,...e},t)=>I.jsx(E0,{ref:t,className:Mt("fixed inset-0 z-50 bg-black/50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...e}));R0.displayName=E0.displayName;const M0=k.forwardRef(({className:s,children:e,hideCloseButton:t=!1,...r},o)=>I.jsxs(YR,{children:[I.jsx(R0,{}),I.jsxs(P0,{ref:o,className:Mt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg",s),...r,children:[e,!t&&I.jsxs(qR,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[I.jsx(oT,{className:"h-4 w-4"}),I.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));M0.displayName=P0.displayName;const O0=({className:s,...e})=>I.jsx("div",{className:Mt("flex flex-col space-y-1.5 text-center sm:text-left",s),...e});O0.displayName="DialogHeader";const I0=({className:s,...e})=>I.jsx("div",{className:Mt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...e});I0.displayName="DialogFooter";const D0=k.forwardRef(({className:s,...e},t)=>I.jsx(A0,{ref:t,className:Mt("text-lg font-semibold leading-none tracking-tight",s),...e}));D0.displayName=A0.displayName;const $h=k.forwardRef(({className:s,...e},t)=>I.jsx(N0,{ref:t,className:Mt("text-sm text-muted-foreground",s),...e}));$h.displayName=N0.displayName;const qh=[{name:"Purple",color:[.65,.35,.85]},{name:"Blue",color:[.3,.5,.9]},{name:"Green",color:[.3,.8,.4]},{name:"Red",color:[.9,.3,.3]},{name:"Orange",color:[.9,.6,.2]},{name:"Pink",color:[.9,.4,.7]},{name:"Cyan",color:[.2,.8,.8]},{name:"Yellow",color:[.9,.9,.3]}];function XR(s){const e=k.useRef({value:s,previous:s});return k.useMemo(()=>(e.current.value!==s&&(e.current.previous=e.current.value,e.current.value=s),e.current.previous),[s])}function KR(s){const[e,t]=k.useState(void 0);return zi(()=>{if(s){t({width:s.offsetWidth,height:s.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const l=o[0];let c,u;if("borderBoxSize"in l){const h=l.borderBoxSize,f=Array.isArray(h)?h[0]:h;c=f.inlineSize,u=f.blockSize}else c=s.offsetWidth,u=s.offsetHeight;t({width:c,height:u})});return r.observe(s,{box:"border-box"}),()=>r.unobserve(s)}else t(void 0)},[s]),e}var Yc="Checkbox",[ZR,jM]=K_(Yc),[QR,Qf]=ZR(Yc);function JR(s){const{__scopeCheckbox:e,checked:t,children:r,defaultChecked:o,disabled:l,form:c,name:u,onCheckedChange:h,required:f,value:m="on",internal_do_not_use_render:g}=s,[y,x]=Z_({prop:t,defaultProp:o??!1,onChange:h,caller:Yc}),[w,_]=k.useState(null),[b,T]=k.useState(null),R=k.useRef(!1),L=w?!!c||!!w.closest("form"):!0,V={checked:y,disabled:l,setChecked:x,control:w,setControl:_,name:u,form:c,value:m,hasConsumerStoppedPropagationRef:R,required:f,defaultChecked:Yr(o)?!1:o,isFormControl:L,bubbleInput:b,setBubbleInput:T};return I.jsx(QR,{scope:e,...V,children:eM(g)?g(V):r})}var L0="CheckboxTrigger",F0=k.forwardRef(({__scopeCheckbox:s,onKeyDown:e,onClick:t,...r},o)=>{const{control:l,value:c,disabled:u,checked:h,required:f,setControl:m,setChecked:g,hasConsumerStoppedPropagationRef:y,isFormControl:x,bubbleInput:w}=Qf(L0,s),_=gr(o,m),b=k.useRef(h);return k.useEffect(()=>{const T=l==null?void 0:l.form;if(T){const R=()=>g(b.current);return T.addEventListener("reset",R),()=>T.removeEventListener("reset",R)}},[l,g]),I.jsx(vn.button,{type:"button",role:"checkbox","aria-checked":Yr(h)?"mixed":h,"aria-required":f,"data-state":G0(h),"data-disabled":u?"":void 0,disabled:u,value:c,...r,ref:_,onKeyDown:Hn(e,T=>{T.key==="Enter"&&T.preventDefault()}),onClick:Hn(t,T=>{g(R=>Yr(R)?!0:!R),w&&x&&(y.current=T.isPropagationStopped(),y.current||T.stopPropagation())})})});F0.displayName=L0;var V0=k.forwardRef((s,e)=>{const{__scopeCheckbox:t,name:r,checked:o,defaultChecked:l,required:c,disabled:u,value:h,onCheckedChange:f,form:m,...g}=s;return I.jsx(JR,{__scopeCheckbox:t,checked:o,defaultChecked:l,disabled:u,required:c,onCheckedChange:f,name:r,form:m,value:h,internal_do_not_use_render:({isFormControl:y})=>I.jsxs(I.Fragment,{children:[I.jsx(F0,{...g,ref:e,__scopeCheckbox:t}),y&&I.jsx(j0,{__scopeCheckbox:t})]})})});V0.displayName=Yc;var B0="CheckboxIndicator",z0=k.forwardRef((s,e)=>{const{__scopeCheckbox:t,forceMount:r,...o}=s,l=Qf(B0,t);return I.jsx(ma,{present:r||Yr(l.checked)||l.checked===!0,children:I.jsx(vn.span,{"data-state":G0(l.checked),"data-disabled":l.disabled?"":void 0,...o,ref:e,style:{pointerEvents:"none",...s.style}})})});z0.displayName=B0;var U0="CheckboxBubbleInput",j0=k.forwardRef(({__scopeCheckbox:s,...e},t)=>{const{control:r,hasConsumerStoppedPropagationRef:o,checked:l,defaultChecked:c,required:u,disabled:h,name:f,value:m,form:g,bubbleInput:y,setBubbleInput:x}=Qf(U0,s),w=gr(t,x),_=XR(l),b=KR(r);k.useEffect(()=>{const R=y;if(!R)return;const L=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(L,"checked").set,N=!o.current;if(_!==l&&E){const M=new Event("click",{bubbles:N});R.indeterminate=Yr(l),E.call(R,Yr(l)?!1:l),R.dispatchEvent(M)}},[y,_,l,o]);const T=k.useRef(Yr(l)?!1:l);return I.jsx(vn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??T.current,required:u,disabled:h,name:f,value:m,form:g,...e,tabIndex:-1,ref:w,style:{...e.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});j0.displayName=U0;function eM(s){return typeof s=="function"}function Yr(s){return s==="indeterminate"}function G0(s){return Yr(s)?"indeterminate":s?"checked":"unchecked"}function tM({className:s,...e}){return I.jsx(V0,{"data-slot":"checkbox",className:Mt("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...e,children:I.jsx(z0,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:I.jsx(sT,{className:"size-3.5"})})})}function nM({selectedColorIndex:s,onColorSelect:e,isVisible:t,onVisibilityChange:r,autoHideDelay:o=3e3,lavaLampMode:l,onLavaLampModeChange:c}){const u=k.useRef(null),h=k.useCallback(()=>{r(!0),u.current&&window.clearTimeout(u.current),u.current=window.setTimeout(()=>{r(!1)},o)},[r,o]),f=k.useCallback(g=>{e(g),h()},[e,h]),m=k.useCallback(()=>{c(!l),h()},[l,c,h]);return k.useEffect(()=>()=>{u.current&&window.clearTimeout(u.current)},[]),k.useEffect(()=>{t&&u.current===null&&h()},[t,h]),I.jsx("div",{className:`fixed bottom-6 left-1/2 transform -translate-x-1/2 z-10 transition-all duration-500 ease-in-out ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:I.jsx("div",{className:"bg-black/80 backdrop-blur-md border border-neutral-700 rounded-2xl px-6 py-4 shadow-2xl",children:I.jsxs("div",{className:"space-y-4",children:[I.jsx("div",{className:"grid grid-cols-8 gap-3",children:qh.map((g,y)=>I.jsx("button",{onClick:()=>f(y),className:`w-10 h-10 rounded-full border-2 transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-white/50 ${s===y?"border-white shadow-lg shadow-white/20":"border-neutral-600 hover:border-neutral-400"}`,style:{backgroundColor:`rgb(${g.color.map(x=>Math.floor(x*255)).join(", ")})`},title:g.name},g.name))}),I.jsx("div",{className:"flex items-center justify-center pt-2 border-t border-neutral-700",children:I.jsxs("label",{className:"flex items-center justify-center gap-2 cursor-pointer",children:[I.jsx(tM,{checked:l,onCheckedChange:m,className:"border-neutral-600 hover:cursor-pointer"}),I.jsx("span",{className:"text-sm font-medium transition-colors text-neutral-100 vertical-align-middle",style:{fontFamily:"Baskervville, serif"},children:"Lava Lamp"})]})})]})})})}function rM(){const s=k.useRef(null),e=k.useRef(null),t=k.useRef(null),[r,o]=k.useState(!1),[l,c]=k.useState(!0),[u,h]=k.useState(null),[f,m]=k.useState(!0),[g,y]=_N("fluxlab-color-index",0),[x,w]=k.useState(!1),[_,b]=k.useState(!1),T=k.useRef(new Set),[R,L]=k.useState(!0),[V,E]=k.useState({width:typeof window<"u"?window.innerWidth:800,height:typeof window<"u"?window.innerHeight:600}),N=k.useRef({js:0,fps:0,timestep:0,gpu:0,gpuSupported:!1}),[M,C]=k.useState(N.current),O=ZT(),U=Oi.DENSITY,j="smokeDensity",B=k.useRef(!1),q=k.useRef(null),ee=k.useRef(0),te=k.useRef(new vC),K=k.useRef(new QT("Mouse Move Events")),J=k.useRef({mouseMoveCallsPerSecond:0}),[z,Z]=k.useState(J.current),Y=k.useRef(null),P=yN(),$=k.useRef(!1),ce=k.useCallback(he=>{y(he),e.current&&e.current.setSmokeColor(qh[he].color)},[]),ie=k.useCallback(he=>{b(he),he||Rl(T.current)},[]),ne=k.useCallback(he=>{!f&&yC(he)&&w(!0)},[f]),ae=k.useCallback(async()=>{try{document.documentElement.requestFullscreen&&await document.documentElement.requestFullscreen()}catch(he){console.log("Fullscreen not supported or denied:",he)}},[]),ue=k.useCallback(async()=>{m(!1),await ae()},[ae]);k.useEffect(()=>{const he=()=>{E({width:window.innerWidth,height:window.innerHeight}),te.current.clearCache()};return window.addEventListener("resize",he),()=>window.removeEventListener("resize",he)},[]),k.useEffect(()=>{const he=()=>L(!0),Se=()=>L(!1);return window.addEventListener("focus",he),window.addEventListener("blur",Se),()=>{window.removeEventListener("focus",he),window.removeEventListener("blur",Se)}},[]);const Q=k.useCallback(()=>{if(!e.current||!s.current)return null;const he=s.current.getBoundingClientRect();return{simulation:e.current,audioVisualization:P,canvasBounds:he,isLavaLampMode:_,intervalTracker:T.current,isWindowFocused:R}},[P,_,R]),pe=k.useCallback(()=>{const he=Q();he&&xC(he,pe)},[Q]),Te=k.useCallback(he=>{if(K.current.recordCall(),!(!r||!e.current||he.length===0))for(const Se of he){const Be=te.current.clientToGrid(Se.clientX,Se.clientY);if(Be)if(Se.type==="mousedown")B.current=!0,e.current.addSmoke(Be.x,Be.y),q.current=Be,ee.current=Se.timestamp,P.handleMouseDown(Se.clientX,Se.clientY);else if(Se.type==="mousemove"){if(ne(Se.clientY),B.current&&(e.current.addSmoke(Be.x,Be.y),P.handleMouseMove(Se.clientX,Se.clientY),q.current)){const nt=(Se.timestamp-ee.current)/1e3;if(nt>0){const de=(Be.x-q.current.x)/nt,fe=(Be.y-q.current.y)/nt,Re=.02,Le=10;let Me=de*Re,Fe=fe*Re;const Pe=Math.sqrt(Me*Me+Fe*Fe);if(Pe>Le){const De=Le/Pe;Me*=De,Fe*=De}e.current.addVelocity(Be.x,Be.y,Me,Fe)}q.current=Be,ee.current=Se.timestamp}}else Se.type==="mouseup"&&(B.current=!1,q.current=null,P.handleMouseUp(Se.clientX,Se.clientY))}},[r,P,ne]);return k.useEffect(()=>{r&&e.current&&s.current&&!$.current&&(P.initialize(s.current,e.current),te.current.initialize(s.current,e.current),$.current=!0)},[r,P]),k.useEffect(()=>{Y.current=new JT(Te);const he=s.current;if(!he)return;const Se=fe=>{var Re;(Re=Y.current)==null||Re.addEvent({clientX:fe.clientX,clientY:fe.clientY,type:"mousedown",timestamp:performance.now()})},Be=fe=>{var Re;(Re=Y.current)==null||Re.addEvent({clientX:fe.clientX,clientY:fe.clientY,type:"mousemove",timestamp:performance.now()})},nt=fe=>{var Re;(Re=Y.current)==null||Re.addEvent({clientX:fe.clientX,clientY:fe.clientY,type:"mouseup",timestamp:performance.now()})},de=()=>{B.current=!1,q.current=null,P.handleMouseLeave()};return he.addEventListener("mousedown",Se),he.addEventListener("mousemove",Be,{passive:!0}),he.addEventListener("mouseup",nt),he.addEventListener("mouseleave",de),()=>{var fe;(fe=Y.current)==null||fe.destroy(),he&&(he.removeEventListener("mousedown",Se),he.removeEventListener("mousemove",Be),he.removeEventListener("mouseup",nt),he.removeEventListener("mouseleave",de))}},[Te,P]),k.useEffect(()=>{const he=setInterval(()=>{e.current&&C(e.current.getPerformanceMetrics()),Z({mouseMoveCallsPerSecond:K.current.getCallsPerSecond()})},100);return()=>clearInterval(he)},[]),k.useEffect(()=>{_&&r&&(Rl(T.current),pe())},[_,r]),k.useEffect(()=>{_&&r&&R&&(Rl(T.current),pe())},[R]),k.useEffect(()=>()=>{console.log("Component cleanup - destroying simulation"),Rl(T.current),e.current&&(e.current.destroy(),e.current=null),o(!1)},[]),k.useEffect(()=>{(async()=>{if(!s.current||e.current)return;console.log("Initializing Smoke Simulation");const Se={grid:{size:{width:512,height:Math.floor(512*(V.height/V.width))},scale:.9}},Be=new bC(Se);e.current=Be;try{await Be.initialize(s),e.current===Be&&(Be.setSmokeColor(qh[g].color),o(!0),h(null))}catch(nt){console.error("Failed to initialize smoke simulation:",nt),e.current===Be&&(Be.destroy(),e.current=null,o(!1),h(nt instanceof Error?nt.message:"Unknown error"))}})()},[V,g]),k.useEffect(()=>{if(!l||!r||!e.current)return;const he=()=>{if(e.current&&l)try{e.current.step({shaderMode:U,texture:j}),t.current=requestAnimationFrame(he)}catch(Se){console.error("Failed to step simulation:",Se),c(!1)}};return t.current=requestAnimationFrame(he),()=>{t.current!==null&&(cancelAnimationFrame(t.current),t.current=null)}},[l,r,U,j]),k.useEffect(()=>{if(r&&!l&&e.current)try{e.current.step({renderOnly:!0,shaderMode:U,texture:j})}catch(he){console.error("Failed to update visualization:",he)}},[U,j,r,l]),I.jsxs(I.Fragment,{children:[I.jsx(HR,{open:f,onOpenChange:()=>{},children:I.jsxs(M0,{hideCloseButton:!0,className:"max-w-lg bg-black/95 backdrop-blur-md border-neutral-800 text-neutral-100 shadow-2xl",children:[I.jsxs(O0,{className:"text-center space-y-6",children:[I.jsxs(D0,{className:"text-center text-4xl font-normal tracking-wide text-neutral-100 flex items-center justify-center gap-3",style:{fontFamily:"Baskervville, serif"},children:[I.jsx("img",{src:"/flux-lab/Astroid_filled.svg",alt:"FluxLab Icon",className:"w-9 h-9 brightness-0 invert"}),"FluxLab"]}),I.jsxs("div",{className:"space-y-4",children:[I.jsx($h,{className:"text-neutral-400 text-base font-light tracking-wide text-center",style:{fontFamily:"Baskervville, serif"},children:"Music from movement."}),I.jsx("div",{className:"w-16 h-px bg-neutral-600 mx-auto"}),I.jsx($h,{className:"text-neutral-400 text-base font-light tracking-wide text-center",style:{fontFamily:"Baskervville, serif"},children:"Click and drag to synthesize. Seek the spectrum in the depths below."})]})]}),I.jsx(I0,{className:"mt-8",children:I.jsx(qn,{onClick:ue,variant:"outline",className:"w-full bg-transparent border-neutral-600 text-neutral-100 hover:bg-neutral-900 hover:border-neutral-500 py-3 text-lg font-light tracking-wider transition-all duration-500 hover:text-neutral-200",style:{fontFamily:"Baskervville, serif",letterSpacing:"0.1em",transition:"all 0.5s ease"},onMouseEnter:he=>{he.currentTarget.style.letterSpacing="0.3em"},onMouseLeave:he=>{he.currentTarget.style.letterSpacing="0.1em"},children:"Enter"})})]})}),I.jsxs("div",{className:"w-screen h-screen overflow-hidden relative",children:[I.jsx(KT,{metrics:M,eventMetrics:z,isVisible:O}),I.jsx(nM,{selectedColorIndex:g,onColorSelect:ce,isVisible:x,onVisibilityChange:w,lavaLampMode:_,onLavaLampModeChange:ie}),u&&I.jsxs("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-10 text-red-500 text-sm bg-red-50 p-3 rounded-lg border border-red-200",children:[I.jsx("strong",{children:"Error:"})," ",u]}),I.jsx("canvas",{width:V.width,height:V.height,ref:s,className:"block cursor-crosshair",style:{width:"100vw",height:"100vh"}})]})]})}const Xc=eb({component:()=>I.jsx(gy,{})}),sM=Qh({getParentRoute:()=>Xc,path:"/",component:()=>I.jsx(rM,{})}),iM=Qh({getParentRoute:()=>Xc,path:"/tests",component:lT}),oM=Qh({getParentRoute:()=>Xc,path:"/tests/$testId",component:qT}),aM=Xc.addChildren([sM,iM,oM]),lM=tb({routeTree:aM,basepath:"/flux-lab"});function cM(){return I.jsx(sb,{router:lM})}Kx.createRoot(document.getElementById("root")).render(I.jsx(k.StrictMode,{children:I.jsx(cM,{})}));
